(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1118:function(e,t,r){"use strict";var n=r(51),a=r(3);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=["fetch","setStateProp","clearError"];function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.a=function(){var e=Object(n.a)("singleTemplateData"),t=e.fetch,r=e.setStateProp,o=e.clearError;return l(l({},function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,c)),{},{fetch:function(e){r("isLoading",!0),o(),t("GET",Object(a.C)("/template/".concat(e)))},setTemplateData:function(e){r("data",e)},setTemplateListData:function(e){r("listData",e)}})}},1168:function(e,t,r){"use strict";var n=r(9),a=r.n(n),o=r(3),c=r(1118),i=r(2),l=["template"];function u(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function s(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var l=n&&n.prototype instanceof i?n:i,u=Object.create(l.prototype);return b(u,"_invoke",function(r,n,a){var o,i,l,u=0,s=a||[],b=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,r){return o=t,i=0,l=e,f.n=r,c}};function m(r,n){for(i=r,l=n,t=0;!b&&u&&!a&&t<s.length;t++){var a,o=s[t],m=f.p,p=o[2];r>3?(a=p===n)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=r<2&&m<o[1])?(i=0,f.v=n,f.n=o[1]):m<p&&(a=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,f.n=p,i=0))}if(a||r>1)return c;throw b=!0,n}return function(a,s,p){if(u>1)throw TypeError("Generator is already running");for(b&&1===s&&m(s,p),i=s,l=p;(t=i<2?e:l)||!b;){o||(i?i<3?(i>1&&(f.n=-1),m(i,l)):f.n=l:f.v=l);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(b=f.n<0)?l:r.call(n,f))!==c)break}catch(t){o=e,i=1,l=t}finally{u=1}}return{value:t,done:b}}}(r,a,o),!0),u}var c={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(b(t={},n,(function(){return this})),t),m=u.prototype=i.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,b(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=u,b(m,"constructor",u),b(u,"constructor",l),l.displayName="GeneratorFunction",b(u,a,"GeneratorFunction"),b(m),b(m,a,"Generator"),b(m,n,(function(){return this})),b(m,"toString",(function(){return"[object Generator]"})),(s=function(){return{w:o,m:p}})()}function b(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(b=function(e,t,r,n){function o(t,r){b(e,t,(function(e){return this._invoke(t,r,e)}))}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))})(e,t,r,n)}function f(e,t,r,n,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){f(o,n,a,c,i,"next",e)}function i(e){f(o,n,a,c,i,"throw",e)}c(void 0)}))}}t.a=function(e,t){var r,n,b,f,p=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",y=Object(c.a)(),O=y.setTemplateData;return{sendTestEmail:(f=m(s().m((function e(t,r,n,c,i,l){var u,b,f,m,p,d=arguments;return s().w((function(e){for(;;)switch(e.p=e.n){case 0:return u=d.length>6&&void 0!==d[6]&&d[6],b=d.length>7&&void 0!==d[7]?d[7]:{},f=d.length>8&&void 0!==d[8]&&d[8],m=d.length>9&&void 0!==d[9]?d[9]:{},e.p=1,p={email:t,content:JSON.stringify({subject:r,body:n,type:c,mail_data:i,preheader:l,utmEnabled:u,utmDetails:b,overRideSenderInfo:f,overRideInfo:m})},e.n=2,a()({method:"POST",path:Object(o.C)("/send-test-email"),data:p});case 2:return e.a(2,2);case 3:return e.p=3,e.v,e.a(2,3)}}),e,null,[[1,3]])}))),function(e,t,r,n,a,o){return f.apply(this,arguments)}),saveEditorContent:(b=m(s().m((function r(n){var c,b,f,m,y,v,j,h,w,g,P;return s().w((function(r){for(;;)switch(r.p=r.n){case 0:return c=t,b=Object(i.isEmpty)(n)?{}:n[0],f="","editor"===b.type?(b.hasOwnProperty("editor")&&(b.editor.hasOwnProperty("body")&&(c.template=b.editor.body),b.editor.hasOwnProperty("design")&&(c.data.design=b.editor.design)),f=4):"block"===b.type?(b.hasOwnProperty("block")&&(m=b.body,y=void 0===m?"":m,v=b.block,j=v.template,h=void 0===j?"":j,w=u(v,l),""!==h?c.template=b.block.template:""!==y&&(c.template=y),c.data.block=w),f=5):c.template=b.body,g={template:c.template,data:c.data,mode:f},b.hasOwnProperty("subject")&&(g.subject=b.subject),b.hasOwnProperty("preheader")&&(g.data.preheader=b.preheader),P={content:JSON.stringify(g)},d&&(P.lang=d),r.p=1,r.n=2,a()({method:"POST",path:Object(o.C)("/".concat(p?"transactional-mail":"template","/").concat(e,"/save-email-content")),data:P}).then((function(e){200==e.code&&O(e.result)}));case 2:return r.a(2,2);case 3:return r.p=3,r.v,r.a(2,3)}}),r,null,[[1,3]])}))),function(e){return b.apply(this,arguments)}),uploadImage:(n=m(s().m((function e(t){var r,n;return s().w((function(e){for(;;)switch(e.p=e.n){case 0:return(r=new FormData).append("image",t),e.p=1,e.n=2,a()({method:"POST",path:Object(o.C)("/upload-image"),body:r});case 2:return n=e.v,e.a(2,n&&n.result?n.result:"");case 3:return e.p=3,e.v,e.a(2,"")}}),e,null,[[1,3]])}))),function(e){return n.apply(this,arguments)}),fetchCurrentMailEditorContent:(r=m(s().m((function e(){return s().w((function(e){for(;;)switch(e.n){case 0:return e.a(2,"")}}),e)}))),function(){return r.apply(this,arguments)})}}},1252:function(e,t,r){},1275:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(2),o=r(1085),c=r(1),i=r(5),l=r(9),u=r.n(l),s=r(359),b=r(7),f=r(12),m=r(210),p=r(68),d=r(26),y=r(123),O=(r(1252),r(11)),v=r(1168),j=r(52),h=r(3);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=["getStateProp"];function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S={1:"rich",2:"wc",3:"html",4:"editor",5:"block"},k=function(){var e=Object(j.a)("emailSingleNotif"),t=e.getStateProp,r=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,g),n=Object(h.s)();return E(E({},r),{},{getTemplateData:function(){return t("data")},getListData:function(){return t("listData")},getFormattedTemplateData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(a.isEmpty)(e))return{};var t={body:"",editor:{body:Object(h.Kb)(),design:Object(h.Jb)()},preheader:"",subject:"",type:"block",utm:n,utmEnabled:!1,last_updated:""};return e.hasOwnProperty("template")&&(e.hasOwnProperty("mode")&&4===parseInt(e.mode)?t.editor.body=e.template:t.body=e.template),e.hasOwnProperty("subject")&&(t.subject=e.subject),e.hasOwnProperty("mode")&&(t.type=S[e.mode]),e.hasOwnProperty("subject")&&(t.subject=e.subject),e.hasOwnProperty("updated_at")&&(t.last_updated=e.updated_at),e.hasOwnProperty("data")&&!Object(a.isEmpty)(e.data)&&(t.subject=e.subject,e.data.hasOwnProperty("preheader")&&(t.preheader=e.data.preheader),e.data.hasOwnProperty("utmEnabled")&&e.data.utmEnabled&&(t.utmEnabled=e.data.utmEnabled),e.data.hasOwnProperty("utm")&&(t.utm=e.data.utm),e.data.hasOwnProperty("design")&&4===parseInt(e.mode)&&(t.editor.design=e.data.design),e.data.hasOwnProperty("block")&&5===parseInt(e.mode)&&(t.block=e.data.block)),t}})},T=r(51);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N=["fetch","setStateProp","clearError"];function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var G=function(){var e=Object(T.a)("emailSingleNotif"),t=e.fetch,r=e.setStateProp,n=e.clearError,a=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,N),o=(0,k().getTemplateData)();return C(C({},a),{},{fetch:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";r("isLoading",!0),n(),t("GET",Object(h.C)("/transactional-mail/".concat(e)+(""!==a?"?lang=".concat(a):"")))},setTemplateData:function(e){r("data",e)},setTemplateDataByKey:function(e,t){r("data",C(C({},o),{},I({},e,t)))},setTemplateListData:function(e){r("listData",e)},resetData:function(){r("data",[]),r("listData",[]),r("isLoading",!0)}})};function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==F(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var l=n&&n.prototype instanceof i?n:i,u=Object.create(l.prototype);return J(u,"_invoke",function(r,n,a){var o,i,l,u=0,s=a||[],b=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,r){return o=t,i=0,l=e,f.n=r,c}};function m(r,n){for(i=r,l=n,t=0;!b&&u&&!a&&t<s.length;t++){var a,o=s[t],m=f.p,p=o[2];r>3?(a=p===n)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=r<2&&m<o[1])?(i=0,f.v=n,f.n=o[1]):m<p&&(a=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,f.n=p,i=0))}if(a||r>1)return c;throw b=!0,n}return function(a,s,p){if(u>1)throw TypeError("Generator is already running");for(b&&1===s&&m(s,p),i=s,l=p;(t=i<2?e:l)||!b;){o||(i?i<3?(i>1&&(f.n=-1),m(i,l)):f.n=l:f.v=l);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(b=f.n<0)?l:r.call(n,f))!==c)break}catch(t){o=e,i=1,l=t}finally{u=1}}return{value:t,done:b}}}(r,a,o),!0),u}var c={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(J(t={},n,(function(){return this})),t),b=u.prototype=i.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,J(e,a,"GeneratorFunction")),e.prototype=Object.create(b),e}return l.prototype=u,J(b,"constructor",u),J(u,"constructor",l),l.displayName="GeneratorFunction",J(u,a,"GeneratorFunction"),J(b),J(b,a,"Generator"),J(b,n,(function(){return this})),J(b,"toString",(function(){return"[object Generator]"})),(B=function(){return{w:o,m:f}})()}function J(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(J=function(e,t,r,n){function o(t,r){J(e,t,(function(e){return this._invoke(t,r,e)}))}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))})(e,t,r,n)}function U(e,t,r,n,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function R(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){U(o,n,a,c,i,"next",e)}function i(e){U(o,n,a,c,i,"throw",e)}c(void 0)}))}}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(){var e=Object(o.f)(),t=e.slug,r=void 0===t?"":t,l=e.language,j=void 0===l?"":l,w=Object(n.useContext)(h.h),g=K(Object(n.useState)([]),2),P=g[0],E=g[1],_=K(Object(n.useState)(!1),2),S=_[0],T=_[1],D=K(Object(n.useState)(!1),2),N=D[0],x=D[1];Object(s.a)(Object(c.__)("Transactional Emails","wp-marketing-automations"),"",0,"transactional");var C=k(),I=C.getTemplateData,F=C.getFormattedTemplateData,A=C.getLoading,M=C.getError,J=I(),U=A(),q=M(),H=J.recipient,$=void 0===H?"":H,z=J.data,Q=void 0===z?{}:z,V=J.supported_block,W=void 0===V?[]:V,X=J.conditional_event,Y=void 0===X?"":X,Z=(Object(a.isObject)(Q)?Q:{}).other_recipients,ee=void 0===Z?"":Z,te=G(),re=te.setTemplateData,ne=te.resetData,ae=te.fetch,oe=te.setTemplateDataByKey;Object(n.useEffect)((function(){return""!==r&&ae(r,j),function(){ne()}}),[]);var ce,ie,le,ue,se=function(){var e=R(B().m((function e(){var t,n,a=arguments;return B().w((function(e){for(;;)switch(e.p=e.n){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],x(!0),e.p=1,e.n=2,u()({path:Object(h.C)("/transactional-mail/".concat(r,"/status")),method:"POST",data:{status:t}}).then((function(e){if(200!==e.code)throw Error(Object(h.w)(null==e?void 0:e.message));w(e.message),oe("status",t),Object(h.Pb)(w,2e3),x(!1)}));case 2:e.n=4;break;case 3:e.p=3,n=e.v,console.log(n),w(n.message),x(!1),Object(h.Pb)(w,2e3);case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}(),be=Object(v.a)(r,J,!0,j),fe=function(){var e=R(B().m((function e(){var t,n,a;return B().w((function(e){for(;;)switch(e.p=e.n){case 0:if(!me()){e.n=1;break}return e.a(2);case 1:return T(!0),t={content:JSON.stringify(J),lang:j},e.p=2,e.n=3,u()({path:Object(h.C)("/transactional-mail/".concat(r)),method:"POST",data:t});case 3:200===(n=e.v).code?(w(n.message),Object(h.Pb)(w,3e3)):(w("".concat(Object(c.__)("Unexpected response","wp-marketing-automations"),": ").concat(n.message)),Object(h.Pb)(w,3e3)),e.n=5;break;case 4:e.p=4,a=e.v,w("Error: ".concat(a.message)),Object(h.Pb)(w,3e3);case 5:return e.p=5,T(!1),e.f(5);case 6:return e.a(2)}}),e,null,[[2,4,5,6]])})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=[{field:"subject",message:Object(c.__)("Subject is required.","wp-marketing-automations")},{field:"template",message:Object(c.__)("Email content cannot be empty.","wp-marketing-automations")}].reduce((function(e,t){var r=t.field,n=t.message;return Object(a.has)(J,r)&&!Object(a.isEmpty)(J[r])||e.push(n),e}),[]);if(!Object(a.isEmpty)(ee)){var t=ee.split(","),r=!0;t.forEach((function(e){"{{admin_email}}"===e||Object(h.mc)(e)||(r=!1)})),r||e.push(Object(c.__)("Invalid email address in other recipients.","wp-marketing-automations"))}return E(e),!Object(a.isEmpty)(e)},pe={mergeTagsContext:J.hasOwnProperty("merge_tag")&&!Object(a.isEmpty)(J.merge_tag)?J.merge_tag:"",from_name:J.hasOwnProperty("data")&&!Object(a.isEmpty)(J.data)&&J.data.hasOwnProperty("from_email")?J.data.from_name:Object(h.S)("from_name"),from_email:J.hasOwnProperty("data")&&!Object(a.isEmpty)(J.data)&&J.data.hasOwnProperty("from_email")?J.data.from_email:Object(h.S)("from_email"),reply_to:J.hasOwnProperty("data")&&!Object(a.isEmpty)(J.data)&&J.data.hasOwnProperty("reply_to_email")?J.data.reply_to_email:Object(h.S)("reply_to_email")};return Object(n.createElement)("div",{className:"bwf-edit-notification-template"},(ce=J.title,ie=void 0===ce?"":ce,le=J.status,ue=void 0!==le&&le,Object(n.createElement)("div",{className:"bwf-section-header"},Object(n.createElement)("div",{className:"bwf-section-left"},Object(n.createElement)("span",{className:"bwf-svg-wrap",onClick:function(){var e={page:"autonami",path:"/transactional-emails"};""!==j&&(e.lang=j),Object(f.l)(e,"/",{})}},Object(n.createElement)(b.a,{icon:"arrow-left",width:24,height:24})),U?Object(n.createElement)("span",{className:"bwf-placeholder-temp bwf-h-30 bwf-w-210"}):Object(n.createElement)("span",{className:"bwf-section-title"},ie||"-"),Object(n.createElement)("span",{className:"bwf-tags bwf-tag-light-blue"},Object(c.__)("Transactional Mail","wp-marketing-automations"))),Object(a.isEmpty)(q)&&Object(n.createElement)("div",{className:"bwf-section-right"},U?Object(n.createElement)("span",{className:"bwf-placeholder-temp bwf-h-30 bwf-w-120"}):Object(n.createElement)(i.ToggleControl,{label:Object(c.__)("Enable/Disable","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",disabled:S||N,onChange:se,checked:ue})))),!U&&!!(!Object(a.isEmpty)(J)&&J.hasOwnProperty("data")&&J.data.hasOwnProperty("block")&&J.data.block.hasOwnProperty("body")&&""!==J.data.block.body&&J.data.block.body.includes("\x3c!-- wp:email-block/coupon"))&&Object(n.createElement)("div",{className:"bwf-mb-24"},Object(n.createElement)(d.a,{status:"info",isDismissible:!1,className:"bwf-m-0"},Object(n.createElement)("strong",null,Object(c.__)("Coupon Usage Notice","wp-marketing-automations"),":")," ",Object(c.__)("A coupon is used in this email template. Please ensure that a valid coupon code is used.","wp-marketing-automations"))),U||!Object(a.isEmpty)(q)?Object(a.isEmpty)(q)?Object(n.createElement)(y.a,{className:"bwf-template-card bwf-template-placeholder"},Object(n.createElement)("div",{className:"bwf-template-card-header bwf-h4"},Object(c.__)("Transactional Mail","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p-15"},[1,2,3].map((function(e){return Object(n.createElement)("div",{key:e,className:"bwf-placeholder-temp"})})),Object(n.createElement)("div",{key:4,className:"bwf-editor-placeholder"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-small"}),Object(n.createElement)("div",{className:"bwf-btn-section"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn"})),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)("div",{key:5,className:"bwf-placeholder-temp bwf-medium"})),Object(n.createElement)("div",{className:"bwf-display-flex bwf-j-end bwf-template-card-actions"},Object(n.createElement)("div",{className:"bwf-h-0"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-30 "}))):Object(n.createElement)(d.a,{status:"error",isDismissible:!1,className:"bwf-m-0 bwf-mb-10"},q.hasOwnProperty("message")?q.message:Object(c.__)("Unable to load template","wp-marketing-automations")):Object(n.createElement)("div",{className:"bwf-template-card"},Object(n.createElement)("div",{className:"bwf_clear_16"}),Object(n.createElement)("div",{className:"bwf-template-card-header bwf-h4"},Object(c.__)("Transactional Mail","wp-marketing-automations")),!Object(a.isEmpty)(P)&&Object(n.createElement)("div",{className:"bwf-template-error"},Object(n.createElement)(p.a,null),Object(n.createElement)(d.a,{status:"error",isDismissible:!1,className:"bwf-m-0"},P.map((function(e,t){return Object(n.createElement)(n.Fragment,{key:"bwf-template-card-error-".concat(t)},e,Object(n.createElement)("br",null))})))),("admin"===$||1===Object(h.n)(bwfcrm_contacts_data.bwf_pro_version,"3.4.0"))&&Object(n.createElement)("div",{className:"bwf-p-24 bwf-pb-0"},Object(n.createElement)(i.TextControl,{placeholder:Object(c.__)("Type Hereâ€¦","wp-marketing-automations"),label:"admin"===$?Object(c.__)("Recipient(s)","wp-marketing-automations"):Object(c.__)("Other Recipient(s)","wp-marketing-automations"),value:"admin"===$&&""===ee?"{{admin_email}}":ee,help:Object(c.__)("Use comma separated values to send email to multiple users.","wp-marketing-automations")+" "+("admin"===$?Object(c.__)("Use {{admin_email}} mergetag to send mail to site admin","wp-marketing-automations"):""),type:"email",onChange:function(e){return t=e,r=L({},J),Object(a.set)(r,"data.other_recipients",t),void re(r);var t,r}})),Object(n.createElement)(m.a,{disableDefaultButtons:!0,initData:L({content:[F(J)]},pe),validateEmailContent:!1,apiMethods:be,showSenderInfo:!0,showSaveTemplate:!1,showTemplateTypeSelector:!1,returnData:!0,setMailData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=L({},J),c=e[1],i=function(e,t){Object(a.has)(c,e)&&Object(a.set)(o,t,Object(a.get)(c,e))};i("subject","subject"),i("preheader","data.preheader"),i("utmEnabled","data.utmEnabled"),i("utm","data.utm"),Object(a.set)(o,"data.from_name",t),Object(a.set)(o,"data.from_email",r),Object(a.set)(o,"data.reply_to_email",n);var l=Object(a.get)(c,"block",{});Object(a.isEmpty)(l)||(o.template=l.template||o.template,o.data.block=L(L({},l),{},{template:void 0})),re(o)},showTab:!1,showTemplateButton:!1,hideBlockTemplate:!0,blockEnabled:Object(a.isEmpty)(W)?["user"]:W,automationEvent:Y,conditionalEnabled:""!==Y,transactionalEnabled:!0,removeTransactionalOpt:!0}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-j-end bwf-template-card-actions"},Object(n.createElement)(O.a,{className:"is-primary",onClick:fe,disabled:S||N,isBusy:S},Object(c.__)("Save","wp-marketing-automations")))))}}}]);