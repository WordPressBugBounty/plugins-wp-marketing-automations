(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1098:function(t,e,n){"use strict";var a=n(77),r=n(0),c=n(1),o=n(3),i=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={workflow:{name:Object(c.__)("Workflow","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t):"admin.php?page=autonami-automations&edit=".concat(t),redirect:!e}};return e&&(n.single_a_contacts={name:Object(c.__)("Contacts","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(t,"/contacts"),showOnClick:!0},n.analytics={name:Object(c.__)("Analytics","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/analytics"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/analytics"),isPro:!0,showOnClick:!0}),n.engagement={name:Object(c.__)("Engagements","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/engagements"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/engagements"),isPro:!0,showOnClick:!0},Object(o.uc)()&&(n.orders={name:Object(c.__)("Orders","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/orders"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/orders"),isPro:!0,showOnClick:!0}),n};e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f=arguments.length>8&&void 0!==arguments[8]&&arguments[8],b=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},p=(b.automation_nav,b.automationv2_nav),d=Object(a.a)(),O=d.setActiveMultiple,j=d.resetHeaderMenu,v=d.setL2NavType,g=d.setL2Nav,w=d.setBackLink,y=d.setL2Title,h=d.setL2Content,E=d.setBackLinkLabel,_=d.setL2NavAlign,N=d.setPageHeader,k=d.setTabHeader;return Object(r.useEffect)((function(){j(!0),!o&&v("menu");var a=i(u,m);f||g(u?a:p),t&&a.hasOwnProperty(t)&&a[t].hasOwnProperty("name")&&k(a[t].name),O({leftNav:"automations-v2",rightNav:t}),n&&w(n),u&&w(n&&!m?"admin.php?page=autonami&path=/automations-v1":"admin.php?page=autonami&path=/automations"),o||m&&u&&E(Object(c.__)("All Automations","wp-marketing-automations")),!m&&u&&E(Object(c.__)("All Automations","wp-marketing-automations")),u&&_("left"),e&&""!==e&&y(e),!n&&s&&h(s),N(Object(c.__)("Automations","wp-marketing-automations")),l&&g({})}),[t,m,f]),!0}},1102:function(t,e,n){"use strict";var a=n(52),r=n(151);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=["getStateProp"];function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=c(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=function(){var t=Object(a.a)("automationList"),e=t.getStateProp,n=function(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(-1!==e.indexOf(a))continue;n[a]=t[a]}return n}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(a=0;a<c.length;a++)n=c[a],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(t,o),c=Object(a.a)(r.a.recipient).getStateProp,i=Object(a.a)(r.a.conversion).getStateProp,u=Object(a.a)(r.a.contacts).getStateProp,l=Object(a.a)(r.a.analytics).getStateProp;return s(s({},n),{},{getAutomations:function(){return e("automations")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getLoadingStatus:function(){return e("isLoading")},getWorkerResponseCode:function(){return e("response_code")},getWorkerDelay:function(){return e("worker_delayed")},getRecipientData:function(){return c("data")},getRecipientLoading:function(){return c("isLoading")},getRecipientOffset:function(){return c("offset")},getRecipientAutomationId:function(){return c("automationId")},getRecipientTotal:function(){return c("total")},getRecipientAutomation:function(){return c("automation")},getRecipientPage:function(){return parseInt(c("offset"))/parseInt(c("limit"))+1},getRecipientLimit:function(){return c("limit")},getRecipientSingleAutomationFailedCount:function(){return c("failedCount")},getConversionData:function(){return i("data")},getConversionLoading:function(){return i("isLoading")},getConversionOffset:function(){return i("offset")},getConversionAutomationId:function(){return i("automationId")},getConversionTotal:function(){return i("total")},getConversionAutomation:function(){return i("automation")},getConversionPage:function(){return parseInt(i("offset"))/parseInt(i("limit"))+1},getConversionLimit:function(){return i("limit")},getCountData:function(){return e("countData")},getConversionSingleAutomationFailedCount:function(){return i("failedCount")},getContactData:function(){return u("data")},getContactLoading:function(){return u("isLoading")},getContactOffset:function(){return u("offset")},getContactAutomationId:function(){return u("automationId")},getContactTotal:function(){return u("total")},getContactAutomation:function(){return u("automation")},getContactPage:function(){return parseInt(u("offset"))/parseInt(u("limit"))+1},getContactLimit:function(){return u("limit")},getContactCountData:function(){return u("contactCount")},getContactSingleAutomationFailedCount:function(){return u("failedCount")},getAnalyticsData:function(){return l("analytics")},getAnalyticsTileData:function(){return l("tiles")},getAnalyticsTableData:function(){return l("tableData")},getAnalyticsLoading:function(){return l("isLoading")},getAnalyticsType:function(){return l("type")},getAnalyticsAutomationData:function(){return l("automation")},getAnalyticsSingleAutomationFailedCount:function(){return l("failedCount")}})}},1115:function(t,e,n){"use strict";var a=n(2),r=n(51),c=n(3),o=n(151),i=n(17);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=["fetch","setStateProp"],l=["s","page","filter","path"];function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=s(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(-1!==e.indexOf(a))continue;n[a]=t[a]}return n}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(a=0;a<c.length;a++)n=c[a],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a=function(){var t=Object(r.a)("automationList"),e=t.fetch,n=t.setStateProp,s=p(t,u),m=Object(r.a)(o.a.recipient),b=m.fetch,d=m.setStateProp,O=Object(r.a)(o.a.conversion),j=O.fetch,v=O.setStateProp,g=Object(r.a)(o.a.contacts),w=g.fetch,y=g.setStateProp,h=Object(r.a)(o.a.analytics),E=h.fetch,_=h.setStateProp;return f(f({},s),{},{fetch:function(t,r,o,i){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5?arguments[5]:void 0;n("automation",{});var m=r.s,b=void 0===m?"":m,d=(r.page,r.filter,r.path,p(r,l)),O=f({offset:o,limit:i,status:t,search:b,filters:d,version:s?2:1},!Object(a.isEmpty)(u)&&{category:u.map((function(t){return t.id})).join(",")});e("GET",Object(c.C)("/automations"),O)},setAutomationListValues:function(t,e){n(t,e)},fetchRecipient:function(t,e,n){b("GET",Object(c.C)("/v3/automation/".concat(t,"/recipients?limit=").concat(e,"&offset=").concat(n)))},setRecipientsValues:function(t,e){d(t,e)},fetchConversion:function(t,e,n){v("automation",{}),j("GET",Object(c.C)("/v3/automation/".concat(t,"/conversions?limit=").concat(e,"&offset=").concat(n)))},setConversionValues:function(t,e){v(t,e)},fetchContacts:function(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";y("automation",{}),w("GET",Object(c.C)("/automation/".concat(t,"/contacts?limit=").concat(e,"&offset=").concat(n,"&type=").concat(a,"&search=").concat(r)))},setContactValues:function(t,e){y(t,e)},fetchAnalytics:function(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=0;4===parseInt(o)&&(s=1),E("GET",Object(c.C)("/analytics/emails/chart/")+"?"+Object(i.stringify)({after:e,before:n,interval:a,oid:t,type:r,mode:o,contact:s}))},setAnalyticsValues:function(t,e){_(t,e)}})}},1132:function(t,e,n){var a=n(1153),r=n(1154),c=n(1155);t.exports=function(t,e,n){return e==e?c(t,e,n):a(t,r,n)}},1138:function(t,e,n){var a=n(561),r=n(562),c=n(1150),o=n(1152),i=n(1156),s=n(1157),u=n(560);t.exports=function(t,e,n){if((t=u(t))&&(n||void 0===e))return r(t);if(!t||!(e=a(e)))return t;var l=s(t),m=s(e),f=i(l,m),b=o(l,m)+1;return c(l,f,b).join("")}},1150:function(t,e,n){var a=n(1151);t.exports=function(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:a(t,e,n)}},1151:function(t,e){t.exports=function(t,e,n){var a=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var c=Array(r);++a<r;)c[a]=t[a+e];return c}},1152:function(t,e,n){var a=n(1132);t.exports=function(t,e){for(var n=t.length;n--&&a(e,t[n],0)>-1;);return n}},1153:function(t,e){t.exports=function(t,e,n,a){for(var r=t.length,c=n+(a?1:-1);a?c--:++c<r;)if(e(t[c],c,t))return c;return-1}},1154:function(t,e){t.exports=function(t){return t!=t}},1155:function(t,e){t.exports=function(t,e,n){for(var a=n-1,r=t.length;++a<r;)if(t[a]===e)return a;return-1}},1156:function(t,e,n){var a=n(1132);t.exports=function(t,e){for(var n=-1,r=t.length;++n<r&&a(e,t[n],0)>-1;);return n}},1157:function(t,e,n){var a=n(1158),r=n(1159),c=n(1160);t.exports=function(t){return r(t)?c(t):a(t)}},1158:function(t,e){t.exports=function(t){return t.split("")}},1159:function(t,e){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return n.test(t)}},1160:function(t,e){var n="[\\ud800-\\udfff]",a="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",c="[^\\ud800-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+a+"|"+r+")"+"?",u="[\\ufe0e\\ufe0f]?"+s+("(?:\\u200d(?:"+[c,o,i].join("|")+")[\\ufe0e\\ufe0f]?"+s+")*"),l="(?:"+[c+a+"?",a,o,i,n].join("|")+")",m=RegExp(r+"(?="+r+")|"+l+u,"g");t.exports=function(t){return t.match(m)||[]}},1210:function(t,e,n){},1211:function(t,e,n){},1271:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n(1),c=n(147),o=n(369),i=function(){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("section",{className:"bwf-crm-card"},Object(a.createElement)("div",{className:"bwf-crm-card-l"},Object(a.createElement)("div",{className:"bwf-crm-card-title"},Object(a.createElement)("span",{className:"bwf-crm-status is-preview"})," ",Object(a.createElement)("span",{className:"is-placeholder"})),Object(a.createElement)("div",{className:"bwf-crm-card-subtitle"},Object(a.createElement)("span",{className:"is-placeholder long"})))),Object(a.createElement)("section",{className:"bwf-crm-card"},Object(a.createElement)("div",{className:"bwf-crm-card-l"},Object(a.createElement)("div",{className:"bwf-crm-card-title"},Object(a.createElement)("span",{className:"bwf-crm-status is-preview"})," ",Object(a.createElement)("span",{className:"is-placeholder"})),Object(a.createElement)("div",{className:"bwf-crm-card-subtitle"},Object(a.createElement)("span",{className:"is-placeholder long"})))))},s=n(3),u=n(5),l=n(48),m=n(9),f=n.n(m),b=n(2);function p(){var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function c(n,a,r,c){var s=a&&a.prototype instanceof i?a:i,u=Object.create(s.prototype);return d(u,"_invoke",function(n,a,r){var c,i,s,u=0,l=r||[],m=!1,f={p:0,n:0,v:t,a:b,f:b.bind(t,4),d:function(e,n){return c=e,i=0,s=t,f.n=n,o}};function b(n,a){for(i=n,s=a,e=0;!m&&u&&!r&&e<l.length;e++){var r,c=l[e],b=f.p,p=c[2];n>3?(r=p===a)&&(s=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=t):c[0]<=b&&((r=n<2&&b<c[1])?(i=0,f.v=a,f.n=c[1]):b<p&&(r=n<3||c[0]>a||a>p)&&(c[4]=n,c[5]=a,f.n=p,i=0))}if(r||n>1)return o;throw m=!0,a}return function(r,l,p){if(u>1)throw TypeError("Generator is already running");for(m&&1===l&&b(l,p),i=l,s=p;(e=i<2?t:s)||!m;){c||(i?i<3?(i>1&&(f.n=-1),b(i,s)):f.n=s:f.v=s);try{if(u=2,c){if(i||(r="next"),e=c[r]){if(!(e=e.call(c,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,i<2&&(i=0)}else 1===i&&(e=c.return)&&e.call(c),i<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),i=1);c=t}else if((e=(m=f.n<0)?s:n.call(a,f))!==o)break}catch(e){c=t,i=1,s=e}finally{u=1}}return{value:e,done:m}}}(n,r,c),!0),u}var o={};function i(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][a]?e(e([][a]())):(d(e={},a,(function(){return this})),e),m=u.prototype=i.prototype=Object.create(l);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,d(t,r,"GeneratorFunction")),t.prototype=Object.create(m),t}return s.prototype=u,d(m,"constructor",u),d(u,"constructor",s),s.displayName="GeneratorFunction",d(u,r,"GeneratorFunction"),d(m),d(m,r,"Generator"),d(m,a,(function(){return this})),d(m,"toString",(function(){return"[object Generator]"})),(p=function(){return{w:c,m:f}})()}function d(t,e,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}(d=function(t,e,n,a){function c(e,n){d(t,e,(function(t){return this._invoke(e,n,t)}))}e?r?r(t,e,{value:n,enumerable:!a,configurable:!a,writable:!a}):t[e]=n:(c("next",0),c("throw",1),c("return",2))})(t,e,n,a)}function O(t,e,n,a,r,c,o){try{var i=t[c](o),s=i.value}catch(t){return void n(t)}i.done?e(s):Promise.resolve(s).then(a,r)}function j(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,c,o,i=[],s=!0,u=!1;try{if(c=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=c.call(n)).done)&&(i.push(a.value),i.length!==e);s=!0);}catch(t){u=!0,r=t}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return v(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}var g=function(t){var e=t.contact,n=t.automationId,c=j(Object(a.useState)(!0),2),o=c[0],u=c[1],m=j(Object(a.useState)([]),2),d=m[0],v=m[1],g=function(){var t,a=(t=p().m((function t(){return p().w((function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,f()({method:"GET",path:Object(s.C)("/v3/automation/".concat(n,"/recipients/").concat(e.cid,"/timeline?mode=").concat(e.mode))}).then((function(t){200===t.code&&t.hasOwnProperty("result")&&!Object(b.isEmpty)(t.result)?v(t.result):v([]),u(!1)}));case 1:t.n=3;break;case 2:t.p=2,t.v,u(!1);case 3:return t.a(2)}}),t,null,[[0,2]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var c=t.apply(e,n);function o(t){O(c,a,r,o,i,"next",t)}function i(t){O(c,a,r,o,i,"throw",t)}o(void 0)}))});return function(){return a.apply(this,arguments)}}();Object(a.useEffect)((function(){u(!0),Object(b.isEmpty)(e.cid)||g()}),[e]);return o?Object(a.createElement)(i,null):Object(a.createElement)(a.Fragment,null,Object(b.isEmpty)(d)?Object(a.createElement)("p",null,Object(r.__)("No timeline found","wp-marketing-automations")):d.map((function(t,e){var n="";switch(t.type){case"conversion":n=function(t){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-crm-card-l"},Object(a.createElement)("div",{className:"bwf-crm-card-title"},Object(a.createElement)("span",{className:"bwf-crm-status bwf-crm-status-success"}),Object(a.createElement)("span",null,Object(r.__)("Conversion Recorded","wp-marketing-automations"),Object(a.createElement)("a",{href:"post.php?post="+t.order_id+"&action=edit",className:"bwf-a-no-underline"}," (#".concat(t.order_id,")")))),Object(a.createElement)("div",{className:"bwf-crm-card-subtitle",title:Object(s.lb)(t.date,!0)},Object(s.sb)(t.date).fromNow())),Object(a.createElement)("div",{className:"bwf-crm-card-r"},parseFloat(t.revenue)>0&&Object(a.createElement)("span",{className:"bwf-tags bwf-tag-revenue"},Object(l.a)(t.hasOwnProperty("currency")&&!Object(b.isEmpty)(t.currency)?t.currency:Object(s.Cb)()).formatAmount(parseFloat(t.revenue)))))}(t);break;case"open":n=function(t){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-crm-card-l"},Object(a.createElement)("div",{className:"bwf-crm-card-title"},Object(a.createElement)("span",{className:"bwf-crm-status bwf-crm-status-success"}),Object(a.createElement)("span",null,Object(r.__)("Email Opened","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-crm-card-subtitle",title:Object(s.lb)(t.date,!0)},Object(s.sb)(t.date).fromNow())))}(t);break;case"click":n=function(t){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-crm-card-l"},Object(a.createElement)("div",{className:"bwf-crm-card-title"},Object(a.createElement)("span",{className:"bwf-crm-status bwf-crm-status-success"}),Object(a.createElement)("span",null,1===parseInt(t.mode)?Object(r.__)("Email Clicked","wp-marketing-automations"):Object(r.__)("SMS Clicked","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-crm-card-subtitle",title:Object(s.lb)(t.date,!0)},Object(s.sb)(t.date).fromNow())))}(t);break;case"sent":n=function(t){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-crm-card-l"},Object(a.createElement)("div",{className:"bwf-crm-card-title"},Object(a.createElement)("span",{className:"bwf-crm-status bwf-crm-status-success"}),Object(a.createElement)("span",null,1===parseInt(t.mode)?Object(r.__)("Email Sent","wp-marketing-automations"):Object(r.__)("SMS Sent","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-crm-card-subtitle",title:Object(s.lb)(t.date,!0)},Object(s.sb)(t.date).fromNow())))}(t);break;case"failed":n=function(t){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-crm-card-l"},Object(a.createElement)("div",{className:"bwf-crm-card-title"},Object(a.createElement)("span",{className:"bwf-crm-status bwf-crm-status-failed"}),Object(a.createElement)("span",null,1===parseInt(t.mode)?Object(r.__)("Sent Failed","wp-marketing-automations"):Object(r.__)("SMS Sent Failed","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-crm-card-subtitle",title:Object(s.lb)(t.date,!0)},Object(s.sb)(t.date).fromNow())))}(t)}return Object(a.createElement)("section",{className:"bwf-crm-card",key:e},n)})))},w=(n(1210),n(170)),y=n(1138),h=n.n(y),E=n(12),_=(n(26),Object(l.a)(Object(s.Cb)()).formatAmount),N=function(t){var e=t.isOpen,n=t.automationId,c=t.onRequestClose,i=t.contact;return e?Object(a.createElement)(o.a,{size:400,isOpen:e,onRequestClose:c},e?Object(a.createElement)("div",{className:"bwf-crm-body"},Object(a.createElement)("div",{className:"bwf-crm-details"},Object(a.createElement)("div",{className:"bwf-crm-d-head bwf-crm-gap-border"},Object(a.createElement)("div",{className:"bwf-gravatar-wrapper"},i.send_to&&Object(a.createElement)(w.a,{user:i.send_to,size:60}),Object(a.createElement)("div",{className:"bwf-crm-gravatar"},Object(a.createElement)("span",null,Object(b.isEmpty)(h()(i.f_name+" "+i.l_name))?"-":Object(s.tb)(i.f_name,i.l_name)))),Object(a.createElement)("div",{className:"bwf-crm-name"},i&&i.f_name&&i.l_name&&i.f_name.charAt(0).toUpperCase()+i.f_name.slice(1)+" "+(i.l_name.charAt(0).toUpperCase()+i.l_name.slice(1))),Object(a.createElement)("div",{className:"bwf-crm-email"},i.send_to),Object(a.createElement)("div",{className:"bwf-display-flex bwf-pt-15"},Object(a.createElement)(u.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray is-light",onClick:function(){Object(E.l)({page:"autonami",path:"/contact/".concat(i.cid)},"/",{})}},Object(r.__)("View Contact","wp-marketing-automations")))),Object(a.createElement)("div",{className:"bwf-crm-d-data bwf-crm-gap-border"},Object(a.createElement)("div",{className:"bwf-crm-head"},Object(r.__)("Details","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-crm-col2",key:1},i.is_unsubscribe&&!Object(b.isEmpty)(i.unsubscribe)&&Object(a.createElement)("div",{className:"bwf-crm-list",key:11},Object(a.createElement)("div",{className:"bwf-crm-label"},Object(r.__)("Unsubscribe","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-crm-value"},Object(s.kb)(i.unsubscribe)))),Object(a.createElement)("div",{className:"bwf-crm-col2",key:2},Object(a.createElement)("div",{className:"bwf-crm-list",key:22},Object(a.createElement)("div",{className:"bwf-crm-label"},Object(r.__)("Total Click","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-crm-value"},parseInt(i.click)>0?parseInt(i.click):0)),Object(a.createElement)("div",{className:"bwf-crm-list",key:23},Object(a.createElement)("div",{className:"bwf-crm-label"},Object(r.__)("Total Open","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-crm-value"},parseInt(i.open)>0?parseInt(i.open):0))),Object(a.createElement)("div",{className:"bwf-crm-col2",key:3},Object(a.createElement)("div",{className:"bwf-crm-list",key:31},Object(a.createElement)("div",{className:"bwf-crm-label"},Object(r.__)("Is Converted","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-crm-value"},parseInt(i.conversions)>0?Object(r.__)("Yes","wp-marketing-automations"):Object(r.__)("No","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-crm-list",key:32},Object(a.createElement)("div",{className:"bwf-crm-label"},Object(r.__)("Total Revenue","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-crm-value"},parseInt(i.revenue)?_(parseInt(i.revenue)):"-"))))),Object(a.createElement)("div",{className:"bwf-crm-timeline"},Object(a.createElement)("div",{className:"bwf-crm-head"},Object(r.__)("Timeline","wp-marketing-automations")),Object(a.createElement)(g,{key:n,contact:i,automationId:n}))):Object(a.createElement)(a.Fragment,null)):Object(a.createElement)(o.a,{size:0,isOpen:e,onRequestClose:c})},k=n(346),C=n(19),S=n(33),P=n(1115),A=n(1102),I=n(148),T=n(344),R=(n(1211),n(68)),D=n(1098),L=n(77),x=n(110),F=n(6),G=n.n(F);function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){H(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function H(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=M(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=M(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==M(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,c,o,i=[],s=!0,u=!1;try{if(c=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=c.call(n)).done)&&(i.push(a.value),i.length!==e);s=!0);}catch(t){u=!0,r=t}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return z(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}e.default=function(t){var e=t.match.params.automationId,n=t.isV2,o=void 0===n||n;Object(s.m)("Automation #"+e);var i=U(Object(a.useState)(!1),2),u=i[0],m=i[1],f=U(Object(a.useState)({}),2),p=f[0],d=f[1],O=Object(A.a)(),j=O.getRecipientData(),v=O.getRecipientLoading(),g=O.getRecipientLimit(),w=O.getRecipientOffset(),y=O.getRecipientTotal(),h=O.getRecipientSingleAutomationFailedCount(),E=Object(P.a)(),_=E.fetchRecipient,F=E.setRecipientsValues;Object(a.useEffect)((function(){_(e,g,w)}),[g,w]);var M=O.getRecipientAutomation(),V=(M.v,M.title),H=void 0===V?"":V,z=Object(T.a)().setAutomationData;Object(a.useEffect)((function(){Object(b.isEmpty)(M)||z("data",M)}),[M]),Object(a.useEffect)((function(){return function(){F("automation",{}),F("offset",0)}}),[]);var B=Object(L.a)(),W=B.setL2NavAlign,J=B.setL2Title,$=B.setPageCountData,Q=(0,Object(x.a)().getPageCountData)(),Y=Object(I.a)(),K=Y.getAutomationData,X=Y.getAutomationId,Z=K().title,tt=void 0===Z?"":Z,et=X();Object(D.a)("engagement","",!0,!1,null,e,!1,o),Object(a.useEffect)((function(){v||$(q(q({},Q),{},{single_a_contacts:h}))}),[h]),Object(a.useEffect)((function(){J(parseInt(e)===parseInt(et)&&""!==tt&&""===H?tt:""!==H?H:Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}))}),[tt,H,e]),Object(a.useEffect)((function(){W("left"),Object(s.m)("Automation #"+e)}),[]);var nt=Object(l.a)(Object(s.Cb)()).formatAmount,at=G()("bwf-crm-campaign-report-recipients"),rt=[{key:"contact",label:Object(r.__)("Contact","wp-marketing-automations"),required:!0,cellClassName:"bwf-crm-col-contact bwf-w-210"},{key:"contact_details",label:Object(r.__)("Details","wp-marketing-automations"),cellClassName:"bwf-crm-col-contact-details"},{key:"sent",label:Object(r.__)("Sent","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-t-center bwf-w-90"},{key:"open",label:Object(r.__)("Open","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-t-center bwf-w-90"},{key:"click",label:Object(r.__)("Click","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-t-center bwf-w-90"},{key:"unsubscribe",label:Object(r.__)("Unsubscribe","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-t-center bwf-w-90"},Object(s.uc)()?{key:"converted",label:Object(r.__)("Converted","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-t-center bwf-w-90"}:{},Object(s.uc)()?{key:"revenue",label:Object(r.__)("Revenue","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-w-90"}:{}],ct=O.getRecipientPage(),ot=function(t){t!==g&&(F("limit",t),F("offset",0))},it=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="";switch(t){case"null":case null:n="";break;case!0:case"yes":n=e?" bwf-crm-status-failed":" bwf-crm-status-success";break;case!1:case"no":n=e?" bwf-crm-status-success":""}return Object(a.createElement)("div",{className:"bwf-crm-status bwf-crm-status-s"+n})},st=function(t){var e=t;return e.email=t.send_to,Object(a.createElement)("div",{onClick:function(){return function(t){d(t),m(!0)}(t)}},Object(a.createElement)(k.a,{contact:e,dateText:Object(r.__)("Sent","wp-marketing-automations"),date:t.sent_time}))},ut=function(t){return Object(a.createElement)("div",{className:"bwf-crm-contact-details-cell"},t.send_to&&Object(a.createElement)(C.a,{justify:"start"},Object(a.createElement)(C.c,null,0!==t.cid?Object(a.createElement)(S.a,{className:"bwf-a-no-underline",href:"mailto:"+t.send_to,type:"external"},t.send_to):t.send_to)))};return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>#bwfcrm-page{ overflow: auto !important; }</style>"}}),Object(a.createElement)(R.a,null),Object(a.createElement)("div",{className:"bwf-single-automation-body-header bwf-conversion-recipient"},Object(a.createElement)("div",{className:"bwf-content-header-left"},Object(a.createElement)("div",{className:"bwf-content-header-title2"},Object(r.__)("Engagements","wp-marketing-automations")),parseInt(y)>0&&Object(a.createElement)("div",{className:"bwf-content-header-count"},Object(r.sprintf)(Object(r.__)("(%s Results)","wp-marketing-automations"),y)))),Object(a.createElement)("div",{className:"bwf-position-relative"},Object(a.createElement)(c.a,{className:at,rows:j.map((function(t){return[{display:st(t),value:t.f_name+" "+t.l_name},{display:ut(t),value:t.email},{display:it(parseInt(t.sent)>0),value:t.open},{display:it(parseInt(t.open)>0),value:t.open},{display:it(parseInt(t.click)>0),value:t.click},{display:it(0!=parseInt(t.unsubscribed)||null,!0),value:t.unsubscribe},Object(s.uc)()?{display:it(parseInt(t.conversions)>0),value:t.is_converted}:{},Object(s.uc)()?{display:Object(a.createElement)(a.Fragment,null,parseFloat(t.revenue)>0?Object(a.createElement)("span",{className:"bwf-tags bwf-tag-green"},nt(parseFloat(t.revenue))):"-"),value:t.revenue}:{}]})),headers:rt,query:{paged:ct},rowsPerPage:g,totalRows:y,isLoading:v,onPageChange:function(t){F("offset",(t-1)*g)},onQueryChange:function(t){return"per_page"!==t?function(){}:ot},emptyMessage:Object(r.__)("No engagements found","wp-marketing-automations"),rowHeader:!0,showMenu:!1,hideHeader:"yes"}),Object(a.createElement)(N,{contact:p,size:400,automationId:e,isOpen:u,onRequestClose:function(){return m(!1)}})))}}}]);