(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{1106:function(e,t,r){"use strict";var n=r(0),a=r(5),o=r(3),c=r(2),i=r(1);r(1107);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.a=function(e){var t=e.updateTitle,r=e.title,u=e.className,s=void 0===u?"":u,f=e.isDisabled,b=void 0!==f&&f,p=Object(n.useContext)(o.h),m=l(Object(n.useState)(!1),2),d=m[0],y=m[1],O=l(Object(n.useState)(""),2),v=O[0],j=O[1],w=Object(n.useRef)();Object(n.useEffect)((function(){j(r)}),[r]),Object(o.Vc)(w,(function(){h(v),y(!1)}));var h=function(e){if("string"==typeof e){var n=e.replace(/\s/g,"");y(!1),Object(c.isEmpty)(n)?(j(r),p(Object(i.__)("Title Cannot be empty","wp-marketing-automations")),Object(o.Pb)(p,3e3)):(j(null==e?void 0:e.trim()),t(e))}};return Object(n.useEffect)((function(){if(d&&w.current){var e=function(){this.style.width=this.value.length+2+"ch"};w.current.addEventListener("input",e),e.call(w.current)}}),[d]),Object(n.useEffect)((function(){var e;d&&(null==w||null===(e=w.current)||void 0===e||e.focus())}),[d]),d?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(a.TextControl,{className:"bwf-editable-title ".concat(s),value:v,onChange:function(e){j(e)},ref:w,onBlur:h,autoComplete:"off",onKeyUp:function(e){"Enter"===e.key&&h(v)},disabled:b})):Object(n.createElement)("div",{onClick:function(){d||b||y(!0)},title:b?"":Object(i.__)("Click to edit","wp-marketing-automations"),className:"bwf-editable-title bwf-text ".concat(s," ").concat(b?"bwf-disable":"")},Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:v}}))}},1107:function(e,t,r){},1118:function(e,t,r){"use strict";var n=r(51),a=r(3);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=["fetch","setStateProp","clearError"];function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.a=function(){var e=Object(n.a)("singleTemplateData"),t=e.fetch,r=e.setStateProp,o=e.clearError;return l(l({},function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,c)),{},{fetch:function(e){r("isLoading",!0),o(),t("GET",Object(a.C)("/template/".concat(e)))},setTemplateData:function(e){r("data",e)},setTemplateListData:function(e){r("listData",e)}})}},1168:function(e,t,r){"use strict";var n=r(9),a=r.n(n),o=r(3),c=r(1118),i=r(2),l=["template"];function u(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function s(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var l=n&&n.prototype instanceof i?n:i,u=Object.create(l.prototype);return f(u,"_invoke",function(r,n,a){var o,i,l,u=0,s=a||[],f=!1,b={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,l=e,b.n=r,c}};function p(r,n){for(i=r,l=n,t=0;!f&&u&&!a&&t<s.length;t++){var a,o=s[t],p=b.p,m=o[2];r>3?(a=m===n)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,b.v=n,b.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,b.n=m,i=0))}if(a||r>1)return c;throw f=!0,n}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,m),i=s,l=m;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),p(i,l)):b.n=l:b.v=l);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:r.call(n,b))!==c)break}catch(t){o=e,i=1,l=t}finally{u=1}}return{value:t,done:f}}}(r,a,o),!0),u}var c={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var b=[][n]?t(t([][n]())):(f(t={},n,(function(){return this})),t),p=u.prototype=i.prototype=Object.create(b);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,f(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=u,f(p,"constructor",u),f(u,"constructor",l),l.displayName="GeneratorFunction",f(u,a,"GeneratorFunction"),f(p),f(p,a,"Generator"),f(p,n,(function(){return this})),f(p,"toString",(function(){return"[object Generator]"})),(s=function(){return{w:o,m:m}})()}function f(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(f=function(e,t,r,n){function o(t,r){f(e,t,(function(e){return this._invoke(t,r,e)}))}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))})(e,t,r,n)}function b(e,t,r,n,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){b(o,n,a,c,i,"next",e)}function i(e){b(o,n,a,c,i,"throw",e)}c(void 0)}))}}t.a=function(e,t){var r,n,f,b,m=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",y=Object(c.a)(),O=y.setTemplateData;return{sendTestEmail:(b=p(s().m((function e(t,r,n,c,i,l){var u,f,b,p,m,d=arguments;return s().w((function(e){for(;;)switch(e.p=e.n){case 0:return u=d.length>6&&void 0!==d[6]&&d[6],f=d.length>7&&void 0!==d[7]?d[7]:{},b=d.length>8&&void 0!==d[8]&&d[8],p=d.length>9&&void 0!==d[9]?d[9]:{},e.p=1,m={email:t,content:JSON.stringify({subject:r,body:n,type:c,mail_data:i,preheader:l,utmEnabled:u,utmDetails:f,overRideSenderInfo:b,overRideInfo:p})},e.n=2,a()({method:"POST",path:Object(o.C)("/send-test-email"),data:m});case 2:return e.a(2,2);case 3:return e.p=3,e.v,e.a(2,3)}}),e,null,[[1,3]])}))),function(e,t,r,n,a,o){return b.apply(this,arguments)}),saveEditorContent:(f=p(s().m((function r(n){var c,f,b,p,y,v,j,w,h,g,E;return s().w((function(r){for(;;)switch(r.p=r.n){case 0:return c=t,f=Object(i.isEmpty)(n)?{}:n[0],b="","editor"===f.type?(f.hasOwnProperty("editor")&&(f.editor.hasOwnProperty("body")&&(c.template=f.editor.body),f.editor.hasOwnProperty("design")&&(c.data.design=f.editor.design)),b=4):"block"===f.type?(f.hasOwnProperty("block")&&(p=f.body,y=void 0===p?"":p,v=f.block,j=v.template,w=void 0===j?"":j,h=u(v,l),""!==w?c.template=f.block.template:""!==y&&(c.template=y),c.data.block=h),b=5):c.template=f.body,g={template:c.template,data:c.data,mode:b},f.hasOwnProperty("subject")&&(g.subject=f.subject),f.hasOwnProperty("preheader")&&(g.data.preheader=f.preheader),E={content:JSON.stringify(g)},d&&(E.lang=d),r.p=1,r.n=2,a()({method:"POST",path:Object(o.C)("/".concat(m?"transactional-mail":"template","/").concat(e,"/save-email-content")),data:E}).then((function(e){200==e.code&&O(e.result)}));case 2:return r.a(2,2);case 3:return r.p=3,r.v,r.a(2,3)}}),r,null,[[1,3]])}))),function(e){return f.apply(this,arguments)}),uploadImage:(n=p(s().m((function e(t){var r,n;return s().w((function(e){for(;;)switch(e.p=e.n){case 0:return(r=new FormData).append("image",t),e.p=1,e.n=2,a()({method:"POST",path:Object(o.C)("/upload-image"),body:r});case 2:return n=e.v,e.a(2,n&&n.result?n.result:"");case 3:return e.p=3,e.v,e.a(2,"")}}),e,null,[[1,3]])}))),function(e){return n.apply(this,arguments)}),fetchCurrentMailEditorContent:(r=p(s().m((function e(){return s().w((function(e){for(;;)switch(e.n){case 0:return e.a(2,"")}}),e)}))),function(){return r.apply(this,arguments)})}}},1239:function(e,t,r){},1270:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(3),o=r(77),c=r(12),i=r(1168),l=r(210),u=r(5),s=r(11),f=r(1118),b=r(52),p=r(2);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=["getStateProp"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j={1:"rich",2:"wc",3:"html",4:"editor",5:"block"},w=function(){var e=Object(b.a)("singleTemplateData"),t=e.getStateProp,r=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,d),n=Object(a.s)();return O(O({},r),{},{getTemplateData:function(){return t("data")},getListData:function(){return t("listData")},getFormattedTemplateData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(p.isEmpty)(e))return{};var t={body:"",editor:{body:Object(a.Kb)(),design:Object(a.Jb)()},preheader:"",subject:"",type:"block",utm:n,utmEnabled:!1,last_updated:""};return e.hasOwnProperty("template")&&(e.hasOwnProperty("mode")&&4===parseInt(e.mode)?t.editor.body=e.template:t.body=e.template),e.hasOwnProperty("subject")&&(t.subject=e.subject),e.hasOwnProperty("mode")&&(t.type=j[e.mode]),e.hasOwnProperty("subject")&&(t.subject=e.subject),e.hasOwnProperty("updated_at")&&(t.last_updated=e.updated_at),e.hasOwnProperty("data")&&!Object(p.isEmpty)(e.data)&&(t.subject=e.subject,e.data.hasOwnProperty("preheader")&&(t.preheader=e.data.preheader),e.data.hasOwnProperty("utmEnabled")&&e.data.utmEnabled&&(t.utmEnabled=e.data.utmEnabled),e.data.hasOwnProperty("utm")&&(t.utm=e.data.utm),e.data.hasOwnProperty("design")&&4===parseInt(e.mode)&&(t.editor.design=e.data.design),e.data.hasOwnProperty("block")&&5===parseInt(e.mode)&&(t.block=e.data.block)),t}})},h=r(1),g=r(9),E=r.n(g),P=r(68),S=r(321),k=r.n(S),T=r(334),_=r(7),N=r(26),D=r(40),x=r(1106);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var l=n&&n.prototype instanceof i?n:i,u=Object.create(l.prototype);return F(u,"_invoke",function(r,n,a){var o,i,l,u=0,s=a||[],f=!1,b={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,l=e,b.n=r,c}};function p(r,n){for(i=r,l=n,t=0;!f&&u&&!a&&t<s.length;t++){var a,o=s[t],p=b.p,m=o[2];r>3?(a=m===n)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,b.v=n,b.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,b.n=m,i=0))}if(a||r>1)return c;throw f=!0,n}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,m),i=s,l=m;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),p(i,l)):b.n=l:b.v=l);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:r.call(n,b))!==c)break}catch(t){o=e,i=1,l=t}finally{u=1}}return{value:t,done:f}}}(r,a,o),!0),u}var c={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(F(t={},n,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,F(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,F(f,"constructor",u),F(u,"constructor",l),l.displayName="GeneratorFunction",F(u,a,"GeneratorFunction"),F(f),F(f,a,"Generator"),F(f,n,(function(){return this})),F(f,"toString",(function(){return"[object Generator]"})),(I=function(){return{w:o,m:b}})()}function F(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(F=function(e,t,r,n){function o(t,r){F(e,t,(function(e){return this._invoke(t,r,e)}))}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))})(e,t,r,n)}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e,t,r,n,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}var B=function(){var e,t=Object(n.useContext)(a.h),r=w(),o=r.getTemplateData,c=r.getListData,i=r.getError,l=Object(f.a)().setTemplateData,u=null!==(e=c())&&void 0!==e?e:"",s=o(),b=i(),m=null!=s?s:{},d=m.ID,y=void 0===d?"":d,O=m.title,v=void 0===O?"":O;if(!Object(p.isEmpty)(b))return null;var j=function(){var e,r=(e=I().m((function e(){var r,n,o,c=arguments;return I().w((function(e){for(;;)switch(e.p=e.n){case 0:if(""!=(r=c.length>0&&void 0!==c[0]?c[0]:"")&&r!=v){e.n=1;break}return e.a(2);case 1:return n=L({},s),e.p=2,e.n=3,E()({path:Object(a.C)("/template/".concat(y)),method:"POST",data:{title:r,onlytitle:!0}}).then((function(e){if(200!=e.code)throw Error(Object(a.w)(null==e?void 0:e.message));l(L(L({},n),{},{title:r})),t(Object(h.__)("Title Updated","wp-marketing-automations")),Object(a.Pb)(t,3e3)}));case 3:e.n=5;break;case 4:e.p=4,o=e.v,t(o.message);case 5:Object(a.Pb)(t,3e3);case 6:return e.a(2)}}),e,null,[[2,4]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){M(o,n,a,c,i,"next",e)}function i(e){M(o,n,a,c,i,"throw",e)}c(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(n.createElement)(n.Fragment,null,""!=v?Object(n.createElement)(x.a,{title:v,updateTitle:j}):""!=v?v:""!==u?u:Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-20 bwf-w-210"}))};function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var R=["template"];function q(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var l=n&&n.prototype instanceof i?n:i,u=Object.create(l.prototype);return U(u,"_invoke",function(r,n,a){var o,i,l,u=0,s=a||[],f=!1,b={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,l=e,b.n=r,c}};function p(r,n){for(i=r,l=n,t=0;!f&&u&&!a&&t<s.length;t++){var a,o=s[t],p=b.p,m=o[2];r>3?(a=m===n)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,b.v=n,b.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,b.n=m,i=0))}if(a||r>1)return c;throw f=!0,n}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,m),i=s,l=m;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),p(i,l)):b.n=l:b.v=l);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:r.call(n,b))!==c)break}catch(t){o=e,i=1,l=t}finally{u=1}}return{value:t,done:f}}}(r,a,o),!0),u}var c={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(U(t={},n,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,U(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,U(f,"constructor",u),U(u,"constructor",l),l.displayName="GeneratorFunction",U(u,a,"GeneratorFunction"),U(f),U(f,a,"Generator"),U(f,n,(function(){return this})),U(f,"toString",(function(){return"[object Generator]"})),(q=function(){return{w:o,m:b}})()}function U(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(U=function(e,t,r,n){function o(t,r){U(e,t,(function(e){return this._invoke(t,r,e)}))}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))})(e,t,r,n)}function z(e,t,r,n,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){H(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function H(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=J(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==J(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Y=function(e){var t=e.templateId,r=Object(c.i)().editor,b=void 0===r?"":r,m=Object(n.useContext)(a.h),d=Object(f.a)(),y=d.fetch,O=d.setTemplateData,v=d.setTemplateListData,j=w(),g=j.getLoading,S=j.getTemplateData,x=j.getFormattedTemplateData,C=j.getListData,I=j.getError,F=C(),G={rich:1,wc:2,html:3,editor:4},L=Object(o.a)().setL2Title,A=V(Object(n.useState)(!1),2),M=A[0],J=A[1],U=V(Object(n.useState)({loading:!1,status:!1}),2),K=U[0],H=U[1],W=V(Object(n.useState)([]),2),Y=W[0],Q=W[1],X=I();Object(n.useEffect)((function(){return parseInt(t)>0&&y(t),function(){O({}),v("")}}),[]);var Z=g(),ee=S();Object(n.useEffect)((function(){L(ee.hasOwnProperty("title")?ee.title:""!=F?F:Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}))}),[Z,ee]);var te=function(){var e,r=(e=q().m((function e(){var r,n;return q().w((function(e){for(;;)switch(e.p=e.n){case 0:if(Object(a.fc)()){e.n=1;break}return J(!0),e.a(2);case 1:if(re()){e.n=5;break}return H({status:!0,loading:!0}),r={content:JSON.stringify(ee)},e.p=2,e.n=3,E()({path:Object(a.C)("/template/".concat(t)),method:"POST",data:r}).then((function(e){200==e.code&&(m(e.message),Object(a.Pb)(m,3e3),H({}))}));case 3:e.n=5;break;case 4:e.p=4,n=e.v,m(n.message),Object(a.Pb)(m,3e3),H({});case 5:return e.a(2)}}),e,null,[[2,4]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){z(o,n,a,c,i,"next",e)}function i(e){z(o,n,a,c,i,"throw",e)}c(void 0)}))});return function(){return r.apply(this,arguments)}}(),re=function(){var e=!1,t=[];return ee.hasOwnProperty("title")&&!Object(p.isEmpty)(ee.title)||(e=!0,t.push(Object(h.__)("Name is required.","wp-marketing-automations"))),ee.hasOwnProperty("subject")&&!Object(p.isEmpty)(ee.subject)||(e=!0,t.push(Object(h.__)("Subject is required.","wp-marketing-automations"))),ee.hasOwnProperty("template")&&!Object(p.isEmpty)(ee.template)||(e=!0,t.push(Object(h.__)("Email content cannot be empty.","wp-marketing-automations"))),Q(t),e};Object(n.useEffect)((function(){Object(p.isEmpty)(X)||O("isLoading",!1)}),[X]);var ne=Object(i.a)(t,ee,!1);return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-section-header"},Object(n.createElement)("div",{className:"bwf-section-left"},Object(n.createElement)("span",{className:"bwf-svg-wrap",onClick:function(){Object(c.l)({page:"autonami",path:"/templates"},"/",{})}},Object(n.createElement)(_.a,{icon:"arrow-left",width:24,height:24})),Object(n.createElement)("span",{className:"bwf-section-title"},Object(n.createElement)(B,null)),Object(n.createElement)("span",{className:"bwf-tags bwf-tag-light-blue"},Object(h.__)("Template","wp-marketing-automations")))),Object(n.createElement)("div",{className:"bwf_clear_8"}),Object(n.createElement)("div",{className:"bwfcrm-overview-wrap bwf-crm-single-template-section"},!Object(p.isEmpty)(X)||Z||Object(p.isEmpty)(ee)?Object(p.isEmpty)(X)?"block"===b?Object(n.createElement)(u.Modal,{title:"",onRequestClose:function(){},overlayClassName:"bwf-recipe-preview-overlay bwf-fullscreen-overlay",className:"bwf-admin-modal bwf-admin-modal-no-header bwf-admin-modal-fullscreen bwf-c-block-save-content-loading",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(n.createElement)("div",{className:"bwf-c-save-content-loading"},Object(n.createElement)(k.a,{options:{loop:!0,autoplay:!0,animationData:T,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}},height:480,width:480}),Object(n.createElement)("div",{style:{marginTop:"-60px",fontSize:"21px",fontWeight:"400",paddingLeft:"40px"}},Object(h.__)("Launching Editor","wp-marketing-automations")))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(u.Card,{className:"bwf-template-card bwf-template-placeholder"},Object(n.createElement)("div",{className:"bwf-template-card-header bwf-h4"},"Template"),Object(n.createElement)("div",{className:"bwf-p-15"},[1,2,3].map((function(e){return Object(n.createElement)("div",{key:e,className:"bwf-placeholder-temp"})})),Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(n.createElement)("div",{className:"bwf-btn-section"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn "}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn "}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn"})),Object(n.createElement)("div",{className:"bwf-btn-section"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn btn-small"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn btn-small"}))),Object(n.createElement)("div",{key:4,className:"bwf-editor-placeholder"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-small"}),Object(n.createElement)("div",{className:"bwf-btn-section"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn"})),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)("div",{key:5,className:"bwf-placeholder-temp bwf-medium"}),Object(n.createElement)("div",{className:"bwf_clear_30"}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(n.createElement)("div",{className:"bwf-h-0"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-30"}))):Object(n.createElement)(N.a,{status:"error",isDismissible:!1,className:"bwf-m-0 bwf-mb-10"},X.hasOwnProperty("message")?X.message:Object(h.__)("Unable to load template","wp-marketing-automations")):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-template-card"},Object(n.createElement)("div",{className:"bwf-template-card-header bwf-h4"},Object(h.__)("Template","wp-marketing-automations")),!Object(p.isEmpty)(Y)&&Object(n.createElement)(u.Card,{className:"bwf-name-card bwf-p-25"},Object(n.createElement)(P.a,null),Object(n.createElement)(N.a,{status:"error",isDismissible:!1,className:"bwf-m-0 bwf-mb-10"},Y.map((function(e,t){return Object(n.createElement)(n.Fragment,{key:"bwf-template-card-error-".concat(t)},e,Object(n.createElement)("br",null))})))),Object(n.createElement)(l.a,{disableDefaultButtons:!0,initData:{content:[x(ee)]},validateEmailContent:!1,apiMethods:ne,showSenderInfo:!1,showSaveTemplate:!1,showTemplateTypeSelector:!0,returnData:!0,setMailData:function(e){var t=ee;if((e=e[1]).hasOwnProperty("subject")&&(t.subject=e.subject),e.hasOwnProperty("preheader")&&(t.data=$($({},t.data),{},{preheader:e.preheader})),e.hasOwnProperty("type")&&G.hasOwnProperty(e.type)&&(t.mode=G[e.type]),e.hasOwnProperty("utmEnabled")&&(t.data=$($({},t.data),{},{utmEnabled:e.utmEnabled})),e.hasOwnProperty("utm")&&(t.data=$($({},t.data),{},{utm:e.utm})),"editor"===e.type)e.hasOwnProperty("editor")&&(e.editor.hasOwnProperty("body")&&(t.template=e.editor.body),e.editor.hasOwnProperty("design")&&(t.data.design=e.editor.design));else if("block"===e.type){if(e.hasOwnProperty("block")){var r=e.block,n=r.template,a=void 0===n?"":n,o=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(r,R);""!==a&&(t.template=e.block.template),t.data.block=o}}else t.template=e.body;O($($({},ee),t))},showTab:!1,disabled:K.loading,showTemplateButton:!1})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-j-end"},Object(n.createElement)(s.a,{isPrimary:!0,className:"bwf-crm-navigation-next bwf-display-flex",isBusy:K.loading,disabled:K.loading,onClick:function(){te()}},!Object(a.fc)()&&Object(n.createElement)(_.a,{icon:"king",size:"16",color:"#fff"}),Object(h.__)("Save","wp-marketing-automations"))))),!Object(a.fc)()&&Object(n.createElement)(D.b,{isOpen:M,onRequestClose:function(){return J(!1)},modalContent:{isFeature:!0,featureTitle:Object(h.__)("Templates","wp-marketing-automations")}}))},Q=r(359);r(1239),t.default=function(e){var t=e.match.params.id,r=Object(c.i)(),i=Object(o.a)(),l=i.setBackLink,u=i.setBackLinkLabel;return Object(Q.a)(Object(h.__)("Templates","wp-marketing-automations")),Object(n.useEffect)((function(){Object(a.m)("Template #"+t),l(Object(c.f)({},"/templates",r)),u(Object(h.__)("All Templates","wp-marketing-automations"))})),Object(n.createElement)(n.Fragment,null,Object(n.createElement)(P.a,null),Object(n.createElement)(Y,{templateId:t,query:r}))}}}]);