(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1096:function(e,t,n){"use strict";var r=n(0),a=n(6),o=n.n(a),c=n(1),i=n(7),l=(n(1100),n(40)),s=n(3);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=u(Object(r.useState)(!1),2),n=t[0],a=t[1],f=e.modalContent,b=void 0===f?{}:f,m=e.content,p=e.onPage,d=void 0!==p&&p;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:o()("bwf-upgrade-pro-overlay",{"is-on-page":d}),onClick:function(){d||a(!0)}},d?Object(r.createElement)(l.a,{showHeader:!1,modalContent:b}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-king-tag-pro"},Object(r.createElement)(i.a,{icon:"king",size:38,color:"#fff"})),Object(r.createElement)("span",{className:"bwf-mt-8"},m||(Object(s.ac)()?Object(c.__)("Activate your license to continue using premium features without interruption.","wp-marketing-automations"):Object(c.__)("This feature is locked. To get full access of FunnelKit Automation upgrade to PRO","wp-marketing-automations"))))),Object(r.createElement)(l.b,{isOpen:n,onRequestClose:function(){return a(!1)},modalContent:b}))}},1100:function(e,t,n){},1103:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);var a=function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}},1105:function(e,t,n){"use strict";var r=n(51),a=n(3),o=n(2);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=["fetch","setStateProp"],l=["s","page","filter","path"],s=["s","page","filter","path"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("contacts"),t=e.fetch,n=e.setStateProp;return f(f({},m(e,i)),{},{setStateProp:n,fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,f=arguments.length>6&&void 0!==arguments[6]&&arguments[6],b=arguments.length>7&&void 0!==arguments[7]&&arguments[7],p=arguments.length>8&&void 0!==arguments[8]&&arguments[8],d=arguments.length>9&&void 0!==arguments[9]&&arguments[9],O=arguments.length>10&&void 0!==arguments[10]&&arguments[10],j=arguments.length>11&&void 0!==arguments[11]?arguments[11]:[];n("isLoading",!0);var y=e.s,w=void 0===y?"":y,v=(e.page,e.filter,e.path,m(e,l)),g={offset:r,limit:c,search:w,filters:v,get_wc:Object(a.uc)(),grab_totals:i,only_count:s,fetch_base:u,grab_custom_fields:!1,include_unsubs:!f,exclude_unsubs_lists:b,includeUnverified:d,includeSoftBounce:O,include_ids:j},h=Object(a.Eb)("table_sort_data"),E=h.hasOwnProperty("contact_sort_data")?h.contact_sort_data:{},_=Object(o.isObject)(E)&&!Object(o.isEmpty)(E)?E:{},k=_.orderby,S=void 0===k?"last_modified":k,P=_.order,N=void 0===P?"desc":P;N&&S&&(g.order=N,g.order_by=S),p&&(g.unopen_broadcast=parseInt(p)),t("GET",Object(a.C)("/contacts"),g)},fetchListing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,f=arguments.length>6&&void 0!==arguments[6]&&arguments[6],b=arguments.length>7&&void 0!==arguments[7]&&arguments[7],p=arguments.length>8&&void 0!==arguments[8]&&arguments[8];n("isLoading",!0);var d=e.s,O=void 0===d?"":d,j=(e.page,e.filter,e.path,m(e,s)),y={offset:r,limit:c,search:O,filters:j,get_wc:Object(a.uc)(),grab_totals:i,only_count:l,fetch_base:u,grab_custom_fields:!1,exclude_unsubs:f,exclude_unsubs_lists:b},w=Object(a.Eb)("table_sort_data"),v=w.hasOwnProperty("contact_sort_data")?w.contact_sort_data:{},g=Object(o.isObject)(v)&&!Object(o.isEmpty)(v)?v:{},h=g.orderby,E=void 0===h?"last_modified":h,_=g.order,k=void 0===_?"desc":_;k&&E&&(y.order=k,y.order_by=E),p&&(y.unopen_broadcast=parseInt(p)),t("GET",Object(a.C)("/v3/contacts/listing"),y)},startIndexing:function(){return t("GET",Object(a.C)("/contacts"),{start_indexing:!0})}})}},1116:function(e,t,n){"use strict";var r=n(52);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=["getStateProp"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(){var e=Object(r.a)("contacts"),t=e.getStateProp;return i(i({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,o)),{},{getContacts:function(){return t("contacts_list")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getTotalCount:function(){return parseInt(t("total"))},getCountData:function(){return t("countData")}})}},1126:function(e,t,n){"use strict";var r=n(0),a=n(28),o=n(1),c=n(204);t.a=function(e){var t=e.selected,n=e.onTagsChange;return Object(r.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(r.createElement)("div",{className:"bwf-input-label"},Object(o.__)("Add Tags","wp-marketing-automations")),Object(r.createElement)(a.a,{autocompleter:c.b,multiple:!1,allowFreeTextSearch:!0,inlineTags:!1,selected:t,onChange:function(e){n(e)},onRemoveTag:function(e,r){var a=t.filter((function(t){return!(t.key==e&&t.label==r)}));n(a)},placeholder:Object(o.__)("Search by tag name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},1143:function(e,t,n){"use strict";var r=n(0),a=n(28),o=n(1),c=n(204);t.a=function(e){var t=e.selected,n=e.onListsChange;return Object(r.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(r.createElement)("div",{className:"bwf-input-label"},Object(o.__)("Add to Lists","wp-marketing-automations")),Object(r.createElement)(a.a,{autocompleter:c.a,multiple:!1,allowFreeTextSearch:!0,selected:t,onChange:function(e){n(e)},onRemoveTag:function(e){var r=t.filter((function(t){return t.key!=e}));n(r)},placeholder:Object(o.__)("Search by list name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},1144:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(125),a={"am-AM":/^(\+?374|0)(33|4[134]|55|77|88|9[13-689])\d{6}$/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)([569]\d{7}|41\d{6})$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?([79][1-9])\d{6}$/,"ar-PS":/^(\+?970|0)5[6|9](\d{7})$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SD":/^((\+?249)|0)?(9[012369]|1[012])\d{7}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(10|5[015]|7[07]|99)\d{7}$/,"ar-QA":/^(\+?974|0)?([3567]\d{7})$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^((\+49|0)1)(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"dv-MV":/^(\+?960)?(7[2-9]|9[1-9])\d{5}$/,"el-GR":/^(\+?30|0)?6(8[5-9]|9(?![26])[0-9])\d{7}$/,"el-CY":/^(\+?357?)?(9(9|7|6|5|4)\d{6})$/,"en-AI":/^(\+?1|0)264(?:2(35|92)|4(?:6[1-2]|76|97)|5(?:3[6-9]|8[1-4])|7(?:2(4|9)|72))\d{4}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-AG":/^(?:\+1|1)268(?:464|7(?:1[3-9]|[28]\d|3[0246]|64|7[0-689]))\d{4}$/,"en-BM":/^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}$))/,"en-BS":/^(\+?1[-\s]?|0)?\(?242\)?[-\s]?\d{3}[-\s]?\d{4}$/,"en-GB":/^(\+?44|0)7[1-9]\d{8}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|53|28|55|59)\d{7}$/,"en-GY":/^(\+592|0)6\d{6}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-JM":/^(\+?876)?\d{7}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"fr-CF":/^(\+?236| ?)(70|75|77|72|21|22)\d{6}$/,"en-SS":/^(\+?211|0)(9[1257])\d{7}$/,"en-KI":/^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,"en-KN":/^(?:\+1|1)869(?:46\d|48[89]|55[6-8]|66\d|76[02-7])\d{4}$/,"en-LS":/^(\+?266)(22|28|57|58|59|27|52)\d{6}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-MW":/^(\+?265|0)(((77|88|31|99|98|21)\d{7})|(((111)|1)\d{6})|(32000\d{4}))$/,"en-NA":/^(\+?264|0)(6|8)\d{7}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PG":/^(\+?675|0)?(7\d|8[18])\d{6}$/,"en-PK":/^((00|\+)?92|0)3[0-6]\d{8}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?0[79][567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"en-BW":/^(\+?267)?(7[1-8]{1})\d{6}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-CU":/^(\+53|0053)?5\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8|3|2]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-GT":/^(\+?502)?[2|6|7]\d{7}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-NI":/^(\+?505)\d{7,8}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-SV":/^(\+?503)?[67]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"es-VE":/^(\+?58)?(2|4)\d{9}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4[0-6]|50)\s?(\d\s?){4,8}$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-BF":/^(\+226|0)[67]\d{7}$/,"fr-BJ":/^(\+229)\d{8}$/,"fr-CD":/^(\+?243|0)?(8|9)\d{8}$/,"fr-CM":/^(\+?237)6[0-9]{8}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-PF":/^(\+?689)?8[789]\d{6}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"fr-WF":/^(\+681)?\d{6}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36|06)(20|30|31|50|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"ir-IR":/^(\+98|0)?9\d{9}$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(79\d{7}|5\d{8})$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"ky-KG":/^(\+996\s?)?(22[0-9]|50[0-9]|55[0-9]|70[0-9]|75[0-9]|77[0-9]|880|990|995|996|997|998)\s?\d{3}\s?\d{3}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"mg-MG":/^((\+?261|0)(2|3)\d)?\d{7}$/,"mn-MN":/^(\+|00|011)?976(77|81|88|91|94|95|96|99)\d{6}$/,"my-MM":/^(\+?959|09|9)(2[5-7]|3[1-2]|4[0-5]|6[6-9]|7[5-9]|9[6-9])[0-9]{7}$/,"ms-MY":/^(\+?60|0)1(([0145](-|\s)?\d{7,8})|([236-9](-|\s)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nl-AW":/^(\+)?297(56|59|64|73|74|99)\d{5}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?([5-8]\d|45) ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[1-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+?244)?9\d{8}$/,"ro-MD":/^(\+?373|0)((6(0|1|2|6|7|8|9))|(7(6|7|8|9)))\d{6}$/,"ro-RO":/^(\+?40|0)\s?7\d{2}(\/|\s|\.|-)?\d{3}(\s|\.|-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"so-SO":/^(\+?252|0)((6[0-9])\d{7}|(7[1-9])\d{7})$/,"sq-AL":/^(\+355|0)6[2-9]\d{7}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"tg-TJ":/^(\+?992)?[5][5]\d{7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"tk-TM":/^(\+993|993|8)\d{8}$/,"uk-UA":/^(\+?38)?0(50|6[36-8]|7[357]|9[1-9])\d{7}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"dz-BT":/^(\+?975|0)?(17|16|77|02)\d{6}$/,"ar-YE":/^(((\+|00)9677|0?7)[0137]\d{7}|((\+|00)967|0)[1-7]\d{6})$/,"ar-EH":/^(\+?212|0)[\s\-]?(5288|5289)[\s\-]?\d{5}$/,"fa-AF":/^(\+93|0)?(2{1}[0-8]{1}|[3-5]{1}[0-4]{1})(\d{7})$/,"mk-MK":/^(\+?389|0)?((?:2[2-9]\d{6}|(?:3[1-4]|4[2-8])\d{6}|500\d{5}|5[2-9]\d{6}|7[0-9][2-9]\d{5}|8[1-9]\d{6}|800\d{5}|8009\d{4}))$/};function o(e,t,n){if(Object(r.a)(e),n&&n.strictMode&&!e.startsWith("+"))return!1;if(Array.isArray(t))return t.some((function(t){if(a.hasOwnProperty(t)&&a[t].test(e))return!0;return!1}));if(t in a)return a[t].test(e);if(!t||"any"===t){for(var o in a){if(a.hasOwnProperty(o))if(a[o].test(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))}a["en-CA"]=a["en-US"],a["fr-CA"]=a["en-CA"],a["fr-BE"]=a["nl-BE"],a["zh-HK"]=a["en-HK"],a["zh-MO"]=a["en-MO"],a["ga-IE"]=a["en-IE"],a["fr-CH"]=a["de-CH"],a["it-CH"]=a["fr-CH"];Object.keys(a)},1170:function(e,t,n){},1173:function(e,t,n){},1190:function(e,t,n){},1191:function(e,t,n){},1192:function(e,t,n){},1193:function(e,t,n){},1299:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),o=n(17),c=n(6),i=n.n(c),l=n(3),s=n(147),u=n(2),f=n(205),b=n(60),m=n(61),p=n(5),d=n(19),O=n(1116),j=n(1105),y=n(9),w=n.n(y),v=n(365),g=n(7),h=n(160),E=n(26),_=n(11);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=["body"];function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return T(s,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&s&&!a&&t<u.length;t++){var a,o=u[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),i=u,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(s=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,a,o),!0),s}var c={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(T(t={},r,(function(){return this})),t),f=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,T(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,T(f,"constructor",s),T(s,"constructor",l),l.displayName="GeneratorFunction",T(s,a,"GeneratorFunction"),T(f),T(f,a,"Generator"),T(f,r,(function(){return this})),T(f,"toString",(function(){return"[object Generator]"})),(x=function(){return{w:o,m:b}})()}function T(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(T=function(e,t,n,r){function o(t,n){T(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function A(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){var t=e.contact,n=Object(r.useContext)(l.h),o=I(Object(r.useState)(!1),2),c=o[0],i=o[1],s=I(Object(r.useState)({type:"email",title:"",body:"",id:0,send:!1}),2),f=s[0],b=s[1],m=I(Object(r.useState)({status:!1,message:""}),2),d=m[0],O=m[1],j=[{value:"",label:Object(a.__)("Select Type","wp-marketing-automations")}].concat(Object(l.N)()),y=function(){var r,a=(r=x().m((function r(a){var o,c;return x().w((function(r){for(;;)switch(r.p=r.n){case 0:return(o={title:a.title,body:a.body,type:a.type,private:a.send,modified_by:Object(l.Q)()}).created_by=Object(l.Q)(),i(!0),r.p=1,r.n=2,w()({path:Object(l.C)("/v3/contacts/".concat(t.id,"/notes/")),method:"POST",data:{notes:o},headers:{"Content-Type":"application/json"}}).then((function(t){if(200!=t.code)throw Error(Object(l.w)(null==t?void 0:t.message));n(t.message),e.setModelStatus({status:!1,contactInfo:{}})})).catch((function(e){throw Error(Object(l.w)(null==e?void 0:e.message))}));case 2:r.n=4;break;case 3:r.p=3,c=r.v,O({status:!0,message:c.message}),i(!1);case 4:Object(l.Pb)(n,3e3);case 5:return r.a(2)}}),r,null,[[1,3]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var o=r.apply(e,t);function c(e){A(o,n,a,c,i,"next",e)}function i(e){A(o,n,a,c,i,"throw",e)}c(void 0)}))});return function(e){return a.apply(this,arguments)}}();return Object(r.createElement)(p.Modal,{className:"bwf-admin-modal bwf-admin-modal-large bwf-message-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Add Note","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return e.setModelStatus(!1)},className:"bwf-modal-close"},Object(r.createElement)(g.a,{icon:"close",color:"#353030"}))),Object(r.createElement)("div",{className:"bwf-form-fields"},d.status&&Object(r.createElement)(E.a,{status:"error",onRemove:function(){return O(!1)},className:"bwf-send-note-notice"},d.message?d.message:Object(a.__)("Title, type and body are mandatory field. Kindly fill them","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-message-wrap"},Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-mb-24"},Object(r.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Contact","wp-marketing-automations")),Object(r.createElement)("div",null,Object(r.createElement)("span",{className:"bwf-highlight-content"},Object(r.createElement)("b",null,t.f_name+" "+t.l_name)," ( "+t.email+" ) "))),Object(r.createElement)("div",{className:"bwf-mb-24"},Object(r.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Type","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-select-full-wrap"},Object(r.createElement)(p.SelectControl,{value:f.type,className:"bwf-w-100p",options:j,onChange:function(e){return b(N(N({},f),{},{type:e}))},disabled:c}))),Object(r.createElement)("div",{className:"bwf-mb-24"},Object(r.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Title","wp-marketing-automations")),Object(r.createElement)(p.TextControl,{type:"text",value:f.title,placeholder:Object(a.__)("Type here â€¦","wp-marketing-automations"),disabled:c,onChange:function(e){return b(N(N({},f),{},{title:e}))}})),Object(r.createElement)("div",{className:"bwf-message-textarea"},Object(r.createElement)(h.a,{keyid:"bwf-note-editor",content:f.body,setContent:function(e){b((function(t){t.body;return N(N({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,S)),{},{body:e})}))},height:200})),Object(r.createElement)("div",{className:"bwf-message-footer"},0==parseInt(f.id)&&Object(r.createElement)("div",{className:"bwf-note-send"},Object(r.createElement)(p.ToggleControl,{label:Object(a.__)("Send Note to Contact","wp-marketing-automations"),checked:Boolean(parseInt(f.send)),onChange:function(e){return b(N(N({},f),{},{send:e?"1":"0"}))},className:"bwf-tooglecontrol-advance"})),Object(r.createElement)("div",{className:"bwf-button-col"},Object(r.createElement)(_.a,{className:"bwf-cancel-btn",onClick:function(){return e.setModelStatus(!1)},disabled:c},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(_.a,{isPrimary:!0,isBusy:c,disabled:c,onClick:function(){Object(u.isEmpty)(f.title)||Object(u.isEmpty)(f.body)||Object(u.isEmpty)(f.type)?O({status:!0,message:""}):(O({status:!1,message:""}),b(N(N({},f),{},{loading:!0})),y(f))}},Object(a.__)("Add Note","wp-marketing-automations")))))))},F=n(49),G=n(150),L=n(12),M=n(352),R=n(149),U=(n(1170),n(1109)),B=n(1125),q=n(208),z=n(1096),H=function(e){var t=e.isOpen,n=void 0!==t&&t,o=e.query,c=Object(U.a)(!0,!0),i=c.loading,s=c.filters;return n&&!Object(l.fc)()?Object(r.createElement)("div",{className:"bwf-filter-placeholder bwf-w-100p "+(Object(l.fc)()?"":"bwf-position-relative bwf-h-200")},!!s&&Object(r.createElement)(q.a,{siteLocale:"en-US",currency:{},config:{title:Object(a.__)("Select Rules","wp-marketing-automations"),filters:s,footerComponent:function(e){return Object(r.createElement)(B.a,{filter:e.data,config:e.config})},enableGrouping:!0},path:"/contacts",query:{}}),Object(r.createElement)(z.a,{modalContent:{isFeature:!0,featureTitle:Object(a.__)("Contact Filters","wp-marketing-automations"),proLink:Object(l.ib)("upgrade",{utm_medium:"Contacts+Filters"})},content:Object(a.__)("We're sorry, this feature is not available on your plan. Learn more about Contact Filters.","wp-marketing-automations")})):n&&i?Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-filter-placeholder"},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start gap-12"},Object(r.createElement)("div",{className:"bwf-w-60"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-60"})),Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-210"}),Object(r.createElement)("br",null),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-30 bwf-w-90"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-30 bwf-w-90"}))),Object(r.createElement)("div",{className:"bwf_clear_20"})):n&&!!s&&Object(r.createElement)(q.a,{siteLocale:"en-US",currency:Object(l.uc)()?bwfcrm_contacts_data.currency:{},config:{title:Object(a.__)("Select Rules","wp-marketing-automations"),filters:s,footerComponent:function(e){return Object(r.createElement)(B.a,{filter:e.data,config:e.config})},enableGrouping:!0},path:"/contacts",query:o})},K=n(44),V=n(87);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return Y(s,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&s&&!a&&t<u.length;t++){var a,o=u[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),i=u,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(s=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,a,o),!0),s}var c={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Y(t={},r,(function(){return this})),t),f=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Y(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,Y(f,"constructor",s),Y(s,"constructor",l),l.displayName="GeneratorFunction",Y(s,a,"GeneratorFunction"),Y(f),Y(f,a,"Generator"),Y(f,r,(function(){return this})),Y(f,"toString",(function(){return"[object Generator]"})),(Q=function(){return{w:o,m:b}})()}function Y(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Y=function(e,t,n,r){function o(t,n){Y(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=W(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==W(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var re=function(e){var t=e.refreshTable,n=te(Object(r.useState)(!1),2),o=n[0],c=n[1],i=Object(l.Eb)("table_sort_data"),s=i.hasOwnProperty("contact_sort_data")?i.contact_sort_data:{},f=Object(u.isObject)(s)&&!Object(u.isEmpty)(s)?s:{},m=f.orderby,p=void 0===m?"last_modified":m,d=f.order,O=void 0===d?"desc":d,j=Object(r.useContext)(l.h),y=[{value:"f_name",label:Object(a.__)("Contact Name","wp-marketing-automations")},{value:"creation_date",label:Object(a.__)("Creation Date","wp-marketing-automations")},{value:"last_modified",label:Object(a.__)("Last Updated","wp-marketing-automations")},{value:"country",label:Object(a.__)("Country","wp-marketing-automations")},{value:"state",label:Object(a.__)("State","wp-marketing-automations")}];Object(l.uc)()&&y.push({value:"total_order_count",label:Object(a.__)("Orders","wp-marketing-automations")},{value:"total_order_value",label:Object(a.__)("Total Spend","wp-marketing-automations")},{value:"l_order_date",label:Object(a.__)("Last Order Date","wp-marketing-automations")});var v=te(Object(r.useState)(p),2),h=v[0],E=v[1],k=te(Object(r.useState)(O),2),S=k[0],P=k[1],N=function(){var e,n=(e=Q().m((function e(n){var r,o,s;return Q().w((function(e){for(;;)switch(e.p=e.n){case 0:return c(!0),e.p=1,r={orderby:h,order:S},(o=J({},i)).contact_sort_data=r,e.n=2,w()({path:Object(l.C)("/user-preference/".concat(Object(l.Q)(),"/")),method:"POST",data:{data:{table_sort_data:o}}}).then((function(e){if(200!==e.code)throw Error(Object(l.w)(null==e?void 0:e.message));bwfcrm_contacts_data.table_column_data.table_sort_data.contact_sort_data=r,j(e.message),t(),n(),c(!1)})).catch((function(e){throw Error(Object(l.w)(null==e?void 0:e.message))}));case 2:e.n=4;break;case 3:e.p=3,s=e.v,c(!1),j(s.message?s.message:Object(a.__)("Error in saving sort data","wp-marketing-automations"));case 4:Object(l.Pb)(j,2e3);case 5:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){ee(o,r,a,c,i,"next",e)}function i(e){ee(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(e){return n.apply(this,arguments)}}();return Object(r.createElement)("div",{className:"bwf-custom-ellipsis bwf-sort-ellipsis-contact-list",style:{width:"30px"}},Object(r.createElement)(b.a,{label:"",buttonIcon:Object(r.createElement)("div",{className:"bwf-sort-button components-button is-light bwf-btn-small",key:"import",style:{width:"30px",padding:"7px"},title:Object(a.__)("Sort Order","wp-marketing-automations")},Object(r.createElement)(g.a,{icon:"sort",size:14})),renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-heading-1"},Object(a.__)("Sorting","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-heading-2 bwf-mt-16"},Object(a.__)("Sort Order","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-contact-sort-popover"},Object(r.createElement)("div",{className:"bwf-display-flex gap-8 bwf-flex-start bwf-sort-order-buttons"},Object(r.createElement)(_.a,{isSecondary:!S||"desc"===S,isTertiary:S&&"desc"!==S,onClick:function(){return P("desc")}},Object(a.__)("Descending","wp-marketing-automations")),Object(r.createElement)(_.a,{isSecondary:S&&"asc"===S,isTertiary:S&&"asc"!==S,onClick:function(){return P("asc")}},Object(a.__)("Ascending","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-sort-column-list bwf-mt-16"},Object(r.createElement)(V.a,{className:"bwfcrm-inline-option",selected:h,label:"",options:y,onChange:function(e){return E(e)}})),Object(r.createElement)("div",{className:"bwf-contact-sort-action bwf-mt-16"},Object(r.createElement)(_.a,{isPrimary:!0,className:"bwf-update-button",onClick:function(){return N(t)},isBusy:o},Object(a.__)("Update","wp-marketing-automations")))))}}))},ae=n(179),oe=n(126);function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e){return function(e){if(Array.isArray(e))return je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ce(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return be(s,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&s&&!a&&t<u.length;t++){var a,o=u[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),i=u,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(s=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,a,o),!0),s}var c={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(be(t={},r,(function(){return this})),t),f=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,be(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,be(f,"constructor",s),be(s,"constructor",l),l.displayName="GeneratorFunction",be(s,a,"GeneratorFunction"),be(f),be(f,a,"Generator"),be(f,r,(function(){return this})),be(f,"toString",(function(){return"[object Generator]"})),(fe=function(){return{w:o,m:b}})()}function be(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(be=function(e,t,n,r){function o(t,n){be(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function me(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function pe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){me(o,r,a,c,i,"next",e)}function i(e){me(o,r,a,c,i,"throw",e)}c(void 0)}))}}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||Oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){if(e){if("string"==typeof e)return je(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ye=Object(oe.c)((function(){return Object(r.createElement)(g.a,{icon:"menu-2",size:20})})),we=Object(oe.b)((function(e){var t=e.item,n=e.onRemove;return Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-contact-preferences__item"},Object(r.createElement)("div",{className:"bwf-contact-preferences__item-title"},Object(r.createElement)(ye,null),t.label),Object(r.createElement)("div",{className:"bwf-contact-preferences__item-type"},Object(r.createElement)("span",{className:"bwf-tags bwf-tag-gray bwf-w-fit-content"},t.groupLabel)),Object(r.createElement)("div",{className:"bwf-display-flex bwf-cursor-pointer",onClick:function(){n(Object.keys(t)[0],t.groupKey)}},Object(r.createElement)(g.a,{icon:"delete",size:20}))))})),ve=Object(oe.a)((function(e){var t=e.items,n=e.onRemove;return Object(r.createElement)("div",{className:"bwf-contact-preferences__items-wrap"},Object(u.isEmpty)(t)?Object(r.createElement)("div",{className:"bwf-h4 bwf_text_center bwf-m-20"},Object(a.__)("No Additional Columns Selected. Click the Add New Columns button.","wp-marketing-automations")):t.map((function(e,t){return Object(r.createElement)(we,{item:e,key:"bwf-contact-preferences__item-".concat(t),index:t,onRemove:n})})))})),ge=["contact_details","geography","contact_custom_fields","woocommerce","segments","engagement"],he=function(e){var t=e.onRequestClose,n=e.refreshTable,o=e.setModelData,c=Object(r.useContext)(l.h),i=de(Object(r.useState)(!1),2),s=i[0],f=i[1],b=de(Object(r.useState)(!1),2),m=b[0],d=b[1],O=de(Object(r.useState)(!1),2),j=O[0],y=O[1],v=de(Object(r.useState)(0),2),h=v[0],E=v[1],k=Object(r.useRef)(null),S=de(Object(r.useState)([]),2),P=S[0],N=S[1],C=de(Object(r.useState)([]),2),x=C[0],T=C[1],A=de(Object(r.useState)({}),2),I=A[0],D=A[1],$=de(Object(r.useState)(!1),2),F=$[0],G=$[1],L=Object(r.useRef)(new AbortController),M=Object(U.a)(!0,!1),R=M.loading,B=void 0===R||R,q=M.filters,z=void 0===q?{}:q,H=function(){var e=pe(fe().m((function e(){return fe().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,w()({path:Object(l.C)("/contact/export/custom-selections"),signal:L.current.signal}).then((function(e){if(200===e.code){var t=Object.create({});Object.keys(e.result).forEach((function(n){"wishlist-member"!==n&&(t[n]={label:e.result[n].name},t[n].fields=Object.keys(e.result[n].selections).map((function(t){return{key:e.result[n].selections[t].slug,label:e.result[n].selections[t].name}})))})),D(t),d(!0)}})).catch((function(e){console.log(e)}));case 1:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}(),V=Object(r.useMemo)((function(){var e=[],t=["engaged","unengaged","broadcast_sent","broadcast_open","broadcast_click"];return Object.entries(z).forEach((function(n){var r=de(n,2),a=r[0],o=r[1];if(t.includes(a))return!1;var c;c={key:a,label:o.labels.add},e.hasOwnProperty(o.group)?e[o.group].fields.push(c):e[o.group]={label:o.groupLabel,fields:[c]}})),se(se({},e),I)}),[z,I]);Object(r.useEffect)((function(){return Object(l.fc)()?H():d(!0),function(){L.current.abort()}}),[]),Object(r.useEffect)((function(){if(Object(u.isEmpty)(P)&&m&&!F){if(V.hasOwnProperty("contact_details")){var e=[],t=[];if(!Object(u.isEmpty)(bwfcrm_contacts_data.table_column_data.contactv2))bwfcrm_contacts_data.table_column_data.contactv2.map((function(t){Object(u.isObject)(t)&&e.push(t)})),Object.keys(V).forEach((function(n){V[n].fields.map((function(e){return e.key})).every((function(t){return e.some((function(e){return e.hasOwnProperty(t)}))}))&&t.push(ue({},n,V[n].label))}));N(e),T(t)}G(!0)}}),[V]);var W=function(e,t){var n=V[e].fields.map((function(e){return e.key}));if(x.some((function(t){return t.hasOwnProperty(e)})))N((function(e){return e.filter((function(e){return!n.some((function(t){return e.hasOwnProperty(t)}))}))})),T((function(t){return t.filter((function(t){return!t.hasOwnProperty(e)}))}));else{var r=V[e].fields.map((function(n){return ue(ue(ue(ue({},n.key,n.label),"label",n.label),"groupKey",e),"groupLabel",t)}));N((function(e){return Object(u.uniqBy)([].concat(ie(e),ie(r)),(function(e){return Object.keys(e)[0]}))})),T((function(n){return[].concat(ie(n),[ue({},e,t)])}))}},Q=function(){var e=pe(fe().m((function e(){var r;return fe().w((function(e){for(;;)switch(e.p=e.n){case 0:return f(!0),e.p=1,e.n=2,w()({path:Object(l.C)("/user-preference/".concat(Object(l.Q)(),"/")),method:"POST",data:{data:{contact_columnv2:P}}}).then((function(e){if(200!==e.code)throw Error(Object(l.w)(null==e?void 0:e.message));bwfcrm_contacts_data.table_column_data.contactv2=P,c(e.message),Object(l.Pb)(c,2e3),n(),t(),f(!1)})).catch((function(e){throw Error(Object(l.w)(null==e?void 0:e.message))}));case 2:e.n=4;break;case 3:e.p=3,r=e.v,f(!1),o({status:!0,modalTitle:Object(a.__)("Save Columns","wp-marketing-automations"),error:r.message?r.message:Object(a.__)("Error in saving preferences","wp-marketing-automations")});case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}();return Object(r.createElement)(p.Modal,{title:Object(r.createElement)(r.Fragment,null,Object(a.__)("Table Columns","wp-marketing-automations"),Object(r.createElement)("span",null,Object(a.__)("Add new columns or arrange existing columns in contact table","wp-marketing-automations"))),ref:k,onRequestClose:function(){return t()},className:"bwf-admin-modal bwf-contact-preferences-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-contact-preferences-modal__content"},j?Object(r.createElement)("div",{className:"bwf-contact-preferences"},Object(r.createElement)("div",{className:"bwf-contact-preferences__header"},Object(r.createElement)("div",{className:"bwf-contact-preferences__back-btn",onClick:function(){return y(!1)}},Object(r.createElement)(g.a,{icon:"arrow-left-long",width:20,height:14}),Object(r.createElement)("span",null,Object(a.__)("Back","wp-marketing-automations")))),Object(r.createElement)("div",{className:"bwf-contact-preferences__items-wrap"},Object(u.isEmpty)(Object.keys(V))||B?Object(r.createElement)(Ee,null):[].concat(ge,ie(Object.keys(I))).map((function(e,t){return V.hasOwnProperty(e)&&Object(r.createElement)("div",{className:"bwf-contact-preferences__add-col-group",key:"bwf-contact-preferences__add-col-group-".concat(t)},Object(r.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){return E((function(e){return e!==t&&t}))}},Object(r.createElement)("label",{className:"bwf-contact-preferences__add-col-group-header"},Object(r.createElement)(K.a,{checked:x.some((function(t){return t.hasOwnProperty(e)})),onChange:function(){return W(e,V[e].label)},onClick:function(t){t.stopPropagation(),W(e,V[e].label)}}),Object(r.createElement)("div",{className:"bwf-contact-preferences__add-col-group-title"},V[e].label,function(e){var t=V[e].fields.map((function(e){return e.key})),n=0;return t.forEach((function(e){P.forEach((function(t){t.hasOwnProperty(e)&&n++}))})),n>0?Object(r.createElement)("span",null," (",n," Selected )"):""}(e))),Object(r.createElement)(_.a,{className:"bwf-contact-preferences__accordian-icon",onClick:function(e){e.stopPropagation(),E((function(e){return e!==t&&t}))}},Object(r.createElement)(g.a,{icon:h===t?"angle-up":"angle-down",width:"16",height:"18"}))),h===t&&Object(r.createElement)("div",{className:"bwf-contact-preferences__add-col-group-content"},V[e].fields.map((function(t,n){return Object(r.createElement)("label",{className:"bwf-contact-preferences__add-col-group-item",key:"bwf-contact-preferences__add-col-group-item-".concat(n)},Object(r.createElement)(K.a,{checked:P.some((function(e){return e.hasOwnProperty(t.key)})),onChange:function(){return function(e,t,n,r){var a=V[n].fields.map((function(e){return e.key}));P.some((function(t){return t.hasOwnProperty(e)}))?N((function(t){var r=t.filter((function(t){return!t.hasOwnProperty(e)}));return a.every((function(e){return r.hasOwnProperty(e)}))||T((function(e){return e.filter((function(e){return!e.hasOwnProperty(n)}))})),r})):N((function(o){var c=[].concat(ie(o),[ue(ue(ue(ue({},e,t),"label",t),"groupKey",n),"groupLabel",r)]);return a.every((function(e){return c.some((function(t){return t.hasOwnProperty(e)}))}))&&T((function(e){return[].concat(ie(e),[ue({},n,r)])})),c}))}(t.key,t.label,e,V[e].label)}}),Object(r.createElement)("div",null,t.label))}))))})))):Object(r.createElement)("div",{className:"bwf-contact-preferences"},Object(r.createElement)("div",{className:"bwf-contact-preferences__header"},Object(r.createElement)("div",{className:"bwf-contact-preferences__header-heading"},Object(a.__)("Columns","wp-marketing-automations")),Object(r.createElement)(_.a,{isSecondary:!0,className:"bwf-btn-small is-border",onClick:function(){return y(!0)}},Object(a.__)("Add New Columns","wp-marketing-automations"))),m&&F?Object(r.createElement)(ve,{helperContainer:k.current,helperClass:"bwf-contacts-preferences-item__helper",useDragHandle:!0,axis:"y",items:P,onRemove:function(e,t){var n=V[t].fields.map((function(e){return e.key}));N((function(r){var a=r.filter((function(t){return!t.hasOwnProperty(e)}));return n.every((function(e){return a.hasOwnProperty(e)}))||T((function(e){return e.filter((function(e){return!e.hasOwnProperty(t)}))})),a}))},onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;t!==n&&N((function(e){return Object(oe.d)(e,t,n)}))}}):Object(r.createElement)(Ee,{type:"fields"}))),Object(r.createElement)("div",{className:"bwf-contact-preferences__actions"},Object(r.createElement)(_.a,{onClick:function(){return t()},disabled:s},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(_.a,{isPrimary:!0,onClick:Q,disabled:s,isBusy:s},Object(a.__)("Save","wp-marketing-automations"))))},Ee=function(e){var t=e.type,n=void 0===t?"add-col":t;return ie(Array(5)).map((function(e,t){return Object(r.createElement)("div",{key:"bwf-preferences-placeholder-".concat(t),className:"bwf-contact-preferences__add-col-group"},Object(r.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-20 bwf-ml-16"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-ml-10 ".concat("fields"===n?"bwf-w-90":"bwf-w-120")})),"fields"===n&&Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-20 bwf-mr-15"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-mr-15 ".concat("fields"===n?"bwf-w-80 bwf-h-30 bwf-rounded-4":"bwf-w-20 bwf-h-20")})))}))},_e=function(e){var t=e.refreshTable,n=e.setModelData,o=de(Object(r.useState)(!1),2),c=o[0],i=o[1];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-sort-button components-button is-light bwf-btn-small "+(c?"is-active":""),onClick:function(){return i(!0)},style:{width:"30px",padding:"7px"},title:Object(a.__)("Column Preference","wp-marketing-automations")},Object(r.createElement)(g.a,{icon:"filters",size:16})),c&&Object(r.createElement)(he,{onRequestClose:function(){return i(!1)},refreshTable:t,setModelData:n}))},ke=n(54),Se=n(360),Pe=n(97),Ne=n(66),Ce=n(203),xe=n(40),Te=n(346),Ae=n(345),Ie=n(363);function De(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return $e(s,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&s&&!a&&t<u.length;t++){var a,o=u[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),i=u,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(s=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,a,o),!0),s}var c={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):($e(t={},r,(function(){return this})),t),f=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,$e(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,$e(f,"constructor",s),$e(s,"constructor",l),l.displayName="GeneratorFunction",$e(s,a,"GeneratorFunction"),$e(f),$e(f,a,"Generator"),$e(f,r,(function(){return this})),$e(f,"toString",(function(){return"[object Generator]"})),(De=function(){return{w:o,m:b}})()}function $e(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}($e=function(e,t,n,r){function o(t,n){$e(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function Fe(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Fe(o,r,a,c,i,"next",e)}function i(e){Fe(o,r,a,c,i,"throw",e)}c(void 0)}))}}function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Me(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Re=function(e){var t=e.onClose,n=void 0===t?function(){}:t,o=e.selectedContacts,c=void 0===o?[]:o,i=e.refreshContactData,s=void 0===i?function(){}:i,f=Le(Object(r.useState)({}),2),b=f[0],m=f[1],d=Le(Object(r.useState)([]),2),O=d[0],j=d[1],y=Le(Object(r.useState)(!0),2),v=y[0],h=y[1],k=Le(Object(r.useState)(!1),2),S=k[0],P=k[1],N=Le(Object(r.useState)([]),2),C=N[0],x=N[1],T=Le(Object(r.useState)([]),2),A=T[0],I=T[1],D=Le(Object(r.useState)(0),2),$=D[0],F=D[1],G=Le(Object(r.useState)(!1),2),M=G[0],R=G[1],U=function(){var e=Ge(De().m((function e(){return De().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,w()({path:Object(l.C)("/link-triggers/actions"),method:"GET"}).then((function(e){200===e.code&&(e.result.hasOwnProperty("actions")&&x(e.result.actions),e.result.hasOwnProperty("actions_schema")&&I(e.result.actions_schema)),h(!1)}));case 1:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useLayoutEffect)((function(){U(),j([]),m({}),R(!1)}),[]);var B,q=function(e){var t={};return Object.keys(e).map((function(n){if("new"!==n)if(Object(u.isEmpty)(e[n]))Object(u.isEmpty)(A[n])&&(t[n]=e[n]);else if(Object(u.isObject)(e[n])&&!Object(u.isArray)(e[n])){var r={};Object.keys(e[n]).map((function(t){Object(u.isEmpty)(e[n][t])||(r[t]=e[n][t])})),t[n]=r}else Object(u.isArray)(e[n])&&(t[n]=e[n])})),t},z=function(){var e=Ge(De().m((function e(){var t,n;return De().w((function(e){for(;;)switch(e.p=e.n){case 0:if(t=q(b),!Object(u.isEmpty)(t)||!(Object(u.isEmpty)(b)||1===Object.keys(b).length&&b.hasOwnProperty("new"))){e.n=1;break}return j([Object(a.__)("No actions selected","wp-marketing-automations")]),e.a(2);case 1:if(Object.entries(b).length===Object.entries(t).length){e.n=2;break}return j([Object(a.__)("Please fill all the required fields","wp-marketing-automations")]),e.a(2);case 2:return j([]),e.p=3,P(!0),e.n=4,w()({path:Object(l.C)("/bulk-action/"),method:"POST",data:{include_ids:c.map((function(e){return e.id})),actions:t,only_action:!0,enable_automation:M}}).then((function(e){200==e.code&&e.hasOwnProperty("result")&&e.result.hasOwnProperty("id")&&(Object(l.cb)()||(bwfcrm_contacts_data.first_bulk_action_id=1),F(e.result.id))})).catch((function(e){throw Error(Object(l.w)(null==e?void 0:e.message))}));case 4:e.n=6;break;case 5:e.p=5,n=e.v,j(n.message),P(!1);case 6:return e.a(2)}}),e,null,[[3,5]])})));return function(){return e.apply(this,arguments)}}();return S&&parseInt($)>0?Object(r.createElement)(p.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,onRequestClose:n,className:"bwf-admin-modal bwf-admin-modal-640 bwf-admin-modal-no-header bwf-show-close no-btn-css"},Object(r.createElement)("div",{className:"bwf-perform-bulk-action-modal-body bwf-mtb-12"},Object(r.createElement)("div",{className:"bwf-heading4-new bwf-display-flex"},Object(a.__)("Bulk Action has started","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-heading5-new bwf-display-flex bwf-mt-8 is-black"},Object(a.__)("The actions are being processing in the background.","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-display-flex gap-16 bwf-mt-24"},Object(r.createElement)(_.a,{onClick:function(){s(),n()},isPrimary:!0},Object(a.__)("View Contacts","wp-marketing-automations")),Object(r.createElement)(_.a,{onClick:function(){return Object(L.l)({page:"autonami",path:"/bulk-action/"+$},"/",{})},isSecondary:!0},Object(a.__)("Take to Bulk Action Screen","wp-marketing-automations"))))):Object(r.createElement)(p.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-large bwf-admin-modal-no-header"},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Create Bulk Action","wp-marketing-automations")),Object(r.createElement)("span",{onClick:n,className:"bwf-modal-close"},Object(r.createElement)(g.a,{icon:"close",color:"#353030"}))),O.length>0&&(B=Object(u.isArray)(O)?Object(r.createElement)("ul",null,O.map((function(e){return Object(r.createElement)("li",{key:Math.random()},e)}))):O,Object(r.createElement)(E.a,{status:"error"},B)),Object(r.createElement)("div",{className:"bwf-perform-bulk-action-modal-body "+(S?"is-creating-baction":"")},v?Object(r.createElement)("div",null,[1,2,3].map((function(e){return Object(r.createElement)("div",{key:e},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-space-between gap-24"},Object(r.createElement)("div",{className:"bwf-display-flex gap-20"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-20"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-400 bwf-h-20"})),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-20 bwf-w-150"})))}))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ie.b,{actions:C,actionSchema:A,value:Object(u.isEmpty)(b)?{new:{}}:b,setActionValue:function(e){m(e)},onEmptyError:function(e){j(e?Object(a.__)("Please fill the empty actions to add new one.","wp-marketing-automations"):"")}}),1===Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.2.1")&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_16"}),Object(r.createElement)(p.ToggleControl,{label:Object(a.__)("Trigger automations (for tag, list and status change related events)","wp-marketing-automations"),checked:M,className:"bwf-tooglecontrol-advance",onChange:function(e){R(e)}})))),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons bwf-mt-24"},v?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-30 bwf-mr-16"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-30"})):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(_.a,{className:"bwf-cancel-btn",onClick:n},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(_.a,{onClick:z,className:Object(u.size)(O)||function(){if(Object(u.isEmpty)(b)||1===Object.keys(b).length&&b.hasOwnProperty("new"))return!1;var e=[];return Object.keys(b).map((function(t){(""===t||Object(u.isEmpty)(b[t])&&!Object(u.isEmpty)(A[t]))&&e.push(t)})),!!Object(u.isEmpty)(e)}()?"bwf-no-ripple":"",isPrimary:!0,isBusy:S},Object(a.__)("Apply","wp-marketing-automations")))))},Ue=n(52);function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var qe=["getStateProp"];function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){Ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Be(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Be(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ve=function(){var e=Object(Ue.a)("importerList"),t=e.getStateProp;return He(He({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,qe)),{},{getImporter:function(){return t("import")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getOffset:function(){return parseInt(t("offset"))},getTotalCount:function(){return parseInt(t("total"))},getLoadingStatus:function(){return t("isLoading")}})},We=n(51);function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ye=["fetch","setStateProp"];function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){Xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Qe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var et=function(){var e=Object(We.a)("importerList"),t=e.fetch,n=e.setStateProp;return Je(Je({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Ye)),{},{fetch:function(e,n,r){t("GET",Object(l.C)("/contacts/importer/listing?limit=".concat(e,"&offset=").concat(n,"&search=").concat(r)))},setStateImporterListValues:function(e,t){n(e,t)}})},tt=(n(1173),n(361)),nt=n(1103),rt=n(22);function at(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return ot(s,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&s&&!a&&t<u.length;t++){var a,o=u[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),i=u,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(s=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,a,o),!0),s}var c={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(ot(t={},r,(function(){return this})),t),f=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,ot(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,ot(f,"constructor",s),ot(s,"constructor",l),l.displayName="GeneratorFunction",ot(s,a,"GeneratorFunction"),ot(f),ot(f,a,"Generator"),ot(f,r,(function(){return this})),ot(f,"toString",(function(){return"[object Generator]"})),(at=function(){return{w:o,m:b}})()}function ot(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(ot=function(e,t,n,r){function o(t,n){ot(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function ct(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function it(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){ct(o,r,a,c,i,"next",e)}function i(e){ct(o,r,a,c,i,"throw",e)}c(void 0)}))}}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return st(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?st(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ut=function(e){var t=e.importData,n=void 0===t?{}:t,o=e.showHeader,c=void 0===o||o,i=e.onClose,s=void 0===i?function(){}:i,f=e.onCancel,b=void 0===f?function(){}:f,m=n.import_id,p=void 0===m?0:m,d=Object(Pe.useQueryClient)();Object(r.useLayoutEffect)((function(){N(!0)}),[]);var O=lt(Object(r.useState)({}),2),j=O[0],y=O[1],v=lt(Object(r.useState)(""),2),h=v[0],k=v[1],S=lt(Object(r.useState)(!1),2),P=S[0],N=S[1],C=lt(Object(r.useState)(!1),2),x=C[0],T=C[1],A=lt(Object(r.useState)(!1),2),I=A[0],D=A[1],$=j.log_file,F=void 0===$?"":$,G=j.processed,M=void 0===G?0:G,R=j.skipped,U=void 0===R?0:R,B=j.failed,q=void 0===B?0:B,z=j.percentage,H=void 0===z?0:z,K=j.status,V=void 0===K?"in_progress":K,W=j.msg,Q=void 0===W?[]:W,Y=function(){var e=it(at().m((function e(){var t;return at().w((function(e){for(;;)switch(e.p=e.n){case 0:return T(!0),e.p=1,e.n=2,w()({method:"GET",path:Object(l.C)("/contacts/import/".concat(p,"/status"))}).then((function(e){200===e.code&&e.result&&(y(e.result),e.result.hasOwnProperty("status")&&"in_progress"!==e.result.status&&(bwfcrm_contacts_data.contact_import_inprogress=0)),N(!1),T(!1)})).catch((function(e){throw Error(Object(l.w)(null==e?void 0:e.message))}));case 2:e.n=4;break;case 3:e.p=3,t=e.v,N(!1),T(!1),k((null==t?void 0:t.message)||Object(a.__)("Unable to fetch import status","wp-marketing-automations"));case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=it(at().m((function e(){var t;return at().w((function(e){for(;;)switch(e.p=e.n){case 0:return D(!0),e.p=1,e.n=2,w()({method:"GET",path:Object(l.C)("/contacts/import/".concat(p,"/cancel"))}).then((function(e){D(!1),200===e.code&&e.result&&e.result.hasOwnProperty("status")&&e.result.status&&(bwfcrm_contacts_data.contact_import_inprogress=0,D(!1),b())})).catch((function(e){throw Error(Object(l.w)(null==e?void 0:e.message))}));case 2:e.n=4;break;case 3:e.p=3,t=e.v,D(!1),k((null==t?void 0:t.message)||Object(a.__)("Unable to update import status","wp-marketing-automations"));case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}();if(Object(nt.a)((function(){"in_progress"!==V||P||x||!Object(u.isEmpty)(h)||Y()}),5e3),Object(r.useEffect)((function(){return p?(bwfcrm_contacts_data.contact_import_inprogress=p,Y()):k(Object(a.__)("Import Id not Found ","wp-marketing-automations")),function(){d.invalidateQueries(["get-bwf-importers"])}}),[]),h)return Object(r.createElement)(E.a,{status:"error"},h);var J,X=Object(r.createElement)("div",{className:"bwf-import-confirmation"},c&&Object(r.createElement)("div",{className:"bwf-heading4-new"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-20 bwf-w-210"})),Object(r.createElement)("div",{className:"bwf_clear_16"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-20 bwf-w-100p"}),Object(r.createElement)("div",{className:"bwf-status"},Object(r.createElement)("div",{className:"bwf-title"},Object(r.createElement)("span",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-15"}),Object(r.createElement)("span",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-15"}),Object(r.createElement)("span",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-15"})),Object(r.createElement)("div",{className:"bwf-progressbar-title"},Object(r.createElement)("span",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-15"}))),Object(r.createElement)("div",{className:"bwf_clear_36"}),Object(r.createElement)("div",{className:"bwf-actions"},Object(r.createElement)("div",{className:"bwf-display-flex gap-16"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-40"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-40"})),Object(r.createElement)("div",{className:"bwf-title"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15"}))));return Object(r.createElement)("div",{className:"bwf-importer-third-step"},c&&Object(r.createElement)("div",{className:"bwf-heading-bold bwf-mb-24"},Object(a.__)("Processing","wp-marketing-automations")),P?X:Object(r.createElement)("div",{className:"bwf-import-confirmation"},c&&Object(r.createElement)("div",{className:"bwf-heading4-new"},Object(a.__)("Importing Contacts","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_16"}),Object(r.createElement)(tt.a,{noStriped:!0,size:"l",progress:"failed"===V?0:H}),Object(r.createElement)("div",{className:"bwf-status "+V},Object(r.createElement)("div",{className:"bwf-title"},Object(r.createElement)("span",{className:"bwf-heading7-new"},Object(a.__)("Success","wp-marketing-automations")+": "+M),Object(r.createElement)("span",{className:"bwf-heading7-new bwf-display-flex gap-4"},Object(a.__)("Skipped","wp-marketing-automations")+": "+U,Object(r.createElement)(rt.a,{icon:"help-circle",iconSize:16,noWrap:!0,toolTipText:Object(r.createElement)("span",{key:1,className:"bwfan_tooltip_text","data-position":"top"},Object(a.__)("Existing contact status or data is not updated","wp-marketing-automations"))})),Object(r.createElement)("span",{className:"bwf-heading7-new"},Object(a.__)("Failed","wp-marketing-automations")+": "+q)),Object(r.createElement)("div",{className:"bwf-progressbar-title"},"failed"===V?Object(r.createElement)("div",{className:"bwf-title"},Object(r.createElement)(g.a,{icon:"cross-border",color:"#E15334",size:16}),Object(r.createElement)("span",null,Object(a.__)("Importing Failed","wp-marketing-automations"))):H+Object(a.__)("% Completed","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-actions "+V},"failed"===V?Object(r.createElement)("div",{className:"bwf-error-wrapper"},Object(r.createElement)("div",{className:"bwf-error-title"},Object(a.__)("Issue","wp-marketing-automations")),Object(r.createElement)("ul",{className:"bwf-error-list"},(J=[],Q&&Q.length>0&&Q.forEach((function(e){J.push(Object(a.__)("Error","wp-marketing-automations")+": "+e)})),J.push(Object(a.__)("Press F12 for console details.","wp-marketing-automations")),J.push(Object(r.createElement)(r.Fragment,null,Object(a.__)("Send screenshot to our support team for help","wp-marketing-automations")+" ",Object(r.createElement)("a",{className:"bwf-normal-a-t bwf-t-underline",href:Object(l.ib)("support",{utm_medium:"Contact+Importer+Failed"}),target:"_blank",style:{color:"#135e96"},rel:"noreferrer"},Object(a.__)("Contact support","wp-marketing-automations")))),J).map((function(e,t){return"string"==typeof e&&e.startsWith("<")?Object(r.createElement)("li",{key:t,dangerouslySetInnerHTML:{__html:e}}):Object(r.createElement)("li",{key:t,className:"bwf-error-item"},e)})))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-display-flex gap-16"},"in_progress"===V?Object(r.createElement)(_.a,{isSecondary:!0,onClick:Z,isBusy:I},Object(a.__)("Cancel Import","wp-marketing-automations")):Object(r.createElement)(r.Fragment,null,F&&Object(r.createElement)(_.a,{isSecondary:!0,disabled:""===F,onClick:function(){window.open(Object(l.zb)()+"/wp-json"+Object(l.C)("/importer-log/download/".concat(p,"?bwf-nonce=").concat(Object(l.H)())),"_blank")}},Object(r.createElement)("div",{className:"bwf-display-flex gap-8"},Object(r.createElement)("span",null,Object(r.createElement)(g.a,{icon:"download",color:"#0073aa"})),Object(r.createElement)("span",null,Object(a.__)("Download Logs","wp-marketing-automations"))))),Object(r.createElement)(_.a,{isPrimary:!0,onClick:function(){"in_progress"!==V&&(bwfcrm_contacts_data.contact_import_inprogress=0),Object(L.l)({page:"autonami",path:"/contacts"},"/",{}),s()}},Object(a.__)("Go to Contacts","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-title"},Object(a.__)("Are you facing any challenges?","wp-marketing-automations")," ",Object(r.createElement)("a",{className:"bwf-normal-a-t bwf-t-underline",href:Object(l.ib)("support",{utm_medium:"Contact+Importer+Progress"}),target:"_blank",style:{color:"#135e96"},rel:"noreferrer"},Object(a.__)("Contact support","wp-marketing-automations")))))))};n(1190);function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return mt(s,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&s&&!a&&t<u.length;t++){var a,o=u[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),i=u,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(s=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,a,o),!0),s}var c={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(mt(t={},r,(function(){return this})),t),f=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,mt(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,mt(f,"constructor",s),mt(s,"constructor",l),l.displayName="GeneratorFunction",mt(s,a,"GeneratorFunction"),mt(f),mt(f,a,"Generator"),mt(f,r,(function(){return this})),mt(f,"toString",(function(){return"[object Generator]"})),(bt=function(){return{w:o,m:b}})()}function mt(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(mt=function(e,t,n,r){function o(t,n){mt(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){Ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ot(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ft(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ft(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jt(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var vt=function(e){var t=e.onClose,n=void 0===t?function(){}:t,o=Object(L.i)(),c=yt(Object(r.useState)({loading:!1,status:!1}),2),i=c[0],f=c[1],O=yt(Object(r.useState)(!1),2),j=O[0],y=O[1],v=yt(Object(r.useState)({}),2),h=v[0],E=v[1],_=o.s,k=void 0===_?"":_,S=et(),P=S.fetch,N=S.setStateImporterListValues,C=Ve(),x=C.getImporter,T=C.getOffset,A=C.getLoading,I=C.getTotalCount,D=C.getPageNumber,$=C.getPerPageCount,F=[{key:"actions",label:"",isLeftAligned:!1,cellClassName:"bwf-col-action bwf-w-30 "},{key:"name",label:Object(a.__)("Name","wp-marketing-automations"),isLeftAligned:!0},{key:"createdon",label:Object(a.__)("Created On","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"},{key:"type",label:Object(a.__)("Type","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"},{key:"contactcount",label:Object(a.__)("Contacts","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"},{key:"status",label:"Status",isLeftAligned:!1,cellClassName:"bwf-w-150"}],G=x(),M=D(),R=$(),U=I(),B=T(),q=A();Object(r.useEffect)((function(){return function(){N("isLoading",!0),N("importer",[]),N("offset",0),N("limit",25)}}),[]),Object(r.useEffect)((function(){P(R,B,k)}),[R,B,k]);var z=function(e){e!==R&&N("limit",e)},H=function(){var e,t=(e=bt().m((function e(t){var n,r,o=arguments;return bt().w((function(e){for(;;)switch(e.p=e.n){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},f(dt(dt({},n),{},{status:!0})),e.p=1,e.n=2,w()({path:Object(l.C)("/contacts/import/delete/"),data:{ids:[t]},method:"DELETE"}).then((function(e){if(200!==e.code)throw Error(Object(l.w)(null==e?void 0:e.message));f({}),P(R,B,k)})).catch((function(e){throw Error(Object(l.w)(null==e?void 0:e.message))}));case 2:e.n=4;break;case 3:e.p=3,r=e.v,f({status:!0,error:r.message?r.message:Object(a.__)("Error in deleting import","wp-marketing-automations")});case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){jt(o,r,a,c,i,"next",e)}function i(e){jt(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}(),K=function(e){return Object(r.createElement)(b.a,{label:Object(a.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.a,{isClickable:!0,onInvoke:function(){E(e),y(!0),n()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("View","wp-marketing-automations")))),Object(r.createElement)(m.a,{isClickable:!0,onInvoke:function(){var t={status:!0,deleteEntityName:Object(r.createElement)(r.Fragment,null,Object(a.__)("item ")," ",e.title),buttonConfirm:Object(a.__)("Delete","wp-marketing-automations"),buttonCancel:Object(a.__)("Cancel","wp-marketing-automations")};f(dt(dt({},t),{},{onConfirm:function(){return H(e.id,t)}})),n()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("Delete","wp-marketing-automations")))))}})},V={0:Object(a.__)("Pending","wp-marketing-automations"),1:Object(a.__)("In Progress","wp-marketing-automations"),2:Object(a.__)("Failed","wp-marketing-automations"),3:Object(a.__)("Completed","wp-marketing-automations"),4:Object(a.__)("Cancelled","wp-marketing-automations")},W=Object(u.isEmpty)(G)?[]:G.map((function(e){return[{display:K(e),value:"action"},{display:e.title?e.title:"-",value:e.title},{display:(n=e.created_on,Object(r.createElement)("div",{className:"bwf-display-flex-column"},Object(r.createElement)("span",null,Object(l.lb)(n)))),value:""},{display:e.type?e.type:"-",value:e.type},{display:e.contact_count?e.contact_count:"-",value:e.contact_count},{display:(t=e,Object(r.createElement)("span",{className:"bwf-export-status-tag bwf-status-"+parseInt(t.status)},V[parseInt(t.status)])),value:e.status}];var t,n}));return Object(r.createElement)(p.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-admin-modal-no-header bwf-export-contact-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-export-modal-header"},Object(r.createElement)("div",{className:"bwf-display-flex gap--8 bwf-flex-start"},Object(r.createElement)("div",{className:"bwf-export-modal-title"},Object(a.__)("Import Contacts","wp-marketing-automations")),!q&&parseInt(U)>0&&Object(r.createElement)("div",{className:"bwf-content-header-count"},Object(a.sprintf)(Object(a._n)("(%s Result)","(%s Results)",U,"wp-marketing-automations"),U))),Object(r.createElement)("div",{className:"bwf-display-flex gap-24"},Object(r.createElement)("div",{onClick:function(){Object(L.l)({page:"autonami",path:"/contacts/"},"/",{}),n()},className:"bwf-flex",style:{cursor:"pointer"}},Object(r.createElement)(g.a,{icon:"close"})))),Object(r.createElement)(s.a,{title:"",className:"bwf-export-contact-table",rows:W,headers:F,query:{paged:M},rowsPerPage:R,totalRows:U,isLoading:q,onPageChange:function(e,t){N("offset",(e-1)*R)},onQueryChange:function(e){return"per_page"!==e?function(){}:z},showMenu:!1,rowHeader:!0,actions:[],minHeight:!0,emptyMessage:Object(a.__)("No import available","wp-marketing-automations")}),Object(r.createElement)(ke.a,{modalTitle:Object(a.__)("Delete"),confirmText:i.confirmText,deleteEntityName:i.deleteEntityName,confirmButtonText:i.buttonConfirm,cancelButtonText:i.buttonCancel,onConfirm:i.onConfirm,isLoading:i.loading,successMessage:i.success,errorMessage:i.error,onRequestClose:function(){return f({status:!1})},isOpen:i.status,isDelete:!0}),j&&!Object(u.isEmpty)(h)&&Object(r.createElement)(p.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-640 bwf-export-list-modal bwf-show-close bwf-import-view-modal"},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Import Details","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return y(!1)},className:"bwf-modal-close"},Object(r.createElement)(g.a,{icon:"close",color:"#353030"}))),function(){if(1===parseInt(h.status))return Object(r.createElement)(ut,{importData:dt(dt({},h),{},{import_id:h.id}),showHeader:!1,onClose:function(){return n(!1)},onCancel:function(){P(R,B,k),y(!1)}});var e=[{label:Object(a.__)("Type","wp-marketing-automations"),value:h.hasOwnProperty("type")&&""!==h.type?h.type:"-"},{label:Object(a.__)("Contacts","wp-marketing-automations"),value:h.hasOwnProperty("contact_count")&&parseInt(h.contact_count)?parseInt(h.contact_count):"-"},h.hasOwnProperty("fields_imported")&&""!==h.fields_imported?{label:Object(a.__)("Fields","wp-marketing-automations"),value:h.fields_imported}:{},{label:Object(a.__)("Tags","wp-marketing-automations"),value:h.hasOwnProperty("tags")&&""!==h.tags?h.tags:"-"},{label:Object(a.__)("Lists","wp-marketing-automations"),value:h.hasOwnProperty("lists")&&""!==h.lists?h.lists:"-"}];return Object(r.createElement)(r.Fragment,null,e.map((function(e,t){if(!Object(u.isEmpty)(e))return Object(r.createElement)("div",{className:"bwf-export-modal-row2",key:t},Object(r.createElement)("div",{className:"bwf-export-modal-row-label"},e.label),Object(r.createElement)("div",{className:"bwf-export-modal-row-value"},e.value))})))}()))},gt=(n(1191),["status"]);function ht(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return Et(s,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&s&&!a&&t<u.length;t++){var a,o=u[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),i=u,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(s=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,a,o),!0),s}var c={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Et(t={},r,(function(){return this})),t),f=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Et(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,Et(f,"constructor",s),Et(s,"constructor",l),l.displayName="GeneratorFunction",Et(s,a,"GeneratorFunction"),Et(f),Et(f,a,"Generator"),Et(f,r,(function(){return this})),Et(f,"toString",(function(){return"[object Generator]"})),(ht=function(){return{w:o,m:b}})()}function Et(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Et=function(e,t,n,r){function o(t,n){Et(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function _t(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function kt(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function St(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){kt(o,r,a,c,i,"next",e)}function i(e){kt(o,r,a,c,i,"throw",e)}c(void 0)}))}}function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Nt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ct=function(e){var t=e.id,n=void 0===t?"":t,o=e.onRefresh,c=void 0===o?function(){}:o,i=e.resetImport,s=void 0===i?function(){}:i,f=Object(r.useContext)(l.h),b=Pt(Object(r.useState)("in_progress"),2),m=b[0],d=b[1],O=Pt(Object(r.useState)(!1),2),j=O[0],y=O[1],v=Pt(Object(r.useState)(!1),2),h=v[0],E=v[1],_=Pt(Object(r.useState)(!1),2),k=_[0],S=_[1],P=Pt(Object(r.useState)(!1),2),N=P[0],C=P[1],x=Pt(Object(r.useState)({status:!1}),2),T=x[0],A=x[1],I=Object(r.useRef)(new AbortController),D=Pt(Object(r.useState)({}),2),$=D[0],F=D[1],G=function(){var e=St(ht().m((function e(){var t;return ht().w((function(e){for(;;)switch(e.p=e.n){case 0:return E(!0),e.p=1,e.n=2,w()({path:Object(l.C)("/contacts/import/".concat(n,"/status")),method:"GET",signal:I.current.signal}).then((function(e){if(200!==e.code||!e.hasOwnProperty("result"))throw Error(Object(l.w)(null==e?void 0:e.message));var t=e.result,n=t.status,r=void 0===n?"":n,a=_t(t,gt);d(r),F(a),E(!1)}));case 2:e.n=5;break;case 3:if(e.p=3,t=e.v,E(!1),!Object(u.isObject)(t)||"AbortError"!==(null==t?void 0:t.name)){e.n=4;break}return e.a(2);case 4:f(t.hasOwnProperty("message")&&""!==t.message?t.message:Object(a.__)("Unable to import.","wp-marketing-automations")),Object(l.Pb)(f,3e3);case 5:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return n&&G(),function(){I.current.abort()}}),[]);var L=function(){var e=St(ht().m((function e(){var t,r,o,c=arguments;return ht().w((function(e){for(;;)switch(e.p=e.n){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:"","in_progress"===m||"dismiss"===t){e.n=1;break}return bwfcrm_contacts_data.contact_import_inprogress=0,e.a(2);case 1:return C(!0),e.p=2,r=Object(l.C)("/contacts/import/".concat(n,"/cancel")),""!==t&&(r+="?action=".concat(t)),e.n=3,w()({path:r,method:"GET"}).then((function(e){if(200!==e.code||!e.hasOwnProperty("result"))throw Error(Object(l.w)(null==e?void 0:e.message));var t=e.result.status;(void 0===t?1:t)&&(bwfcrm_contacts_data.contact_import_inprogress=0,y(!0),s()),C(!1)}));case 3:e.n=5;break;case 4:e.p=4,o=e.v,A({status:!0,error:o.hasOwnProperty("message")&&""!==o.message?o.message:Object(a.__)("Unable to cancel import.","wp-marketing-automations")}),C(!1),Object(l.Pb)(f,3e3);case 5:return e.a(2)}}),e,null,[[2,4]])})));return function(){return e.apply(this,arguments)}}();if(Object(nt.a)((function(){!h&&"in_progress"===m&&n&&G()}),5e3),!n||j)return Object(r.createElement)(r.Fragment,null);$.url;var M=$.msg,R=void 0===M?[]:M,U={in_progress:Object(a.__)("Importing in Progress","wp-marketing-automations"),success:Object(a.__)("Import Completed","wp-marketing-automations"),failed:Object(a.__)("Importing Failed","wp-marketing-automations")},B={in_progress:Object(a.__)("Cancel","wp-marketing-automations"),success:Object(a.__)("Refresh","wp-marketing-automations"),failed:Object(a.__)("View Details","wp-marketing-automations")};return Object(r.createElement)("div",{className:"bwf-import-info-wrap bwf-status-".concat(m)},Object(r.createElement)("div",{className:"bwf-import-info-left"},Object(r.createElement)("div",{className:"bwf-import-status-icon"},Object(r.createElement)(g.a,{icon:"export-info",size:20})),Object(r.createElement)("div",{className:"bwf-import-status-message"},U[m],"in_progress"===m&&parseFloat($.percentage)>0&&Object(r.createElement)(r.Fragment,null," "+parseFloat($.percentage)+"%"))),Object(r.createElement)("div",{className:"bwf-import-info-right"},Object(r.createElement)("div",{className:"bwf-import-status-button",onClick:function(){switch(m){case"in_progress":A({status:!0});break;case"success":bwfcrm_contacts_data.contact_import_inprogress=0,c();break;case"failed":S(!0)}}},B[m]),"failed"===m&&Object(r.createElement)("span",{className:"bwf-cursor-pointer",onClick:function(){return L("dismiss")}},Object(r.createElement)(g.a,{icon:"close",size:16,color:"#fff"}))),k&&Object(r.createElement)(p.Modal,{onRequestClose:function(){return S(!1)},className:"bwf-admin-modal bwf-admin-modal-480 bwf-admin-modal-no-header bwf-import-info-modal"},Object(r.createElement)("div",{className:"bwf-admin-m-header-new"},Object(r.createElement)("div",{className:"bwf-admin-m-title"},Object(a.__)("Error! Import Contact","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-admin-m-close",onClick:function(){return S(!1)}},Object(r.createElement)(g.a,{icon:"close",size:20}))),Object(r.createElement)("div",{className:"bwf-import-info-content"},Object(r.createElement)("div",{className:"bwf-import-info-content-bold"},Object(a.__)("Following reasons while creating file for import","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-import-info-content-error-list"},Object(u.isEmpty)(R)?Object(r.createElement)("li",null,Object(a.__)("Unable to create import","wp-marketing-automations")):R.map((function(e,t){return Object(r.createElement)("li",{key:t},e)}))))),Object(r.createElement)(ke.a,{modalTitle:Object(a.__)("Cancel Importing","wp-marketing-automations"),deleteDescriptionText:Object(a.__)("Once you cancel the import, all progress will be lost, and the action cannot be reversed. Please confirm if you still wish to cancel.","wp-marketing-automations"),confirmButtonText:Object(a.__)("Proceed","wp-marketing-automations"),cancelButtonText:Object(a.__)("Cancel","wp-marketing-automations"),onConfirm:L,isLoading:N,successMessage:T.success,errorMessage:T.error,onRequestClose:function(){return A({status:!1})},isOpen:T.status,isDelete:!0}))};function xt(e){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Tt=["path","page","filter"],At=["s"],It=["s"];function Dt(){return(Dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function $t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(n),!0).forEach((function(t){Gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=xt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lt(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return Mt(s,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&s&&!a&&t<u.length;t++){var a,o=u[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),i=u,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(s=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,a,o),!0),s}var c={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Mt(t={},r,(function(){return this})),t),f=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Mt(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,Mt(f,"constructor",s),Mt(s,"constructor",l),l.displayName="GeneratorFunction",Mt(s,a,"GeneratorFunction"),Mt(f),Mt(f,a,"Generator"),Mt(f,r,(function(){return this})),Mt(f,"toString",(function(){return"[object Generator]"})),(Lt=function(){return{w:o,m:b}})()}function Mt(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Mt=function(e,t,n,r){function o(t,n){Mt(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function Rt(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ut(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Rt(o,r,a,c,i,"next",e)}function i(e){Rt(o,r,a,c,i,"throw",e)}c(void 0)}))}}function Bt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||zt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){if(e){if("string"==typeof e)return Ht(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ht(e,t):void 0}}function Ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Kt=function(e){var t=Object(r.useContext)(l.h),n=qt(Object(r.useState)(!1),2),o=n[0],c=n[1],y=qt(Object(r.useState)(!1),2),h=y[0],E=y[1],k=qt(Object(r.useState)(!1),2),S=k[0],P=k[1],N=qt(Object(r.useState)({}),2),C=N[0],x=N[1],T=qt(Object(r.useState)(!1),2),A=T[0],I=T[1],D=qt(Object(r.useState)(!1),2),U=D[0],q=D[1],z=qt(Object(r.useState)(!0),2),V=z[0],W=z[1],Q=qt(Object(r.useState)(!1),2),Y=Q[0],Z=Q[1],J=Object(O.a)(),X=Object(j.a)(),ee=e.query,te=e.isExport,ne=e.setExport,oe=e.setNewImport,ce=e.menuButtons,ie=e.pitchData,le=e.newImport,se=ee.path,ue=ee.page,fe=ee.filter,be=Bt(ee,Tt),me=Object(r.useRef)(be),pe=qt(Object(r.useState)({status:!1}),2),de=pe[0],Oe=pe[1],je=qt(Object(r.useState)({status:!1,contactInfo:{}}),2),ye=je[0],we=je[1],ve=qt(Object(r.useState)({loading:!1,status:!1}),2),ge=ve[0],he=ve[1],Ee=qt(Object(r.useState)({status:!1,contactInfo:{}}),2),Ie=Ee[0],De=Ee[1],$e=X.fetchListing,Fe=Object(ae.a)().setSingleContactListData,Ge=qt(Object(r.useState)([]),2),Le=Ge[0],Me=Ge[1],Ue=qt(Object(r.useState)(!1),2),Be=Ue[0],qe=Ue[1],ze=qt(Object(r.useState)(Object(l.p)()),2),He=ze[0],Ke=ze[1],Ve=function(){wt&&wt(),Me([]),setTimeout((function(){We.reset()}),2500)},We=Object(Pe.useMutation)(function(){var e=Ut(Lt().m((function e(t){return Lt().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,w()({path:Object(l.C)("/v3/contacts/"),method:"DELETE",data:t});case 1:return e.a(2,e.v)}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){Ve(),$e(ee,0,ot,!0)},onError:function(){}}),Qe=Object(r.useCallback)((function(e,t){switch(e){case"delete":Me(t),qe(!0);break;case"perform-bulk-action":Me(t),E(!0)}}),[]),Ye=J.getPageNumber,Ze=J.getPerPageCount,Je=J.getTotalCount,Xe=J.getLoading,et=J.getContacts,tt=J.getError,nt=J.getCountData,rt=et(),at=Ye(),ot=Ze(),ct=Je(),it=Xe(),lt=tt(),st=nt();Object(r.useEffect)((function(){$e(ee,0,25,!0),I(!0)}),[]),Object(r.useEffect)((function(){Object(l.Cc)(be,me.current)||te||$e(ee,0,25,!0),me.current=be}),[ee]),Object(r.useEffect)((function(){it||q(!1)}),[it]),Object(r.useEffect)((function(){!te&&A&&$e(ee,0,25,!0)}),[te]),Object(r.useEffect)((function(){!le&&A&&(Ke(Object(l.p)()),$e(ee,0,25,!0))}),[le]);var ut,ft,bt=function(e){var t=e.f_name,n=void 0===t?"":t,a=e.l_name,o=void 0===a?"":a,c=e.id,i=void 0===c?"":c;return Object(r.createElement)(f.a,{to:"wp-admin/admin.php?page=autonami&path=/contact/"+i,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(e){e.preventDefault(),Fe(Object(l.vc)([n,o]," "));var t=be.s,r=void 0===t?"":t,a=Bt(be,At),c=Object(u.isEmpty)(a)?""!==r?{s:r}:{}:Ft(Ft({},be),{},{filter:"advanced"});Object(L.l)({page:"autonami",path:"/contact/"+parseInt(i),return_to:"/contacts"},"/",c)}},Object(r.createElement)(Te.a,{contact:e,hideJoiningDate:!0}))},mt=function(e){return Object(r.createElement)(b.a,{label:Object(a.__)("Quick Actions","wp-marketing-automations"),renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.a,{isClickable:!0,onInvoke:function(){}},Object(r.createElement)(f.a,{to:"admin.php?page=autonami&path=/contact/"+e.id,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(t){t.preventDefault(),Fe(Object(l.vc)([e.f_name,e.l_name]," "));var n=be.s,r=void 0===n?"":n,a=Bt(be,It),o=Object(u.isEmpty)(a)?""!==r?{s:r}:{}:Ft(Ft({},be),{},{filter:"advanced"});Object(L.l)({path:"/contact/"+parseInt(e.id),return_to:"/contacts"},"/",o)}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("View","wp-marketing-automations"))))),Object(r.createElement)(m.a,{isClickable:!0,onInvoke:function(){we({status:!0,contactInfo:e}),n()}},Object(r.createElement)(d.a,{justify:"space-between"},Object(r.createElement)(d.c,null,Object(a.__)("Send Message","wp-marketing-automations")))),Object(r.createElement)(m.a,{isClickable:!0,onInvoke:function(){De({status:!0,contactInfo:e}),n()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("Add Note","wp-marketing-automations")))),Object(r.createElement)(m.a,{isClickable:!0,onInvoke:function(){Oe({status:!0,contactID:e.id,data:e}),n()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("Delete","wp-marketing-automations")))))}})},pt=Object(r.useMemo)((function(){var e={};if(Array.isArray(rt)){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=zt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw o}}}}(rt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r.id]=r}}catch(e){n.e(e)}finally{n.f()}}return e}),[rt]),dt=Object(R.b)(pt),Ot=dt.singleSelectProps,jt=dt.selectAllProps,yt=dt.floatingBarProps,wt=dt.resetSelection,gt=dt.selected,ht=void 0===gt?[]:gt,Et=Object.keys(ht).filter((function(e){return ht[e]})).length,_t=bwfcrm_contacts_data.table_column_data.contactv2,kt=function(e){e!==ot&&$e(ee,0,e)},St=function(){$e(ee,0,ot,!0)},Pt=i()("bwfcrm-contacts-list",{"has-search":!0}),Nt=function(){var e=Ut(Lt().m((function e(n){var r;return Lt().w((function(e){for(;;)switch(e.p=e.n){case 0:return c(!0),e.p=1,e.n=2,w()({path:Object(l.C)("/v3/contacts/".concat(n,"/")),method:"DELETE"}).then((function(e){if(200!==e.code)throw Error(Object(l.w)(null==e?void 0:e.message));t(e.message),c(!1),Oe({}),$e(ee,0,ot,!0)})).catch((function(e){throw Error(Object(l.w)(null==e?void 0:e.message))}));case 2:e.n=4;break;case 3:e.p=3,r=e.v,Oe(Ft(Ft({},de),{},{content:r.message})),c(!1);case 4:Object(l.Pb)(t,3e3);case 5:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),xt=Object(l.P)("withtag"),$t=function(e,t){if(""===t||Object(u.isUndefined)(t)||Object(u.isNull)(t)||!e.hasOwnProperty(t)||Object(u.isNull)(e[t])||Object(u.isUndefined)(e[t])||""===e[t])return"-";if("status"===t){var n=xt.hasOwnProperty(parseInt(e[t]))?xt[parseInt(e[t])]:xt[0];return Object(r.createElement)("span",{className:n.statusclass},n.label)}if("country"===t){var o=e.country?M[e.country]:"";return Object(r.createElement)(d.a,{justify:"start"},Object(r.createElement)(Se.a,{code:e[t],size:15}),o&&Object(r.createElement)("span",{style:{textAlign:"left"}},o))}return"total_order_value"===t?Object(r.createElement)("span",{className:"bwf-tags bwf-tag-revenue",dangerouslySetInnerHTML:{__html:e[t]}}):Object(u.isArray)(e[t])?(c=e[t],i=[],l=[],Object(u.isEmpty)(c)?"-":(c.map((function(e){Object(u.isEmpty)(e)||(i.length<5&&(e.hasOwnProperty("link")&&""!==e.link?i.push(Object(r.createElement)("a",{className:"bwf-a-no-underline",href:Object(u.unescape)(e.link),target:"_blank",key:e.id,rel:"noreferrer"},e.name)):i.push(e.name)),e.hasOwnProperty("link")&&""!==e.link?l.push(Object(r.createElement)("a",{className:"bwf-a-no-underline",href:Object(u.unescape)(e.link),target:"_blank ",key:e.id},e.name)):l.push(Object(r.createElement)("span",{key:e.id},e.name)))})),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-table-v-center"},!Object(u.isEmpty)(i)&&i.map((function(e,t){return Object(r.createElement)("span",{key:t},e,t!==i.length-1&&", ")})),!Object(u.isEmpty)(l)&&l.length>5&&Object(r.createElement)(G.a,{items:l,count:5}))))):Object(u.isBoolean)(e[t])?e[t]?Object(a.__)("Yes","wp-marketing-automations"):Object(a.__)("No","wp-marketing-automations"):Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e[t]}});var c,i,l},Gt=0===parseInt(Et)?Object(r.createElement)("div",{className:"bwf-display-flex gap-8"},Object(r.createElement)(_.a,{className:"bwf-btn-small is-light",key:"export",onClick:function(){Object(l.fc)()?ne(!0):(x({isFeature:!0,featureTitle:Object(a.__)("Contacts Export","wp-marketing-automations"),proLink:Object(l.ib)("upgrade",{utm_medium:"Contacts+Export+Upgrade+Modal"})}),P(!0))}},Object(r.createElement)("span",{className:"bwf-display-flex gap-4"},Object(l.fc)()?Object(r.createElement)(g.a,{icon:"export",size:14}):Object(r.createElement)(g.a,{icon:"king",size:16}),Object(a.__)("Export","wp-marketing-automations"))),Object(r.createElement)(b.a,{classes:"bwf-fit-width-ellipse ellipse-btn-small",buttonLabel:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"bwf-display-flex gap-4"},Object(r.createElement)(g.a,{icon:"import",size:14}),Object(a.__)("Import","wp-marketing-automations"),Object(r.createElement)(g.a,{icon:"angle-down",size:12}))),renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.a,{isClickable:!He,onInvoke:function(){oe(!0),t()}},Object(r.createElement)(d.a,{justify:"space-between"},Object(r.createElement)(d.c,null,Object(a.__)("Create New","wp-marketing-automations")))),Object(r.createElement)(m.a,{isClickable:!0,onInvoke:function(){Z(!0),t()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("View List","wp-marketing-automations")))))},showLabel:!0,buttonIcon:!1}),Object(r.createElement)(re,{refreshTable:St}),Object(r.createElement)(_e,{refreshTable:St,setModelData:he})):Object(r.createElement)(r.Fragment,null),Mt=it||lt||ct>0||"advanced"===fe||!Object(u.isEmpty)(be)&&be.hasOwnProperty("s")&&""!==be.s||U;return Object(r.createElement)(r.Fragment,null,de&&de.status&&Object(r.createElement)(p.Modal,{onRequestClose:function(){return Oe({})},className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},de.confirm?Object(r.createElement)(F.a,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Delete Contact?","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return Oe({})},className:"bwf-modal-close"},Object(r.createElement)(g.a,{icon:"close",color:"#353030"}))),Object(r.createElement)("div",{className:"bwf-form-buttons"},Object(r.createElement)("div",{className:"bwf-modal-content"},Object(r.createElement)("div",{style:{wordBreak:"break-word"}},de.content?de.content:Object(r.createElement)(r.Fragment,null,Object(a.__)("You are about to delete this contact ","wp-marketing-automations"),Object(r.createElement)("strong",null,"".concat(de.data&&de.data.f_name," ").concat(de.data&&de.data.l_name,". ")),Object(a.__)("This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")))),Object(r.createElement)("div",{className:"bwf_text_right bwf-mt-20"},de.content?Object(r.createElement)(_.a,{isPrimary:!0,onClick:function(){Oe({status:!1})}},Object(a.__)("OK","wp-marketing-automations")):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(_.a,{className:"bwf-cancel-btn",onClick:function(){Oe({status:!1})},disabled:o},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(_.a,{className:"bwf-delete-btn",isBusy:o,onClick:function(){Nt(de.contactID)}},Object(a.__)("Delete","wp-marketing-automations"))))))),Object(r.createElement)("div",{className:"bwf-content-header-new bwf-pb-0"},Object(r.createElement)("div",{className:"bwf-content-header-left"},Object(r.createElement)("div",{className:"bwf-content-header-title"},Object(a.__)("All Contacts","wp-marketing-automations")),parseInt(ct)>0&&Object(r.createElement)("div",{className:"bwf-content-header-count"},Object(a.sprintf)(Object(a._n)("(%s Result)","(%s Results)",ct,"wp-marketing-automations"),ct))),Object(r.createElement)("div",{className:"bwf-content-header-right"},Mt&&!it&&!Y&&Object(r.createElement)(r.Fragment,null,He&&Object(r.createElement)(Ct,{id:He,resetImport:function(){return Ke(!1)},onRefresh:function(){Ke(!1),$e(ee,0,ot,!0)}}),ce))),!it&&!Object(u.isEmpty)(st)&&st.hasOwnProperty("contacts_active_bulk_actions")&&parseInt(st.contacts_active_bulk_actions)>0&&V&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-single-automation-notice no-icon bwf-m-0 bwf-san-no-border bwf-mt-8"},Object(r.createElement)("div",{className:"bwf-display-flex gap-24 bwf-flex-start bwf-align-center"},Object(r.createElement)("div",{className:"bwf-display-flex gap-8 bwf-flex-start bwf-w-100p"},Object(r.createElement)(g.a,{icon:"info",color:"#353030",size:20}),Object(r.createElement)("div",{className:"bwf-display-flex gap-8 bwf-space-between bwf-w-100p"},Object(r.createElement)("span",{className:"bwf-normal-text bwf-l-h-16"},Object(r.createElement)("span",{className:"bwf-normal-text bwf-n-b bwf-l-h-16"},Object(a.__)("Information","wp-marketing-automations"),": "),Object(a.__)("Bulk action on contacts is in progress.","wp-marketing-automations")),Object(r.createElement)(_.a,{onClick:function(){return Object(L.l)({page:"autonami",path:"/bulk-actions/ongoing"},"/",{})},className:"bwf-btn-small is-black"},Object(a.__)("Go to Bulk Actions","wp-marketing-automations")))),Object(r.createElement)("span",{className:"bwf-cursor-pointer bwf-w-16 bwf-h-16",onClick:function(){return W(!1)}},Object(r.createElement)(g.a,{icon:"cross",color:"#353030",size:16}))))),Mt?Object(r.createElement)(s.a,{className:Pt,rows:Object(u.isEmpty)(rt)?[]:rt.map((function(e){var t=[{display:Ot[e.id]&&Object(r.createElement)(K.a,Dt({type:"checkbox",checked:!1,onChange:function(){}},Ot[e.id])),value:null},{display:mt(e),value:null},{display:bt(e),value:Object(l.vc)([e.f_name,e.l_name]," ")}];return _t.map((function(n){var r=Ft({},n);delete r.label,delete r.groupKey,delete r.groupLabel;var a=Object.keys(r)[0];t.push({display:$t(e,a),value:"-"})})),t})),headers:(ft=[{key:"select_contact",label:Object(r.createElement)(K.a,Dt({type:"checkbox",checked:!1,onChange:function(){}},jt)),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"actions",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"f_name",label:Object(a.__)("Name","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-table-col-sticky bwf-sticky-left"+(Object(u.isEmpty)(_t)?"":" bwf-w-210")}],_t.map((function(e){Object(u.isObject)(e)&&ft.push({key:Object.keys(e).find((function(t){return e[t]==(null==e?void 0:e.label)})),label:null==e?void 0:e.label,isLeftAligned:!0,cellClassName:e.hasOwnProperty("label")&&(e.label.toLocaleLowerCase().includes("tag")||e.label.toLocaleLowerCase().includes("list")||e.label.toLocaleLowerCase().includes("product")||e.label.toLocaleLowerCase().includes("category")||e.label.toLocaleLowerCase().includes("trigger"))?"bwf-max-w-360":"bwf-w-150"})})),ft),query:{paged:at,order:ee.order,orderby:ee.orderby},rowsPerPage:ot,totalRows:ct,isLoading:it,onPageChange:function(e,t){$e(ee,(e-1)*ot,ot)},onQueryChange:function(e){return"per_page"!==e?function(){}:kt},actions:Et>0?[Object(r.createElement)(R.a,Dt({key:"contact-bulk-action",actions:(ut=[],1===Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.0.3")&&ut.push({id:"perform-bulk-action",icon:"bulk-action",hint:Object(a.__)("Bulk Action","wp-marketing-automations"),isPro:!0,proLink:Object(l.ib)("upgrade",{utm_medium:"Contact+List+Bulk+Action+Upgrade+Modal"}),featureTitle:Object(a.__)("Perform Bulk Action","wp-marketing-automations")}),ut.push({id:"delete",icon:"trash",hint:Object(a.__)("Delete","wp-marketing-automations")}),ut),onAction:Qe,inLine:!0,reset:Ve},yt))]:[Object(r.createElement)(Ce.a,{key:"search",isLoading:it,searchTerm:null==be?void 0:be.s,showResultCount:!1,setSearchData:function(e){if(Object(u.size)(e))Object(L.l)({s:e},"/",ee);else{var t=Object(u.cloneDeep)(ee);t.hasOwnProperty("s")&&(null==t||delete t.s),q(!0),Object(L.l)(t,"/",{})}}}),Object(r.createElement)(Ne.b,{onChange:function(e){q(!0),"all"===e&&Object(L.l)({page:ue},se,{}),"filters"===e&&Object(L.l)({filter:"advanced"},se,ee)},options:[{key:"all",label:Object(a.__)("All Contacts","wp-marketing-automations")},{key:"filters",label:Object(a.__)("Advanced Filters","wp-marketing-automations")}],selected:ee.hasOwnProperty("filter")&&"advanced"===ee.filter?"filters":"all",key:"select-contact",className:"bwf-w-150"}),Object(r.createElement)(B.c,{key:"list-audience"})],rowHeader:!0,emptyMessage:Object(a.__)("No contacts found","wp-marketing-automations"),extraSectionBeforefilterCol:Gt,showMenu:!1,beforeTable:Object(r.createElement)(H,{query:ee,isOpen:ee.hasOwnProperty("filter")&&"advanced"===ee.filter})}):Object(r.createElement)(Ae.a,{data:ie}),ye.status&&Object(r.createElement)(v.a,{contact:ye.contactInfo,setSendMessageModel:we}),Ie.status&&Object(r.createElement)($,{contact:Ie.contactInfo,setModelStatus:De}),Object(r.createElement)(ke.a,{modalTitle:Object(a._n)("Delete Contact","Delete Contacts",Le.length,"wp-marketing-automations"),deleteEntityName:1===Le.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{style:{fontWeight:"normal"}},Object(a.__)("contact","wp-marketing-automations")," "),Le[0].f_name," ",Le[0].l_name):Object(r.createElement)(r.Fragment,null,Le.length,"Â ",Object(r.createElement)("span",{style:{fontWeight:"normal"}},Object(a.__)("contact","wp-marketing-automations"))),confirmButtonText:Object(a.__)("Delete","wp-marketing-automations"),cancelButtonText:Object(a.__)("Cancel","wp-marketing-automations"),onConfirm:function(){var e={contacts:Le.map((function(e){return e.id}))};We.mutate(e)},isLoading:We.isLoading,successMessage:We.isSuccess&&Object(a.__)("Contacts Deleted!","wp-marketing-automations"),errorMessage:We.isError&&(We.error&&We.error.message?We.error.message:Object(a.__)("Unable to delete contacts","wp-marketing-automations")),onRequestClose:function(){Ve(),qe(!1)},isOpen:Be,confirmDescription:Object(a.__)("This action is irreversible","wp-marketing-automations"),isDelete:!0}),Object(r.createElement)(ke.a,{modalTitle:ge.modalTitle,deleteEntityName:ge.deleteEntityName,confirmText:ge.confirmText,confirmButtonText:ge.buttonConfirm,cancelButtonText:ge.buttonCancel,onConfirm:ge.onConfirm,isLoading:ge.loading,successMessage:ge.success,errorMessage:ge.error,content:ge.content,onRequestClose:function(){return he({status:!1})},isOpen:ge.status,isDelete:!ge.hasOwnProperty("isDelete")||ge.isDelete}),!Object(l.fc)()&&Object(r.createElement)(xe.b,{isOpen:S,onRequestClose:function(){return P(!1)},modalContent:C}),Y&&Object(r.createElement)(vt,{onClose:function(){return Z(!1)},refreshContactData:St}),h&&Object(r.createElement)(Re,{onClose:function(){Ve(),E(!1)},selectedContacts:Le,refreshContactData:St}))},Vt=n(88),Wt=n(1144),Qt=n(355),Yt=n(357),Zt=n(1126),Jt=n(1143);function Xt(){return(Xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function en(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return tn(s,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&s&&!a&&t<u.length;t++){var a,o=u[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),i=u,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(s=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,a,o),!0),s}var c={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(tn(t={},r,(function(){return this})),t),f=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,tn(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,tn(f,"constructor",s),tn(s,"constructor",l),l.displayName="GeneratorFunction",tn(s,a,"GeneratorFunction"),tn(f),tn(f,a,"Generator"),tn(f,r,(function(){return this})),tn(f,"toString",(function(){return"[object Generator]"})),(en=function(){return{w:o,m:b}})()}function tn(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(tn=function(e,t,n,r){function o(t,n){tn(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function nn(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function rn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){nn(o,r,a,c,i,"next",e)}function i(e){nn(o,r,a,c,i,"throw",e)}c(void 0)}))}}function an(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return on(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?on(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function on(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var cn={email:"",f_name:"",l_name:"",marketing_status:!0,contact_no:""},ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onCloseModal:function(){}},t=Object(r.useContext)(l.h),n=Object(r.useState)([]),o=an(n,2),c=o[0],i=o[1],s=Object(r.useState)([]),f=an(s,2),b=f[0],m=f[1],d=Object(r.useState)(null),O=an(d,2),y=O[0],v=O[1],h=Object(r.useState)(null),k=an(h,2),S=k[0],P=k[1],N=Object(r.useState)(cn),C=an(N,2),x=C[0],T=C[1],A=Object(r.useState)(!1),I=an(A,2),D=I[0],$=I[1],G=Object(r.useState)({}),M=an(G,2),R=M[0],U=M[1],B=Object(ae.a)(),q=B.setSingleContactListData,z=function(){var n=rn(en().m((function n(r){var a;return en().w((function(n){for(;;)switch(n.p=n.n){case 0:return $(!0),n.p=1,n.n=2,w()({path:Object(l.C)("/v3/contacts"),method:"POST",data:r}).then((function(n){if(200!=n.code)throw Error(Object(l.w)(null==n?void 0:n.message));t(n.message),U({}),$(!1),Object(l.db)()||(bwfcrm_contacts_data.first_contact_id=1),q(Object(l.vc)([r.f_name,r.l_name]," ")),Object(L.l)({page:"autonami",path:"/contact/"+parseInt(n.result.id)},"/",{}),e.onCloseModal()})).catch((function(e){throw Error(Object(l.w)(null==e?void 0:e.message))}));case 2:n.n=4;break;case 3:n.p=3,a=n.v,$(!1),v(a);case 4:Object(l.Pb)(t,3e3);case 5:return n.a(2)}}),n,null,[[1,3]])})));return function(e){return n.apply(this,arguments)}}(),H=function(e){var t={};return!Object(u.isEmpty)(e.email)&&Object(l.mc)(e.email?e.email:"")||(t.email=Object(u.isEmpty)(e.email)?Object(a.__)("Email is required","wp-marketing-automations"):Object(a.__)("Email is not valid","wp-marketing-automations")),Object(u.isEmpty)(e.phone)||Object(Wt.a)(e.phone?e.phone:"")||(t.phone=Object(a.__)("Phone is not valid","wp-marketing-automations")),t},V=function(e){var t=e.email,n=e.f_name,r=e.l_name,a=e.marketing_status,o=e.phone,i=[];Object(u.isEmpty)(c)||c.map((function(e){i.push({id:e.key,value:e.label})}));var l=[];Object(u.isEmpty)(b)||b.map((function(e){l.push({id:e.key,value:e.label})})),T({email:t,f_name:n,l_name:r,contact_no:o,status:a,tags:i,lists:l}),z({email:t,f_name:n,l_name:r,contact_no:o,status:a,tags:i,lists:l})},W=Object(j.a)(),Q=W.fetch,Y=e.query,Z=function(){S&&(P(null),Q(Y,0,25)),e.onCloseModal()},J=function(){return R&&R.success&&R.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(Qt.a,null),Object(r.createElement)("div",{className:"bwf-h1"},R.message)):R&&R.error&&R.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(Yt.a,null),Object(r.createElement)("div",{className:"bwf-h1"},R.message)):Object(r.createElement)(F.a,null)};return Object(r.createElement)(p.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-medium bwf-add-new-contact-modal "},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Create Contact","wp-marketing-automations")),Object(r.createElement)("span",{onClick:Z,className:"bwf-modal-close"},Object(r.createElement)(g.a,{icon:"close",color:"#353030"}))),y&&Object(r.createElement)(E.a,{status:"error",onRemove:function(){return v(null)}},y.hasOwnProperty("message")?y.message:Object(a.__)("Unknown Error while creating contact","wp-marketing-automations")),R.error||R.success?J():Object(r.createElement)(Vt.a,{validate:H,onSubmitCallback:V,initialValues:x},(function(e){var t=e.getInputProps,n=e.values,o=e.errors,l=e.handleSubmit,s=e.touched;return Object(r.createElement)("div",{className:"bwf-form-fields"},Object(r.createElement)("div",null,Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-input-label",id:"required"},Object(a.__)("Email","wp-marketing-automations")),Object(r.createElement)(p.TextControl,Xt({disabled:D,type:"email",help:Object(a.__)("Required","wp-marketing-automations")},t("email"))),(null==s?void 0:s.email)&&(null==o?void 0:o.email)&&Object(r.createElement)("div",{className:"bwf-error-text"},null==o?void 0:o.email)),Object(r.createElement)(p.TextControl,Xt({disabled:D,label:Object(a.__)("Phone","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},t("phone"))),(null==s?void 0:s.phone)&&o.hasOwnProperty("phone")&&Object(r.createElement)("div",{className:"bwf-error-text"},null==o?void 0:o.phone),Object(r.createElement)(p.TextControl,Xt({disabled:D,label:Object(a.__)("First Name","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},t("f_name"))),Object(r.createElement)(p.TextControl,Xt({disabled:D,label:Object(a.__)("Last Name","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},t("l_name"))),Object(r.createElement)(Zt.a,{onTagsChange:i,selected:c}),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)(Jt.a,{onListsChange:m,selected:b}),Object(r.createElement)("div",{className:"bwf_clear_24"})),Object(r.createElement)("div",null,Object(r.createElement)(K.a,Xt({type:"checkbox",disabled:D,label:Object(a.__)("Mark Contact as Subscribed","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},t("marketing_status")))),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons bwf-mt-24"},Object(r.createElement)(_.a,{className:"bwf-cancel-btn",onClick:Z},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(_.a,{onClick:function(){H(n)&&l()},className:Object(u.size)(o)||H(n)?"bwf-no-ripple":"",isPrimary:!0,isBusy:D},Object(a.__)("Add","wp-marketing-automations"))))})))},sn=n(377),un=n(356),fn=n(68),bn=n(77),mn=n(110);function pn(e){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var dn=["getStateProp"];function On(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?On(Object(n),!0).forEach((function(t){yn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=pn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wn=function(){var e=Object(Ue.a)("exporter"),t=e.getStateProp;return jn(jn({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,dn)),{},{getExporter:function(){return t("export")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getOffset:function(){return parseInt(t("offset"))},getTotalCount:function(){return parseInt(t("total"))},getLoadingStatus:function(){return t("isLoading")},getExistingExport:function(){return t("existingExport")}})};function vn(e){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var gn=["fetch","setStateProp"];function hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hn(Object(n),!0).forEach((function(t){_n(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=vn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kn=function(){var e=Object(We.a)("exporter"),t=e.fetch,n=e.setStateProp;return En(En({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,gn)),{},{fetch:function(e,n,r){t("GET",Object(l.C)("/contact/export?limit=".concat(e,"&offset=").concat(n,"&search=").concat(r)))},setStateExportValues:function(e,t){n(e,t)}})},Sn=n(1122),Pn=n(351);function Nn(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return Cn(s,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&s&&!a&&t<u.length;t++){var a,o=u[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),i=u,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(s=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,a,o),!0),s}var c={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Cn(t={},r,(function(){return this})),t),f=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Cn(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,Cn(f,"constructor",s),Cn(s,"constructor",l),l.displayName="GeneratorFunction",Cn(s,a,"GeneratorFunction"),Cn(f),Cn(f,a,"Generator"),Cn(f,r,(function(){return this})),Cn(f,"toString",(function(){return"[object Generator]"})),(Nn=function(){return{w:o,m:b}})()}function Cn(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Cn=function(e,t,n,r){function o(t,n){Cn(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function xn(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return An(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?An(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function An(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var In=function(e){var t=e.exportId,n=void 0===t?"":t,o=e.setLoading,c=e.setComplete,i=e.preExportData,s=void 0===i?{}:i,f=Tn(Object(r.useState)(!1),2),b=f[0],m=f[1],p=Tn(Object(r.useState)(s),2),d=p[0],O=p[1],j=Tn(Object(r.useState)(0),2),y=j[0],v=j[1],g=Tn(Object(r.useState)(!1),2),h=g[0],E=g[1],_=Tn(Object(r.useState)(!1),2),k=_[0],S=_[1];Object(r.useEffect)((function(){100===parseInt(y)&&setTimeout((function(){E(!0)}),2e3)}),[y]);var P=function(){var e,t=(e=Nn().m((function e(){return Nn().w((function(e){for(;;)switch(e.p=e.n){case 0:return S(!0),e.p=1,e.n=2,w()({method:"GET",path:Object(l.C)("/contact/export/".concat(n))}).then((function(e){200==e.code&&O(e.result),S(!1)}));case 2:e.n=4;break;case 3:e.p=3,e.v,S(!1);case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){xn(o,r,a,c,i,"next",e)}function i(e){xn(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){if(!Object(u.isEmpty)(d))if(3==d.status)o(!1),m(!0),v(100),c(!0);else{var e=parseInt(d.offset)/parseInt(d.count)*100;v(e<100?parseInt(e):100)}}),[d]),Object(nt.a)((function(){b||k||P()}),5e3),Object(r.createElement)("div",{className:"bwf-display-flex-column",style:{alignItems:"center"}},n&&b&&h?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("h2",null,Object(a.__)("Export Completed","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Your file is ready for download. Now you can download the exported contact list.","wp-marketing-automations"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Export Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("The file is being created in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)(tt.a,{noStriped:!0,size:"sm",progress:parseInt(y),text:"".concat(parseInt(y),"% ").concat(Object(a.__)("Completed","wp-marketing-automations"))})))};function Dn(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return $n(s,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&s&&!a&&t<u.length;t++){var a,o=u[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),i=u,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(s=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,a,o),!0),s}var c={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):($n(t={},r,(function(){return this})),t),f=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,$n(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,$n(f,"constructor",s),$n(s,"constructor",l),l.displayName="GeneratorFunction",$n(s,a,"GeneratorFunction"),$n(f),$n(f,a,"Generator"),$n(f,r,(function(){return this})),$n(f,"toString",(function(){return"[object Generator]"})),(Dn=function(){return{w:o,m:b}})()}function $n(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}($n=function(e,t,n,r){function o(t,n){$n(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function Fn(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Gn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Fn(o,r,a,c,i,"next",e)}function i(e){Fn(o,r,a,c,i,"throw",e)}c(void 0)}))}}function Ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Mn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Rn=function(e){var t,n=e.title,o=e.fields,c=e.expfilter,i=e.setPending,s=e.setAdd,u=e.contactCount,f=e.exportID,b=void 0===f?0:f,m=e.preExportData,d=void 0===m?{}:m,O=Ln(Object(r.useState)(!1),2),j=O[0],y=O[1],v=Ln(Object(r.useState)(""),2),g=v[0],h=v[1],k=Ln(Object(r.useState)(!1),2),S=k[0],P=k[1],N=Ln(Object(r.useState)(!1),2),C=N[0],x=N[1],T=Ln(Object(r.useState)(!1),2),A=T[0],I=T[1],D=Ln(Object(r.useState)({loading:!1,status:!1}),2),$=D[0],F=D[1],G=Ln(Object(r.useState)(Object(a.__)("Unable to create export.","wp-marketing-automations")),2),L=G[0],M=G[1];Object(r.useEffect)((function(){i(!0),0===parseInt(b)?R():(y(!0),h(b))}),[]);var R=function(){var e=Gn(Dn().m((function e(){var t,r;return Dn().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t={title:n,fields:o,filters:c,count:u},e.n=1,w()({method:"POST",data:t,path:Object(l.C)("/contact/export/add")}).then((function(e){200==e.code&&(Object(l.eb)()||(bwfcrm_contacts_data.first_export_id=2),y(!0),e.result.hasOwnProperty("id")&&h(e.result.id))}));case 1:e.n=3;break;case 2:e.p=2,r=e.v,y(!0),P(!0),r.hasOwnProperty("message")&&M(r.message);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}();A&&setTimeout((function(){var e=document.querySelectorAll(".bwf-export-add-modal .bwf-crm-export-init .bwf-stepper .bwf-stepper__steps");e.length>0&&e[0].remove()}),2e3);var U=function(){var e=Gn(Dn().m((function e(){var t;return Dn().w((function(e){for(;;)switch(e.p=e.n){case 0:return x(!0),e.p=1,e.n=2,w()({path:Object(l.C)("/contact/export/cancel/".concat(g)),method:"DELETE"}).then((function(e){if(200!==e.code)throw Error(Object(l.w)(null==e?void 0:e.message));s(!1)})).catch((function(e){throw Error(Object(l.w)(null==e?void 0:e.message))}));case 2:e.n=4;break;case 3:e.p=3,t=e.v,x(!1),P(!0),M(t.message?t.message:Object(a.__)("Error in canceling export","wp-marketing-automations"));case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p.Card,{className:"bwfcrm-overview-wrap bwf-contact-export-step-three"},Object(r.createElement)("div",{style:{alignItems:"center"}},j?Object(r.createElement)(r.Fragment,null,g?Object(r.createElement)(In,{exportId:g,setLoading:i,setComplete:I,preExportData:d}):Object(r.createElement)("div",{className:"bwf-h4"},S&&Object(r.createElement)(E.a,{status:"error",isDismissible:!1},L))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-display-flex-column",style:{alignItems:"center"}},Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-30 bwf-w-90"}),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-280"}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-100p"}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-150"}),Object(r.createElement)("div",{className:"bwf_clear_20"}))),Object(r.createElement)("div",{className:"bwf_clear_20"}))),Object(r.createElement)("div",{className:"bwf-display-flex"},j?Object(r.createElement)(r.Fragment,null,A?Object(r.createElement)(_.a,{isPrimary:!0,className:"bwf-mt-24",onClick:function(){-1!==Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.5.3")?window.open(Object(l.zb)()+"/wp-json"+Object(l.C)("/contact/export/download/".concat(g,"?bwf-nonce=").concat(Object(l.H)())),"_blank"):F({status:!0,isDelete:!1,buttonConfirm:Object(a.__)("Upgrade Now","wp-marketing-automations"),onConfirm:function(){window.open("plugins.php?s=Funnelkit%20Automations","_blank"),F({status:!1})},title:Object(a.__)("Unable To Download File","wp-marketing-automations"),confirmDescription:Object(a.__)("FunnelKit Automation PRO version 3.5.3 or higher is required.","wp-marketing-automations")})}},Object(a.__)("Download File","wp-marketing-automations")):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(_.a,{isPrimary:!0,className:"bwf-mt-24",onClick:function(){s(!1)}},Object(r.createElement)("span",{className:"bwf-p-5"},Object(a.__)("Go to Export List","wp-marketing-automations"))),-1!==Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.2.2")&&Object(r.createElement)(_.a,{isSecondary:!0,className:"bwf-mt-24",onClick:U,isBusy:C},Object(r.createElement)("span",{className:"bwf-p-5"},Object(a.__)("Cancel Export","wp-marketing-automations"))))):Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-90"}))),Object(r.createElement)(ke.a,{modalTitle:null!==(t=$.title)&&void 0!==t?t:Object(a.__)("Delete","wp-marketing-automations"),confirmText:$.confirmText,deleteEntityName:$.deleteEntityName,confirmButtonText:$.buttonConfirm,cancelButtonText:$.buttonCancel,onConfirm:$.onConfirm,isLoading:$.loading,successMessage:$.success,confirmDescription:$.confirmDescription,errorMessage:$.error,onRequestClose:function(){return F({status:!1})},isOpen:$.status,isDelete:!$.hasOwnProperty("isDelete")||$.isDelete}),Object(r.createElement)("div",{className:"bwf_clear_30"}))};function Un(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Bn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var qn=function(e){var t=e.exportData,n=void 0===t?{}:t,o=e.onClose,c=void 0===o?function(){}:o,i=Un(Object(r.useState)(!0),2),l=i[0],s=i[1],u=[{key:1,label:Object(a.__)("Fields","wp-marketing-automations"),content:Object(r.createElement)(r.Fragment,null)},{key:2,label:Object(a.__)("Contacts","wp-marketing-automations"),content:Object(r.createElement)(r.Fragment,null)},{key:3,label:Object(a.__)("Confirmation","wp-marketing-automations"),content:function(e){switch(e){case 3:return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Rn,{setPending:s,exportID:n.id,preExportData:n,setAdd:function(){return c(!0)}}));default:return Object(r.createElement)(r.Fragment,null)}}(3)}];return Object(r.createElement)(p.Modal,{onRequestClose:function(){return c(!0)},className:"bwf-admin-modal bwf-admin-modal-xxl bwf-export-add-modal",title:Object(a.__)("Export Inprogress","wp-marketing-automations"),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-crm-export-init"},Object(r.createElement)(Pn.a,{steps:u,currentStep:3,isPending:l})))};function zn(e){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hn(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return Kn(s,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&s&&!a&&t<u.length;t++){var a,o=u[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),i=u,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(s=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,a,o),!0),s}var c={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Kn(t={},r,(function(){return this})),t),f=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Kn(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,Kn(f,"constructor",s),Kn(s,"constructor",l),l.displayName="GeneratorFunction",Kn(s,a,"GeneratorFunction"),Kn(f),Kn(f,a,"Generator"),Kn(f,r,(function(){return this})),Kn(f,"toString",(function(){return"[object Generator]"})),(Hn=function(){return{w:o,m:b}})()}function Kn(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Kn=function(e,t,n,r){function o(t,n){Kn(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){Qn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=zn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yn(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Zn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Xn=function(e){var t,n=e.isAdd,o=Object(L.i)(),c=Object(U.a)(),i=Zn(Object(r.useState)({loading:!1,status:!1}),2),f=i[0],O=i[1],j=Zn(Object(r.useState)(!1),2),y=j[0],v=j[1],h=Zn(Object(r.useState)(!1),2),E=h[0],_=h[1],k=Zn(Object(r.useState)({}),2),S=k[0],P=k[1],N=o.s,C=void 0===N?"":N,x=kn(),T=x.fetch,A=x.setStateExportValues,I=wn(),D=I.getExporter,$=I.getOffset,F=I.getLoading,G=I.getTotalCount,M=I.getPageNumber,R=I.getPerPageCount,B=[{key:"actions",label:"",isLeftAligned:!1,cellClassName:"bwf-col-action bwf-w-30 "},{key:"name",label:Object(a.__)("Name","wp-marketing-automations"),isLeftAligned:!0},{key:"createdon",label:Object(a.__)("Created On","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"},{key:"contactcount",label:Object(a.__)("Contacts","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"},{key:"status",label:Object(a.__)("Status","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-150"},{key:"file",label:"",isLeftAligned:!1,cellClassName:"bwf-w-150"}],q=D(),z=M(),H=R(),K=G(),V=$(),W=F(),Q=Object(bn.a)().setPageCountData;Object(r.useEffect)((function(){Q({contacts_export:K})}),[K]),Object(r.useEffect)((function(){n||T(H,V,C)}),[H,V,C,n]);var Y,Z=function(e){e!==H&&A("limit",e)},J=function(){var e,t=(e=Hn().m((function e(t){var n,r,o=arguments;return Hn().w((function(e){for(;;)switch(e.p=e.n){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},O(Wn(Wn({},n),{},{status:!0})),e.p=1,e.n=2,w()({path:Object(l.C)("/contact/export/delete/".concat(t)),method:"DELETE"}).then((function(e){if(200!==e.code)throw Error(Object(l.w)(null==e?void 0:e.message));O({}),T(H,V,C)})).catch((function(e){throw Error(Object(l.w)(null==e?void 0:e.message))}));case 2:e.n=4;break;case 3:e.p=3,r=e.v,O({status:!0,error:r.message?r.message:Object(a.__)("Error in deleting export","wp-marketing-automations")});case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Yn(o,r,a,c,i,"next",e)}function i(e){Yn(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}(),X=function(e){return Object(r.createElement)(b.a,{label:Object(a.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.a,{isClickable:!0,onInvoke:function(){e.hasOwnProperty("status")&&1===parseInt(e.status)?(P(e),_(!0)):(P(e),v(!0)),n()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("View","wp-marketing-automations")))),Object(r.createElement)(m.a,{isClickable:!0,onInvoke:function(){var t={status:!0,deleteEntityName:Object(r.createElement)(r.Fragment,null,Object(a.__)("item ")," ",e.title),buttonConfirm:Object(a.__)("Delete","wp-marketing-automations"),buttonCancel:Object(a.__)("Cancel","wp-marketing-automations")};O(Wn(Wn({},t),{},{onConfirm:function(){return J(e.id,t)}})),n()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("Delete","wp-marketing-automations")))))}})},ee={1:Object(a.__)("In Progress","wp-marketing-automations"),2:Object(a.__)("Failed","wp-marketing-automations"),3:Object(a.__)("Completed","wp-marketing-automations"),4:Object(a.__)("Cancelled","wp-marketing-automations")},te=function(e){switch(parseInt(e.status)){case 3:if(e.file)return-1===Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.5.3")?Object(r.createElement)("div",{onClick:function(){O({status:!0,isDelete:!1,buttonConfirm:Object(a.__)("Upgrade Now","wp-marketing-automations"),onConfirm:function(){window.open("plugins.php?s=Funnelkit%20Automations","_blank"),O({status:!1})},title:Object(a.__)("Unable To Download File","wp-marketing-automations"),confirmDescription:Object(a.__)("FunnelKit Automation PRO version 3.5.3 or higher is required.","wp-marketing-automations")})},style:{cursor:"pointer"},title:Object(a.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline"},Object(r.createElement)("div",{className:"bwf-download-btn"},Object(r.createElement)("span",null,Object(r.createElement)(g.a,{icon:"download"})),Object(r.createElement)("span",null,Object(a.__)("Download","wp-marketing-automations")))):Object(r.createElement)("a",{target:"_blank",href:Object(l.zb)()+"/wp-json"+Object(l.C)("/contact/export/download/".concat(e.id,"?bwf-nonce=").concat(Object(l.H)())),title:Object(a.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline",rel:"noreferrer"},Object(r.createElement)("div",{className:"bwf-download-btn"},Object(r.createElement)("span",null,Object(r.createElement)(g.a,{icon:"download"})),Object(r.createElement)("span",null,Object(a.__)("Download","wp-marketing-automations"))));default:return"-"}},ne=function(e){return 1===parseInt(e.status)?Object(r.createElement)(r.Fragment,null,Object(a.sprintf)(Object(a.__)("%d of %d Completed","wp-marketing-automations"),parseInt(e.offset),parseInt(e.count))):e.count},re=Object(u.isEmpty)(q)?[]:q.map((function(e){return[{display:X(e),value:"action"},{display:e.title?e.title:"-",value:e.title},{display:(n=e.created_date,Object(r.createElement)("div",{className:"bwf-display-flex-column"},Object(r.createElement)("span",null,Object(l.lb)(n)))),value:""},{display:ne(e),value:e.count},{display:(t=e,Object(r.createElement)("span",{className:"bwf-export-status-tag bwf-status-"+parseInt(t.status)},ee[parseInt(t.status)])),value:e.status},{display:te(e),value:""}];var t,n}));return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(fn.a,null),Object(r.createElement)(s.a,{title:"",className:"bwf-export-contact-table",rows:re,headers:B,query:{paged:z},rowsPerPage:H,totalRows:K,isLoading:W,onPageChange:function(e,t){A("offset",(e-1)*H)},onQueryChange:function(e){return"per_page"!==e?function(){}:Z},showMenu:!1,rowHeader:!0,actions:[],emptyMessage:Object(a.__)("No export available","wp-marketing-automations"),minHeight:!0}),Object(r.createElement)(ke.a,{modalTitle:null!==(t=f.title)&&void 0!==t?t:Object(a.__)("Delete","wp-marketing-automations"),confirmText:f.confirmText,deleteEntityName:f.deleteEntityName,confirmButtonText:f.buttonConfirm,cancelButtonText:f.buttonCancel,onConfirm:f.onConfirm,isLoading:f.loading,successMessage:f.success,confirmDescription:f.confirmDescription,errorMessage:f.error,onRequestClose:function(){return O({status:!1})},isOpen:f.status,isDelete:!f.hasOwnProperty("isDelete")||f.isDelete}),y&&!Object(u.isEmpty)(S)&&Object(r.createElement)(p.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-large bwf-export-list-modal bwf-show-close"},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Export Details","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return v(!1)},className:"bwf-modal-close"},Object(r.createElement)(g.a,{icon:"close",color:"#353030"}))),(Y=[],Object(u.isEmpty)(S.fields)||S.fields.map((function(e){var t=Zn(Object.entries(e)[0],2),n=t[0];t[1],c.hasOwnProperty(n)&&Y.push(c[n].labels.add)})),Object(r.createElement)(r.Fragment,null,S.hasOwnProperty("filters")&&Object(r.createElement)("div",{className:"bwf-export-modal-row"},Object(r.createElement)("div",{className:"bwf-export-modal-row-label"},Object(a.__)("Filters","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-export-modal-row-value"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(u.isEmpty)(e)?"-":Object(r.createElement)(r.Fragment,null,Object(Sn.b)(e))}(S.filters))),!Object(u.isEmpty)(Y)&&Object(r.createElement)("div",{className:"bwf-export-modal-row"},Object(r.createElement)("div",{className:"bwf-export-modal-row-label"},Object(a.__)("Fields","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-export-modal-row-value"},Y.join(" | ")))))),E&&!Object(u.isEmpty)(S)&&Object(r.createElement)(qn,{exportData:S,onClose:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&T(H,V,C),_(!1)}}))},er=function(e){var t=e.setAdd,n=e.isAdd;return Object(r.useEffect)((function(){Object(l.m)(Object(a.__)("Export List","wp-marketing-automations"))}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Xn,{setAdd:t,isAdd:n}))};n(199);function tr(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return nr(s,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&s&&!a&&t<u.length;t++){var a,o=u[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),i=u,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(s=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,a,o),!0),s}var c={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(nr(t={},r,(function(){return this})),t),f=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,nr(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,nr(f,"constructor",s),nr(s,"constructor",l),l.displayName="GeneratorFunction",nr(s,a,"GeneratorFunction"),nr(f),nr(f,a,"Generator"),nr(f,r,(function(){return this})),nr(f,"toString",(function(){return"[object Generator]"})),(tr=function(){return{w:o,m:b}})()}function nr(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(nr=function(e,t,n,r){function o(t,n){nr(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function rr(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}var ar=function(){var e,t=(e=tr().m((function e(){var t;return tr().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,w()({path:Object(l.C)("/contact/export/custom-selections")});case 1:if((t=e.v)&&t.result){e.n=2;break}throw new Error(Object(a.__)("Unable to get Custom Export Selections","wp-marketing-automations"));case 2:return e.a(2,t.result)}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){rr(o,r,a,c,i,"next",e)}function i(e){rr(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}(),or=function(){return Object(Pe.useQuery)(["bwfcrm-get-export-selections"],ar)};function cr(e){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ir(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=cr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lr(e){return function(e){if(Array.isArray(e))return sr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return sr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ur=function(e){var t=e.checked,n=void 0!==t&&t,a=e.onChange,o=void 0===a?function(){}:a,c=e.title,i=void 0===c?"":c,l=e.count,s=void 0===l?0:l,u=e.groupKey,f=void 0===u?"":u,b=e.selectedGroup,m=void 0===b?"":b,p=e.setSelectedGroup,d=void 0===p?function(){}:p;return Object(r.createElement)("div",{className:"bwf-export-field-header-wrap",onClick:function(e){e.target.classList.contains("components-checkbox-control__label")||e.target.classList.contains("components-checkbox-control__input")||d(m==f?"":f)}},Object(r.createElement)("div",null,Object(r.createElement)(K.a,{className:"bwf-export-toggler",checked:n,onChange:o,label:Object(r.createElement)(r.Fragment,null,i,s>0&&Object(r.createElement)("span",{className:"bwf-light"}," ","( ",s," selected )"))})),Object(r.createElement)("span",null,Object(r.createElement)(g.a,{icon:"tailless-arrow-down-new",size:15})))},fr=function(e){var t=e.selected,n=e.onChange,a=e.selectedGroup,o=e.setSelectedGroup,c=or(),i=c.isLoading,l=c.data,s=Array.isArray(t)?t.map((function(e){return Object.keys(e)[0]})):[],u=function(e,r){if(e)n([].concat(lr(t),[r]));else{var a=t.filter((function(e){return Object.keys(e)[0]!==Object.keys(r)[0]}));n(a)}},f=function(e,r){var a=l[r].selections,o=Object.keys(a);if(e){var c=o.map((function(e){return!s.includes(e)&&ir({},e,a[e].name)})).filter(Boolean);n([].concat(lr(t),lr(c)))}else{var i=t.filter((function(e){return!o.includes(Object.keys(e)[0])}));n(i)}};return i?Object(r.createElement)(r.Fragment,null):Object.keys(l).map((function(e,n){var c,i=l[e],b=i.name,m=i.selections,p=Object.keys(l[e].selections).filter((function(e){return s.includes(e)}));return Object(r.createElement)("div",{className:"bwf-export-field-section",key:n},Object(r.createElement)(ur,{title:b,checked:(c=e,Object.keys(l[c].selections).filter((function(e){return s.includes(e)})).length===Object.keys(l[c].selections).length),groupKey:e,onChange:function(t){return f(t,e)},count:Array.isArray(p)?p.length:0,selectedGroup:a,setSelectedGroup:o}),a==e&&Object(r.createElement)("div",{className:"bwf-p-20 bwf-export-field-list"},Object.keys(m).map((function(e,n){var a=Array.isArray(t)&&t.find((function(t){return!!t[e]}));return Object(r.createElement)("div",{key:n},Object(r.createElement)(K.a,{label:m[e].name,className:"bwf-export-field",checked:a,onChange:function(t){return u(t,ir({},e,m[e].name))}}))}))))}))};function br(e){return function(e){if(Array.isArray(e))return dr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||pr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pr(e,t){if(e){if("string"==typeof e)return dr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dr(e,t):void 0}}function dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Or=function(e){var t=e.title,n=e.setTitle,o=e.selected,c=e.setSelected,i=e.setStep,l=e.expfilter,s=mr(Object(r.useState)("contact_details"),2),f=s[0],b=s[1],m=mr(Object(r.useState)(""),2),d=m[0],O=m[1],j=Object(L.i)(),y=Object(U.a)(),w=Object(r.useMemo)((function(){var e=[],t=["engaged","unengaged","broadcast_sent","broadcast_open","broadcast_click"];return Object.entries(y).map((function(n){var r=mr(n,2),a=r[0],o=r[1];if(t.includes(a))return!1;var c;c={key:a,label:o.labels.add},e.hasOwnProperty(o.group)?e[o.group].fields.push(c):e[o.group]={label:o.groupLabel,fields:[c]}})),e}),[y]);Object(r.useEffect)((function(){if(Object(u.isEmpty)(o)&&w.hasOwnProperty("contact_details")){var e=[];w.contact_details.fields.map((function(t){var n={};n[t.key]=t.label,e.push(n)})),c(e)}}),[]);var v=function(e){var t=!1;return o.find((function(n){var r=mr(Object.entries(n)[0],2),a=r[0];r[1];e==a&&(t=!0)})),t},h=function(e,t){var n=0,a=!1;return w[e].fields.map((function(e){v(e.key)&&n++})),parseInt(w[e].fields.length)===parseInt(n)&&(a=!0),Object(r.createElement)("div",{className:"bwf-export-field-header-wrap",onClick:function(t){t.target.classList.contains("components-checkbox-control__label")||t.target.classList.contains("components-checkbox-control__input")||b(f==e?"":e)}},Object(r.createElement)("div",null,Object(r.createElement)(K.a,{checked:a,className:"bwf-export-toggler",onChange:function(t){!function(e,t){var n=br(o);e?w[t].fields.map((function(e){if(!v(e.key)){var t={};t[e.key]=e.label,n.push(t)}})):w[t].fields.map((function(e){v(e.key)&&(n=n.filter((function(t){var n=mr(Object.entries(t)[0],2),r=n[0];n[1];return r!==e.key})))})),c(n)}(t,e)},label:Object(r.createElement)(r.Fragment,null,t,n>0&&Object(r.createElement)("span",{className:"bwf-light"}," ","( ",n," selected )"))})),Object(r.createElement)("span",null,Object(r.createElement)(g.a,{icon:"tailless-arrow-down-new",size:15})))},_=Object(r.createElement)(r.Fragment,null,["contact_details","geography","contact_custom_fields","woocommerce","segments","engagement"].map((function(e,t){return w.hasOwnProperty(e)?Object(r.createElement)("div",{className:"bwf-export-field-section",key:"bwf-export-field-section-".concat(t)},h(e,w[e].label),f==e&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(r.createElement)("div",{className:"bwf-export-field-list"},e.map((function(e,t){return Object(r.createElement)(K.a,{label:e.label,checked:v(e.key),onChange:function(t){if(t){var n=br(o),r={};r[e.key]=e.label,n.push(r),c(n)}else c(o.filter((function(t){var n=mr(Object.entries(t)[0],2),r=n[0];n[1];return r!==e.key})))},key:"bwf-export-field-".concat(t)})})))}(w[e].fields)):["woocommerce","contact_custom_fields"].includes(e)?"":function(e){return Object(r.createElement)("div",{className:"bwf-export-field-section",key:"'bwf-export-field-section'-".concat(e)},Object(r.createElement)("div",{className:"bwf-export-field-header-wrap"},Object(r.createElement)("div",{className:"bwf-w-120 bwf-placeholder-temp"}),Object(r.createElement)("div",{className:"bwf-w-30 bwf-placeholder-temp"})),0===parseInt(e)&&Object(r.createElement)("div",{className:"bwf-export-field-list"},Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:1}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:2}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:3}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:4}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:5}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:6})))}(t)})),Object(r.createElement)(fr,{selected:o,onChange:function(e){c(e)},selectedGroup:f,setSelectedGroup:b}));return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwfcrm-overview-wrap bwf-contact-export-step-one"},d&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(fn.a,null),Object(r.createElement)(E.a,{status:"error",onRemove:function(){return O("")}},d),Object(r.createElement)("div",{className:"bwf_clear_20"})),Object(r.createElement)(p.TextControl,{type:"text",value:t,placeholder:Object(a.__)("Enter Name","wp-marketing-automations"),label:Object(r.createElement)("span",{className:"bwf-h4"},Object(a.__)("Name","wp-marketing-automations")),onChange:function(e){n(e)}}),Object(r.createElement)("div",{className:"bwf-field-wrapper"},_)),Object(r.createElement)("div",{className:"bwfcrm-export-buttons bwf-display-flex"},Object(r.createElement)("div",null),Object(r.createElement)(p.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,onClick:function(){Object(u.isEmpty)(t)?O(Object(a.__)("Name is required.","wp-marketing-automations")):Object(u.isEmpty)(o)?O(Object(a.__)("Please select field to export.","wp-marketing-automations")):(Object(u.isEmpty)(l)||Object(L.l)(l,"/",j),i(2))}},Object(r.createElement)("span",null,Object(a.__)("Next","wp-marketing-automations")))))},jr=n(48),yr=n(33);function wr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var gr=Object(jr.a)(Object(l.Cb)()).formatAmount,hr=function(e){var t=e.setContactCount,n=e.queryFilters,o=void 0===n?{}:n,c=function(e){var t=Object(u.isEmpty)(e.country)?"":M[e.country],n=Object(l.vc)([e.city,e.state,t],", ");return Object(u.isEmpty)(Object(u.trim)(n))?"":n},f=function(e){var t=c(e);return e.country||t?Object(r.createElement)(d.a,{justify:"start"},!Object(u.isEmpty)(e.country)&&Object(r.createElement)(d.c,null,Object(r.createElement)(Se.a,{code:e.country,size:18})),Object(r.createElement)(d.c,null,t&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",null,c(e)),Object(r.createElement)("br",null)))):"-"},b=function(e){return Object(r.createElement)(yr.a,{href:"admin.php?page=autonami&path=/contact/"+e.id,className:"bwf-a-no-underline"},Object(r.createElement)(Te.a,{contact:e,hideJoiningDate:!0}))},m=function(e){return Object(r.createElement)("div",{className:"bwf-c-contact-details-cell"},e.email&&Object(r.createElement)(d.a,{justify:"start",align:"top"},Object(r.createElement)(d.c,null,Object(r.createElement)(g.a,{icon:"mail"})),Object(r.createElement)(d.c,null,Object(r.createElement)(yr.a,{href:"mailto:"+e.email,className:"bwf-a-no-underline",type:"external"},e.email))),e.phone&&Object(r.createElement)(d.a,{justify:"start",align:"top"},Object(r.createElement)(d.c,null,Object(r.createElement)(g.a,{icon:"phone"})),Object(r.createElement)(d.c,null,Object(r.createElement)(yr.a,{href:"tel:"+e.phone,className:"bwf-a-no-underline",type:"external"},e.phone))))},p=Object(O.a)(),y=p.getPageNumber,w=p.getPerPageCount,v=p.getTotalCount,h=p.getLoading,E=p.getContacts,_=Object(j.a)(),k=_.fetch,S=_.setStateProp;e.query;Object(r.useEffect)((function(){return S("limit",10),function(){return S("limit",25)}}),[]);var P=E(),N=y(),C=w(),x=v(),T=h(),A=wr(Object(r.useState)(!0),2),I=A[0],D=A[1];Object(r.useEffect)((function(){I&&x>0&&D(!1),t(x)}),[x]);var $=[{key:"contact",label:Object(a.__)("Contact","wp-marketing-automations"),isLeftAligned:!0,required:!0},{key:"contact_details",label:Object(a.__)("Details","wp-marketing-automations"),isLeftAligned:!0}];Object(l.uc)()?($.push({key:"total_spent",label:Object(a.__)("Total Spent","wp-marketing-automations"),isLeftAligned:!0}),$.push({key:"last_order",label:Object(a.__)("Last Order","wp-marketing-automations"),isLeftAligned:!0})):$.push({key:"column_location",label:Object(a.__)("Location","wp-marketing-automations"),isLeftAligned:!0});var F=function(e){var t=e.wc,n=t.total_order_count,o=t.total_order_value;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-c-listing-total-spent"},o&&n?Object(r.createElement)("div",{className:"bwf-c-total-spent-amount"},gr(o)," |"," ",n," ",parseInt(n)>1?Object(a.__)("orders","wp-marketing-automations"):Object(a.__)("order","wp-marketing-automations")):"-"))},G=function(e){var t=e.wc.l_order_date;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,t&&"0000-00-00"!=t?Object(r.createElement)("div",{className:"bwf-c-total-spent-amount"},Object(l.kb)(t)):"-"))},L=P.map((function(e){var t=function(e){return Object(u.merge)({id:0,email:"-",first_name:"",last_name:"",creation_date:"",fields:{marketing_status:"0",first_order_date:"",country:"",city:"",state:"",phone:""},wc:{id:1,l_order_date:"",total_order_count:0,total_order_value:0,total_purchased_items:0}},e)}(e),n=[{display:b(t),value:Object(l.vc)([t.first_name,t.last_name]," ")},{display:m(t),value:"'".concat(Object(a.__)("Email","wp-marketing-automations"),": ").concat(t.email,", ").concat(Object(a.__)("Phone","wp-marketing-automations"),": ").concat(t.phone)}];return Object(l.uc)()?(n.push({display:F(t),value:""}),n.push({display:G(t),value:""})):n.push({display:f(t),value:c(t)}),n})),R=function(e){e!==C&&k(o,0,e,!0,!1,"",!1)},U=i()("bwfcrm-contacts-list",{"has-search":!0}),B=parseInt(x)>0?" ("+parseInt(x)+")":"";return Object(r.createElement)(s.a,{className:U,title:Object(a.__)("Contacts ","wp-marketing-automations")+B,rows:L,headers:$,query:{paged:N},rowsPerPage:C,totalRows:x,isLoading:T,onPageChange:function(e,t){k(o,(e-1)*C,C,!0,!1,"",!1)},onQueryChange:function(e){return"per_page"!==e?function(){}:R},showMenu:!1,emptyMessage:Object(a.__)("No contacts found","wp-marketing-automations")})},Er=n(209),_r=["page","path","s","filter"];var kr=function(e){var t=e.setStep,n=e.setExportFilter,o=e.contactCount,c=e.setContactCount,i=Object(U.a)(!0,!0),s=i.loading,f=void 0===s||s,b=i.filters,m=void 0===b?{}:b,d=Object(L.i)(),O=d.page,y=d.path,w=(d.s,d.filter,function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(d,_r)),v=Object(j.a)(),g=Object(r.useRef)(w),h=v.fetch;Object(r.useEffect)((function(){h(w,0,10,!0,!1,"",!1)}),[]),Object(r.useEffect)((function(){Object(l.Cc)(w,g.current)||h(w,0,10,!0,!1,"",!1),g.current=w}),[w]);var E=Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-contact-export-step-two"},Object(r.createElement)("div",{className:"bwf-bulk-action-step-loading bwf-p-20"},Object(r.createElement)("div",{className:"bwf-bulk-action-step-loading"},Object(r.createElement)("div",{className:"bwf-filter-placeholder"},Object(r.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(r.createElement)("div",{className:"bwf-w-150"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-150"})),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-36"})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}),Object(r.createElement)("br",null),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-400"})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(r.createElement)("div",null),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-36 bwf-w-90"}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-w-150"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-15"})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(Er.a,{numberOfRows:5,headers:[{key:"2",label:Object(r.createElement)("div",{className:"bwf-w-210"},Object(r.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))},{key:"3",label:Object(r.createElement)("div",{className:"bwf-w-210"},Object(r.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))},{key:"4",label:Object(r.createElement)("div",{className:"bwf-w-210"},Object(r.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))}]})))),Object(r.createElement)("div",{className:"bwf-display-flex bwfcrm-export-buttons"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-36"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-36"})));return f?Object(r.createElement)(r.Fragment,null,E):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-contact-export-step-two"},Object(r.createElement)("div",{className:"bwf-export-filter-wrapper"},Object(r.createElement)("div",{className:"bwf-display-flex bwf-mb-16",style:{justifyContent:"space-between"}},Object(r.createElement)("div",{className:"bwf-h3 bwf-w-300"},Object(a.__)("Segment Contacts","wp-marketing-automations")),Object(r.createElement)(B.c,{addAdvance:!1})),Object(r.createElement)("div",{className:"bwf-p-0"},Object(r.createElement)(q.a,{siteLocale:"en-US",currency:Object(l.uc)()?bwfcrm_contacts_data.currency:{},config:{title:Object(a.__)("Select Rules","wp-marketing-automations"),filters:m,footerComponent:function(e){return Object(r.createElement)(B.a,{filter:e.data,config:e.config})},enableGrouping:!0},path:"/contacts",query:d}))),Object(r.createElement)("div",{className:"bwf-export-table-wrapper"},Object(r.createElement)(hr,{setContactCount:c,queryFilters:w}))),Object(r.createElement)("div",{className:"bwf-display-flex bwfcrm-export-buttons"},Object(r.createElement)(p.Button,{className:"bwfcrm-export-prev bwf-display-flex",isSecondary:!0,onClick:function(){Object(u.isEmpty)(w)||Object(L.l)({page:O,path:y},"/",{}),n(w),t(1)}},Object(r.createElement)("span",null,Object(a.__)("Previous","wp-marketing-automations"))),Object(r.createElement)(p.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,disabled:!(o>0),onClick:function(){Object(u.isEmpty)(w)||Object(L.l)({page:O,path:y},"/",{}),n(w),o>0&&t(3)}},Object(r.createElement)("span",null,Object(a.__)("Next","wp-marketing-automations")))))};function Sr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Nr=function(e){var t=e.setAdd,n=Sr(Object(r.useState)(!1),2),o=n[0],c=(n[1],Sr(Object(r.useState)(1),2)),i=c[0],l=c[1],s=Sr(Object(r.useState)(!1),2),u=s[0],f=s[1],b=Sr(Object(r.useState)(""),2),m=b[0],d=b[1],O=Sr(Object(r.useState)([]),2),j=O[0],y=O[1],w=Sr(Object(r.useState)([]),2),v=w[0],g=w[1],h=Sr(Object(r.useState)(0),2),E=h[0],_=h[1],k=function(e){switch(e){case 1:return Object(r.createElement)(Or,{title:m,setTitle:d,selected:j,expfilter:v,setSelected:y,setStep:l});case 2:return Object(r.createElement)(kr,{setStep:l,setExportFilter:g,contactCount:E,setContactCount:_});case 3:return Object(r.createElement)(Rn,{title:m,fields:j,expfilter:v,contactCount:E,setPending:f,setAdd:t})}},S=[{key:1,label:Object(a.__)("Fields","wp-marketing-automations"),content:k(1)},{key:2,label:Object(a.__)("Contacts","wp-marketing-automations"),content:k(2)},{key:3,label:Object(a.__)("Processing","wp-marketing-automations"),content:k(3)}];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p.Modal,{onRequestClose:function(){return t(!1)},className:"bwf-admin-modal bwf-admin-modal-xxl bwf-export-add-modal",title:Object(a.__)("Create Export","wp-marketing-automations"),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-crm-export-init"},o?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(F.a,null)):Object(r.createElement)(Pn.a,{steps:S,currentStep:i,isPending:u}))))};function Cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Tr=function(e){var t=e.setExport,n=Cr(Object(r.useState)(!1),2),o=n[0],c=n[1];Object(r.useEffect)((function(){Object(l.m)(Object(a.__)("Export Contacts","wp-marketing-automations"))}),[]);var i=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(r.createElement)(g.a,{icon:"export",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(a.__)("Export your contacts to CSV file.","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(a.__)("Start Exporting","wp-marketing-automations"),proCheck:!0,onClick:function(){Object(l.fc)()&&c(!0)}}]}}];return Object(r.createElement)(p.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-admin-modal-no-header bwf-export-contact-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-export-modal-header"},Object(r.createElement)("div",{className:"bwf-export-modal-title"},Object(a.__)("Export Contacts","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-display-flex gap-24"},!o&&Object(l.eb)()&&Object(r.createElement)(p.Button,{variant:"primary",className:"bwf-add-contact-export-btn",onClick:function(){return c(!0)},isBusy:!1,disabled:!1},Object(a.__)("Create Export","wp-marketing-automations")),Object(r.createElement)("div",{onClick:function(){Object(l.m)(Object(a.__)("Contacts","wp-marketing-automations")),Object(L.l)({page:"autonami",path:"/contacts/"},"/",{}),t(!1)},className:"bwf-flex",style:{cursor:"pointer",marginRight:"-10px"}},Object(r.createElement)(g.a,{icon:"close"})))),o&&Object(r.createElement)(Nr,{setAdd:c}),Object(l.eb)()?Object(r.createElement)(er,{setAdd:c,isAdd:o}):Object(r.createElement)(Ae.a,{data:i}))},Ar=n(367);function Ir(e){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dr(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return $r(s,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&s&&!a&&t<u.length;t++){var a,o=u[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),i=u,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(s=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,a,o),!0),s}var c={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):($r(t={},r,(function(){return this})),t),f=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,$r(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,$r(f,"constructor",s),$r(s,"constructor",l),l.displayName="GeneratorFunction",$r(s,a,"GeneratorFunction"),$r(f),$r(f,a,"Generator"),$r(f,r,(function(){return this})),$r(f,"toString",(function(){return"[object Generator]"})),(Dr=function(){return{w:o,m:b}})()}function $r(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}($r=function(e,t,n,r){function o(t,n){$r(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function Fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(n),!0).forEach((function(t){Lr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ir(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ir(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mr(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Rr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ur(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ur(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Br=function(e){var t=e.importData,n=e.onClose,o=e.apiLoading,c=e.createImport,i=void 0===c?function(){}:c,s=e.error,f=void 0===s?"":s,b=(e.setError,t.name),m=void 0===b?"":b,d=t.description,O=void 0===d?"":d,j=t.field_schema,y=void 0===j?[]:j,w=t.defaultValues,v=void 0===w?{}:w,h=t.slug,_=void 0===h?"":h,k=t.submit_text,S=void 0===k?Object(a.__)("Import","wp-marketing-automations"):k,P=Rr(Object(r.useState)([]),2),N=P[0],C=P[1],x=Object(r.useCallback)((function(e){var t={};return y.some((function(n){null!=n&&n.id&&n.required&&!e[n.id]&&(t[n.id]=n.hasOwnProperty("errorMsg")&&""!==n.errorMsg?n.errorMsg:Object(a.__)("This field is required","wp-marketing-automations"))})),t}),[y]),T=function(){var e,t=(e=Dr().m((function e(){var t,n,r=arguments;return Dr().w((function(e){for(;;)switch(e.n){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},n=x(t),Object(u.isEmpty)(n)){e.n=1;break}return C(n),e.a(2);case 1:return C([]),e.n=2,i(Gr(Gr({},t),{},{slug:_}));case 2:return e.a(2)}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Mr(o,r,a,c,i,"next",e)}function i(e){Mr(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(p.Modal,{className:"bwf-admin-modal bwf-admin-modal-480 bwf-admin-modal-no-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-admin-m-header-new"},Object(r.createElement)("div",{className:"bwf-admin-m-title",style:{lineHeight:"28px"}},""!==O?O:Object(a.sprintf)(/* translators: %s: Importer name */
Object(a.__)("Import %s","wp-marketing-automations"),m?"- "+m:"")),Object(r.createElement)("div",{className:"bwf-admin-m-close",onClick:n},Object(r.createElement)(g.a,{icon:"close",size:20}))),Object(r.createElement)("div",{className:"bwf-import-modal-content importer-selected-"+_,style:{textAlign:"left"}},""!==f&&Object(r.createElement)(E.a,{status:"error",isDismissible:!1,className:"bwf-mb-0"},f),Object(r.createElement)(l.f.Provider,{value:{errorList:N,setErrorList:C}},Object(r.createElement)(Ar.a,{fields:y,values:Object(u.isEmpty)(v)||Object(u.isUndefined)(v)?{}:v,handleSubmit:T,submitButtonTitle:S,showCancel:!0,onCancel:n,isLoading:o}))))},qr=n(83);function zr(e){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Hr=["slug"];function Kr(e){return function(e){if(Array.isArray(e))return ra(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||na(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(n),!0).forEach((function(t){Qr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=zr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Zr(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return Jr(s,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&s&&!a&&t<u.length;t++){var a,o=u[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),i=u,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(s=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,a,o),!0),s}var c={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Jr(t={},r,(function(){return this})),t),f=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Jr(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,Jr(f,"constructor",s),Jr(s,"constructor",l),l.displayName="GeneratorFunction",Jr(s,a,"GeneratorFunction"),Jr(f),Jr(f,a,"Generator"),Jr(f,r,(function(){return this})),Jr(f,"toString",(function(){return"[object Generator]"})),(Zr=function(){return{w:o,m:b}})()}function Jr(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Jr=function(e,t,n,r){function o(t,n){Jr(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function Xr(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ea(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Xr(o,r,a,c,i,"next",e)}function i(e){Xr(o,r,a,c,i,"throw",e)}c(void 0)}))}}function ta(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||na(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function na(e,t){if(e){if("string"==typeof e)return ra(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ra(e,t):void 0}}function ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var aa=function(e){var t=e.importData,n=void 0===t?{}:t,o=e.setImportData,c=void 0===o?function(){}:o,i=e.setPending,s=void 0===i?function(){}:i,f=e.setStep,b=void 0===f?function(){}:f,m=e.resetImport,p=void 0===m?function(){}:m,d=Object(r.useContext)(l.h),O=ta(Object(r.useState)(!1),2),j=O[0],y=O[1],v=ta(Object(r.useState)(!1),2),g=v[0],h=v[1],_=ta(Object(r.useState)(""),2),k=_[0],S=_[1];Object(r.useEffect)((function(){j||(S(""),c({}))}),[j]);var P=Object(Pe.useQuery)(["get-bwf-importers"],ea(Zr().m((function e(){var t,n;return Zr().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,w()({method:"GET",path:Object(l.C)("/contacts/importers")});case 1:if(!(t=e.v)||!t.result){e.n=2;break}return e.a(2,t.result);case 2:e.n=4;break;case 3:throw e.p=3,n=e.v,Error((null==n?void 0:n.message)||Object(a.__)("Unable to fetch importers","wp-marketing-automations"));case 4:return e.a(2,[])}}),e,null,[[0,3]])}))),{enabled:!0,retry:0,refetchOnMount:!0,staleTime:18e5}),N=P.isLoading,C=P.data,x=void 0===C?[]:C,T=P.error,A=function(){var e=ea(Zr().m((function e(){var t,r,o,i,f,m,p=arguments;return Zr().w((function(e){for(;;)switch(e.p=e.n){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},h(!0),s(!0),S(""),r=t.slug,o=void 0===r?"":r,i=Yr(t,Hr),f=Object(a.__)("Unable to validate fields","wp-marketing-automations"),e.p=1,e.n=2,w()({method:"POST",path:Object(l.C)("/contacts/import"),data:{fields:i,importer_type:o}}).then((function(e){if(200!==e.code||!e.hasOwnProperty("result")||Object(u.isEmpty)(e.result))throw Error(Object(l.w)(null==e?void 0:e.message));if(e.result.hasOwnProperty("updated_schema")&&e.result.updated_schema&&e.result.hasOwnProperty("fields")&&!Object(u.isEmpty)(e.result.fields)){var t=Object(u.cloneDeep)(n);return t.field_schema=e.result.fields,e.result.hasOwnProperty("submit_text")&&(t.submit_text=e.result.submit_text),y(t),h(!1),void s(!1)}if(!e.result.hasOwnProperty("data")||Object(u.isEmpty)(e.result.data))throw Error(Object(l.w)(null==e?void 0:e.message));var r=e.result.data;e.result.hasOwnProperty("import_id")&&(r.import_id=e.result.import_id),c(Wr(Wr({},n),r)),s(!1),b(2),h(!1)}));case 2:e.n=4;break;case 3:e.p=3,m=e.v,j?S((null==m?void 0:m.message)||f):(d((null==m?void 0:m.message)||f),Object(l.Pb)(d,3e3)),c({}),h(!1),s(!1);case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}(),I=Object(r.createElement)("div",{className:"bwf-importer-step-row"},Kr(Array(parseInt(5))).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-importer-type is-loader",key:t},Object(r.createElement)("div",{className:"bwf-importer-img"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-45 bwf-w-45"})),Object(r.createElement)("div",{className:"bwf-importer-title"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"})))})));return Object(r.createElement)("div",{className:"bwf-importer-first-step"},Object(r.createElement)("div",{className:"bwf-heading-bold"},Object(a.__)("Select Source","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-importer-listing"},N?I:Object(r.createElement)(r.Fragment,null,!!T&&Object(r.createElement)(E.a,{status:"error"},T.hasOwnProperty("message")?T.message:Object(a.__)("Unknown Error while fetching importers","wp-marketing-automations")),!T&&Object.values(x).map((function(e,t){if(!Object(u.isEmpty)(e))return Object(r.createElement)("div",{className:"bwf-importer-step-row",key:"row"+t},Object.values(e).map((function(e,t){var a=e.name,o=void 0===a?"":a,i=e.logo_url,l=void 0===i?"":i,f=e.slug,b=void 0===f?"":f,m=e.has_fields,p=void 0!==m&&m,d=!p&&n.slug===b&&g;return Object(r.createElement)("div",{className:"bwf-importer-type "+(!Object(u.isEmpty)(n)&&n.hasOwnProperty("slug")&&n.slug===b?!p&&g?"is-selected is-loading":"is-selected":""),key:t,onClick:function(){return t=e,void(g||(c(t),t.hasOwnProperty("has_fields")&&t.has_fields?y(t):(s(!0),A({slug:t.slug}))));var t}},Object(r.createElement)("div",{className:"bwf-importer-img"},""!==l&&Object(r.createElement)("img",{style:d?{opacity:0}:{},alt:o,src:l}),d&&Object(r.createElement)(qr.a,{color:"#0073aa"})),Object(r.createElement)("div",{className:"bwf-importer-title"},o||b))})))})),!Object(u.isEmpty)(j)&&Object(r.createElement)(Br,{importData:j,apiLoading:g,createImport:A,onClose:function(){p(),y(!1)},error:k,setError:S}))))},oa=n(112);function ca(e){return(ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function la(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ia(Object(n),!0).forEach((function(t){sa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sa(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ca(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ca(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ca(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ua(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fa(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fa(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ba=function(e){var t=e.onChange,n=e.fieldsList,o=void 0===n?[]:n,c=e.options,i=void 0===c?[]:c,l=e.label,s=void 0===l?"":l,f=e.id,b=void 0===f?"":f,m=e.defaultValue,p=void 0===m?{}:m,d=ua(Object(r.useState)(p),2),O=d[0],j=d[1];Object(r.useLayoutEffect)((function(){t({})}),[]),Object(r.useEffect)((function(){Object(u.size)(O)&&t(O)}),[O]);var y=Object(r.useMemo)((function(){return Object.values(Object(u.cloneDeep)(O))}),[O]),w=function(e){return i.filter((function(t){return t.isDisabled=!0,""!==t.key&&O[e]!=t.key&&y.includes(t.key)||(t.isDisabled=!1),t}))},v=Object(r.useMemo)((function(){var e={};return i.map((function(t){var n=t.key,r=t.helptext,a=void 0===r?"":r;e[n]=a})),e}),[i]);return Object(r.createElement)("div",{className:"bwf-import-configuration bwf-mapping-field",key:b},Object(r.createElement)(oa.a,{items:[{key:"general",label:Object(r.createElement)("div",{className:"bwf-label"},Object(a.__)("Contact Field","wp-marketing-automations")),display:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-tags-container bwf-head",key:b+"acc-0"},Object(r.createElement)("div",{className:"bwf-label"},s),Object(r.createElement)("div",{className:"bwf-label"},Object(a.__)("Contact Fields","wp-marketing-automations"))),o.map((function(e,t){var n,a=e.title,o=e.slug;return Object(r.createElement)("div",{className:"bwf-tags-container",key:t},Object(r.createElement)("div",{className:"bwf-title"},a),Object(r.createElement)("div",{className:"bwf-selction-wrap"},Object(r.createElement)(Ne.b,{onChange:function(e){return function(e,t){j((function(n){return la(la({},n),{},sa({},e,t))}))}(o,e)},options:w(o),selected:O.hasOwnProperty(o)?O[o]:"",key:"select-contact",className:"bwf-w-280"}),O.hasOwnProperty(o)?(n=O[o],v.hasOwnProperty(n)&&""!==v[n]?Object(r.createElement)("span",{className:"bwf-mapped-text-hint"},v[n]):null):""))})))}],className:"bwf-accordion bwf-c-s-collapsible__md",handleIcons:"up-down"}))},ma=(n(1192),n(28));function pa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return da(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?da(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Oa=function(e){var t=e.placeholder,n=void 0===t?"":t,a=e.label,o=void 0===a?"":a,c=e.onChange,i=e.multiple,l=void 0!==i&&i,s=e.autocompleter,f=e.className,b=void 0===f?"":f,m=pa(Object(r.useState)([]),2),p=m[0],d=m[1],O=p&&p.map((function(e){return{key:e.id,label:e.name}}));Object(r.useEffect)((function(){Object(u.size)(p)&&c(p)}),[p]);return Object(r.createElement)("div",{className:"bwf-display-flex-column set-normal"},o?Object(r.createElement)("div",{className:"bwf-label"},o):null,Object(r.createElement)(ma.a,{autocompleter:s,multiple:l,allowFreeTextSearch:!0,inlineTags:!1,selected:O,onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];l||(e=e.slice(e.length-1,e.length)),e=e.map((function(e){return e.hasOwnProperty("key")&&(e.id=e.key,delete e.key),e.hasOwnProperty("label")&&(e.name=e.label,delete e.label),e})),d(e)},onRemoveTag:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";d(p.filter((function(n){return!(parseInt(n.id)===parseInt(e)&&n.name===t)})))},placeholder:n,bwfEnableEmptySearch:!0,showClearButton:!1,disabled:!1,className:b}))};function ja(e){return(ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ya(Object(n),!0).forEach((function(t){va(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ya(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function va(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ja(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ja(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ja(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ga(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ha(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ha(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ha(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ea=function(e){var t=e.tagList,n=e.onChange,o=e.autocompleter,c=e.label,i=void 0===c?"":c,l=e.id,s=void 0===l?"":l,u=e.type,f=void 0===u?"tags":u,b=ga(Object(r.useState)(t),2),m=b[0],d=b[1],O=ga(Object(r.useState)(0),2),j=O[0],y=O[1],w=ga(Object(r.useState)(""),2),v=w[0],g=w[1],h=ga(Object(r.useState)(!1),2),E=h[0],_=h[1],k=ga(Object(r.useState)(""),2),S=k[0],P=k[1];Object(r.useLayoutEffect)((function(){N(!0)}),[]);Object(r.useEffect)((function(){""!==S&&n(S)}),[S]);var N=function(e){var t=m.map((function(t){return wa(wa({},t),{},{auto:e})})),n={};e?t.forEach((function(e){var t=e.title,r=e.slug,a=e.auto;n[r]={auto:a,id:0,title:t}})):n={},P(n),_(e),d(t)};return Object(r.useEffect)((function(){var e=m.filter((function(e){return e.auto})).length,t=m.filter((function(e){return!e.auto})).length;g(t),y(e)}),[m]),Object(r.useEffect)((function(){_(0===v)}),[v]),Object(r.createElement)("div",{className:"bwf-import-configuration",key:s},Object(r.createElement)(oa.a,{items:[{},{key:"general",label:Object(r.createElement)("div",{className:"bwf-tag-label"},Object(r.createElement)("div",{className:"bwf-display-flex gap-16"},Object(r.createElement)("div",{className:""},"lists"===f?Object(a.__)("Lists","wp-marketing-automations"):Object(a.__)("Tags","wp-marketing-automations")),j?Object(r.createElement)("div",{className:"bwf-title bwf-style-2 bwf-style-3"},Object(r.createElement)("span",null,j)," ",Object(a.__)("Auto Created","wp-marketing-automations")):null,v?Object(r.createElement)("div",{className:"bwf-title bwf-style-2 bwf-style-3"},Object(r.createElement)("span",null,v)," ",Object(a.__)("Manually Updated","wp-marketing-automations")):null),Object(r.createElement)("div",{className:"bwf-auto-toggle-flex",onClick:function(e){return e.stopPropagation()}},Object(r.createElement)("div",{className:"bwf-title bwf-style-2"},"lists"===f?Object(a.__)("Auto-Create All Lists","wp-marketing-automations"):Object(a.__)("Auto-Create All Tags","wp-marketing-automations")),Object(r.createElement)(p.ToggleControl,{className:"bwf-tooglecontrol-advance",checked:E,onChange:function(e){return N(e)}}))),display:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-tags-container bwf-head"},Object(r.createElement)("div",{className:"bwf-heading"},i),Object(r.createElement)("div",{className:"bwf-heading"},"lists"===f?Object(a.__)("List","wp-marketing-automations"):Object(a.__)("Tag","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-heading"},Object(a.__)("Auto-Create?","wp-marketing-automations"))),m.map((function(e,t){var n=e.title,c=e.auto,i=e.slug;return Object(r.createElement)("div",{className:"bwf-tags-container",key:t},Object(r.createElement)("div",{className:"bwf-title",dangerouslySetInnerHTML:{__html:n}}),Object(r.createElement)("div",{className:"bwf-title bwf-style-2"},c?"lists"===f?Object(a.__)("List will be auto-created","wp-marketing-automations"):Object(a.__)("Tag will be auto-created","wp-marketing-automations"):Object(r.createElement)(Oa,{autocompleter:o,multiple:!1,inLineTags:!0,placeholder:Object(a.__)("Search / Type to add","wp-marketing-automations"),onChange:function(e){var t=e[0],n=t.id,r=t.name;P((function(e){return wa(wa({},e),{},va({},i,{auto:!1,id:n,title:r}))}))}})),Object(r.createElement)(p.ToggleControl,{className:"bwf-tooglecontrol-advance",checked:c,onChange:function(t){return function(e,t){var n=m.map((function(n){return n.slug===e.slug?wa(wa({},n),{},{auto:t}):n}));P((function(n){return wa(wa({},n),{},va({},e.slug,wa({auto:t},t?{id:0,title:e.title}:{})))})),d(n)}(e,t)}}))})))}],className:"bwf-accordion bwf-c-s-collapsible__md",handleIcons:"up-down"}))},_a=n(204);function ka(e){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(n),!0).forEach((function(t){Na(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Na(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ka(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ka(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ka(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ca=function(e){var t,n=e.finalData,o=e.onChange,c=e.profileFields,i=void 0===c?[]:c;return Object(r.useLayoutEffect)((function(){var e={disable_events:!1,update_existing:!1,dont_update_blank:!0,update_existing_fields:!0};if(Object(u.isEmpty)(n)){var t={};Object(u.isEmpty)(i)?t=Pa({},e):i.map((function(n){t[n]=!!e.hasOwnProperty(n)&&e[n]})),o(Pa(Pa({},t),{},{imported_contact_status:1,marketing_status:1,trigger_events:!1,tags:[],lists:[]}))}}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-heading4-new bwf-mt-36"},Object(a.__)("Actions","wp-marketing-automations")," "),Object(r.createElement)("div",{className:"bwf_clear_16"}),Object(r.createElement)("div",{className:"bwf-profile"},Object(r.createElement)("div",{className:"bwf-profile-search"},Object(r.createElement)(Oa,{label:Object(a.__)("Add Tags","wp-marketing-automations"),placeholder:Object(a.__)("Search by tag name","wp-marketing-automations"),onChange:function(e){var t=e.map((function(e){return{id:e.id,value:e.name}}));o({tags:t})},autocompleter:_a.b,multiple:!0,className:"bwf-w-100p"}),Object(r.createElement)(Oa,{label:Object(a.__)("Add to Lists","wp-marketing-automations"),autocompleter:_a.a,placeholder:Object(a.__)("Search by list name","wp-marketing-automations"),onChange:function(e){var t=e.map((function(e){return{id:e.id,value:e.name}}));o({lists:t})},multiple:!0,className:"bwf-w-100p"}),(Object(u.isEmpty)(i)||i.includes("marketing_status"))&&Object(r.createElement)("div",{className:"bwf-profile-status"},Object(r.createElement)("div",{className:"bwf-label"},Object(a.__)("Status","wp-marketing-automations")),Object(r.createElement)(Ne.b,{onChange:function(e){o({marketing_status:e,imported_contact_status:e})},options:Object(l.P)("statusOptcontrol2")||[],selected:null!==(t=n.marketing_status)&&void 0!==t?t:1,key:"select-contact"})))),Object(r.createElement)("div",{className:"bwf-heading4-new bwf-mt-36"},Object(a.__)("Contact Settings","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_16"}),Object(r.createElement)("div",{className:"bwf-import-contact-setting"},(Object(u.isEmpty)(i)||i.includes("update_existing"))&&Object(r.createElement)(p.ToggleControl,{label:Object(r.createElement)("div",{className:"bwf-display-flex gap-4 bwf-flex-end"},Object(r.createElement)(rt.a,{icon:"help-circle",iconSize:16,size:300,noWrap:!0,toolTipText:Object(r.createElement)("span",{key:1,className:"bwfan_tooltip_text","data-position":"top"},Object(a.__)("If enabled, any existing contact statuses will be updated to match the new data. This helps keep your contact list up-to-date with the latest information","wp-marketing-automations"))}),Object(a.__)("Update Contact Status if Changed","wp-marketing-automations")),className:"bwf-tooglecontrol-advance",checked:n.update_existing||!1,onChange:function(e){o({update_existing:e})}}),(Object(u.isEmpty)(i)||i.includes("dont_update_blank"))&&Object(r.createElement)(p.ToggleControl,{label:Object(r.createElement)("div",{className:"bwf-display-flex gap-4 bwf-flex-end"},Object(r.createElement)(rt.a,{icon:"help-circle",size:300,iconSize:16,noWrap:!0,toolTipText:Object(r.createElement)("span",{key:1,className:"bwfan_tooltip_text","data-position":"top"},Object(a.__)("If enabled, empty fields from the import data will not overwrite existing values in your contact records. Useful if you want to preserve data in fields that are already populated","wp-marketing-automations"))}),Object(a.__)("Do Not Overwrite Empty Fields","wp-marketing-automations")),className:"bwf-tooglecontrol-advance",checked:n.dont_update_blank||!1,onChange:function(e){o({dont_update_blank:e})}}),(Object(u.isEmpty)(i)||i.includes("update_existing_fields"))&&Object(r.createElement)(p.ToggleControl,{label:Object(r.createElement)("div",{className:"bwf-display-flex gap-4 bwf-flex-end"},Object(r.createElement)(rt.a,{icon:"help-circle",iconSize:16,size:300,noWrap:!0,toolTipText:Object(r.createElement)("span",{key:1,className:"bwfan_tooltip_text","data-position":"top"},Object(a.__)("Enable this option to replace any existing information in your contact records with new data. This will overwrite current values in all fields where new data is provided","wp-marketing-automations"))}),Object(a.__)("Allow Field Information to be Overwritten","wp-marketing-automations")),className:"bwf-tooglecontrol-advance",checked:n.update_existing_fields||!1,onChange:function(e){o({update_existing_fields:e})}}),(Object(u.isEmpty)(i)||i.includes("disable_events"))&&Object(r.createElement)(p.ToggleControl,{label:Object(r.createElement)("div",{className:"bwf-display-flex gap-4 bwf-flex-end"},Object(r.createElement)(rt.a,{icon:"help-circle",iconSize:16,size:300,noWrap:!0,toolTipText:Object(r.createElement)("span",{key:1,className:"bwfan_tooltip_text","data-position":"top"},Object(a.__)("Enable this option to automatically trigger any pre-configured automations when tags or lists are added or updated during the import process. This helps ensure that your workflows are triggered immediately based on new data","wp-marketing-automations"))}),Object(a.__)("Trigger Automations for Tag & List Changes","wp-marketing-automations")),className:"bwf-tooglecontrol-advance",checked:n.disable_events||!1,onChange:function(e){o({disable_events:e})}})))},xa=n(237),Ta=["id","type"];function Aa(e){return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ia(){return(Ia=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Da(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Aa(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Aa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Aa(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $a=function(e){var t=e.secondStepSchema,n=e.setStepData,a=e.stepData,o=e.profileFields,c=void 0===o?[]:o,i=function(e,t){n(Da({},e,t))},l=function(e,t){var n=e.id,a=void 0===n?"":n,o=e.type,c=void 0===o?"":o,l=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Ta);switch(c){case"text":var s=l.label,u=void 0===s?"":s;return""!==u?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{key:a+"-"+t,className:"bwf-display-flex bwf-flex-start bwf-heading3-new bwf-pmb-16",dangerouslySetInnerHTML:{__html:u}})):Object(r.createElement)(r.Fragment,null);case"notice":var f=l.nType,b=void 0===f?"info":f,m=l.noticeLabel,p=void 0===m?"":m,d=l.text,O=void 0===d?"":d,j=l.isHtml,y=void 0!==j&&j;return""!==O?Object(r.createElement)(r.Fragment,null,p&&Object(r.createElement)("div",{key:a+"-"+t,className:"bwf-display-flex bwf-flex-start bwf-heading4-new",dangerouslySetInnerHTML:{__html:p}}),Object(r.createElement)(E.a,{status:b,isDismissible:!1,isHtml:y,className:"bwf-setting-notice"},O)):Object(r.createElement)(r.Fragment,null);case"checkbox":return Object(r.createElement)(xa.a,Ia({className:"bwf-pmb-16",key:a+"-"+t,onChange:function(e){return i(a,e)}},l));case"fields":return Object(r.createElement)(ba,Ia({id:a+"-"+t,onChange:function(e){return i(a,e)}},l));case"tags":return Object(r.createElement)(Ea,Ia({id:a+"-"+t,onChange:function(e){return i(a,e)},autocompleter:_a.b,type:"tags"},l));case"lists":return Object(r.createElement)(Ea,Ia({id:a+"-"+t,onChange:function(e){return i(a,e)},type:"lists",autocompleter:_a.a},l));default:return null}};return Object(r.createElement)("div",{className:"bwf-import-configuration"},t.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:t},l(e,t)," ")})),Object(r.createElement)(Ca,{profileFields:c,finalData:a,onChange:function(e){return n(e)}}))};function Fa(e){return(Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ga(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return La(s,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&s&&!a&&t<u.length;t++){var a,o=u[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),i=u,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(s=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,a,o),!0),s}var c={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(La(t={},r,(function(){return this})),t),f=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,La(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,La(f,"constructor",s),La(s,"constructor",l),l.displayName="GeneratorFunction",La(s,a,"GeneratorFunction"),La(f),La(f,a,"Generator"),La(f,r,(function(){return this})),La(f,"toString",(function(){return"[object Generator]"})),(Ga=function(){return{w:o,m:b}})()}function La(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(La=function(e,t,n,r){function o(t,n){La(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function Ma(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ra(Object(n),!0).forEach((function(t){Ba(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ra(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ba(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Fa(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Fa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fa(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return za(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?za(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function za(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ha=function(e){var t=e.importData,n=void 0===t?{}:t,o=e.setPending,c=void 0===o?function(){}:o,i=e.setStep,s=void 0===i?function(){}:i,f=Object(r.useContext)(l.h),b=n.name,m=void 0===b?"":b,p=n.second_step_schema,d=void 0===p?[]:p,O=n.profile_fields,j=void 0===O?[]:O,y=n.stepValidation,v=void 0===y||y,g=n.slug,h=void 0===g?"":g,k=n.import_id,S=void 0===k?"":k,P=qa(Object(r.useState)({}),2),N=P[0],C=P[1],x=qa(Object(r.useState)(!1),2),T=x[0],A=x[1],I=qa(Object(r.useState)(""),2),D=I[0],$=I[1],F=function(){var e,t=(e=Ga().m((function e(t){var n;return Ga().w((function(e){for(;;)switch(e.p=e.n){case 0:if((r=t).hasOwnProperty("mapped_fields")&&(Object(u.isEmpty)(r.mapped_fields)||!Object.values(r.mapped_fields).includes("email"))&&($(Object(a.__)("Email field mapping is missing.","wp-marketing-automations")),1)){e.n=5;break}return $(""),c(!0),A(!0),e.p=1,e.n=2,w()({method:"POST",path:Object(l.C)("/contacts/import/".concat(S)),data:{data:t,type:h}}).then((function(e){200===e.code&&e.hasOwnProperty("result")?(c(!1),s(3)):f((null==e?void 0:e.message)||msg)}));case 2:e.n=4;break;case 3:e.p=3,n=e.v,f((null==n?void 0:n.message)||msg);case 4:c(!1),A(!1),Object(l.Pb)(f,3e3);case 5:return e.a(2)}var r}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Ma(o,r,a,c,i,"next",e)}function i(e){Ma(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}();return Object(r.createElement)("div",{className:"bwf-importer-second-step"},Object(r.createElement)("div",{className:"bwf-heading-bold"},Object(a.__)("Mapping","wp-marketing-automations"),m?" - ".concat(m):""),Object(r.createElement)("div",{className:"bwf-contact-configuration"},!!D&&Object(r.createElement)(E.a,{status:"error",className:"bwf-mb-16"},""!==D?D:Object(a.__)("Error in import configuration","wp-marketing-automations")),Object(r.createElement)($a,{secondStepSchema:d,stepData:N,profileFields:j,setStepData:function(e){C((function(t){return Ua(Ua({},t),e)}))}})),Object(r.createElement)("div",{className:"bwf-importer-footer"},Object(r.createElement)(_.a,{className:" bwf-display-flex bwf-no-ripple",isPrimary:!0,isBusy:T,disabled:T||!v,onClick:function(){!T&&v&&F(N)}},Object(r.createElement)("span",null,Object(a.__)("Import","wp-marketing-automations")))))};n(1193);function Ka(e){return(Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Va(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return Wa(s,"_invoke",function(n,r,a){var o,i,l,s=0,u=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&s&&!a&&t<u.length;t++){var a,o=u[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),i=u,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(s=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,a,o),!0),s}var c={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Wa(t={},r,(function(){return this})),t),f=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Wa(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,Wa(f,"constructor",s),Wa(s,"constructor",l),l.displayName="GeneratorFunction",Wa(s,a,"GeneratorFunction"),Wa(f),Wa(f,a,"Generator"),Wa(f,r,(function(){return this})),Wa(f,"toString",(function(){return"[object Generator]"})),(Va=function(){return{w:o,m:b}})()}function Wa(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Wa=function(e,t,n,r){function o(t,n){Wa(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function Qa(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ya(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Qa(o,r,a,c,i,"next",e)}function i(e){Qa(o,r,a,c,i,"throw",e)}c(void 0)}))}}function Za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(n),!0).forEach((function(t){Xa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xa(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ka(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ka(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ka(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return to(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?to(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function to(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var no=function(e){var t=e.onClose,n=eo(Object(r.useState)(!1),2),o=n[0],c=n[1],i=eo(Object(r.useState)({}),2),s=i[0],u=i[1],f=eo(Object(r.useState)(1),2),b=f[0],m=f[1],d=function(e){u((function(t){return Ja(Ja({},t),e)}))},O=function(e){switch(parseInt(e)){case 1:return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(aa,{importData:s,setPending:c,setImportData:d,resetImport:function(){return u({})},setStep:m}));case 2:return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ha,{importData:s,setPending:c,setStep:m}));case 3:return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ut,{importData:s,setPending:c,setStep:m,onClose:t,onCancel:function(){Object(L.l)({page:"autonami",path:"/contacts/"},"/",{}),t()}}));default:return Object(r.createElement)(r.Fragment,null)}},j=[{key:1,label:Object(a.__)("Source","wp-marketing-automations"),content:O(1),onClick:function(){2!==parseInt(b)||o||(u({}),m(1))}},{key:2,label:Object(a.__)("Mapping","wp-marketing-automations"),content:O(2)},{key:3,label:Object(a.__)("Processing","wp-marketing-automations"),content:O(3)}],y=function(){var e=Ya(Va().m((function e(){var t;return Va().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,w()({path:Object(l.C)("/contacts/import/delete/"),data:{delete_pending:1},method:"DELETE"}).catch((function(e){throw Error(Object(l.w)(null==e?void 0:e.message))}));case 1:e.n=3;break;case 2:e.p=2,t=e.v,console.error(t);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}();return Object(r.createElement)(p.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-admin-modal-no-header bwf-import-contact-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-import-modal-header"},Object(r.createElement)("div",{className:"bwf-import-modal-title"},Object(a.__)("Import Contacts","wp-marketing-automations")),Object(r.createElement)("div",{onClick:Ya(Va().m((function e(){return Va().w((function(e){for(;;)switch(e.n){case 0:if(2!==b){e.n=1;break}return e.n=1,y();case 1:Object(l.m)(Object(a.__)("Contacts","wp-marketing-automations")),Object(L.l)({page:"autonami",path:"/contacts/"},"/",{}),t();case 2:return e.a(2)}}),e)}))),className:"bwf-flex",style:{cursor:"pointer"}},Object(r.createElement)(g.a,{icon:"close"}))),Object(r.createElement)("div",{className:"bwfan-contact-import-wrapper"},Object(r.createElement)(Pn.a,{steps:j,currentStep:b,isPending:o,onSidebar:!0})),Object(r.createElement)("div",{className:"bwf_clear_24"}))};function ro(e){return(ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ao(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(n),!0).forEach((function(t){co(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ao(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function co(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ro(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ro(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ro(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function io(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(){var e=Object(O.a)(),t=Object(j.a)(),n=e.getError,c=e.getContacts,i=e.getCountData,s=t.clearError,u=t.startIndexing,f=t.setStateProp,b=io(Object(r.useState)(!1),2),m=b[0],p=b[1],d=io(Object(r.useState)(!1),2),y=d[0],w=d[1],v=io(Object(r.useState)(!1),2),g=v[0],h=v[1],k=io(Object(r.useState)({}),2),S=k[0],P=k[1],N=io(Object(r.useState)(!1),2),C=N[0],x=N[1],T=location&&location.search?Object(o.parse)(location.search.substring(1)):{},A=n(),I=Object(r.useRef)();Object(r.useEffect)((function(){I.current?s():I.current=A})),Object(r.useEffect)((function(){return Object(l.m)("Contacts"),function(){f("countData",{})}}),[]);var D=Object(r.createElement)(r.Fragment,null,Object(r.createElement)(_.a,{isPrimary:!0,className:"bwf-display-flex bwf-no-ripple",label:Object(a.__)("Create Contact","wp-marketing-automations"),onClick:function(){return p(!0)}},Object(a.__)("Create Contact","wp-marketing-automations"))),$=i(),F=Object(mn.a)().getPageCountData,G=Object(bn.a)().setPageCountData,L=F();Object(r.useEffect)((function(){G(oo(oo({},L),$))}),[$]),Object(un.a)("contacts","",Object(a.__)("ALL CONTACTS","wp-marketing-automations"),D);var M=c();if("indexing_status"in M){var R="indexing_status"in M&&2===parseInt(M.indexing_status)?Object(a.__)("Contacts indexing is in progress. Kindly, check back after some time.","wp-marketing-automations"):Object(a.__)("Contacts Indexing required, before you can view the contacts.","wp-marketing-automations"),U="indexing_status"in M&&2===parseInt(M.indexing_status)?null:Object(a.__)("Start Indexing","wp-marketing-automations");return Object(r.createElement)(sn.a,{text:R,buttonText:U,onButtonClick:function(){return u()}})}var B=[{type:"heading",data:{title:Object(a.__)("Create contact for smarter engagement","wp-marketing-automations"),desc:Object(a.__)("Increase engagement strategies by creating contacts, apply tags, lists, and personal details.","wp-marketing-automations")}},{type:"image-desc",data:[{img:Object(l.u)()+"contact/contact1.png",title:Object(a.__)("Seamlessly Import Contacts","wp-marketing-automations"),desc:Object(a.__)("Import contacts from WordPress, WooCommerce, CSV files, or other supported sources","wp-marketing-automations")},{img:Object(l.u)()+"contact/contact2.png",title:Object(a.__)("Get 360Â° Contact view","wp-marketing-automations"),desc:Object(a.__)("View Complete profile with purchase history, tags, lists, open, clicks and more","wp-marketing-automations")}]},{type:"buttons",data:{buttons:[{text:Object(a.__)("Create Contact","wp-marketing-automations"),onClick:function(){P({}),p(!0)}},{text:Object(a.__)("Import Contact","wp-marketing-automations"),isSecondary:!0,proCheck:!0,onClick:function(){Object(l.fc)()?h(!0):(x(!0),P({isFeature:!0,featureTitle:Object(a.__)("Contacts Import","wp-marketing-automations")}))}}]}},{type:"link-wth-text",data:{text:Object(a.__)("Curious about contact?","wp-marketing-automations"),link:"https://funnelkit.com/docs/autonami-2/contacts/",linkText:Object(a.__)("Learn More","wp-marketing-automations")}}];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(fn.a,null),Object(r.createElement)("div",{className:"bwfcrm-contacts-list__scroll-point"}),A&&!m&&Object(r.createElement)(E.a,{status:"error"},A.message),Object(r.createElement)(Kt,{query:T,isExport:y,setExport:w,newImport:g,setNewImport:h,menuButtons:D,pitchData:B}),m&&Object(r.createElement)(ln,{query:T,onCloseModal:function(){p(!1)}}),y&&Object(r.createElement)(Tr,{setExport:w}),g&&Object(r.createElement)(no,{setImport:h,onClose:function(){return h(!1)}}),!Object(l.fc)()&&Object(r.createElement)(xe.b,{isOpen:C,onRequestClose:function(){return x(!1)},modalContent:S}))}}}]);