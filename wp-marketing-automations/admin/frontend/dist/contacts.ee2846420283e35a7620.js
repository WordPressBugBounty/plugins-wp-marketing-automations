(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1051:function(t,e,r){"use strict";var n=r(0),o=r(6),a=r.n(o),c=r(1),i=r(8),l=(r(1055),r(39)),s=r(3);function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(t){var e=u(Object(n.useState)(!1),2),r=e[0],o=e[1],f=t.modalContent,m=void 0===f?{}:f,p=t.content,b=t.onPage,h=void 0!==b&&b;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:a()("bwf-upgrade-pro-overlay",{"is-on-page":h}),onClick:function(){h||o(!0)}},h?Object(n.createElement)(l.a,{showHeader:!1,modalContent:m}):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-king-tag-pro"},Object(n.createElement)(i.a,{icon:"king",size:38,color:"#fff"})),Object(n.createElement)("span",{className:"bwf-mt-8"},p||(Object(s.Ob)()?Object(c.__)("Activate your license to continue using premium features without interruption.","wp-marketing-automations"):Object(c.__)("This feature is locked. To get full access of FunnelKit Automation upgrade to PRO","wp-marketing-automations"))))),Object(n.createElement)(l.b,{isOpen:r,onRequestClose:function(){return o(!1)},modalContent:m}))}},1055:function(t,e,r){},1056:function(t,e,r){"use strict";var n=r(47),o=r(3),a=r(2),c=["fetch","setStateProp"],i=["s","page","filter","path"],l=["s","page","filter","path"];function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}e.a=function(){var t=Object(n.a)("contacts"),e=t.fetch,r=t.setStateProp;return u(u({},m(t,c)),{},{setStateProp:r,fetch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,f=arguments.length>6&&void 0!==arguments[6]&&arguments[6],p=arguments.length>7&&void 0!==arguments[7]&&arguments[7],b=arguments.length>8&&void 0!==arguments[8]&&arguments[8],h=arguments.length>9&&void 0!==arguments[9]&&arguments[9],d=arguments.length>10&&void 0!==arguments[10]&&arguments[10],y=arguments.length>11&&void 0!==arguments[11]?arguments[11]:[];r("isLoading",!0);var v=t.s,g=void 0===v?"":v,w=(t.page,t.filter,t.path,m(t,i)),O={offset:n,limit:c,search:g,filters:w,get_wc:Object(o.fc)(),grab_totals:l,only_count:s,fetch_base:u,grab_custom_fields:!1,include_unsubs:!f,exclude_unsubs_lists:p,includeUnverified:h,includeSoftBounce:d,include_ids:y},j=Object(o.ub)("table_sort_data"),E=j.hasOwnProperty("contact_sort_data")?j.contact_sort_data:{},_=Object(a.isObject)(E)&&!Object(a.isEmpty)(E)?E:{},k=_.orderby,x=void 0===k?"last_modified":k,S=_.order,N=void 0===S?"desc":S;N&&x&&(O.order=N,O.order_by=x),b&&(O.unopen_broadcast=parseInt(b)),e("GET",Object(o.y)("/contacts"),O)},fetchListing:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,f=arguments.length>6&&void 0!==arguments[6]&&arguments[6],p=arguments.length>7&&void 0!==arguments[7]&&arguments[7],b=arguments.length>8&&void 0!==arguments[8]&&arguments[8];r("isLoading",!0);var h=t.s,d=void 0===h?"":h,y=(t.page,t.filter,t.path,m(t,l)),v={offset:n,limit:c,search:d,filters:y,get_wc:Object(o.fc)(),grab_totals:i,only_count:s,fetch_base:u,grab_custom_fields:!1,exclude_unsubs:f,exclude_unsubs_lists:p},g=Object(o.ub)("table_sort_data"),w=g.hasOwnProperty("contact_sort_data")?g.contact_sort_data:{},O=Object(a.isObject)(w)&&!Object(a.isEmpty)(w)?w:{},j=O.orderby,E=void 0===j?"last_modified":j,_=O.order,k=void 0===_?"desc":_;k&&E&&(v.order=k,v.order_by=E),b&&(v.unopen_broadcast=parseInt(b)),e("GET",Object(o.y)("/v3/contacts/listing"),v)},startIndexing:function(){return e("GET",Object(o.y)("/contacts"),{start_indexing:!0})}})}},1060:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(0);var o=function(t,e){var r=Object(n.useRef)();Object(n.useEffect)((function(){r.current=t}),[t]),Object(n.useEffect)((function(){if(null!==e){var t=setInterval((function(){r.current()}),e);return function(){return clearInterval(t)}}}),[e])}},1062:function(t,e,r){"use strict";var n=r(0),o=r(25),a=r(1),c=r(190);e.a=function(t){var e=t.selected,r=t.onTagsChange;return Object(n.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(n.createElement)("div",{className:"bwf-input-label"},Object(a.__)("Add Tags","wp-marketing-automations")),Object(n.createElement)(o.a,{autocompleter:c.b,multiple:!1,allowFreeTextSearch:!0,inlineTags:!1,selected:e,onChange:function(t){r(t)},onRemoveTag:function(t,n){var o=e.filter((function(e){return!(e.key==t&&e.label==n)}));r(o)},placeholder:Object(a.__)("Search by tag name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},1071:function(t,e,r){"use strict";var n=r(48),o=["getStateProp"];function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}e.a=function(){var t=Object(n.a)("contacts"),e=t.getStateProp;return c(c({},l(t,o)),{},{getContacts:function(){return e("contacts_list")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getTotalCount:function(){return parseInt(e("total"))},getCountData:function(){return e("countData")}})}},1072:function(t,e,r){"use strict";var n=r(0),o=r(25),a=r(1),c=r(190);e.a=function(t){var e=t.selected,r=t.onListsChange;return Object(n.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(n.createElement)("div",{className:"bwf-input-label"},Object(a.__)("Add to Lists","wp-marketing-automations")),Object(n.createElement)(o.a,{autocompleter:c.a,multiple:!1,allowFreeTextSearch:!0,selected:e,onChange:function(t){r(t)},onRemoveTag:function(t){var n=e.filter((function(e){return e.key!=t}));r(n)},placeholder:Object(a.__)("Search by list name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},1107:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r(90),o={"am-AM":/^(\+?374|0)((10|[9|7][0-9])\d{6}$|[2-4]\d{7}$)/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)[569]\d{7}$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?(9[1-9])\d{6}$/,"ar-PS":/^(\+?970|0)5[6|9](\d{7})$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^((\+49|0)[1|3])([0|5][0-45-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"dv-MV":/^(\+?960)?(7[2-9]|91|9[3-9])\d{7}$/,"el-GR":/^(\+?30|0)?(69\d{8})$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-BM":/^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}))/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|28|55|59)\d{7}$/,"en-GY":/^(\+592|0)6\d{6}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"en-KI":/^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-NA":/^(\+?264|0)(6|8)\d{7}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PK":/^((00|\+)?92|0)3[0-6]\d{8}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"en-BW":/^(\+?267)?(7[1-8]{1})\d{6}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-CU":/^(\+53|0053)?5\d{7}/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-SV":/^(\+?503)?[67]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"es-VE":/^(\+?58)?(2|4)\d{9}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4(0|1|2|4|5|6)?|50)\s?(\d\s?){4,8}\d$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-BF":/^(\+226|0)[67]\d{7}$/,"fr-CM":/^(\+?237)6[0-9]{8}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-PF":/^(\+?689)?8[789]\d{6}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36|06)(20|30|31|50|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(5|79)\d{7}$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"ms-MY":/^(\+?6?01){1}(([0145]{1}(\-|\s)?\d{7,8})|([236789]{1}(\s|\-)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?[5-8]\d ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[2-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+244)\d{9}$/,"ro-RO":/^(\+?4?0)\s?7\d{2}(\/|\s|\.|\-)?\d{3}(\s|\.|\-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"sq-AL":/^(\+355|0)6[789]\d{6}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"tg-TJ":/^(\+?992)?[5][5]\d{7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"tk-TM":/^(\+993|993|8)\d{8}$/,"uk-UA":/^(\+?38|8)?0\d{9}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"dz-BT":/^(\+?975|0)?(17|16|77|02)\d{6}$/};function a(t,e,r){if(Object(n.a)(t),r&&r.strictMode&&!t.startsWith("+"))return!1;if(Array.isArray(e))return e.some((function(e){if(o.hasOwnProperty(e)&&o[e].test(t))return!0;return!1}));if(e in o)return o[e].test(t);if(!e||"any"===e){for(var a in o){if(o.hasOwnProperty(a))if(o[a].test(t))return!0}return!1}throw new Error("Invalid locale '".concat(e,"'"))}o["en-CA"]=o["en-US"],o["fr-CA"]=o["en-CA"],o["fr-BE"]=o["nl-BE"],o["zh-HK"]=o["en-HK"],o["zh-MO"]=o["en-MO"],o["ga-IE"]=o["en-IE"],o["fr-CH"]=o["de-CH"],o["it-CH"]=o["fr-CH"];Object.keys(o)},1108:function(t,e,r){},1131:function(t,e,r){"use strict";r.d(e,"a",(function(){return g}));var n=r(0),o=r(5),a=r(1),c=r(2),i=r(1062),l=r(1072),s=r(18),u=r(65),f=r(8),m=r(28),p=r(3);function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var g=function(t){var e=t.headersData,r=t.onRequestImport,b=t.submitButtonText,v=t.secondaryButtonText,g=t.onSecondaryButtonClick,w=t.savedData,O=t.buttonAlignClass,j=t.backButtonText,E=t.backButtonClick,_=t.extra,k=t.isSubmitButtonBusy,x=t.sourceHeaderText,S=void 0===x?Object(a.__)("Columns To Import","wp-marketing-automations"):x,N=t.contactHeaderText,L=void 0===N?Object(a.__)("Map Into Field","wp-marketing-automations"):N,C=t.updateExistingText,P=void 0===C?Object(a.__)("Update Existing Contacts","wp-marketing-automations"):C,I=t.secondaryClass,A=void 0===I?"":I,T=e.headers,F=e.fields,G=y(Object(n.useState)(w&&w.mapped_fields?function(t,e){if(!t)return{};var r={},n=function(n){e.find((function(t){return t.index.toString()===n}))&&(r[n]=t[n])};for(var o in t)n(o);return r}(w.mapped_fields,T):{}),2),$=G[0],D=G[1],M=y(Object(n.useState)(0),2),B=M[0],z=M[1],U=w&&w.tags?w.tags.map((function(t){return{key:t.id,label:t.value}})):[],R=w&&w.lists?w.lists.map((function(t){return{key:t.id,label:t.value}})):[],Y=y(Object(n.useState)(U),2),q=Y[0],V=Y[1],W=y(Object(n.useState)(R),2),H=W[0],K=W[1],Z=y(Object(n.useState)(!(!w||!("update_existing"in w))&&w.update_existing),2),Q=Z[0],J=Z[1],X=y(Object(n.useState)(!w||!("update_blank"in w)||w.update_blank),2),tt=X[0],et=X[1],rt=y(Object(n.useState)(!w||!("marketing_status"in w)||w.marketing_status),2),nt=rt[0],ot=(rt[1],y(Object(n.useState)(!(!w||!("trigger_events"in w))&&w.trigger_events),2)),at=ot[0],ct=ot[1],it=y(Object(n.useState)(null),2),lt=it[0],st=it[1],ut=(_||{}).disableMarketingStatusCheck,ft=void 0!==ut&&ut,mt=function(){return st(null),0===Object(c.size)($)?(setTimeout((function(){return st(Object(a.__)("Select the contact fields.","wp-marketing-automations"))}),500),!1):!!Object.values($).includes("email")||(setTimeout((function(){return st(Object(a.__)("Map contact email with a form field.","wp-marketing-automations"))}),500),!1)},pt=function(){if(mt()){var t={};T.map((function(e){e.index in $&&(t[e.index]=$[e.index])}));var e={map:t,tags:q.map((function(t){return{id:t.key,value:t.label}})),lists:H.map((function(t){return{id:t.key,value:t.label}})),update_existing:Q,trigger_events:at,imported_contact_status:B,dont_update_blank:tt};!ft&&(e.marketing_status=nt),r(e)}},bt=function(){if(mt()){var t={};T.map((function(e){e.index in $&&(t[e.index]=$[e.index])}));var e={map:t,tags:q.map((function(t){return{id:t.key,value:t.label}})),lists:H.map((function(t){return{id:t.key,value:t.label}})),update_existing:Q,trigger_events:at};!ft&&(e.marketing_status=nt),g(e)}},ht=Object(p.K)();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-import-mapper-fields bwf-card-wrap bwf-form-fields bwf-crm-importer-csv-wrap"},Object(n.createElement)("div",{className:"bwf-card-header"},Object(n.createElement)("span",{className:"bwf-form-title"},Object(a.__)("Mapping","wp-marketing-automations"))),lt&&Object(n.createElement)("div",{className:"bwf-mr-16 bwf-ml-16"},Object(n.createElement)(u.a,null),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)(m.a,{status:"error",onRemove:function(){return st(null)}},lt)),!Object(c.isArray)(F)||!F.length>0||!Object(c.isArray)(T)||!T.length>0?!Object(c.isArray)(F)||!F.length>0?Object(n.createElement)(m.a,{status:"error"},Object(a.__)("No contact fields found","wp-marketing-automations")):!Object(c.isArray)(T)||!T.length>0?Object(n.createElement)(m.a,{status:"error"},Object(a.__)("No mapping fields found")):void 0:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-c-import-field",key:"mapper-sel-wrap"},Object(n.createElement)("strong",null,S),Object(n.createElement)("span",null),Object(n.createElement)("strong",null,L)),T.map((function(t,e){return Object(n.createElement)("div",{key:e,className:"bwf-c-import-field"},Object(n.createElement)(o.TextControl,{disabled:!0,value:t.header}),Object(n.createElement)("span",{className:"bwf-display-flex"},Object(n.createElement)(f.a,{icon:"mapper"})),Object(n.createElement)("select",{value:t.index in $?$[t.index]:"",onChange:function(e){return function(t,e){var r=e.target.value,n="index"in t?t.index:"";""===r&&n in $?D(Object(c.omit)($,n)):""!==r&&""!==n&&D(h(h({},$),{},d({},n,r)))}(t,e)},key:"bwf-select-field"},Object(n.createElement)("option",{value:"",key:"default-key"+e},Object(a.__)("Do Not Import This Field","wp-marketing-automations")),F.map((function(t,r){return"fields"in t&&t.fields.length>0&&Object(n.createElement)("optgroup",{key:t.id+"-"+r+"-"+e,label:t.name},t.fields.map((function(t){return Object(n.createElement)("option",{key:t.id,value:t.id},t.name)})))}))))}))),Object(n.createElement)("div",{className:"bwf-crm-import-section",style:{border:0}},Object(n.createElement)("div",{className:"bwf-h4"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-import-field",key:"select-tag-list"},Object(n.createElement)(i.a,{onTagsChange:V,selected:q}),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(l.a,{onListsChange:K,selected:H})),!ft&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-heading7-new"},Object(a.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-csv-status-select",onChange:function(t){z(t.target.value)},key:"bwf-select-status",value:B},Object.keys(ht).map((function(t){return Object(n.createElement)("option",{key:t,value:t},ht[t])}))),Object(n.createElement)("div",{className:"bwf_clear_24"})),Object(n.createElement)("div",null,Object(n.createElement)(o.ToggleControl,{label:P,checked:Q,className:"bwf-tooglecontrol-advance",onChange:J})),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",null,Object(n.createElement)(o.ToggleControl,{label:Object(a.__)("Don't Update Blank Values","wp-marketing-automations"),checked:tt,className:"bwf-tooglecontrol-advance",onChange:et})),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",null,Object(n.createElement)(o.ToggleControl,{label:Object(a.__)("Trigger Automations (For Tag & List Related Events)","wp-marketing-automations"),checked:at,className:"bwf-tooglecontrol-advance",onChange:ct})))),Object(n.createElement)("div",{className:"bwf-pt-0"},O?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(s.a,null,!!j&&Object(n.createElement)(s.b,null,Object(n.createElement)(o.Button,{isSecondary:!0,onClick:E,className:A},j)),Object(n.createElement)(s.b,{className:O},Object(n.createElement)(o.Button,{onClick:pt,isBusy:!!k,disabled:!!k,isPrimary:!0},Object(n.createElement)("span",null,b||Object(a.__)("Import","wp-marketing-automations"))),v&&Object(n.createElement)(o.Button,{onClick:bt,className:"bwf-ml-10",isSecondary:!0},v)))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(o.Button,{onClick:pt,isPrimary:!0,isBusy:!!k,disabled:!!k,className:"bwf-display-flex"},Object(n.createElement)("span",null,b||Object(a.__)("Import","wp-marketing-automations"))),v&&Object(n.createElement)(o.Button,{onClick:bt,className:"bwf-ml-10",isSecondary:!0},v)))))}},1132:function(t,e,r){},1196:function(t,e,r){},1197:function(t,e,r){},1198:function(t,e,r){},1199:function(t,e,r){},1200:function(t,e,r){},1201:function(t,e,r){},1421:function(t,e,r){"use strict";r.r(e);var n=r(0),o=r(1),a=r(19),c=r(6),i=r.n(c),l=r(3),s=r(137),u=r(2),f=r(191),m=r(62),p=r(63),b=r(5),h=r(18),d=r(1071),y=r(1056),v=r(9),g=r.n(v),w=r(342),O=r(8),j=r(161),E=r(28),_=r(13);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){N(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function N(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L(){L=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return x()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==k(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:x}}function x(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function C(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function P(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var A=function(t){var e=t.contact,r=Object(n.useContext)(l.h),a=P(Object(n.useState)(!1),2),c=a[0],i=a[1],s=P(Object(n.useState)({type:"email",title:"",body:"",id:0,send:!1}),2),f=s[0],m=s[1],p=P(Object(n.useState)({status:!1,message:""}),2),h=p[0],d=p[1],y=[{value:"",label:Object(o.__)("Select Type","wp-marketing-automations")}].concat(Object(l.J)()),v=function(){var n,o=(n=L().mark((function n(o){var a;return L().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(a={title:o.title,body:o.body,type:o.type,private:o.send,modified_by:Object(l.L)()}).created_by=Object(l.L)(),i(!0),n.prev=3,n.next=6,g()({path:Object(l.y)("/v3/contacts/".concat(e.id,"/notes/")),method:"POST",data:{notes:a},headers:{"Content-Type":"application/json"}}).then((function(e){if(200!=e.code)throw Error(Object(l.t)(null==e?void 0:e.message));r(e.message),t.setModelStatus({status:!1,contactInfo:{}})})).catch((function(t){throw Error(Object(l.t)(null==t?void 0:t.message))}));case 6:n.next=12;break;case 8:n.prev=8,n.t0=n.catch(3),d({status:!0,message:n.t0.message}),i(!1);case 12:Object(l.Eb)(r,3e3);case 13:case"end":return n.stop()}}),n,null,[[3,8]])})),function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function c(t){C(a,r,o,c,i,"next",t)}function i(t){C(a,r,o,c,i,"throw",t)}c(void 0)}))});return function(t){return o.apply(this,arguments)}}();return Object(n.createElement)(b.Modal,{className:"bwf-admin-modal bwf-admin-modal-large bwf-message-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(o.__)("Add Note","wp-marketing-automations")),Object(n.createElement)("span",{onClick:function(){return t.setModelStatus(!1)},className:"bwf-modal-close"},Object(n.createElement)(O.a,{icon:"close",color:"#353030"}))),Object(n.createElement)("div",{className:"bwf-form-fields"},h.status&&Object(n.createElement)(E.a,{status:"error",onRemove:function(){return d(!1)},className:"bwf-send-note-notice"},h.message?h.message:Object(o.__)("Title, type and body are mandatory field. Kindly fill them","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-message-wrap"},Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-mb-24"},Object(n.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(o.__)("Contact","wp-marketing-automations")),Object(n.createElement)("div",null,Object(n.createElement)("span",{className:"bwf-highlight-content"},Object(n.createElement)("b",null,e.f_name+" "+e.l_name)," ( "+e.email+" ) "))),Object(n.createElement)("div",{className:"bwf-mb-24"},Object(n.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(o.__)("Type","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-select-full-wrap"},Object(n.createElement)(b.SelectControl,{value:f.type,className:"bwf-w-100p",options:y,onChange:function(t){return m(S(S({},f),{},{type:t}))},disabled:c}))),Object(n.createElement)("div",{className:"bwf-mb-24"},Object(n.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(o.__)("Title","wp-marketing-automations")),Object(n.createElement)(b.TextControl,{type:"text",value:f.title,placeholder:Object(o.__)("Type here …","wp-marketing-automations"),disabled:c,onChange:function(t){return m(S(S({},f),{},{title:t}))}})),Object(n.createElement)("div",{className:"bwf-message-textarea"},Object(n.createElement)(j.a,{keyid:"bwf-note-editor",content:f.body,setContent:function(t){return m(S(S({},f),{},{body:t}))},height:200})),Object(n.createElement)("div",{className:"bwf-message-footer"},0==parseInt(f.id)&&Object(n.createElement)("div",{className:"bwf-note-send"},Object(n.createElement)(b.ToggleControl,{label:Object(o.__)("Send Note to Contact","wp-marketing-automations"),checked:Boolean(parseInt(f.send)),onChange:function(t){return m(S(S({},f),{},{send:t?"1":"0"}))},className:"bwf-tooglecontrol-advance"})),Object(n.createElement)("div",{className:"bwf-button-col"},Object(n.createElement)(_.a,{className:"bwf-cancel-btn",onClick:function(){return t.setModelStatus(!1)},disabled:c},Object(o.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(_.a,{isPrimary:!0,isBusy:c,disabled:c,onClick:function(){Object(u.isEmpty)(f.title)||Object(u.isEmpty)(f.body)||Object(u.isEmpty)(f.type)?d({status:!0,message:""}):(d({status:!1,message:""}),m(S(S({},f),{},{loading:!0})),v(f))}},Object(o.__)("Add Note","wp-marketing-automations")))))))},T=r(55),F=r(140),G=r(12),$=r(329),D=r(139),M=(r(1132),r(1061)),B=r(1083),z=r(195),U=r(1051),R=function(t){var e=t.isOpen,r=void 0!==e&&e,a=t.query,c=Object(M.a)(!0,!0),i=c.loading,s=c.filters;return r&&!Object(l.Sb)()?Object(n.createElement)("div",{className:"bwf-filter-placeholder bwf-w-100p "+(Object(l.Sb)()?"":"bwf-position-relative bwf-h-200")},!!s&&Object(n.createElement)(z.a,{siteLocale:"en-US",currency:{},config:{title:Object(o.__)("Select Rules","wp-marketing-automations"),filters:s,footerComponent:function(t){return Object(n.createElement)(B.a,{filter:t.data,config:t.config})},enableGrouping:!0},path:"/contacts",query:{}}),Object(n.createElement)(U.a,{modalContent:{isFeature:!0,featureTitle:Object(o.__)("Contact Filters","wp-marketing-automations"),proLink:Object(l.ab)("upgrade",{utm_medium:"Contacts+Filters"})},content:Object(o.__)("We're sorry, this feature is not available on your plan. Learn more about Contact Filters.","wp-marketing-automations")})):r&&i?Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-filter-placeholder"},Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start gap-12"},Object(n.createElement)("div",{className:"bwf-w-60"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-60"})),Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-210"}),Object(n.createElement)("br",null),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-30 bwf-w-90"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-30 bwf-w-90"}))),Object(n.createElement)("div",{className:"bwf_clear_20"})):r&&!!s&&Object(n.createElement)(z.a,{siteLocale:"en-US",currency:Object(l.fc)()?bwfcrm_contacts_data.currency:{},config:{title:Object(o.__)("Select Rules","wp-marketing-automations"),filters:s,footerComponent:function(t){return Object(n.createElement)(B.a,{filter:t.data,config:t.config})},enableGrouping:!0},path:"/contacts",query:a})},Y=r(44),q=r(83);function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(){W=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==V(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function H(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function K(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?H(Object(r),!0).forEach((function(e){Z(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Z(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function J(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return X(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var tt=function(t){var e=t.refreshTable,r=J(Object(n.useState)(!1),2),a=r[0],c=r[1],i=Object(l.ub)("table_sort_data"),s=i.hasOwnProperty("contact_sort_data")?i.contact_sort_data:{},f=Object(u.isObject)(s)&&!Object(u.isEmpty)(s)?s:{},p=f.orderby,b=void 0===p?"last_modified":p,h=f.order,d=void 0===h?"desc":h,y=Object(n.useContext)(l.h),v=[{value:"f_name",label:Object(o.__)("Contact Name","wp-marketing-automations")},{value:"creation_date",label:Object(o.__)("Creation Date","wp-marketing-automations")},{value:"last_modified",label:Object(o.__)("Last Updated","wp-marketing-automations")},{value:"country",label:Object(o.__)("Country","wp-marketing-automations")},{value:"state",label:Object(o.__)("State","wp-marketing-automations")}];Object(l.fc)()&&v.push({value:"total_order_count",label:Object(o.__)("Orders","wp-marketing-automations")},{value:"total_order_value",label:Object(o.__)("Total Spend","wp-marketing-automations")},{value:"l_order_date",label:Object(o.__)("Last Order Date","wp-marketing-automations")});var w=J(Object(n.useState)(b),2),j=w[0],E=w[1],k=J(Object(n.useState)(d),2),x=k[0],S=k[1],N=function(){var t,r=(t=W().mark((function t(r){var n,a;return W().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.prev=1,n={orderby:j,order:x},(a=K({},i)).contact_sort_data=n,t.next=7,g()({path:Object(l.y)("/user-preference/".concat(Object(l.L)(),"/")),method:"POST",data:{data:{table_sort_data:a}}}).then((function(t){if(200!==t.code)throw Error(Object(l.t)(null==t?void 0:t.message));bwfcrm_contacts_data.table_column_data.table_sort_data.contact_sort_data=n,y(t.message),e(),r(),c(!1)})).catch((function(t){throw Error(Object(l.t)(null==t?void 0:t.message))}));case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),c(!1),y(t.t0.message?t.t0.message:Object(o.__)("Error in saving sort data","wp-marketing-automations"));case 13:Object(l.Eb)(y,2e3);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){Q(a,n,o,c,i,"next",t)}function i(t){Q(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(t){return r.apply(this,arguments)}}();return Object(n.createElement)("div",{className:"bwf-custom-ellipsis bwf-sort-ellipsis-contact-list",style:{width:"30px"}},Object(n.createElement)(m.a,{label:"",buttonIcon:Object(n.createElement)("div",{className:"bwf-sort-button components-button is-light bwf-btn-small",key:"import",style:{width:"30px",padding:"7px"},title:Object(o.__)("Sort Order","wp-marketing-automations")},Object(n.createElement)(O.a,{icon:"sort",size:14})),renderContent:function(t){var e=t.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-heading-1"},Object(o.__)("Sorting","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-heading-2 bwf-mt-16"},Object(o.__)("Sort Order","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-contact-sort-popover"},Object(n.createElement)("div",{className:"bwf-display-flex gap-8 bwf-flex-start bwf-sort-order-buttons"},Object(n.createElement)(_.a,{isSecondary:!x||"desc"===x,isTertiary:x&&"desc"!==x,onClick:function(){return S("desc")}},Object(o.__)("Descending","wp-marketing-automations")),Object(n.createElement)(_.a,{isSecondary:x&&"asc"===x,isTertiary:x&&"asc"!==x,onClick:function(){return S("asc")}},Object(o.__)("Ascending","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-sort-column-list bwf-mt-16"},Object(n.createElement)(q.a,{className:"bwfcrm-inline-option",selected:j,label:"",options:v,onChange:function(t){return E(t)}})),Object(n.createElement)("div",{className:"bwf-contact-sort-action bwf-mt-16"},Object(n.createElement)(_.a,{isPrimary:!0,className:"bwf-update-button",onClick:function(){return N(e)},isBusy:a},Object(o.__)("Update","wp-marketing-automations")))))}}))},et=r(262),rt=r(119);function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t){return function(t){if(Array.isArray(t))return pt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||mt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ct(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?at(Object(r),!0).forEach((function(e){it(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function it(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lt(){lt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==nt(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function st(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function ut(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){st(a,n,o,c,i,"next",t)}function i(t){st(a,n,o,c,i,"throw",t)}c(void 0)}))}}function ft(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||mt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(t,e){if(t){if("string"==typeof t)return pt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pt(t,e):void 0}}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var bt=Object(rt.c)((function(){return Object(n.createElement)(O.a,{icon:"menu-2",size:20})})),ht=Object(rt.b)((function(t){var e=t.item,r=t.onRemove;return Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-contact-preferences__item"},Object(n.createElement)("div",{className:"bwf-contact-preferences__item-title"},Object(n.createElement)(bt,null),e.label),Object(n.createElement)("div",{className:"bwf-contact-preferences__item-type"},Object(n.createElement)("span",{className:"bwf-tags bwf-tag-gray bwf-w-fit-content"},e.groupLabel)),Object(n.createElement)("div",{className:"bwf-display-flex bwf-cursor-pointer",onClick:function(){r(Object.keys(e)[0],e.groupKey)}},Object(n.createElement)(O.a,{icon:"delete",size:20}))))})),dt=Object(rt.a)((function(t){var e=t.items,r=t.onRemove;return Object(n.createElement)("div",{className:"bwf-contact-preferences__items-wrap"},Object(u.isEmpty)(e)?Object(n.createElement)("div",{className:"bwf-h4 bwf_text_center bwf-m-20"},Object(o.__)("No Additional Columns Selected. Click the Add New Columns button.","wp-marketing-automations")):e.map((function(t,e){return Object(n.createElement)(ht,{item:t,key:"bwf-contact-preferences__item-".concat(e),index:e,onRemove:r})})))})),yt=["contact_details","geography","contact_custom_fields","woocommerce","segments","engagement"],vt=function(t){var e=t.onRequestClose,r=t.refreshTable,a=t.setModelData,c=Object(n.useContext)(l.h),i=ft(Object(n.useState)(!1),2),s=i[0],f=i[1],m=ft(Object(n.useState)(!1),2),p=m[0],h=m[1],d=ft(Object(n.useState)(!1),2),y=d[0],v=d[1],w=ft(Object(n.useState)(0),2),j=w[0],E=w[1],k=Object(n.useRef)(null),x=ft(Object(n.useState)([]),2),S=x[0],N=x[1],L=ft(Object(n.useState)([]),2),C=L[0],P=L[1],I=ft(Object(n.useState)({}),2),A=I[0],T=I[1],F=ft(Object(n.useState)(!1),2),G=F[0],$=F[1],D=Object(n.useRef)(new AbortController),B=Object(M.a)(!0,!1),z=B.loading,U=void 0===z||z,R=B.filters,q=void 0===R?{}:R,V=function(){var t=ut(lt().mark((function t(){return lt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.y)("/contact/export/custom-selections"),signal:D.current.signal}).then((function(t){if(200===t.code){var e=Object.create({});Object.keys(t.result).forEach((function(r){"wishlist-member"!==r&&(e[r]={label:t.result[r].name},e[r].fields=Object.keys(t.result[r].selections).map((function(e){return{key:t.result[r].selections[e].slug,label:t.result[r].selections[e].name}})))})),T(e),h(!0)}})).catch((function(t){console.log(t)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),W=Object(n.useMemo)((function(){var t=[],e=["engaged","unengaged","broadcast_sent","broadcast_open","broadcast_click"];return Object.entries(q).forEach((function(r){var n=ft(r,2),o=n[0],a=n[1];if(e.includes(o)||["email","creation_date"].includes(o))return!1;var c;c={key:o,label:a.labels.add},t.hasOwnProperty(a.group)?t[a.group].fields.push(c):t[a.group]={label:a.groupLabel,fields:[c]}})),ct(ct({},t),A)}),[q,A]);Object(n.useEffect)((function(){return Object(l.Sb)()?V():h(!0),function(){D.current.abort()}}),[]),Object(n.useEffect)((function(){if(Object(u.isEmpty)(S)&&p&&!G){if(W.hasOwnProperty("contact_details")){var t=[],e=[];if(!Object(u.isEmpty)(bwfcrm_contacts_data.table_column_data.contactv2))bwfcrm_contacts_data.table_column_data.contactv2.map((function(e){Object(u.isObject)(e)&&t.push(e)})),Object.keys(W).forEach((function(r){W[r].fields.map((function(t){return t.key})).every((function(e){return t.some((function(t){return t.hasOwnProperty(e)}))}))&&e.push(it({},r,W[r].label))}));N(t),P(e)}$(!0)}}),[W]);var H=function(t,e){var r=W[t].fields.map((function(t){return t.key}));if(C.some((function(e){return e.hasOwnProperty(t)})))N((function(t){return t.filter((function(t){return!r.some((function(e){return t.hasOwnProperty(e)}))}))})),P((function(e){return e.filter((function(e){return!e.hasOwnProperty(t)}))}));else{var n=W[t].fields.map((function(r){var n;return it(n={},r.key,r.label),it(n,"label",r.label),it(n,"groupKey",t),it(n,"groupLabel",e),n}));N((function(t){return Object(u.uniqBy)([].concat(ot(t),ot(n)),(function(t){return Object.keys(t)[0]}))})),P((function(r){return[].concat(ot(r),[it({},t,e)])}))}},K=function(){var t=ut(lt().mark((function t(){return lt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!0),t.prev=1,t.next=4,g()({path:Object(l.y)("/user-preference/".concat(Object(l.L)(),"/")),method:"POST",data:{data:{contact_columnv2:S}}}).then((function(t){if(200!==t.code)throw Error(Object(l.t)(null==t?void 0:t.message));bwfcrm_contacts_data.table_column_data.contactv2=S,c(t.message),Object(l.Eb)(c,2e3),r(),e(),f(!1)})).catch((function(t){throw Error(Object(l.t)(null==t?void 0:t.message))}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),f(!1),a({status:!0,modalTitle:Object(o.__)("Save Columns","wp-marketing-automations"),error:t.t0.message?t.t0.message:Object(o.__)("Error in saving preferences","wp-marketing-automations")});case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}();return Object(n.createElement)(b.Modal,{title:Object(n.createElement)(n.Fragment,null,Object(o.__)("Table Columns","wp-marketing-automations"),Object(n.createElement)("span",null,Object(o.__)("Add new columns or arrange existing columns in contact table","wp-marketing-automations"))),ref:k,onRequestClose:function(){return e()},className:"bwf-admin-modal bwf-contact-preferences-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-contact-preferences-modal__content"},y?Object(n.createElement)("div",{className:"bwf-contact-preferences"},Object(n.createElement)("div",{className:"bwf-contact-preferences__header"},Object(n.createElement)("div",{className:"bwf-contact-preferences__back-btn",onClick:function(){return v(!1)}},Object(n.createElement)(O.a,{icon:"arrow-left-long",width:20,height:14}),Object(n.createElement)("span",null,Object(o.__)("Back","wp-marketing-automations")))),Object(n.createElement)("div",{className:"bwf-contact-preferences__items-wrap"},Object(u.isEmpty)(Object.keys(W))||U?Object(n.createElement)(gt,null):[].concat(yt,ot(Object.keys(A))).map((function(t,e){return W.hasOwnProperty(t)&&Object(n.createElement)("div",{className:"bwf-contact-preferences__add-col-group",key:"bwf-contact-preferences__add-col-group-".concat(e)},Object(n.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){return E((function(t){return t!==e&&e}))}},Object(n.createElement)("label",{className:"bwf-contact-preferences__add-col-group-header"},Object(n.createElement)(Y.a,{checked:C.some((function(e){return e.hasOwnProperty(t)})),onChange:function(){return H(t,W[t].label)},onClick:function(e){e.stopPropagation(),H(t,W[t].label)}}),Object(n.createElement)("div",{className:"bwf-contact-preferences__add-col-group-title"},W[t].label,function(t){var e=W[t].fields.map((function(t){return t.key})),r=0;return e.forEach((function(t){S.forEach((function(e){e.hasOwnProperty(t)&&r++}))})),r>0?Object(n.createElement)("span",null," (",r," Selected )"):""}(t))),Object(n.createElement)(_.a,{className:"bwf-contact-preferences__accordian-icon",onClick:function(t){t.stopPropagation(),E((function(t){return t!==e&&e}))}},Object(n.createElement)(O.a,{icon:j===e?"angle-up":"angle-down",width:"16",height:"18"}))),j===e&&Object(n.createElement)("div",{className:"bwf-contact-preferences__add-col-group-content"},W[t].fields.map((function(e,r){return Object(n.createElement)("label",{className:"bwf-contact-preferences__add-col-group-item",key:"bwf-contact-preferences__add-col-group-item-".concat(r)},Object(n.createElement)(Y.a,{checked:S.some((function(t){return t.hasOwnProperty(e.key)})),onChange:function(){return function(t,e,r,n){var o=W[r].fields.map((function(t){return t.key}));S.some((function(e){return e.hasOwnProperty(t)}))?N((function(e){var n=e.filter((function(e){return!e.hasOwnProperty(t)}));return o.every((function(t){return n.hasOwnProperty(t)}))||P((function(t){return t.filter((function(t){return!t.hasOwnProperty(r)}))})),n})):N((function(a){var c,i=[].concat(ot(a),[(c={},it(c,t,e),it(c,"label",e),it(c,"groupKey",r),it(c,"groupLabel",n),c)]);return o.every((function(t){return i.some((function(e){return e.hasOwnProperty(t)}))}))&&P((function(t){return[].concat(ot(t),[it({},r,n)])})),i}))}(e.key,e.label,t,W[t].label)}}),Object(n.createElement)("div",null,e.label))}))))})))):Object(n.createElement)("div",{className:"bwf-contact-preferences"},Object(n.createElement)("div",{className:"bwf-contact-preferences__header"},Object(n.createElement)("div",{className:"bwf-contact-preferences__header-heading"},Object(o.__)("Columns","wp-marketing-automations")),Object(n.createElement)(_.a,{isSecondary:!0,className:"bwf-btn-small is-border",onClick:function(){return v(!0)}},Object(o.__)("Add New Columns","wp-marketing-automations"))),p&&G?Object(n.createElement)(dt,{helperContainer:k.current,helperClass:"bwf-contacts-preferences-item__helper",useDragHandle:!0,axis:"y",items:S,onRemove:function(t,e){var r=W[e].fields.map((function(t){return t.key}));N((function(n){var o=n.filter((function(e){return!e.hasOwnProperty(t)}));return r.every((function(t){return o.hasOwnProperty(t)}))||P((function(t){return t.filter((function(t){return!t.hasOwnProperty(e)}))})),o}))},onSortEnd:function(t){var e=t.oldIndex,r=t.newIndex;e!==r&&N((function(t){return Object(rt.d)(t,e,r)}))}}):Object(n.createElement)(gt,{type:"fields"}))),Object(n.createElement)("div",{className:"bwf-contact-preferences__actions"},Object(n.createElement)(_.a,{onClick:function(){return e()},disabled:s},Object(o.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(_.a,{isPrimary:!0,onClick:K,disabled:s,isBusy:s},Object(o.__)("Save","wp-marketing-automations"))))},gt=function(t){var e=t.type,r=void 0===e?"add-col":e;return ot(Array(5)).map((function(t,e){return Object(n.createElement)("div",{key:"bwf-preferences-placeholder-".concat(e),className:"bwf-contact-preferences__add-col-group"},Object(n.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(n.createElement)("div",{className:"bwf-flex"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-20 bwf-ml-16"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-ml-10 ".concat("fields"===r?"bwf-w-90":"bwf-w-120")})),"fields"===r&&Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-20 bwf-mr-15"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-mr-15 ".concat("fields"===r?"bwf-w-80 bwf-h-30 bwf-rounded-4":"bwf-w-20 bwf-h-20")})))}))},wt=function(t){var e=t.refreshTable,r=t.setModelData,a=ft(Object(n.useState)(!1),2),c=a[0],i=a[1];return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-sort-button components-button is-light bwf-btn-small "+(c?"is-active":""),onClick:function(){return i(!0)},style:{width:"30px",padding:"7px"},title:Object(o.__)("Column Preference","wp-marketing-automations")},Object(n.createElement)(O.a,{icon:"filters",size:16})),c&&Object(n.createElement)(vt,{onRequestClose:function(){return i(!1)},refreshTable:e,setModelData:r}))},Ot=r(66),jt=r(336),Et=r(96),_t=r(49),kt=r(189),xt=r(39),St=r(322),Nt=r(321),Lt=r(340);function Ct(t){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pt(){Pt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==Ct(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function It(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function At(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){It(a,n,o,c,i,"next",t)}function i(t){It(a,n,o,c,i,"throw",t)}c(void 0)}))}}function Tt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ft(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ft(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Gt=function(t){var e=t.onClose,r=void 0===e?function(){}:e,a=t.selectedContacts,c=void 0===a?[]:a,i=t.refreshContactData,s=void 0===i?function(){}:i,f=Tt(Object(n.useState)({}),2),m=f[0],p=f[1],h=Tt(Object(n.useState)([]),2),d=h[0],y=h[1],v=Tt(Object(n.useState)(!0),2),w=v[0],j=v[1],k=Tt(Object(n.useState)(!1),2),x=k[0],S=k[1],N=Tt(Object(n.useState)([]),2),L=N[0],C=N[1],P=Tt(Object(n.useState)([]),2),I=P[0],A=P[1],T=Tt(Object(n.useState)(0),2),F=T[0],$=T[1],D=Tt(Object(n.useState)(!1),2),M=D[0],B=D[1],z=function(){var t=At(Pt().mark((function t(){return Pt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.y)("/link-triggers/actions"),method:"GET"}).then((function(t){200===t.code&&(t.result.hasOwnProperty("actions")&&C(t.result.actions),t.result.hasOwnProperty("actions_schema")&&A(t.result.actions_schema)),j(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useLayoutEffect)((function(){z(),y([]),p({}),B(!1)}),[]);var U,R=function(t){var e={};return Object.keys(t).map((function(r){if("new"!==r)if(Object(u.isEmpty)(t[r]))Object(u.isEmpty)(I[r])&&(e[r]=t[r]);else if(Object(u.isObject)(t[r])&&!Object(u.isArray)(t[r])){var n={};Object.keys(t[r]).map((function(e){Object(u.isEmpty)(t[r][e])||(n[e]=t[r][e])})),e[r]=n}else Object(u.isArray)(t[r])&&(e[r]=t[r])})),e},Y=function(){var t=At(Pt().mark((function t(){var e;return Pt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=R(m),!Object(u.isEmpty)(e)||!(Object(u.isEmpty)(m)||1===Object.keys(m).length&&m.hasOwnProperty("new"))){t.next=6;break}return y([Object(o.__)("No actions selected","wp-marketing-automations")]),t.abrupt("return");case 6:if(Object.entries(m).length===Object.entries(e).length){t.next=9;break}return y([Object(o.__)("Please fill all the required fields","wp-marketing-automations")]),t.abrupt("return");case 9:return y([]),t.prev=10,S(!0),t.next=14,g()({path:Object(l.y)("/bulk-action/"),method:"POST",data:{include_ids:c.map((function(t){return t.id})),actions:e,only_action:!0,enable_automation:M}}).then((function(t){200==t.code&&t.hasOwnProperty("result")&&t.result.hasOwnProperty("id")&&(Object(l.U)()||(bwfcrm_contacts_data.first_bulk_action_id=1),$(t.result.id))})).catch((function(t){throw Error(Object(l.t)(null==t?void 0:t.message))}));case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(10),y(t.t0.message),S(!1);case 20:case"end":return t.stop()}}),t,null,[[10,16]])})));return function(){return t.apply(this,arguments)}}();return x&&parseInt(F)>0?Object(n.createElement)(b.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,onRequestClose:r,className:"bwf-admin-modal bwf-admin-modal-640 bwf-admin-modal-no-header bwf-show-close no-btn-css"},Object(n.createElement)("div",{className:"bwf-perform-bulk-action-modal-body bwf-mtb-12"},Object(n.createElement)("div",{className:"bwf-heading4-new bwf-display-flex"},Object(o.__)("Bulk Action has started","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-heading5-new bwf-display-flex bwf-mt-8 is-black"},Object(o.__)("The actions are being processing in the background.","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex gap-16 bwf-mt-24"},Object(n.createElement)(_.a,{onClick:function(){s(),r()},isPrimary:!0},Object(o.__)("View Contacts","wp-marketing-automations")),Object(n.createElement)(_.a,{onClick:function(){return Object(G.k)({page:"autonami",path:"/bulk-action/"+F},"/",{})},isSecondary:!0},Object(o.__)("Take to Bulk Action Screen","wp-marketing-automations"))))):Object(n.createElement)(b.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-large bwf-admin-modal-no-header"},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(o.__)("Create Bulk Action","wp-marketing-automations")),Object(n.createElement)("span",{onClick:r,className:"bwf-modal-close"},Object(n.createElement)(O.a,{icon:"close",color:"#353030"}))),d.length>0&&(U=Object(u.isArray)(d)?Object(n.createElement)("ul",null,d.map((function(t){return Object(n.createElement)("li",{key:Math.random()},t)}))):d,Object(n.createElement)(E.a,{status:"error"},U)),Object(n.createElement)("div",{className:"bwf-perform-bulk-action-modal-body "+(x?"is-creating-baction":"")},w?Object(n.createElement)("div",null,[1,2,3].map((function(t){return Object(n.createElement)("div",{key:t},Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between gap-24"},Object(n.createElement)("div",{className:"bwf-display-flex gap-20"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-20"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-400 bwf-h-20"})),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-20 bwf-w-150"})))}))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(Lt.b,{actions:L,actionSchema:I,value:Object(u.isEmpty)(m)?{new:{}}:m,setActionValue:function(t){p(t)},onEmptyError:function(t){y(t?Object(o.__)("Please fill the empty actions to add new one.","wp-marketing-automations"):"")}}),1===Object(l.m)(bwfcrm_contacts_data.bwf_pro_version,"3.2.1")&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_16"}),Object(n.createElement)(b.ToggleControl,{label:Object(o.__)("Trigger automations (for tag, list and status change related events)","wp-marketing-automations"),checked:M,className:"bwf-tooglecontrol-advance",onChange:function(t){B(t)}})))),Object(n.createElement)("div",{className:"bwf_text_right bwf-form-buttons bwf-mt-24"},w?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-30 bwf-mr-16"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-30"})):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(_.a,{className:"bwf-cancel-btn",onClick:r},Object(o.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(_.a,{onClick:Y,className:Object(u.size)(d)||function(){if(Object(u.isEmpty)(m)||1===Object.keys(m).length&&m.hasOwnProperty("new"))return!1;var t=[];return Object.keys(m).map((function(e){(""===e||Object(u.isEmpty)(m[e])&&!Object(u.isEmpty)(I[e]))&&t.push(e)})),!!Object(u.isEmpty)(t)}()?"bwf-no-ripple":"",isPrimary:!0,isBusy:x},Object(o.__)("Apply","wp-marketing-automations")))))};function $t(t){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Dt=["path","page","filter"];function Mt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Bt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(r),!0).forEach((function(e){zt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function zt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ut(){return(Ut=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function Rt(){Rt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==$t(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Yt(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function qt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){Yt(a,n,o,c,i,"next",t)}function i(t){Yt(a,n,o,c,i,"throw",t)}c(void 0)}))}}function Vt(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function Wt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||Ht(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(t,e){if(t){if("string"==typeof t)return Kt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kt(t,e):void 0}}function Kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Zt=function(t){var e=Object(n.useContext)(l.h),r=Wt(Object(n.useState)(!1),2),a=r[0],c=r[1],v=Wt(Object(n.useState)(!1),2),j=v[0],E=v[1],k=Wt(Object(n.useState)(!1),2),x=k[0],S=k[1],N=Wt(Object(n.useState)({}),2),L=N[0],C=N[1],P=Wt(Object(n.useState)(!1),2),I=P[0],M=P[1],z=Wt(Object(n.useState)(!1),2),U=z[0],q=z[1],V=Wt(Object(n.useState)(!0),2),W=V[0],H=V[1],K=Object(d.a)(),Z=Object(y.a)(),Q=t.query,J=t.isExport,X=t.setExport,rt=t.isImport,nt=t.setImport,ot=t.menuButtons,at=t.pitchData,ct=Q.path,it=Q.page,lt=Q.filter,st=Vt(Q,Dt),ut=Object(n.useRef)(st),ft=Wt(Object(n.useState)({status:!1}),2),mt=ft[0],pt=ft[1],bt=Wt(Object(n.useState)({status:!1,contactInfo:{}}),2),ht=bt[0],dt=bt[1],yt=Wt(Object(n.useState)({loading:!1,status:!1}),2),vt=yt[0],gt=yt[1],Lt=Wt(Object(n.useState)({status:!1,contactInfo:{}}),2),Ct=Lt[0],Pt=Lt[1],It=Z.fetchListing,At=Object(et.a)().setSingleContactListData,Tt=Wt(Object(n.useState)([]),2),Ft=Tt[0],$t=Tt[1],Mt=Wt(Object(n.useState)(!1),2),zt=Mt[0],Yt=Mt[1],Kt=function(){je&&je(),$t([]),setTimeout((function(){Zt.reset()}),2500)},Zt=Object(Et.useMutation)(function(){var t=qt(Rt().mark((function t(e){return Rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.y)("/v3/contacts/"),method:"DELETE",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){Kt(),It(Q,0,ie,!0)},onError:function(){}}),Qt=Object(n.useCallback)((function(t,e){switch(t){case"delete":$t(e),Yt(!0);break;case"perform-bulk-action":$t(e),E(!0)}}),[]),Jt=K.getPageNumber,Xt=K.getPerPageCount,te=K.getTotalCount,ee=K.getLoading,re=K.getContacts,ne=K.getError,oe=K.getCountData,ae=re(),ce=Jt(),ie=Xt(),le=te(),se=ee(),ue=ne(),fe=oe();Object(n.useEffect)((function(){It(Q,0,25,!0),M(!0)}),[]),Object(n.useEffect)((function(){Object(l.lc)(st,ut.current)||J||It(Q,0,25,!0),ut.current=st}),[Q]),Object(n.useEffect)((function(){se||q(!1)}),[se]),Object(n.useEffect)((function(){!J&&I&&It(Q,0,25,!0)}),[J]),Object(n.useEffect)((function(){!rt&&I&&It(Q,0,25,!0)}),[rt]);var me,pe,be=function(t){var e=t.f_name,r=void 0===e?"":e,o=t.l_name,a=void 0===o?"":o,c=t.id,i=void 0===c?"":c;return Object(n.createElement)(f.a,{to:"wp-admin/admin.php?page=autonami&path=/contact/"+i,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(t){t.preventDefault(),At(Object(l.gc)([r,a]," ")),Object(G.k)({page:"autonami",path:"/contact/"+parseInt(i)},"/",{})}},Object(n.createElement)(St.a,{contact:t,hideJoiningDate:!0}))},he=function(t){return Object(n.createElement)("div",{className:"bwf-c-contact-details-cell"},t.email?Object(n.createElement)(h.a,{justify:"justify",align:"top"},Object(n.createElement)(h.c,null,t.email)):"-")},de=function(t){return Object(n.createElement)(m.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations"),renderContent:function(e){var r=e.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){}},Object(n.createElement)(f.a,{to:"admin.php?page=autonami&path=/contact/"+t.id,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(e){e.preventDefault(),At(Object(l.gc)([t.f_name,t.l_name]," ")),Object(G.k)({path:"/contact/"+parseInt(t.id)},"/",{})}},Object(n.createElement)(h.a,{justify:"flex-start"},Object(n.createElement)(h.c,null,Object(o.__)("View","wp-marketing-automations"))))),Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){dt({status:!0,contactInfo:t}),r()}},Object(n.createElement)(h.a,{justify:"space-between"},Object(n.createElement)(h.c,null,Object(o.__)("Send Message","wp-marketing-automations")))),Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){Pt({status:!0,contactInfo:t}),r()}},Object(n.createElement)(h.a,{justify:"flex-start"},Object(n.createElement)(h.c,null,Object(o.__)("Add Note","wp-marketing-automations")))),Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){pt({status:!0,contactID:t.id,data:t}),r()}},Object(n.createElement)(h.a,{justify:"flex-start"},Object(n.createElement)(h.c,null,Object(o.__)("Delete","wp-marketing-automations")))))}})},ye=Object(n.useMemo)((function(){var t={};if(Array.isArray(ae)){var e,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Ht(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){i=!0,a=t},f:function(){try{c||null==r.return||r.return()}finally{if(i)throw a}}}}(ae);try{for(r.s();!(e=r.n()).done;){var n=e.value;t[n.id]=n}}catch(t){r.e(t)}finally{r.f()}}return t}),[ae]),ve=Object(D.b)(ye),ge=ve.singleSelectProps,we=ve.selectAllProps,Oe=ve.floatingBarProps,je=ve.resetSelection,Ee=ve.selected,_e=void 0===Ee?[]:Ee,ke=Object.keys(_e).filter((function(t){return _e[t]})).length,xe=bwfcrm_contacts_data.table_column_data.contactv2,Se=function(t){t!==ie&&It(Q,0,t)},Ne=function(){It(Q,0,ie,!0)},Le=i()("bwfcrm-contacts-list",{"has-search":!0}),Ce=function(){var t=qt(Rt().mark((function t(r){return Rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.prev=1,t.next=4,g()({path:Object(l.y)("/v3/contacts/".concat(r,"/")),method:"DELETE"}).then((function(t){if(200!==t.code)throw Error(Object(l.t)(null==t?void 0:t.message));e(t.message),c(!1),pt({}),It(Q,0,ie,!0)})).catch((function(t){throw Error(Object(l.t)(null==t?void 0:t.message))}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),pt(Bt(Bt({},mt),{},{content:t.t0.message})),c(!1);case 10:Object(l.Eb)(e,3e3);case 11:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),Pe=Object(l.K)("withtag"),Ie=function(t,e){if(""===e||Object(u.isUndefined)(e)||Object(u.isNull)(e)||!t.hasOwnProperty(e)||Object(u.isNull)(t[e])||Object(u.isUndefined)(t[e])||""===t[e])return"-";if("status"===e){var r=Pe.hasOwnProperty(parseInt(t[e]))?Pe[parseInt(t[e])]:Pe[0];return Object(n.createElement)("span",{className:r.statusclass},r.label)}if("country"===e){var a=t.country?$[t.country]:"";return Object(n.createElement)(h.a,{justify:"start"},Object(n.createElement)(jt.a,{code:t[e],size:15}),a&&Object(n.createElement)("span",{style:{textAlign:"left"}},a))}return"total_order_value"===e?Object(n.createElement)("span",{className:"bwf-tags bwf-tag-revenue",dangerouslySetInnerHTML:{__html:t[e]}}):Object(u.isArray)(t[e])?(c=t[e],i=[],l=[],Object(u.isEmpty)(c)?"-":(c.map((function(t){Object(u.isEmpty)(t)||(i.length<5&&(t.hasOwnProperty("link")&&""!==t.link?i.push(Object(n.createElement)("a",{className:"bwf-a-no-underline",href:Object(u.unescape)(t.link),target:"_blank",key:t.id,rel:"noreferrer"},t.name)):i.push(t.name)),t.hasOwnProperty("link")&&""!==t.link?l.push(Object(n.createElement)("a",{className:"bwf-a-no-underline",href:Object(u.unescape)(t.link),target:"_blank ",key:t.id},t.name)):l.push(Object(n.createElement)("span",{key:t.id},t.name)))})),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-table-v-center"},!Object(u.isEmpty)(i)&&i.map((function(t,e){return Object(n.createElement)("span",{key:e},t,e!==i.length-1&&", ")})),!Object(u.isEmpty)(l)&&l.length>5&&Object(n.createElement)(F.a,{items:l,count:5}))))):Object(u.isBoolean)(t[e])?t[e]?Object(o.__)("Yes","wp-marketing-automations"):Object(o.__)("No","wp-marketing-automations"):Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:t[e]}});var c,i,l},Ae=0===parseInt(ke)?Object(n.createElement)("div",{className:"bwf-display-flex gap-8"},Object(n.createElement)(_.a,{className:"bwf-btn-small is-light",key:"export",onClick:function(){Object(l.Sb)()?X(!0):(C({isFeature:!0,featureTitle:Object(o.__)("Contacts Export","wp-marketing-automations"),proLink:Object(l.ab)("upgrade",{utm_medium:"Contacts+Export+Upgrade+Modal"})}),S(!0))}},Object(n.createElement)("span",{className:"bwf-display-flex gap-4"},Object(l.Sb)()?Object(n.createElement)(O.a,{icon:"export",size:14}):Object(n.createElement)(O.a,{icon:"king",size:16}),Object(o.__)("Export","wp-marketing-automations"))),Object(n.createElement)(_.a,{className:"bwf-btn-small is-light",key:"import",onClick:function(){Object(l.Sb)()?nt(!0):(C({isFeature:!0,featureTitle:Object(o.__)("Contacts Import","wp-marketing-automations"),proLink:Object(l.ab)("upgrade",{utm_medium:"Contacts+Import+Upgrade+Modal"})}),S(!0))}},Object(n.createElement)("span",{className:"bwf-display-flex gap-4"},Object(l.Sb)()?Object(n.createElement)(O.a,{icon:"import",size:14}):Object(n.createElement)(O.a,{icon:"king",size:16}),Object(o.__)("Import","wp-marketing-automations"))),Object(n.createElement)(tt,{refreshTable:Ne}),Object(n.createElement)(wt,{refreshTable:Ne,setModelData:gt})):Object(n.createElement)(n.Fragment,null),Te=se||ue||le>0||"advanced"===lt||!Object(u.isEmpty)(st)&&st.hasOwnProperty("s")&&""!==st.s||U;return Object(n.createElement)(n.Fragment,null,mt&&mt.status&&Object(n.createElement)(b.Modal,{onRequestClose:function(){return pt({})},className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},mt.confirm?Object(n.createElement)(T.a,null):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(o.__)("Delete Contact?","wp-marketing-automations")),Object(n.createElement)("span",{onClick:function(){return pt({})},className:"bwf-modal-close"},Object(n.createElement)(O.a,{icon:"close",color:"#353030"}))),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-modal-content"},Object(n.createElement)("div",{style:{wordBreak:"break-word"}},mt.content?mt.content:Object(n.createElement)(n.Fragment,null,Object(o.__)("You are about to delete this contact ","wp-marketing-automations"),Object(n.createElement)("strong",null,"".concat(mt.data&&mt.data.f_name," ").concat(mt.data&&mt.data.l_name,". ")),Object(o.__)("This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")))),Object(n.createElement)("div",{className:"bwf_text_right bwf-mt-20"},mt.content?Object(n.createElement)(_.a,{isPrimary:!0,onClick:function(){pt({status:!1})}},Object(o.__)("OK","wp-marketing-automations")):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(_.a,{className:"bwf-cancel-btn",onClick:function(){pt({status:!1})},disabled:a},Object(o.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(_.a,{className:"bwf-delete-btn",isBusy:a,onClick:function(){Ce(mt.contactID)}},Object(o.__)("Delete","wp-marketing-automations"))))))),Object(n.createElement)("div",{className:"bwf-content-header-new bwf-pb-0"},Object(n.createElement)("div",{className:"bwf-content-header-left"},Object(n.createElement)("div",{className:"bwf-content-header-title"},Object(o.__)("All Contacts","wp-marketing-automations")),parseInt(le)>0&&Object(n.createElement)("div",{className:"bwf-content-header-count"},Object(o.sprintf)(Object(o._n)("(%s Result)","(%s Results)",le,"wp-marketing-automations"),le))),Object(n.createElement)("div",{className:"bwf-content-header-right"},Te&&!se&&ot)),!se&&!Object(u.isEmpty)(fe)&&fe.hasOwnProperty("contacts_active_bulk_actions")&&parseInt(fe.contacts_active_bulk_actions)>0&&W&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-single-automation-notice no-icon bwf-m-0 bwf-san-no-border bwf-mt-8"},Object(n.createElement)("div",{className:"bwf-display-flex gap-24 bwf-flex-start bwf-align-center"},Object(n.createElement)("div",{className:"bwf-display-flex gap-8 bwf-flex-start bwf-w-100p"},Object(n.createElement)(O.a,{icon:"info",color:"#353030",size:20}),Object(n.createElement)("div",{className:"bwf-display-flex gap-8 bwf-space-between bwf-w-100p"},Object(n.createElement)("span",{className:"bwf-normal-text bwf-l-h-16"},Object(n.createElement)("span",{className:"bwf-normal-text bwf-n-b bwf-l-h-16"},Object(o.__)("Information","wp-marketing-automations"),": "),Object(o.__)("Bulk action on contacts is in progress.","wp-marketing-automations")),Object(n.createElement)(_.a,{onClick:function(){return Object(G.k)({page:"autonami",path:"/bulk-actions/ongoing"},"/",{})},className:"bwf-btn-small is-black"},Object(o.__)("Go to Bulk Actions","wp-marketing-automations")))),Object(n.createElement)("span",{className:"bwf-cursor-pointer bwf-w-16 bwf-h-16",onClick:function(){return H(!1)}},Object(n.createElement)(O.a,{icon:"cross",color:"#353030",size:16}))))),Te?Object(n.createElement)(s.a,{className:Le,rows:Object(u.isEmpty)(ae)?[]:ae.map((function(t){var e=[{display:ge[t.id]&&Object(n.createElement)(Y.a,Ut({type:"checkbox",checked:!1,onChange:function(){}},ge[t.id])),value:null},{display:de(t),value:null},{display:be(t),value:Object(l.gc)([t.f_name,t.l_name]," ")},{display:he(t),value:""},{display:Object(u.isEmpty)(Object(u.trim)(t.creation_date))?"-":t.creation_date,value:t.creation_date}];return xe.map((function(r){var n=Bt({},r);delete n.label,delete n.groupKey,delete n.groupLabel;var o=Object.keys(n)[0];e.push({display:Ie(t,o),value:"-"})})),e})),headers:(pe=[{key:"select_contact",label:Object(n.createElement)(Y.a,Ut({type:"checkbox",checked:!1,onChange:function(){}},we)),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"actions",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"f_name",label:Object(o.__)("Name","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-210 bwf-table-col-sticky bwf-sticky-left"},{key:"contact_details",label:Object(o.__)("Email","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210 bwf-word-break"},{key:"created_on",label:Object(o.__)("Created On","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"}],xe.map((function(t){Object(u.isObject)(t)&&pe.push({key:Object.keys(t).find((function(e){return t[e]==(null==t?void 0:t.label)})),label:null==t?void 0:t.label,isLeftAligned:!0,cellClassName:t.hasOwnProperty("label")&&(t.label.toLocaleLowerCase().includes("tag")||t.label.toLocaleLowerCase().includes("list")||t.label.toLocaleLowerCase().includes("product")||t.label.toLocaleLowerCase().includes("category")||t.label.toLocaleLowerCase().includes("trigger"))?"bwf-max-w-360":"bwf-w-150"})})),pe),query:{paged:ce,order:Q.order,orderby:Q.orderby},rowsPerPage:ie,totalRows:le,isLoading:se,onPageChange:function(t,e){It(Q,(t-1)*ie,ie)},onQueryChange:function(t){return"per_page"!==t?function(){}:Se},actions:ke>0?[Object(n.createElement)(D.a,Ut({key:"contact-bulk-action",actions:(me=[],1===Object(l.m)(bwfcrm_contacts_data.bwf_pro_version,"3.0.3")&&me.push({id:"perform-bulk-action",icon:"bulk-action",hint:Object(o.__)("Bulk Action","wp-marketing-automations"),isPro:!0,proLink:Object(l.ab)("upgrade",{utm_medium:"Contact+List+Bulk+Action+Upgrade+Modal"}),featureTitle:Object(o.__)("Perform Bulk Action","wp-marketing-automations")}),me.push({id:"delete",icon:"trash",hint:Object(o.__)("Delete","wp-marketing-automations")}),me),onAction:Qt,inLine:!0,reset:Kt},Oe))]:[Object(n.createElement)(kt.a,{key:"search",isLoading:se,searchTerm:null==st?void 0:st.s,showResultCount:!1,setSearchData:function(t){if(Object(u.size)(t))Object(G.k)({s:t},"/",Q);else{var e=Object(u.cloneDeep)(Q);e.hasOwnProperty("s")&&(null==e||delete e.s),q(!0),Object(G.k)(e,"/",{})}}}),Object(n.createElement)(_t.b,{onChange:function(t){q(!0),"all"===t&&Object(G.k)({page:it},ct,{}),"filters"===t&&Object(G.k)({filter:"advanced"},ct,Q)},options:[{key:"all",label:Object(o.__)("All Contacts","wp-marketing-automations")},{key:"filters",label:Object(o.__)("Advanced Filters","wp-marketing-automations")}],selected:Q.hasOwnProperty("filter")&&"advanced"===Q.filter?"filters":"all",key:"select-contact",className:"bwf-w-150"}),Object(n.createElement)(B.c,{key:"list-audience"})],rowHeader:!0,emptyMessage:Object(o.__)("No contacts found","wp-marketing-automations"),extraSectionBeforefilterCol:Ae,showMenu:!1,beforeTable:Object(n.createElement)(R,{query:Q,isOpen:Q.hasOwnProperty("filter")&&"advanced"===Q.filter})}):Object(n.createElement)(Nt.a,{data:at}),ht.status&&Object(n.createElement)(w.a,{contact:ht.contactInfo,setSendMessageModel:dt}),Ct.status&&Object(n.createElement)(A,{contact:Ct.contactInfo,setModelStatus:Pt}),Object(n.createElement)(Ot.a,{modalTitle:Object(o._n)("Delete Contact","Delete Contacts",Ft.length,"wp-marketing-automations"),deleteEntityName:1===Ft.length?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",{style:{fontWeight:"normal"}},Object(o.__)("contact","wp-marketing-automations")," "),Ft[0].f_name," ",Ft[0].l_name):Object(n.createElement)(n.Fragment,null,Ft.length," ",Object(n.createElement)("span",{style:{fontWeight:"normal"}},Object(o.__)("contact","wp-marketing-automations"))),confirmButtonText:Object(o.__)("Delete","wp-marketing-automations"),cancelButtonText:Object(o.__)("Cancel","wp-marketing-automations"),onConfirm:function(){var t={contacts:Ft.map((function(t){return t.id}))};Zt.mutate(t)},isLoading:Zt.isLoading,successMessage:Zt.isSuccess&&Object(o.__)("Contacts Deleted!","wp-marketing-automations"),errorMessage:Zt.isError&&(Zt.error&&Zt.error.message?Zt.error.message:Object(o.__)("Unable to delete contacts","wp-marketing-automations")),onRequestClose:function(){Kt(),Yt(!1)},isOpen:zt,confirmDescription:Object(o.__)("This action is irreversible","wp-marketing-automations"),isDelete:!0}),Object(n.createElement)(Ot.a,{modalTitle:vt.modalTitle,deleteEntityName:vt.deleteEntityName,confirmText:vt.confirmText,confirmButtonText:vt.buttonConfirm,cancelButtonText:vt.buttonCancel,onConfirm:vt.onConfirm,isLoading:vt.loading,successMessage:vt.success,errorMessage:vt.error,content:vt.content,onRequestClose:function(){return gt({status:!1})},isOpen:vt.status,isDelete:!vt.hasOwnProperty("isDelete")||vt.isDelete}),!Object(l.Sb)()&&Object(n.createElement)(xt.b,{isOpen:x,onRequestClose:function(){return S(!1)},modalContent:L}),j&&Object(n.createElement)(Gt,{onClose:function(){Kt(),E(!1)},selectedContacts:Ft,refreshContactData:Ne}))},Qt=r(85),Jt=r(91),Xt=r(1107),te=r(332),ee=r(334),re=r(1062),ne=r(1072);function oe(t){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ae(){return(ae=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function ce(){ce=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==oe(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function ie(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function le(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){ie(a,n,o,c,i,"next",t)}function i(t){ie(a,n,o,c,i,"throw",t)}c(void 0)}))}}function se(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ue(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ue(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var fe={email:"",f_name:"",l_name:"",marketing_status:!0,contact_no:""},me=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onCloseModal:function(){}},e=Object(n.useContext)(l.h),r=Object(n.useState)([]),a=se(r,2),c=a[0],i=a[1],s=Object(n.useState)([]),f=se(s,2),m=f[0],p=f[1],h=Object(n.useState)(null),d=se(h,2),v=d[0],w=d[1],j=Object(n.useState)(null),k=se(j,2),x=k[0],S=k[1],N=Object(n.useState)(fe),L=se(N,2),C=L[0],P=L[1],I=Object(n.useState)(!1),A=se(I,2),F=A[0],$=A[1],D=Object(n.useState)({}),M=se(D,2),B=M[0],z=M[1],U=Object(et.a)(),R=U.setSingleContactListData,q=function(){var r=le(ce().mark((function r(n){return ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return $(!0),r.prev=1,r.next=4,g()({path:Object(l.y)("/v3/contacts"),method:"POST",data:n}).then((function(r){if(200!=r.code)throw Error(Object(l.t)(null==r?void 0:r.message));e(r.message),z({}),$(!1),Object(l.V)()||(bwfcrm_contacts_data.first_contact_id=1),R(Object(l.gc)([n.f_name,n.l_name]," ")),Object(G.k)({page:"autonami",path:"/contact/"+parseInt(r.result.id)},"/",{}),t.onCloseModal()})).catch((function(t){throw Error(Object(l.t)(null==t?void 0:t.message))}));case 4:r.next=10;break;case 6:r.prev=6,r.t0=r.catch(1),$(!1),w(r.t0);case 10:Object(l.Eb)(e,3e3);case 11:case"end":return r.stop()}}),r,null,[[1,6]])})));return function(t){return r.apply(this,arguments)}}(),V=function(t){var e={};return!Object(u.isEmpty)(t.email)&&Object(Jt.a)(t.email?t.email:"")||(e.email=Object(u.isEmpty)(t.email)?Object(o.__)("Email is required","wp-marketing-automations"):Object(o.__)("Email is not valid","wp-marketing-automations")),Object(u.isEmpty)(t.phone)||Object(Xt.a)(t.phone?t.phone:"")||(e.phone=Object(o.__)("Phone is not valid","wp-marketing-automations")),e},W=function(t){var e=t.email,r=t.f_name,n=t.l_name,o=t.marketing_status,a=t.phone,i=[];Object(u.isEmpty)(c)||c.map((function(t){i.push({id:t.key,value:t.label})}));var l=[];Object(u.isEmpty)(m)||m.map((function(t){l.push({id:t.key,value:t.label})})),P({email:e,f_name:r,l_name:n,contact_no:a,status:o,tags:i,lists:l}),q({email:e,f_name:r,l_name:n,contact_no:a,status:o,tags:i,lists:l})},H=Object(y.a)(),K=H.fetch,Z=t.query,Q=function(){x&&(S(null),K(Z,0,25)),t.onCloseModal()},J=function(){return B&&B.success&&B.message?Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(te.a,null),Object(n.createElement)("div",{className:"bwf-h1"},B.message)):B&&B.error&&B.message?Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(ee.a,null),Object(n.createElement)("div",{className:"bwf-h1"},B.message)):Object(n.createElement)(T.a,null)};return Object(n.createElement)(b.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-medium bwf-add-new-contact-modal "},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(o.__)("Create Contact","wp-marketing-automations")),Object(n.createElement)("span",{onClick:Q,className:"bwf-modal-close"},Object(n.createElement)(O.a,{icon:"close",color:"#353030"}))),v&&Object(n.createElement)(E.a,{status:"error",onRemove:function(){return w(null)}},v.hasOwnProperty("message")?v.message:Object(o.__)("Unknown Error while creating contact","wp-marketing-automations")),B.error||B.success?J():Object(n.createElement)(Qt.a,{validate:V,onSubmitCallback:W,initialValues:C},(function(t){var e=t.getInputProps,r=t.values,a=t.errors,l=t.handleSubmit,s=t.touched;return Object(n.createElement)("div",{className:"bwf-form-fields"},Object(n.createElement)("div",null,Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-input-label",id:"required"},Object(o.__)("Email","wp-marketing-automations")),Object(n.createElement)(b.TextControl,ae({disabled:F,type:"email",help:Object(o.__)("Required","wp-marketing-automations")},e("email"))),(null==s?void 0:s.email)&&(null==a?void 0:a.email)&&Object(n.createElement)("div",{className:"bwf-error-text"},null==a?void 0:a.email)),Object(n.createElement)(b.TextControl,ae({disabled:F,label:Object(o.__)("Phone","wp-marketing-automations"),help:Object(o.__)("Optional","wp-marketing-automations")},e("phone"))),(null==s?void 0:s.phone)&&a.hasOwnProperty("phone")&&Object(n.createElement)("div",{className:"bwf-error-text"},null==a?void 0:a.phone),Object(n.createElement)(b.TextControl,ae({disabled:F,label:Object(o.__)("First Name","wp-marketing-automations"),help:Object(o.__)("Optional","wp-marketing-automations")},e("f_name"))),Object(n.createElement)(b.TextControl,ae({disabled:F,label:Object(o.__)("Last Name","wp-marketing-automations"),help:Object(o.__)("Optional","wp-marketing-automations")},e("l_name"))),Object(n.createElement)(re.a,{onTagsChange:i,selected:c}),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(ne.a,{onListsChange:p,selected:m}),Object(n.createElement)("div",{className:"bwf_clear_24"})),Object(n.createElement)("div",null,Object(n.createElement)(Y.a,ae({type:"checkbox",disabled:F,label:Object(o.__)("Mark Contact as Subscribed","wp-marketing-automations"),help:Object(o.__)("Optional","wp-marketing-automations")},e("marketing_status")))),Object(n.createElement)("div",{className:"bwf_text_right bwf-form-buttons bwf-mt-24"},Object(n.createElement)(_.a,{className:"bwf-cancel-btn",onClick:Q},Object(o.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(_.a,{onClick:function(){V(r)&&l()},className:Object(u.size)(a)||V(r)?"bwf-no-ripple":"",isPrimary:!0,isBusy:F},Object(o.__)("Add","wp-marketing-automations"))))})))},pe=r(358),be=r(333),he=r(65),de=r(74),ye=r(108),ve=(r(1196),r(48)),ge=["getStateProp"];function we(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Oe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?we(Object(r),!0).forEach((function(e){je(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function je(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ee(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var _e=function(){var t=Object(ve.a)("exporter"),e=t.getStateProp;return Oe(Oe({},Ee(t,ge)),{},{getExporter:function(){return e("export")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getLoadingStatus:function(){return e("isLoading")},getExistingExport:function(){return e("existingExport")}})},ke=r(47),xe=["fetch","setStateProp"];function Se(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ne(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Se(Object(r),!0).forEach((function(e){Le(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Le(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ce(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var Pe=function(){var t=Object(ke.a)("exporter"),e=t.fetch,r=t.setStateProp;return Ne(Ne({},Ce(t,xe)),{},{fetch:function(t,r,n){e("GET",Object(l.y)("/contact/export?limit=".concat(t,"&offset=").concat(r,"&search=").concat(n)))},setStateExportValues:function(t,e){r(t,e)}})},Ie=r(1079),Ae=r(328),Te=r(326),Fe=r(1060);function Ge(t){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $e(){$e=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==Ge(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function De(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function Me(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Be(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Be(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ze=function(t){var e=t.exportId,r=void 0===e?"":e,a=t.setLoading,c=t.setComplete,i=t.preExportData,s=void 0===i?{}:i,f=Me(Object(n.useState)(!1),2),m=f[0],p=f[1],b=Me(Object(n.useState)(s),2),h=b[0],d=b[1],y=Me(Object(n.useState)(0),2),v=y[0],w=y[1],O=Me(Object(n.useState)(!1),2),j=O[0],E=O[1];Object(n.useEffect)((function(){100===parseInt(v)&&setTimeout((function(){E(!0)}),2e3)}),[v]);var _=function(){var t,e=(t=$e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g()({method:"GET",path:Object(l.y)("/contact/export/".concat(r))}).then((function(t){200==t.code&&d(t.result)}));case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){De(a,n,o,c,i,"next",t)}function i(t){De(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(!Object(u.isEmpty)(h))if(3==h.status)a(!1),p(!0),w(100),c(!0);else{var t=parseInt(h.offset)/parseInt(h.count)*100;w(t<100?parseInt(t):100)}}),[h]),Object(Fe.a)((function(){m||_()}),5e3),Object(n.createElement)("div",{className:"bwf-display-flex-column",style:{alignItems:"center"}},r&&m&&j?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("h2",null,Object(o.__)("Export Completed","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Your file is ready for download. Now you can download the exported contact list.","wp-marketing-automations"))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Export Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("The file is being created in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:parseInt(v),text:"".concat(parseInt(v),"% ").concat(Object(o.__)("Completed","wp-marketing-automations"))})))};function Ue(t){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Re(){Re=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==Ue(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Ye(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function qe(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){Ye(a,n,o,c,i,"next",t)}function i(t){Ye(a,n,o,c,i,"throw",t)}c(void 0)}))}}function Ve(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return We(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return We(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var He=function(t){var e=t.title,r=t.fields,a=t.expfilter,c=t.setPending,i=t.setAdd,s=t.contactCount,u=t.exportID,f=void 0===u?0:u,m=t.preExportData,p=void 0===m?{}:m,h=Ve(Object(n.useState)(!1),2),d=h[0],y=h[1],v=Ve(Object(n.useState)(""),2),w=v[0],O=v[1],j=Ve(Object(n.useState)(!1),2),k=j[0],x=j[1],S=Ve(Object(n.useState)(!1),2),N=S[0],L=S[1],C=Ve(Object(n.useState)(!1),2),P=C[0],I=C[1],A=Ve(Object(n.useState)(Object(o.__)("Unable to create export.","wp-marketing-automations")),2),T=A[0],F=A[1];Object(n.useEffect)((function(){c(!0),0===parseInt(f)?G():(y(!0),O(f))}),[]);var G=function(){var t=qe(Re().mark((function t(){var n;return Re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={title:e,fields:r,filters:a,count:s},t.next=4,g()({method:"POST",data:n,path:Object(l.y)("/contact/export/add")}).then((function(t){200==t.code&&(Object(l.W)()||(bwfcrm_contacts_data.first_export_id=2),y(!0),t.result.hasOwnProperty("id")&&O(t.result.id))}));case 4:t.next=11;break;case 6:t.prev=6,t.t0=t.catch(0),y(!0),x(!0),t.t0.hasOwnProperty("message")&&F(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}();P&&setTimeout((function(){document.querySelectorAll(".bwf-export-add-modal .bwf-crm-export-init .bwf-stepper .bwf-stepper__steps")[0].remove()}),2e3);var $=function(){var t=qe(Re().mark((function t(){return Re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return L(!0),t.prev=1,t.next=4,g()({path:Object(l.y)("/contact/export/cancel/".concat(w)),method:"DELETE"}).then((function(t){if(200!==t.code)throw Error(Object(l.t)(null==t?void 0:t.message));i(!1)})).catch((function(t){throw Error(Object(l.t)(null==t?void 0:t.message))}));case 4:t.next=11;break;case 6:t.prev=6,t.t0=t.catch(1),L(!1),x(!0),F(t.t0.message?t.t0.message:Object(o.__)("Error in canceling export","wp-marketing-automations"));case 11:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(b.Card,{className:"bwfcrm-overview-wrap bwf-contact-export-step-three"},Object(n.createElement)("div",{style:{alignItems:"center"}},d?Object(n.createElement)(n.Fragment,null,w?Object(n.createElement)(ze,{exportId:w,setLoading:c,setComplete:I,preExportData:p}):Object(n.createElement)("div",{className:"bwf-h4"},k&&Object(n.createElement)(E.a,{status:"error",isDismissible:!1},T))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-display-flex-column",style:{alignItems:"center"}},Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-30 bwf-w-90"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-270"}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-100p"}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-150"}),Object(n.createElement)("div",{className:"bwf_clear_20"}))),Object(n.createElement)("div",{className:"bwf_clear_20"}))),Object(n.createElement)("div",{className:"bwf-display-flex"},d?Object(n.createElement)(n.Fragment,null,P?Object(n.createElement)(_.a,{isPrimary:!0,className:"bwf-mt-24",onClick:function(){window.open(Object(l.pb)()+"/wp-json"+Object(l.y)("/contact/export/download/".concat(w,"?bwf-nonce=").concat(Object(l.D)())),"_blank")}},Object(o.__)("Download File","wp-marketing-automations")):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(_.a,{isPrimary:!0,className:"bwf-mt-24",onClick:function(){i(!1)}},Object(n.createElement)("span",{className:"bwf-p-5"},Object(o.__)("Go to Export List","wp-marketing-automations"))),-1!==Object(l.m)(bwfcrm_contacts_data.bwf_pro_version,"3.2.2")&&Object(n.createElement)(_.a,{isSecondary:!0,className:"bwf-mt-24",onClick:$,isBusy:N},Object(n.createElement)("span",{className:"bwf-p-5"},Object(o.__)("Cancel Export","wp-marketing-automations"))))):Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-90"}))),Object(n.createElement)("div",{className:"bwf_clear_30"}))};function Ke(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ze(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ze(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Qe=function(t){var e=t.exportData,r=void 0===e?{}:e,a=t.onClose,c=void 0===a?function(){}:a,i=Ke(Object(n.useState)(!0),2),l=i[0],s=i[1],u=[{key:1,label:Object(o.__)("Fields","wp-marketing-automations"),content:Object(n.createElement)(n.Fragment,null)},{key:2,label:Object(o.__)("Contacts","wp-marketing-automations"),content:Object(n.createElement)(n.Fragment,null)},{key:3,label:Object(o.__)("Confirmation","wp-marketing-automations"),content:function(t){switch(t){case 3:return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(He,{setPending:s,exportID:r.id,preExportData:r,setAdd:function(){return c(!0)}}));default:return Object(n.createElement)(n.Fragment,null)}}(3)}];return Object(n.createElement)(b.Modal,{onRequestClose:function(){return c(!0)},className:"bwf-admin-modal bwf-admin-modal-xxl bwf-export-add-modal",title:Object(o.__)("Export Inprogress","wp-marketing-automations"),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-crm-export-init"},Object(n.createElement)(Ae.a,{steps:u,currentStep:3,isPending:l})))};function Je(t){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xe(){Xe=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==Je(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function tr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function er(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0).forEach((function(e){rr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nr(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function or(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ar(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ar(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var cr=function(t){var e=t.isAdd,r=Object(G.i)(),a=Object(M.a)(),c=or(Object(n.useState)({loading:!1,status:!1}),2),i=c[0],f=c[1],d=or(Object(n.useState)(!1),2),y=d[0],v=d[1],w=or(Object(n.useState)(!1),2),j=w[0],E=w[1],_=or(Object(n.useState)({}),2),k=_[0],x=_[1],S=r.s,N=void 0===S?"":S,L=Pe(),C=L.fetch,P=L.setStateExportValues,I=_e(),A=I.getExporter,T=I.getOffset,F=I.getLoading,$=I.getTotalCount,D=I.getPageNumber,B=I.getPerPageCount,z=[{key:"actions",label:"",isLeftAligned:!1,cellClassName:"bwf-col-action bwf-w-30 "},{key:"name",label:Object(o.__)("Name","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-300"},{key:"createdon",label:Object(o.__)("Created On","wp-marketing-automations"),isLeftAligned:!0},{key:"contactcount",label:Object(o.__)("Contacts","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-120"},{key:"status",label:Object(o.__)("Status","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-150"},{key:"file",label:"",isLeftAligned:!1,cellClassName:"bwf-w-150"}],U=A(),R=D(),Y=B(),q=$(),V=T(),W=F(),H=Object(de.a)().setPageCountData;Object(n.useEffect)((function(){H({contacts_export:q})}),[q]),Object(n.useEffect)((function(){e||C(Y,V,N)}),[Y,V,N,e]);var K,Z=function(t){t!==Y&&P("limit",t)},Q=function(){var t,e=(t=Xe().mark((function t(e){var r,n=arguments;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},f(er(er({},r),{},{status:!0})),t.prev=2,t.next=5,g()({path:Object(l.y)("/contact/export/delete/".concat(e)),method:"DELETE"}).then((function(t){if(200!==t.code)throw Error(Object(l.t)(null==t?void 0:t.message));f({}),C(Y,V,N)})).catch((function(t){throw Error(Object(l.t)(null==t?void 0:t.message))}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),f({status:!0,error:t.t0.message?t.t0.message:Object(o.__)("Error in deleting export","wp-marketing-automations")});case 10:case"end":return t.stop()}}),t,null,[[2,7]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){nr(a,n,o,c,i,"next",t)}function i(t){nr(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(t){return e.apply(this,arguments)}}(),J=function(t){return Object(n.createElement)(m.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var r=e.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){t.hasOwnProperty("status")&&1===parseInt(t.status)?(x(t),E(!0)):(x(t),v(!0)),r()}},Object(n.createElement)(h.a,{justify:"flex-start"},Object(n.createElement)(h.c,null,Object(o.__)("View","wp-marketing-automations")))),Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){var e={status:!0,deleteEntityName:Object(n.createElement)(n.Fragment,null,Object(o.__)("item ")," ",t.title),buttonConfirm:Object(o.__)("Delete","wp-marketing-automations"),buttonCancel:Object(o.__)("Cancel","wp-marketing-automations")};f(er(er({},e),{},{onConfirm:function(){return Q(t.id,e)}})),r()}},Object(n.createElement)(h.a,{justify:"flex-start"},Object(n.createElement)(h.c,null,Object(o.__)("Delete","wp-marketing-automations")))))}})},X={1:Object(o.__)("In Progress","wp-marketing-automations"),2:Object(o.__)("Failed","wp-marketing-automations"),3:Object(o.__)("Completed","wp-marketing-automations"),4:Object(o.__)("Cancelled","wp-marketing-automations")},tt=function(t){switch(parseInt(t.status)){case 3:if(t.file)return Object(n.createElement)("a",{target:"_blank",href:Object(l.pb)()+"/wp-json"+Object(l.y)("/contact/export/download/".concat(t.id,"?bwf-nonce=").concat(Object(l.D)())),title:Object(o.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline",rel:"noreferrer"},Object(n.createElement)("div",{className:"bwf-download-btn"},Object(n.createElement)("span",null,Object(n.createElement)(O.a,{icon:"download"})),Object(n.createElement)("span",null,Object(o.__)("Download","wp-marketing-automations"))));default:return"-"}},et=function(t){return 1===parseInt(t.status)?Object(n.createElement)(n.Fragment,null,Object(o.sprintf)(Object(o.__)("%d of %d Completed","wp-marketing-automations"),parseInt(t.offset),parseInt(t.count))):t.count},rt=Object(u.isEmpty)(U)?[]:U.map((function(t){return[{display:J(t),value:"action"},{display:t.title?t.title:"-",value:t.title},{display:(r=t.created_date,Object(n.createElement)("div",{className:"bwf-display-flex-column"},Object(n.createElement)("span",null,Object(l.db)(r)))),value:""},{display:et(t),value:t.count},{display:(e=t,Object(n.createElement)("span",{className:"bwf-export-status-tag bwf-status-"+parseInt(e.status)},X[parseInt(e.status)])),value:t.status},{display:tt(t),value:""}];var e,r}));return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)(s.a,{title:"",className:"bwf-export-contact-table",rows:rt,headers:z,query:{paged:R},rowsPerPage:Y,totalRows:q,isLoading:W,onPageChange:function(t,e){P("offset",(t-1)*Y)},onQueryChange:function(t){return"per_page"!==t?function(){}:Z},showMenu:!1,rowHeader:!0,actions:[],emptyMessage:Object(o.__)("No export available","wp-marketing-automations")}),Object(n.createElement)(Ot.a,{modalTitle:Object(o.__)("Delete"),confirmText:i.confirmText,deleteEntityName:i.deleteEntityName,confirmButtonText:i.buttonConfirm,cancelButtonText:i.buttonCancel,onConfirm:i.onConfirm,isLoading:i.loading,successMessage:i.success,errorMessage:i.error,onRequestClose:function(){return f({status:!1})},isOpen:i.status,isDelete:!0}),y&&!Object(u.isEmpty)(k)&&Object(n.createElement)(b.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-large bwf-export-list-modal bwf-show-close"},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(o.__)("Export Details","wp-marketing-automations")),Object(n.createElement)("span",{onClick:function(){return v(!1)},className:"bwf-modal-close"},Object(n.createElement)(O.a,{icon:"close",color:"#353030"}))),(K=[],Object(u.isEmpty)(k.fields)||k.fields.map((function(t){var e=or(Object.entries(t)[0],2),r=e[0];e[1],a.hasOwnProperty(r)&&K.push(a[r].labels.add)})),Object(n.createElement)(n.Fragment,null,k.hasOwnProperty("filters")&&Object(n.createElement)("div",{className:"bwf-export-modal-row"},Object(n.createElement)("div",{className:"bwf-export-modal-row-label"},Object(o.__)("Filters","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-export-modal-row-value"},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(u.isEmpty)(t)?"-":Object(n.createElement)(n.Fragment,null,Object(Ie.b)(t))}(k.filters))),!Object(u.isEmpty)(K)&&Object(n.createElement)("div",{className:"bwf-export-modal-row"},Object(n.createElement)("div",{className:"bwf-export-modal-row-label"},Object(o.__)("Fields","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-export-modal-row-value"},K.join(" | ")))))),j&&!Object(u.isEmpty)(k)&&Object(n.createElement)(Qe,{exportData:k,onClose:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&C(Y,V,N),E(!1)}}))},ir=function(t){var e=t.setAdd,r=t.isAdd;return Object(n.useEffect)((function(){Object(l.l)(Object(o.__)("Export List","wp-marketing-automations"))}),[]),Object(n.createElement)(n.Fragment,null,Object(n.createElement)(cr,{setAdd:e,isAdd:r}))};r(185);function lr(t){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sr(){sr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==lr(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function ur(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}var fr=function(){var t,e=(t=sr().mark((function t(){var e;return sr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.y)("/contact/export/custom-selections")});case 2:if((e=t.sent)&&e.result){t.next=5;break}throw new Error(Object(o.__)("Unable to get Custom Export Selections","wp-marketing-automations"));case 5:return t.abrupt("return",e.result);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){ur(a,n,o,c,i,"next",t)}function i(t){ur(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}(),mr=function(){return Object(Et.useQuery)(["bwfcrm-get-export-selections"],fr)};function pr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function br(t){return function(t){if(Array.isArray(t))return hr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return hr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var dr=function(t){var e=t.checked,r=void 0!==e&&e,o=t.onChange,a=void 0===o?function(){}:o,c=t.title,i=void 0===c?"":c,l=t.count,s=void 0===l?0:l,u=t.groupKey,f=void 0===u?"":u,m=t.selectedGroup,p=void 0===m?"":m,b=t.setSelectedGroup,h=void 0===b?function(){}:b;return Object(n.createElement)("div",{className:"bwf-export-field-header-wrap",onClick:function(t){t.target.classList.contains("components-checkbox-control__label")||t.target.classList.contains("components-checkbox-control__input")||h(p==f?"":f)}},Object(n.createElement)("div",null,Object(n.createElement)(Y.a,{className:"bwf-export-toggler",checked:r,onChange:a,label:Object(n.createElement)(n.Fragment,null,i,s>0&&Object(n.createElement)("span",{className:"bwf-light"}," ","( ",s," selected )"))})),Object(n.createElement)("span",null,Object(n.createElement)(O.a,{icon:"tailless-arrow-down-new",size:15})))},yr=function(t){var e=t.selected,r=t.onChange,o=t.selectedGroup,a=t.setSelectedGroup,c=mr(),i=c.isLoading,l=c.data,s=Array.isArray(e)?e.map((function(t){return Object.keys(t)[0]})):[],u=function(t,n){if(t)r([].concat(br(e),[n]));else{var o=e.filter((function(t){return Object.keys(t)[0]!==Object.keys(n)[0]}));r(o)}},f=function(t,n){var o=l[n].selections,a=Object.keys(o);if(t){var c=a.map((function(t){return!s.includes(t)&&pr({},t,o[t].name)})).filter(Boolean);r([].concat(br(e),br(c)))}else{var i=e.filter((function(t){return!a.includes(Object.keys(t)[0])}));r(i)}};return i?Object(n.createElement)(n.Fragment,null):Object.keys(l).map((function(t,r){var c,i=l[t],m=i.name,p=i.selections,b=Object.keys(l[t].selections).filter((function(t){return s.includes(t)}));return Object(n.createElement)("div",{className:"bwf-export-field-section",key:r},Object(n.createElement)(dr,{title:m,checked:(c=t,Object.keys(l[c].selections).filter((function(t){return s.includes(t)})).length===Object.keys(l[c].selections).length),groupKey:t,onChange:function(e){return f(e,t)},count:Array.isArray(b)?b.length:0,selectedGroup:o,setSelectedGroup:a}),o==t&&Object(n.createElement)("div",{className:"bwf-p-20 bwf-export-field-list"},Object.keys(p).map((function(t,r){var o=Array.isArray(e)&&e.find((function(e){return!!e[t]}));return Object(n.createElement)("div",{key:r},Object(n.createElement)(Y.a,{label:p[t].name,className:"bwf-export-field",checked:o,onChange:function(e){return u(e,pr({},t,p[t].name))}}))}))))}))};function vr(t){return function(t){if(Array.isArray(t))return Or(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||wr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||wr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wr(t,e){if(t){if("string"==typeof t)return Or(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Or(t,e):void 0}}function Or(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var jr=function(t){var e=t.title,r=t.setTitle,a=t.selected,c=t.setSelected,i=t.setStep,l=t.expfilter,s=gr(Object(n.useState)("contact_details"),2),f=s[0],m=s[1],p=gr(Object(n.useState)(""),2),h=p[0],d=p[1],y=Object(G.i)(),v=Object(M.a)(),g=Object(n.useMemo)((function(){var t=[],e=["engaged","unengaged","broadcast_sent","broadcast_open","broadcast_click"];return Object.entries(v).map((function(r){var n=gr(r,2),o=n[0],a=n[1];if(e.includes(o))return!1;var c;c={key:o,label:a.labels.add},t.hasOwnProperty(a.group)?t[a.group].fields.push(c):t[a.group]={label:a.groupLabel,fields:[c]}})),t}),[v]);Object(n.useEffect)((function(){if(Object(u.isEmpty)(a)&&g.hasOwnProperty("contact_details")){var t=[];g.contact_details.fields.map((function(e){var r={};r[e.key]=e.label,t.push(r)})),c(t)}}),[]);var w=function(t){var e=!1;return a.find((function(r){var n=gr(Object.entries(r)[0],2),o=n[0];n[1];t==o&&(e=!0)})),e},j=function(t,e){var r=0,o=!1;return g[t].fields.map((function(t){w(t.key)&&r++})),parseInt(g[t].fields.length)===parseInt(r)&&(o=!0),Object(n.createElement)("div",{className:"bwf-export-field-header-wrap",onClick:function(e){e.target.classList.contains("components-checkbox-control__label")||e.target.classList.contains("components-checkbox-control__input")||m(f==t?"":t)}},Object(n.createElement)("div",null,Object(n.createElement)(Y.a,{checked:o,className:"bwf-export-toggler",onChange:function(e){!function(t,e){var r=vr(a);t?g[e].fields.map((function(t){if(!w(t.key)){var e={};e[t.key]=t.label,r.push(e)}})):g[e].fields.map((function(t){w(t.key)&&(r=r.filter((function(e){var r=gr(Object.entries(e)[0],2),n=r[0];r[1];return n!==t.key})))})),c(r)}(e,t)},label:Object(n.createElement)(n.Fragment,null,e,r>0&&Object(n.createElement)("span",{className:"bwf-light"}," ","( ",r," selected )"))})),Object(n.createElement)("span",null,Object(n.createElement)(O.a,{icon:"tailless-arrow-down-new",size:15})))},_=Object(n.createElement)(n.Fragment,null,["contact_details","geography","contact_custom_fields","woocommerce","segments","engagement"].map((function(t,e){return g.hasOwnProperty(t)?Object(n.createElement)("div",{className:"bwf-export-field-section",key:"bwf-export-field-section-".concat(e)},j(t,g[t].label),f==t&&function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(n.createElement)("div",{className:"bwf-export-field-list"},t.map((function(t,e){return Object(n.createElement)(Y.a,{label:t.label,checked:w(t.key),onChange:function(e){if(e){var r=vr(a),n={};n[t.key]=t.label,r.push(n),c(r)}else c(a.filter((function(e){var r=gr(Object.entries(e)[0],2),n=r[0];r[1];return n!==t.key})))},key:"bwf-export-field-".concat(e)})})))}(g[t].fields)):["woocommerce","contact_custom_fields"].includes(t)?"":function(t){return Object(n.createElement)("div",{className:"bwf-export-field-section",key:"'bwf-export-field-section'-".concat(t)},Object(n.createElement)("div",{className:"bwf-export-field-header-wrap"},Object(n.createElement)("div",{className:"bwf-w-120 bwf-placeholder-temp"}),Object(n.createElement)("div",{className:"bwf-w-30 bwf-placeholder-temp"})),0===parseInt(t)&&Object(n.createElement)("div",{className:"bwf-export-field-list"},Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:1}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:2}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:3}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:4}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:5}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:6})))}(e)})),Object(n.createElement)(yr,{selected:a,onChange:function(t){c(t)},selectedGroup:f,setSelectedGroup:m}));return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwfcrm-overview-wrap bwf-contact-export-step-one"},h&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)(E.a,{status:"error",onRemove:function(){return d("")}},h),Object(n.createElement)("div",{className:"bwf_clear_20"})),Object(n.createElement)(b.TextControl,{type:"text",value:e,placeholder:Object(o.__)("Enter Name","wp-marketing-automations"),label:Object(n.createElement)("span",{className:"bwf-h4"},Object(o.__)("Name","wp-marketing-automations")),onChange:function(t){r(t)}}),Object(n.createElement)("div",{className:"bwf-field-wrapper"},_)),Object(n.createElement)("div",{className:"bwfcrm-export-buttons bwf-display-flex"},Object(n.createElement)("div",null),Object(n.createElement)(b.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,onClick:function(){Object(u.isEmpty)(e)?d(Object(o.__)("Name is required.","wp-marketing-automations")):Object(u.isEmpty)(a)?d(Object(o.__)("Please select field to export.","wp-marketing-automations")):(Object(u.isEmpty)(l)||Object(G.k)(l,"/",y),i(2))}},Object(n.createElement)("span",null,Object(o.__)("Next","wp-marketing-automations")))))},Er=r(54),_r=r(31);function kr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return xr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Sr=Object(Er.a)(Object(l.sb)()).formatAmount,Nr=function(t){var e=t.setContactCount,r=function(t){var e=Object(u.isEmpty)(t.country)?"":$[t.country],r=Object(l.gc)([t.city,t.state,e],", ");return Object(u.isEmpty)(Object(u.trim)(r))?"":r},a=function(t){var e=r(t);return t.country||e?Object(n.createElement)(h.a,{justify:"start"},!Object(u.isEmpty)(t.country)&&Object(n.createElement)(h.c,null,Object(n.createElement)(jt.a,{code:t.country,size:18})),Object(n.createElement)(h.c,null,e&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",null,r(t)),Object(n.createElement)("br",null)))):"-"},c=function(t){return Object(n.createElement)(_r.a,{href:"admin.php?page=autonami&path=/contact/"+t.id,className:"bwf-a-no-underline"},Object(n.createElement)(St.a,{contact:t,hideJoiningDate:!0}))},f=function(t){return Object(n.createElement)("div",{className:"bwf-c-contact-details-cell"},t.email&&Object(n.createElement)(h.a,{justify:"start",align:"top"},Object(n.createElement)(h.c,null,Object(n.createElement)(O.a,{icon:"mail"})),Object(n.createElement)(h.c,null,Object(n.createElement)(_r.a,{href:"mailto:"+t.email,className:"bwf-a-no-underline",type:"external"},t.email))),t.phone&&Object(n.createElement)(h.a,{justify:"start",align:"top"},Object(n.createElement)(h.c,null,Object(n.createElement)(O.a,{icon:"phone"})),Object(n.createElement)(h.c,null,Object(n.createElement)(_r.a,{href:"tel:"+t.phone,className:"bwf-a-no-underline",type:"external"},t.phone))))},m=Object(d.a)(),p=m.getPageNumber,b=m.getPerPageCount,v=m.getTotalCount,g=m.getLoading,w=m.getContacts,j=Object(y.a)(),E=j.fetch,_=j.setStateProp,k=t.query;Object(n.useEffect)((function(){return _("limit",10),function(){return _("limit",25)}}),[]);var x=w(),S=p(),N=b(),L=v(),C=g(),P=kr(Object(n.useState)(!0),2),I=P[0],A=P[1];Object(n.useEffect)((function(){I&&L>0&&A(!1),e(L)}),[L]);var T=[{key:"contact",label:Object(o.__)("Contact","wp-marketing-automations"),isLeftAligned:!0,required:!0},{key:"contact_details",label:Object(o.__)("Details","wp-marketing-automations"),isLeftAligned:!0}];Object(l.fc)()?(T.push({key:"total_spent",label:Object(o.__)("Total Spent","wp-marketing-automations"),isLeftAligned:!0}),T.push({key:"last_order",label:Object(o.__)("Last Order","wp-marketing-automations"),isLeftAligned:!0})):T.push({key:"column_location",label:Object(o.__)("Location","wp-marketing-automations"),isLeftAligned:!0});var F=function(t){var e=t.wc,r=e.total_order_count,a=e.total_order_value;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-listing-total-spent"},a&&r?Object(n.createElement)("div",{className:"bwf-c-total-spent-amount"},Sr(a)," |"," ",r," ",parseInt(r)>1?Object(o.__)("orders","wp-marketing-automations"):Object(o.__)("order","wp-marketing-automations")):"-"))},G=function(t){var e=t.wc.l_order_date;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",null,e&&"0000-00-00"!=e?Object(n.createElement)("div",{className:"bwf-c-total-spent-amount"},Object(l.cb)(e)):"-"))},D=x.map((function(t){var e=function(t){return Object(u.merge)({id:0,email:"-",first_name:"",last_name:"",creation_date:"",fields:{marketing_status:"0",first_order_date:"",country:"",city:"",state:"",phone:""},wc:{id:1,l_order_date:"",total_order_count:0,total_order_value:0,total_purchased_items:0}},t)}(t),n=[{display:c(e),value:Object(l.gc)([e.first_name,e.last_name]," ")},{display:f(e),value:"'".concat(Object(o.__)("Email","wp-marketing-automations"),": ").concat(e.email,", ").concat(Object(o.__)("Phone","wp-marketing-automations"),": ").concat(e.phone)}];return Object(l.fc)()?(n.push({display:F(e),value:""}),n.push({display:G(e),value:""})):n.push({display:a(e),value:r(e)}),n})),M=function(t){t!==N&&E(k,0,t,!0,!1,"",!1)},B=i()("bwfcrm-contacts-list",{"has-search":!0}),z=parseInt(L)>0?" ("+parseInt(L)+")":"";return Object(n.createElement)(s.a,{className:B,title:Object(o.__)("Contacts ","wp-marketing-automations")+z,rows:D,headers:T,query:{paged:S},rowsPerPage:N,totalRows:L,isLoading:C,onPageChange:function(t,e){E(k,(t-1)*N,N,!0,!1,"",!1)},onQueryChange:function(t){return"per_page"!==t?function(){}:M},showMenu:!1,emptyMessage:Object(o.__)("No contacts found","wp-marketing-automations")})},Lr=r(197),Cr=["page","path","s","filter"];function Pr(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var Ir=function(t){var e=t.setStep,r=t.setExportFilter,a=t.contactCount,c=t.setContactCount,i=Object(M.a)(!0,!0),s=i.loading,f=void 0===s||s,m=i.filters,p=void 0===m?{}:m,h=Object(G.i)(),d=h.page,v=h.path,g=(h.s,h.filter,Pr(h,Cr)),w=Object(y.a)(),O=Object(n.useRef)(g),j=w.fetch;Object(n.useEffect)((function(){j(g,0,10,!0,!1,"",!0)}),[]),Object(n.useEffect)((function(){Object(l.lc)(g,O.current)||j(g,0,10,!0,!1,"",!1),O.current=g}),[g]);var E=Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-contact-export-step-two"},Object(n.createElement)("div",{className:"bwf-bulk-action-step-loading bwf-p-20"},Object(n.createElement)("div",{className:"bwf-bulk-action-step-loading"},Object(n.createElement)("div",{className:"bwf-filter-placeholder"},Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(n.createElement)("div",{className:"bwf-w-150"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-150"})),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-36"})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}),Object(n.createElement)("br",null),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-400"})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(n.createElement)("div",null),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-36 bwf-w-90"}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-w-150"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-15"})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(Lr.a,{numberOfRows:5,headers:[{key:"2",label:Object(n.createElement)("div",{className:"bwf-w-210"},Object(n.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))},{key:"3",label:Object(n.createElement)("div",{className:"bwf-w-210"},Object(n.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))},{key:"4",label:Object(n.createElement)("div",{className:"bwf-w-210"},Object(n.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))}]})))),Object(n.createElement)("div",{className:"bwf-display-flex bwfcrm-export-buttons"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-36"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-36"})));return f?Object(n.createElement)(n.Fragment,null,E):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-contact-export-step-two"},Object(n.createElement)("div",{className:"bwf-export-filter-wrapper"},Object(n.createElement)("div",{className:"bwf-display-flex bwf-mb-16",style:{justifyContent:"space-between"}},Object(n.createElement)("div",{className:"bwf-h3 bwf-w-300"},Object(o.__)("Segment Contacts","wp-marketing-automations")),Object(n.createElement)(B.c,{addAdvance:!1})),Object(n.createElement)("div",{className:"bwf-p-0"},Object(n.createElement)(z.a,{siteLocale:"en-US",currency:Object(l.fc)()?bwfcrm_contacts_data.currency:{},config:{title:Object(o.__)("Select Rules","wp-marketing-automations"),filters:p,footerComponent:function(t){return Object(n.createElement)(B.a,{filter:t.data,config:t.config})},enableGrouping:!0},path:"/contacts",query:h}))),Object(n.createElement)("div",{className:"bwf-export-table-wrapper"},Object(n.createElement)(Nr,{setContactCount:c}))),Object(n.createElement)("div",{className:"bwf-display-flex bwfcrm-export-buttons"},Object(n.createElement)(b.Button,{className:"bwfcrm-export-prev bwf-display-flex",isSecondary:!0,onClick:function(){Object(u.isEmpty)(g)||Object(G.k)({page:d,path:v},"/",{}),r(g),e(1)}},Object(n.createElement)("span",null,Object(o.__)("Previous","wp-marketing-automations"))),Object(n.createElement)(b.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,disabled:!(a>0),onClick:function(){Object(u.isEmpty)(g)||Object(G.k)({page:d,path:v},"/",{}),r(g),a>0&&e(3)}},Object(n.createElement)("span",null,Object(o.__)("Next","wp-marketing-automations")))))};function Ar(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Tr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Fr=function(t){var e=t.setAdd,r=Ar(Object(n.useState)(!1),2),a=r[0],c=(r[1],Ar(Object(n.useState)(1),2)),i=c[0],l=c[1],s=Ar(Object(n.useState)(!1),2),u=s[0],f=s[1],m=Ar(Object(n.useState)(""),2),p=m[0],h=m[1],d=Ar(Object(n.useState)([]),2),y=d[0],v=d[1],g=Ar(Object(n.useState)([]),2),w=g[0],O=g[1],j=Ar(Object(n.useState)(0),2),E=j[0],_=j[1],k=function(t){switch(t){case 1:return Object(n.createElement)(jr,{title:p,setTitle:h,selected:y,expfilter:w,setSelected:v,setStep:l});case 2:return Object(n.createElement)(Ir,{setStep:l,setExportFilter:O,contactCount:E,setContactCount:_});case 3:return Object(n.createElement)(He,{title:p,fields:y,expfilter:w,contactCount:E,setPending:f,setAdd:e})}},x=[{key:1,label:Object(o.__)("Fields","wp-marketing-automations"),content:k(1)},{key:2,label:Object(o.__)("Contacts","wp-marketing-automations"),content:k(2)},{key:3,label:Object(o.__)("Confirmation","wp-marketing-automations"),content:k(3)}];return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(b.Modal,{onRequestClose:function(){return e(!1)},className:"bwf-admin-modal bwf-admin-modal-xxl bwf-export-add-modal",title:Object(o.__)("Create Export","wp-marketing-automations"),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-crm-export-init"},a?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(T.a,null)):Object(n.createElement)(Ae.a,{steps:x,currentStep:i,isPending:u}))))};function Gr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return $r(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Dr=function(t){var e=t.setExport,r=Gr(Object(n.useState)(!1),2),a=r[0],c=r[1];Object(n.useEffect)((function(){Object(l.l)(Object(o.__)("Export Contacts","wp-marketing-automations"))}),[]);var i=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(n.createElement)(O.a,{icon:"export",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(o.__)("Export your contacts to CSV file.","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(o.__)("Start Exporting","wp-marketing-automations"),proCheck:!0,onClick:function(){Object(l.Sb)()&&c(!0)}}]}}];return Object(n.createElement)(b.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-admin-modal-no-header bwf-export-contact-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(n.createElement)("div",{className:"bwf-export-modal-header"},Object(n.createElement)("div",{className:"bwf-export-modal-title"},Object(o.__)("Export Contacts","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex gap-24"},!a&&Object(l.W)()&&Object(n.createElement)(b.Button,{variant:"primary",className:"bwf-add-contact-export-btn",onClick:function(){return c(!0)},isBusy:!1,disabled:!1},Object(o.__)("Create Export","wp-marketing-automations")),Object(n.createElement)("div",{onClick:function(){Object(l.l)(Object(o.__)("Contacts","wp-marketing-automations")),Object(G.k)({page:"autonami",path:"/contacts/"},"/",{}),e(!1)},className:"bwf-flex",style:{cursor:"pointer",marginRight:"-10px"}},Object(n.createElement)(O.a,{icon:"close"})))),a&&Object(n.createElement)(Fr,{setAdd:c}),Object(l.W)()?Object(n.createElement)(ir,{setAdd:c,isAdd:a}):Object(n.createElement)(Nt.a,{data:i}))},Mr=(r(1108),["getStateProp"]);function Br(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function zr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Br(Object(r),!0).forEach((function(e){Ur(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Br(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ur(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rr(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var Yr=function(){var t=Object(ve.a)("importerReducer"),e=t.getStateProp;return zr(zr({},Rr(t,Mr)),{},{showBackButton:function(){return e("showBackButton")},getExistingImports:function(){return e("existingImports")}})},qr=["fetch","setStateProp"];function Vr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Wr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vr(Object(r),!0).forEach((function(e){Hr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Hr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kr(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var Zr,Qr,Jr,Xr,tn=function(){var t=Object(ke.a)("importerReducer"),e=t.fetch,r=t.setStateProp;return Wr(Wr({},Kr(t,qr)),{},{showBackButton:function(t){return r("showBackButton",t)},fetch:function(){return e("GET",Object(l.y)("/import/processes"))}})},en=r(7);function rn(){return(rn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var nn,on,an=function(t){return en.createElement("svg",rn({id:"wlm_svg__WishList_Member","data-name":"WishList Member",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 532.46 217.17"},t),Zr||(Zr=en.createElement("defs",null,en.createElement("style",null,".wlm_svg__cls-1{fill:#1e7fc0}.wlm_svg__cls-2{fill:#333}"))),Qr||(Qr=en.createElement("g",{id:"wlm_svg__member"},en.createElement("path",{className:"wlm_svg__cls-1",d:"M238.05 219.81c-.11-3-.22-6.52-.21-10.12h-.1c-.78 3.15-1.82 6.64-2.74 9.53l-3 9.58h-4.31l-2.69-9.49c-.79-2.89-1.6-6.38-2.21-9.62h-.08c-.12 3.34-.26 7.14-.4 10.19l-.46 9.32h-5.14l1.57-24.55h7.4l2.4 8.2c.78 2.82 1.53 5.9 2.08 8.78h.12c.67-2.84 1.5-6.08 2.34-8.82l2.6-8.16h7.27l1.31 24.55h-5.39zM270.09 218.81h-9v5.84h10.1v4.55H255.5v-24.55h15.13v4.55h-9.57v5.11h9zM303.08 219.81c-.11-3-.22-6.52-.21-10.12h-.1c-.78 3.15-1.82 6.64-2.74 9.53l-3 9.58h-4.31l-2.65-9.49c-.79-2.89-1.6-6.38-2.21-9.62h-.08c-.12 3.34-.26 7.14-.41 10.19l-.45 9.32h-5.14l1.57-24.55h7.4l2.4 8.2c.77 2.82 1.53 5.9 2.08 8.78h.12c.67-2.84 1.5-6.08 2.33-8.82l2.61-8.16h7.26l1.32 24.55h-5.39zM320.53 205a45.06 45.06 0 017.16-.52c3.39 0 5.47.33 7.27 1.37a5.35 5.35 0 012.92 4.84c0 2.16-1.26 4.2-4 5.23v.08a6.11 6.11 0 014.89 6 6.5 6.5 0 01-2.56 5.21c-1.8 1.45-4.76 2.24-9.65 2.24a41.31 41.31 0 01-6-.37zm5.5 9.4h1.8c2.94 0 4.48-1.22 4.48-3s-1.42-2.85-3.93-2.85a12.1 12.1 0 00-2.35.17zm0 10.87a13.63 13.63 0 002.13.1c2.52 0 4.74-1 4.74-3.56s-2.2-3.44-5-3.44H326zM364.49 218.81h-9v5.84h10.1v4.55h-15.68v-24.55H365v4.55h-9.57v5.11h9zM376.73 205a47.35 47.35 0 017.38-.52c3.65 0 6.2.55 7.95 1.94a6.22 6.22 0 012.27 5.15 6.5 6.5 0 01-4.33 6v.12c1.7.69 2.66 2.31 3.28 4.57a71.49 71.49 0 002 6.93h-5.68a30.77 30.77 0 01-1.69-5.72c-.69-3.07-1.72-3.89-4-3.92h-1.65v9.64h-5.51zm5.51 10.56h2.17c2.76 0 4.4-1.4 4.4-3.54s-1.54-3.39-4.07-3.41a11.35 11.35 0 00-2.5.19z",transform:"translate(-39.77 -12.28)"}))),Jr||(Jr=en.createElement("g",{id:"wlm_svg__WishList"},en.createElement("path",{className:"wlm_svg__cls-2",d:"M64.62 180L39.77 75h25.41l8 43.21c2.24 12.5 4.42 26.12 6.1 36.71h.32c1.69-11.4 4.2-24 6.85-37L95.4 75h25.21l8.39 44.3c2.24 12.24 4 23.45 5.54 35.07h.32c1.64-11.7 3.85-23.87 6.17-36.46L149.51 75h24.12l-27.06 105h-25.63L112 134.77c-2.1-10.5-3.74-20.4-5.06-32.29h-.31c-1.78 11.81-3.47 21.77-6 32.36l-10 45.16zM180.94 180v-76.26h23.73V180zM218.57 159.31a46.05 46.05 0 0020.31 5.69c7.15 0 10.21-2.4 10.21-6.29s-2.43-5.86-11.18-8.81c-15.85-5.21-21.81-13.83-21.72-22.78 0-14.31 12.07-25.06 31-25.06 8.92 0 16.8 2.1 21.46 4.44l-4.12 16.32a38.83 38.83 0 00-16.51-4.3c-5.78 0-9.09 2.3-9.09 6.14 0 3.65 3 5.57 12.36 8.8 14.46 4.91 20.51 12.34 20.61 23.45 0 14.22-11.1 24.71-32.93 24.71-9.93 0-18.86-2.25-24.67-5.37zM279.32 69.41h23.73v43.51h.31a26.93 26.93 0 019.28-7.87A26.39 26.39 0 01325 102c15.12 0 26.7 10.48 26.7 33.46V180h-23.76v-41.91c0-10-3.45-16.89-12.24-16.89a12.46 12.46 0 00-11.88 8.37 14.45 14.45 0 00-.77 5.18V180h-23.73zM359.57 75h23.72v85.05H425V180h-65.43zM432.35 180v-76.26h23.72V180zM468 159.31c4.31 2.65 13.42 5.66 20.31 5.66 7.15 0 10.21-2.4 10.21-6.29s-2.43-5.86-11.18-8.81c-15.85-5.21-21.81-13.83-21.72-22.78 0-14.31 12.08-25.06 31-25.06 8.92 0 16.81 2.1 21.47 4.44l-4.13 16.32a38.79 38.79 0 00-16.51-4.3c-5.78 0-9.09 2.3-9.09 6.14 0 3.65 3 5.57 12.36 8.8 14.46 4.91 20.52 12.34 20.61 23.45 0 14.22-11.09 24.71-32.93 24.71-9.93 0-18.86-2.25-24.67-5.37zM555.18 82v21.73h17.05v17.48h-17.05v27.61c0 9.19 2.28 13.43 9.35 13.43a30.89 30.89 0 007-.71l.19 18c-3.06 1.1-8.72 2-15.35 2-7.66 0-14-2.67-17.86-6.62-4.4-4.51-6.55-11.76-6.55-22.58v-31.12h-10.08v-17.48H532V87.37z",transform:"translate(-39.77 -12.28)"}))),Xr||(Xr=en.createElement("path",{id:"wlm_svg__bounce",className:"wlm_svg__cls-1",d:"M456.86 82a13.41 13.41 0 01-13.4 13.5c-7.93 0-13.59-7-13.53-13.13.08-8 6.8-14.15 13.72-13.64 6.8-.56 13.24 5.85 13.21 13.27zm-33.32-7S302.47-38.88 195.48 88.11c0 0-36.78-75.63-119.47-74.84 0 0 71.11-13.4 120.07 58.58 0 0 106.11-125.65 242.11-10.49 0 0-13.52-.85-14.65 13.64z",transform:"translate(-39.77 -12.28)"})))};function cn(){return(cn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var ln=function(t){return en.createElement("svg",cn({xmlns:"http://www.w3.org/2000/svg",width:400,height:90,viewBox:"20 20 700 155",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.414},t),nn||(nn=en.createElement("path",{d:"M135.1 105.3c-1 0-2 .1-3 .2l-14.4-25.9c3.2-3.8 5.1-8.7 5.1-14 0-12.1-9.8-21.9-21.9-21.9-12.1 0-21.9 9.9-21.9 21.9 0 5.2 1.8 10 4.9 13.8l-15 26.2c-1.1-.2-2.2-.3-3.3-.3-12.1 0-21.9 9.8-21.9 21.9 0 12.1 9.8 21.9 21.9 21.9 12.1 0 21.9-9.8 21.9-21.9 0-5.2-1.8-10-4.9-13.8l15-26.2c1.1.2 2.2.3 3.3.3 1 0 2-.1 3-.2l14.4 25.9c-3.2 3.8-5.1 8.7-5.1 14 0 12.1 9.8 21.9 21.9 21.9 12.1 0 21.9-9.8 21.9-21.9 0-12.1-9.8-21.9-21.9-21.9zm-34.2-47.2c4.1 0 7.5 3.4 7.5 7.5s-3.4 7.5-7.5 7.5-7.5-3.4-7.5-7.5 3.4-7.5 7.5-7.5zm-35.3 76.6c-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5 7.5 3.4 7.5 7.5-3.4 7.5-7.5 7.5zm69.5 0c-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5 7.5 3.4 7.5 7.5-3.3 7.5-7.5 7.5z",fill:"#e34f43",fillRule:"nonzero"})),on||(on=en.createElement("g",{fill:"#2d2d2d",fillRule:"nonzero"},en.createElement("path",{d:"M205.5 64h25.2l21.6 68h-20.6l-3.6-12.7h-22.5L202 132h-18.2l21.7-68zm3.8 42h14.9l-7.4-26.2-7.5 26.2zM258.1 93.9h-6.3V82.3h6.3v-3.8c0-12.4 7.6-18.2 19.4-18.2 3.1 0 5.4.4 7.6 1v12.5c-1.2-.4-2.7-.7-4.6-.7-3.8 0-5.5 2.3-5.5 5.4v3.8h14.5v-4.4c0-12.4 7.7-18.3 19.5-18.3 3.1 0 5.3.4 7.5 1v12.5c-1.2-.4-2.5-.6-4.5-.6-3.9 0-5.5 2.2-5.5 5.4v4.4h10v11.6h-10V132h-17V93.9H275V132h-16.9V93.9zM320.5 68.8c0-5 4-8.8 9.3-8.8 5.3 0 9.4 3.8 9.4 8.8 0 5-4.1 8.8-9.4 8.8-5.3-.1-9.3-3.8-9.3-8.8zm.9 13.5h17V132h-17V82.3zM347.5 60.4h16.9V132h-16.9zM372.7 68.8c0-5 4-8.8 9.3-8.8 5.3 0 9.4 3.8 9.4 8.8 0 5-4.1 8.8-9.4 8.8-5.3-.1-9.3-3.8-9.3-8.8zm.9 13.5h17V132h-17V82.3zM396.7 118.2c0-11.7 9.9-16.3 26.4-16.3h4.8v-1.1c0-4.8-1.1-7.9-6.6-7.9-4.7 0-6.4 2.8-6.8 5.9h-16c.8-12 10.2-17.9 23.8-17.9 13.7 0 22.4 5.6 22.4 18.8V132h-16.6v-5.8c-2.4 3.6-6.8 6.9-14.7 6.9-8.8.1-16.7-4.3-16.7-14.9zm31.2-3.6v-3h-4.5c-6.8 0-9.9 1.3-9.9 5.4 0 2.9 1.9 4.7 5.9 4.7 4.9 0 8.5-2.8 8.5-7.1zM455 116.1V93.9h-6V82.3h6V71.9h17v10.4h9.8v11.6H472v20.5c0 3.6 1.8 5.2 5 5.2 1.9 0 3.3-.3 4.9-.9v12.9c-2.2.6-5.4 1.4-9.4 1.4-11.3.2-17.5-5.2-17.5-16.9zM484.8 107.8v-.8c0-16 11.9-26.1 26.9-26.1 13.6 0 25.3 7.8 25.3 25.7v4.5h-35c.5 6.6 4.3 10.4 10.4 10.4 5.6 0 8-2.6 8.7-5.9h16c-1.5 11.2-10.2 17.6-25.2 17.6-15.7 0-27.1-9.2-27.1-25.4zm35.6-6.3c-.3-6-3.2-9.3-8.8-9.3-5.1 0-8.7 3.3-9.5 9.3h18.3zM536.8 64h19.7l8.8 42.4 9.1-42.4h17.3l9.9 42.8 9.2-42.8h18.1L613 132h-20.4l-10.5-43.2-10.4 43.2h-19l-15.9-68zM634.6 64h25.9c18.6 0 27.3 8.3 27.3 22.7v.4c0 14.3-9.6 22-26.4 22H654V132h-19.4V64zm25 31.8c6.3 0 9.6-2.9 9.6-8.6v-.4c0-5.8-3.4-8.2-9.5-8.2H654v17.1h5.6v.1z"}))))},sn=r(80),un=r(1131),fn=r(361);r(1197);function mn(t){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pn(){pn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==mn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function bn(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function hn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return dn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var yn=function(t){var e=t.requestData,r=t.headersData,c=t.setImport,i=r.import_id,s=hn(Object(n.useState)(null),2),u=s[0],f=s[1],m=hn(Object(n.useState)(!0),2),p=m[0],h=m[1],d=u&&"log"in u?u.log:{},y=d.skipped,v=void 0===y?[]:y,w=d.failed,O=void 0===w?[]:w,j=d.succeed,_=void 0===j?[]:j,k=hn(Object(n.useState)(null),2),x=k[0],S=k[1],N=tn().showBackButton,L=hn(Object(n.useState)(!1),2),C=L[0],P=L[1],I=Object(n.useRef)(null),A=(location&&location.search&&Object(a.parse)(location.search.substring(1)),function(){var t,r=(t=pn().mark((function t(){var r,n,o,a=arguments;return pn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]&&a[0],t.prev=1,n=e&&"useExisting"in e&&e.useExisting?{}:e,!e.useExisting&&(n.start_import=r),t.next=6,g()({method:"POST",data:n,path:Object(l.y)("/import/csv/status/".concat(i))});case 6:o=t.sent,f(o.result),o.result&&"status"in o.result&&"success"===o.result.status&&(clearInterval(I.current),N(!0),P(!0)),h(!1),t.next=18;break;case 12:t.prev=12,t.t0=t.catch(1),clearInterval(I.current),N(!0),S(t.t0),h(!1);case 18:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){bn(a,n,o,c,i,"next",t)}function i(t){bn(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return r.apply(this,arguments)}}());return Object(n.useEffect)((function(){return N(!1),window.scrollTo(0,0),A(!0),I.current=setInterval((function(){return A()}),5e3),function(){clearInterval(I.current),N(!0),h(!1)}}),[]),p?Object(n.createElement)(T.a,null):x||u&&!1 in u?Object(n.createElement)(E.a,{status:"error"},x&&"message"in x?x.message:Object(o.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):u&&"percent"in u?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:parseInt(u.percent),text:"".concat(u.percent,"% ").concat(Object(o.__)("Completed","wp-marketing-automations"))}),Object(n.createElement)("p",null,"Skipped: ",parseInt(v)>0?v:0,", Failed:"," ",parseInt(O)>0?O:0,", Success:"," ",parseInt(_)>0?_:0)),C&&Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){c(!1)}},Object(o.__)("Go To Contacts","wp-marketing-automations")),!!u&&!!u.has_log_file&&Object(n.createElement)("a",{target:"_blank",href:Object(l.pb)()+"/wp-json"+Object(l.y)("/importer-log/download/".concat(i,"?bwf-nonce=").concat(Object(l.D)())),title:Object(o.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(n.createElement)(b.Button,{isSecondary:!0},Object(o.__)("Download Error Log","wp-marketing-automations"))))):null};function vn(t){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gn(){gn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==vn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function wn(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function On(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return jn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var En=function(t){Object(l.l)(Object(o.__)("CSV Importer","wp-marketing-automations"));var e=On(Object(n.useState)(null),2),r=e[0],a=e[1],c=On(Object(n.useState)(null),2),i=c[0],s=c[1],u=On(Object(n.useState)(null),2),f=u[0],m=u[1],p=On(Object(n.useState)(!1),2),h=p[0],d=p[1],y=Object(n.useContext)(l.h),v=(0,Yr().getExistingImports)().csv,w=t.step,O=t.setImport,j=function(){var t,e=(t=gn().mark((function t(){var e,n;return gn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.prev=1,(e=new FormData).append("csv",r),t.next=6,g()({method:"POST",body:e,path:Object(l.y)("/import/csv/upload")});case 6:n=t.sent,s(n.result),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),a(null),y(t.t0&&"message"in t.t0?t.t0.message:Object(o.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 14:Object(l.Eb)(y,3e3),d(!1);case 16:case"end":return t.stop()}}),t,null,[[1,10]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){wn(a,n,o,c,i,"next",t)}function i(t){wn(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){r&&j()}),[r]),Object(n.useEffect)((function(){v&&(s({import_id:v}),m({useExisting:!0}))}),[]),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},2==w&&!v&&!r&&!h&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)(fn.a,{onFileSelected:function(t){return a(t)},filetypeArray:["text/csv","text/plain","application/csv","text/comma-separated-values","application/excel","application/vnd.ms-excel","application/vnd.msexcel","text/anytext","application/octet-stream","application/txt"],btnLabel:Object(o.__)("Drop your CSV file here OR","wp-marketing-automations")})),h&&Object(n.createElement)(T.a,null),2==w&&i&&"import_id"in i&&!f&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)(un.a,{buttonAlignClass:"bwf-crm-btn-right-alignment",headersData:i,onRequestImport:function(e){m(e),t.setStep(3)},contactHeaderText:Object(o.__)("Contact Fields","wp-marketing-automations"),updateExistingText:Object(o.__)("Update existing contact status","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf_clear_24"})),2==w&&!h&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){t.setStep(1),t.setImporter(null)}},Object(o.__)("Back","wp-marketing-automations")))),3==w&&f&&i&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(yn,{requestData:f,setStep:t.setStep,setImporter:t.setImporter,headersData:i,setImport:O}))))};r(1198);function _n(t){return function(t){if(Array.isArray(t))return Sn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||xn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||xn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xn(t,e){if(t){if("string"==typeof t)return Sn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sn(t,e):void 0}}function Sn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Nn=function(t){var e=t.roles,r=void 0===e?{}:e,a=t.onRolesSelected,c=kn(Object(n.useState)(Object.keys(r)),2),i=c[0],s=c[1],f=kn(Object(n.useState)(!0),2),m=f[0],p=(f[1],kn(Object(n.useState)(!1),2)),h=p[0],d=p[1],y=kn(Object(n.useState)(!1),2),v=y[0],g=y[1],w=kn(Object(n.useState)([]),2),O=w[0],j=w[1],E=kn(Object(n.useState)([]),2),_=E[0],k=E[1],x=kn(Object(n.useState)(1),2),S=x[0],N=x[1],L=Object(l.K)();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(b.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("User Roles","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-crm-import-checkbox-3col"},r&&Object.keys(r).map((function(t){return Object(n.createElement)(Y.a,{checked:i.includes(t),key:t,label:r[t],onChange:function(e){return function(t,e){s(t?[].concat(_n(i),[e]):i.filter((function(t){return t!==e})))}(e,t)}})})))),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-c-import-field"},Object(n.createElement)(re.a,{onTagsChange:j,selected:O}),Object(n.createElement)(ne.a,{onListsChange:k,selected:_})),Object(n.createElement)("div",{className:"bwf-heading7-new"},Object(o.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(t){N(t.target.value)},value:Object(u.isEmpty)(S)?"":S},Object.keys(L).map((function(t){return Object(n.createElement)("option",{key:t,value:t},L[t])}))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(b.ToggleControl,{checked:h,label:Object(o.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(t){return d(t)}}),Object(n.createElement)(b.ToggleControl,{label:Object(o.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:v,onChange:g})),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-crm-btn-right-alignment",style:{bottom:"-60px"}},Object(n.createElement)(b.Button,{disabled:0===i.length,isPrimary:!0,onClick:function(){return a({roles:i,tags:O.map((function(t){return{id:t.key,value:t.label}})),lists:_.map((function(t){return{id:t.key,value:t.label}})),marketing_status:m,update_existing:h,disable_events:v,imported_contact_status:S})}},Object(o.__)("Import","wp-marketing-automations"))))),Object(n.createElement)("div",{className:"bwf-crm-importer-navigation",style:{marginTop:"15px"}},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){t.setStep(1),t.setImporter(null)}},Object(o.__)("Back","wp-marketing-automations"))))};function Ln(t){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cn(){Cn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==Ln(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Pn(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function In(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return An(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return An(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function An(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Tn=function(t){var e=t.requestData,r=t.setImport,c=In(Object(n.useState)(!1),2),i=c[0],s=c[1],f=In(Object(n.useState)(null),2),m=f[0],p=f[1],h=In(Object(n.useState)(e&&"importId"in e?parseInt(e.importId):0),2),d=h[0],y=h[1],v=m&&"log"in m?m.log:{},w=v.skipped,O=void 0===w?0:w,j=v.failed,_=void 0===j?0:j,k=v.succeed,x=void 0===k?0:k,S=In(Object(n.useState)(null),2),N=S[0],L=S[1],C=tn().showBackButton,P=(location&&location.search&&Object(a.parse)(location.search.substring(1)),0),I=In(Object(n.useState)(5e3),2),A=I[0],T=I[1],F=function(){var t,r=(t=Cn().mark((function t(){var r,n;return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return P++,t.prev=1,r=parseInt(d)>0?{import_id:d}:e,parseInt(d)>0?r.start_import=!1:r.start_import=!0,t.next=6,g()({method:"POST",data:r,path:Object(l.y)("/import/wp/status")});case 6:n=t.sent,p(n.result),y(parseInt(n.result.import_id)),n.result&&"status"in n.result&&"success"===n.result.status&&(T(null),C(!1),s(!0)),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),T(null),C(!1),L(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){Pn(a,n,o,c,i,"next",t)}function i(t){Pn(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(Fe.a)((function(){Object(u.isEmpty)(d)&&0!=P||F()}),A),Object(n.useEffect)((function(){return C(!0),window.scrollTo(0,0),function(){C(!1)}}),[]),N||m&&!1 in m?Object(n.createElement)(E.a,{status:"error"},N&&"message"in N?N.message:Object(o.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):m?m&&"percent"in m?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(Te.a,{progress:parseInt(m.percent),noStriped:!0,size:"sm",text:"".concat(m.percent,"% Completed")}),Object(n.createElement)("p",{className:"bwf-p"},"Skipped: ",parseInt(O)>0?O:0,", Failed:"," ",parseInt(_)>0?_:0,", Success:"," ",parseInt(x)>0?x:0)),i&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){r(!1)}},Object(o.__)("Go To Contacts","wp-marketing-automations")),!!m&&!!m.has_log_file&&Object(n.createElement)("a",{target:"_blank",href:Object(l.pb)()+"/wp-json"+Object(l.y)("/importer-log/download/".concat(d,"?bwf-nonce=").concat(Object(l.D)())),title:Object(o.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(n.createElement)(b.Button,{isSecondary:!0},Object(o.__)("Download Error Log","wp-marketing-automations")))))):null:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:0,text:Object(o.__)("0% Completed","wp-marketing-automations")}),Object(n.createElement)("p",{className:"bwf-p"},"Skipped: ",parseInt(O)>0?O:0,", Failed: ",parseInt(_)>0?_:0,", Success: ",parseInt(x)>0?x:0)))};function Fn(t){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gn(){Gn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==Fn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function $n(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function Dn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Mn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Bn=function(t){Object(l.l)("WP Importer");var e=t.step,r=t.setImport,a=Dn(Object(n.useState)({}),2),c=a[0],i=a[1],s=Dn(Object(n.useState)(null),2),f=s[0],m=s[1],p=Dn(Object(n.useState)(!1),2),b=p[0],h=p[1],d=(0,Yr().getExistingImports)().wp,y=Object(n.useContext)(l.h),v=function(){var t,e=(t=Gn().mark((function t(){var e;return Gn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),t.prev=1,t.next=4,g()({method:"GET",path:Object(l.y)("/import/wp/roles")});case 4:e=t.sent,i(e.result),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),i(null),y(t.t0&&"message"in t.t0?t.t0.message:Object(o.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 12:Object(l.Eb)(y,3e3),h(!1);case 14:case"end":return t.stop()}}),t,null,[[1,8]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){$n(a,n,o,c,i,"next",t)}function i(t){$n(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){d?m({importId:d}):v()}),[]),Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},b&&Object(n.createElement)(T.a,null),2==e&&!f&&c&&Object(u.size)(c)>0&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)(Nn,{roles:c,setStep:t.setStep,setImporter:t.setImporter,onRolesSelected:function(e){m(e),t.setStep(3)}})),3==e&&f&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(Tn,{setStep:t.setStep,requestData:f,setImporter:t.setImporter,setImport:r})))};r(1199);function zn(t){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Un(){Un=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==zn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Rn(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function Yn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return qn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Vn=function(t){var e=t.importData,r=t.setImport,c=e.importId,i=Yn(Object(n.useState)(null),2),s=i[0],u=i[1],f=s&&"log"in s?s.log:{},m=f.skipped,p=void 0===m?0:m,h=f.failed,d=void 0===h?0:h,y=f.succeed,v=void 0===y?0:y,w=(location&&location.search&&Object(a.parse)(location.search.substring(1)),Yn(Object(n.useState)(!1),2)),O=w[0],j=w[1],E=Yn(Object(n.useState)(!1),2),_=E[0],k=E[1],x=function(){var t,e=(t=Un().mark((function t(){var e,r;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={start_import:!1,import_id:c},t.next=4,g()({method:"GET",path:Object(l.y)("/import/wc/status?"+Object(a.stringify)(e))});case 4:r=t.sent,u(r.result),r.result&&"status"in r.result&&"success"===r.result.status&&r.result.percent>=100&&(j(!0),k(!0)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),setError(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){Rn(a,n,o,c,i,"next",t)}function i(t){Rn(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(Fe.a)((function(){_||x()}),5e3),s?s&&"percent"in s?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:parseInt(s.percent),text:"".concat(s.percent,"% Completed")}),Object(n.createElement)("p",null,"Skipped: ",parseInt(p)>0?p:0,", Failed:"," ",parseInt(d)>0?d:0,", Success:"," ",parseInt(v)>0?v:0)),O&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){r(!1)}},Object(o.__)("Go To Contacts","wp-marketing-automations")),!!s&&!!s.has_log_file&&Object(n.createElement)("a",{target:"_blank",href:Object(l.pb)()+"/wp-json"+Object(l.y)("/importer-log/download/".concat(c,"?bwf-nonce=").concat(Object(l.D)())),title:Object(o.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(n.createElement)(b.Button,{isSecondary:!0},Object(o.__)("Download Error Log","wp-marketing-automations")))))):null:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:0,text:Object(o.__)("0% Completed","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf-p"},"Skipped: ",parseInt(p)>0?p:0,", Failed: ",parseInt(d)>0?d:0,", Success: ",parseInt(v)>0?v:0)),Object(n.createElement)("div",{className:"bwf_clear_20"}))};function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hn(){Hn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==Wn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Kn(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function Zn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){Kn(a,n,o,c,i,"next",t)}function i(t){Kn(a,n,o,c,i,"throw",t)}c(void 0)}))}}function Qn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Jn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Xn=function(t){Object(l.l)("WC Importer");var e=t.step,r=t.setImport,c=Qn(Object(n.useState)({}),2),i=c[0],s=c[1],f=Qn(Object(n.useState)(!0),2),m=f[0],p=f[1],h=Qn(Object(n.useState)(null),2),d=h[0],y=h[1],v=Qn(Object(n.useState)(!1),2),w=v[0],O=v[1],j=Qn(Object(n.useState)(!0),2),E=j[0],_=(j[1],Qn(Object(n.useState)(!1),2)),k=_[0],x=_[1],S=Qn(Object(n.useState)([]),2),N=S[0],L=S[1],C=Qn(Object(n.useState)([]),2),P=C[0],I=C[1],A=Object(n.useContext)(l.h),F=Qn(Object(n.useState)(1),2),G=F[0],$=F[1],D=(0,Yr().getExistingImports)().wc,M=Object(l.K)(),B=function(){var e=Zn(Hn().mark((function e(){var r,n,c,i=arguments;return Hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]&&i[0],e.prev=1,n={start_import:r,tags:N.map((function(t){return{id:t.key,value:t.label}})),lists:P.map((function(t){return{id:t.key,value:t.label}})),marketing_status:E,update_existing:k,disable_events:w,imported_contact_status:G},e.next=5,g()({method:"GET",path:Object(l.y)("/import/wc/status?"+Object(a.stringify)(n))});case 5:c=e.sent,s({importId:c.result.import_id}),t.setStep(3),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),s(null),A(e.t0&&"message"in e.t0?e.t0.message:Object(o.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 14:Object(l.Eb)(A,3e3),p(!1);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var t=Zn(Hn().mark((function t(){return Hn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({method:"GET",path:Object(l.y)("/import/wc/get-orders")}).then((function(t){y(parseInt(t.result)),p(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){parseInt(D)>0?(s({importId:D}),p(!1)):z()}),[]);return Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},2==e&&m&&(Object(u.isEmpty)(i)||1===i.status)&&Object(n.createElement)(T.a,null),2==e&&!m&&!Object(u.isNull)(d)&&(d>0?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-importer-wc-wrap"},Object(n.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("WooCommerce Customers","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},d+" "+Object(o.__)("paid orders are available for import.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_16"}),Object(n.createElement)("div",{className:"bwf-c-import-field"},Object(n.createElement)(re.a,{onTagsChange:L,selected:N}),Object(n.createElement)(ne.a,{onListsChange:I,selected:P})),Object(n.createElement)("div",{className:"bwf-heading7-new"},Object(o.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-wc-status-select",onChange:function(t){$(t.target.value)},value:Object(u.isEmpty)(G)?"":G},Object.keys(M).map((function(t){return Object(n.createElement)("option",{key:t,value:t},M[t])}))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(b.ToggleControl,{checked:k,label:Object(o.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(t){return x(t)}}),Object(n.createElement)(b.ToggleControl,{label:Object(o.__)("Trigger Automations (for Tag & List related Events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:w,onChange:O})),Object(n.createElement)("div",{className:"bwf-crm-btn-right-alignment"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){t.setStep(3),p(!0),B(!0)}},Object(o.__)("Import","wp-marketing-automations"))))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-crm-importer-wc-wrap"},Object(n.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("WooCommerce Customers","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("No Orders are available for import.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_20"})))),2==e&&!m&&Object(n.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){t.setStep(1),t.setImporter(null)}},Object(o.__)("Back","wp-marketing-automations"))),3==e&&m&&Object(n.createElement)(T.a,null),3==e&&!m&&i&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)(Vn,{importData:i,setStep:t.setStep,setImporter:t.setImporter,setImport:r})))};r(1200);function to(t){return(to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eo(){eo=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==to(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function ro(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function no(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){ro(a,n,o,c,i,"next",t)}function i(t){ro(a,n,o,c,i,"throw",t)}c(void 0)}))}}var oo=function(){return Object(Et.useQuery)(["get-wlm-members-count"],no(eo().mark((function t(){var e;return eo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.y)("/import/wlm/get-members-count")});case 2:if((e=t.sent).code&&200===e.code){t.next=5;break}throw new Error(Object(o.__)("Unable to load members count","wp-marketing-automations"));case 5:return t.abrupt("return",parseInt(e.result));case 6:case"end":return t.stop()}}),t)}))))};function ao(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return co(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return co(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function co(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var io=Object(l.K)(),lo=function(t){var e=t.onStartImport,r=t.setStep,a=t.setImporter,c=oo(),i=c.isLoading,s=c.data,f=void 0===s?0:s,m=c.isError,p=c.error,h=ao(Object(n.useState)(!1),2),d=h[0],y=h[1],v=ao(Object(n.useState)(!1),2),g=v[0],w=v[1],O=ao(Object(n.useState)([]),2),j=O[0],E=O[1],_=ao(Object(n.useState)([]),2),k=_[0],x=_[1],S=ao(Object(n.useState)(1),2),N=S[0],L=S[1],C=Object(n.useContext)(l.h),P=Object(n.useCallback)((function(){return e({tags:j.map((function(t){return{id:t.key,value:t.label}})),lists:k.map((function(t){return{id:t.key,value:t.label}})),update_existing:d,disable_events:g,imported_contact_status:N})}),[j,k,d,g,N,e]);return Object(n.useEffect)((function(){m&&(C("string"==typeof p?p:p&&p.message?p.message:Object(o.__)("Unknown API Error","wp-marketing-automations")),Object(l.Eb)(C,3e3))}),[m,p]),i?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)(T.a,null)):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(b.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("WishList Members","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},f+" "+Object(o.__)("members are available for import.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-c-import-field"},Object(n.createElement)(re.a,{onTagsChange:E,selected:j}),Object(n.createElement)(ne.a,{onListsChange:x,selected:k})),Object(n.createElement)("div",{className:"bwf-heading7-new"},Object(o.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(t){L(t.target.value)},value:Object(u.isEmpty)(N)?"":N},Object.keys(io).map((function(t){return Object(n.createElement)("option",{key:t,value:t},io[t])}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(b.ToggleControl,{checked:d,label:Object(o.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(t){return y(t)}}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)(b.ToggleControl,{label:Object(o.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:g,onChange:w})),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-crm-btn-right-alignment"},Object(n.createElement)(b.Button,{disabled:0===parseInt(f),isPrimary:!0,onClick:P},Object(o.__)("Import","wp-marketing-automations"))))),Object(n.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){r(1),a(null)}},Object(o.__)("Back","wp-marketing-automations"))))};function so(t){return(so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uo(){uo=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==so(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function fo(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function mo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return po(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return po(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function po(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var bo=function(t){var e=t.requestData,r=t.existingImport,c=(t.setStep,t.setImport),i=mo(Object(n.useState)(!1),2),s=i[0],f=i[1],m=mo(Object(n.useState)(null),2),p=m[0],h=m[1],d=mo(Object(n.useState)(e&&"importId"in e?parseInt(e.importId):0),2),y=d[0],v=d[1],w=p&&"log"in p?p.log:{},O=w.skipped,j=void 0===O?0:O,_=w.failed,k=void 0===_?0:_,x=w.succeed,S=void 0===x?0:x,N=mo(Object(n.useState)(null),2),L=N[0],C=N[1],P=tn().showBackButton,I=(location&&location.search&&Object(a.parse)(location.search.substring(1)),0),A=mo(Object(n.useState)(5e3),2),T=A[0],F=A[1],G=mo(Object(n.useState)(!0),2),$=G[0],D=G[1],M=function(){var t,n=(t=uo().mark((function t(){var n,o;return uo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I++,t.prev=1,n=parseInt(y)>0?{import_id:y}:e,$&&!r?(D(!1),n.start_import=!0):n.start_import=!1,t.next=6,g()({method:"POST",data:n,path:Object(l.y)("/import/wlm/status")});case 6:o=t.sent,h(o.result),v(parseInt(o.result.import_id)),o.result&&"status"in o.result&&"success"===o.result.status&&(bwfcrm_contacts_data.is_wlm_active="1",F(null),P(!1),f(!0)),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),F(null),P(!1),C(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){fo(a,n,o,c,i,"next",t)}function i(t){fo(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(Fe.a)((function(){Object(u.isEmpty)(y)&&0!=I||M()}),T),Object(n.useEffect)((function(){return P(!0),window.scrollTo(0,0),function(){P(!1)}}),[]),L||p&&!1 in p?Object(n.createElement)(E.a,{status:"error"},L&&"message"in L?L.message:Object(o.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):p?p&&"percent"in p?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:parseInt(p.percent),text:"".concat(p.percent,"% Completed")}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("p",{className:"bwf-t-center"},"Skipped: ",parseInt(j)>0?j:0,", Failed:"," ",parseInt(k)>0?k:0,", Success:"," ",parseInt(S)>0?S:0)),s&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){c(!1)}},Object(o.__)("Go To Contacts","wp-marketing-automations"))))):null:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:0,text:Object(o.__)("0% Completed","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-p bwf-t-center"},Object(o.__)("Skipped","wp-marketing-automations"),": ",parseInt(j)>0?j:0,",",Object(o.__)("Failed","wp-marketing-automations"),": ",parseInt(k)>0?k:0,",",Object(o.__)("Success","wp-marketing-automations"),": ",parseInt(S)>0?S:0)),Object(n.createElement)("div",{className:"bwf_clear_20"}))};function ho(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return yo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var vo=function(t){var e=t.step,r=t.setStep,a=t.setImporter,c=t.setImport;Object(l.l)("WLM Importer");var i=ho(Object(n.useState)(null),2),s=i[0],u=i[1],f=(0,Yr().getExistingImports)().wlm;return Object(n.useEffect)((function(){parseInt(f)>0&&(u({importId:f}),r(3))}),[]),Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},2==e&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(lo,{setStep:r,setImporter:a,onStartImport:function(t){u(t),r(3)}})),3==e&&s&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(bo,{setStep:r,requestData:s,setImporter:a,existingImport:parseInt(f)>0,setImport:c})))};r(1201);function go(t){return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wo(){wo=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==go(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Oo(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function jo(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){Oo(a,n,o,c,i,"next",t)}function i(t){Oo(a,n,o,c,i,"throw",t)}c(void 0)}))}}var Eo=function(){return Object(Et.useQuery)(["get-affwp-affiliate-count"],jo(wo().mark((function t(){var e;return wo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.y)("/import/affwp/get-affiliate-count")});case 2:if((e=t.sent).code&&200===e.code){t.next=5;break}throw new Error(Object(o.__)("Unable to load affiliate count","wp-marketing-automations"));case 5:return t.abrupt("return",parseInt(e.result));case 6:case"end":return t.stop()}}),t)}))))};function _o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ko(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ko(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ko(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var xo=Object(l.K)(),So=function(t){var e=t.onStartImport,r=t.setStep,a=t.setImporter,c=Eo(),i=c.isLoading,s=c.data,u=void 0===s?0:s,f=c.isError,m=c.error,p=_o(Object(n.useState)(!1),2),h=p[0],d=p[1],y=_o(Object(n.useState)(!1),2),v=y[0],g=y[1],w=_o(Object(n.useState)([]),2),O=w[0],j=w[1],E=_o(Object(n.useState)([]),2),_=E[0],k=E[1],x=_o(Object(n.useState)(1),2),S=x[0],N=x[1],L=Object(n.useContext)(l.h),C=Object(n.useCallback)((function(){return e({tags:O.map((function(t){return{id:t.key,value:t.label}})),lists:_.map((function(t){return{id:t.key,value:t.label}})),update_existing:h,disable_events:v,imported_contact_status:S})}),[O,_,h,v,S,e]);return Object(n.useEffect)((function(){f&&(L("string"==typeof m?m:m&&m.message?m.message:Object(o.__)("Unknown API Error","wp-marketing-automations")),Object(l.Eb)(L,3e3))}),[f,m]),i?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)(T.a,null)):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(b.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("AffiliateWP Affiliates","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},u+" "+Object(o.__)("affiliates are available for import.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(o.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-c-import-field"},Object(n.createElement)(re.a,{onTagsChange:j,selected:O}),Object(n.createElement)(ne.a,{onListsChange:k,selected:_})),Object(n.createElement)("div",{className:"bwf-heading7-new"},Object(o.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(t){N(t.target.value)}},Object.keys(xo).map((function(t){return Object(n.createElement)("option",{key:t,value:t,selected:S==t},xo[t])}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(b.ToggleControl,{checked:h,label:Object(o.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(t){return d(t)}}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)(b.ToggleControl,{label:Object(o.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:v,onChange:g})),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-crm-btn-right-alignment",style:{bottom:"-60px"}},Object(n.createElement)(b.Button,{disabled:0===parseInt(u),isPrimary:!0,onClick:C},Object(o.__)("Import","wp-marketing-automations"))))),Object(n.createElement)("div",{className:"bwf-crm-importer-navigation",style:{marginTop:"15px"}},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){r(1),a(null)}},Object(o.__)("Back","wp-marketing-automations"))))};function No(t){return(No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lo(){Lo=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),c=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var i=w(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,c),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function f(){}function m(){}function p(){}var b={};i(b,o,(function(){return this}));var h=Object.getPrototypeOf,d=h&&h(h(_([])));d&&d!==e&&r.call(d,o)&&(b=d);var y=p.prototype=f.prototype=Object.create(b);function v(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function c(){return new e((function(n,c){!function n(o,a,c,i){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==No(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}(o,a,n,c)}))}return n=n?n.then(c,c):c()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=p,i(y,"constructor",p),i(p,"constructor",m),m.displayName=i(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,i(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(g.prototype),i(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var c=new g(l(e,r,n,o),a);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(y),i(y,c,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=t,c.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Co(t,e,r,n,o,a,c){try{var i=t[a](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function Po(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Io(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Io(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Io(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ao=function(t){var e=t.requestData,r=t.existingImport,c=(t.setStep,t.setImport),i=Po(Object(n.useState)(!1),2),s=i[0],f=i[1],m=Po(Object(n.useState)(null),2),p=m[0],h=m[1],d=Po(Object(n.useState)(e&&"importId"in e?parseInt(e.importId):0),2),y=d[0],v=d[1],w=p&&"log"in p?p.log:{},O=w.skipped,j=void 0===O?0:O,_=w.failed,k=void 0===_?0:_,x=w.succeed,S=void 0===x?0:x,N=Po(Object(n.useState)(null),2),L=N[0],C=N[1],P=tn().showBackButton,I=(location&&location.search&&Object(a.parse)(location.search.substring(1)),0),A=Po(Object(n.useState)(5e3),2),T=A[0],F=A[1],G=Po(Object(n.useState)(!0),2),$=G[0],D=G[1],M=function(){var t,n=(t=Lo().mark((function t(){var n,o;return Lo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I++,t.prev=1,n=parseInt(y)>0?{import_id:y}:e,$&&!r?(D(!1),n.start_import=!0):n.start_import=!1,t.next=6,g()({method:"POST",data:n,path:Object(l.y)("/import/affwp/status")});case 6:o=t.sent,h(o.result),v(parseInt(o.result.import_id)),o.result&&"status"in o.result&&"success"===o.result.status&&(F(null),P(!1),f(!0)),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),F(null),P(!1),C(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){Co(a,n,o,c,i,"next",t)}function i(t){Co(a,n,o,c,i,"throw",t)}c(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(Fe.a)((function(){Object(u.isEmpty)(y)&&0!=I||M()}),T),Object(n.useEffect)((function(){return P(!0),window.scrollTo(0,0),function(){P(!1)}}),[]),L||p&&!1 in p?Object(n.createElement)(E.a,{status:"error"},L&&"message"in L?L.message:Object(o.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):p?p&&"percent"in p?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:parseInt(p.percent),text:"".concat(p.percent,"% ").concat(Object(o.__)("Completed","wp-marketing-automations"))}),Object(n.createElement)("p",null,"Skipped: ",parseInt(j)>0?j:0,", Failed:"," ",parseInt(k)>0?k:0,", Success:"," ",parseInt(S)>0?S:0)),s&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){c(!1)}},Object(o.__)("Go To Contacts","wp-marketing-automations"))))):null:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(o.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(o.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:0,text:Object(o.__)("0% Completed","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf-p"},"Skipped: ",parseInt(j)>0?j:0,", Failed: ",parseInt(k)>0?k:0,", Success: ",parseInt(S)>0?S:0)),Object(n.createElement)("div",{className:"bwf_clear_20"}))};function To(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Fo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Go=function(t){var e=t.step,r=t.setStep,a=t.setImporter,c=t.setImport;Object(l.l)(Object(o.__)("AFFWP Importer","wp-marketing-automations"));var i=To(Object(n.useState)(null),2),s=i[0],u=i[1],f=(0,Yr().getExistingImports)().affwp;return Object(n.useEffect)((function(){parseInt(f)>0&&(u({importId:f}),r(3))}),[]),Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},2==e&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(So,{setStep:r,setImporter:a,onStartImport:function(t){u(t),r(3)}})),3==e&&s&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(Ao,{setStep:r,requestData:s,setImporter:a,existingImport:parseInt(f)>0,setImport:c})))};function $o(){return($o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function Do(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Mo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Bo=function(t){var e=t.setImport,r=Object(n.useContext)(l.h),a=Do(Object(n.useState)(null),2),c=a[0],i=a[1],s=Do(Object(n.useState)(!0),2),f=(s[0],s[1]),m=Yr(),p=(m.showBackButton,m.getLoading),h=m.getExistingImports,d=tn().fetch,y=p(),v=h(),g=Do(Object(n.useState)(1),2),w=g[0],j=g[1],E=Do(Object(n.useState)(!1),2),_=E[0];E[1];Object(n.useEffect)((function(){d(),f(!1),Object(l.l)(Object(o.__)("Import Contacts","wp-marketing-automations"))}),[]),Object(n.useEffect)((function(){v&&Object(u.size)(v)>0&&(i(Object.keys(v)[0]),j(3))}),[v]);var k=function(){var t=[{key:"csv",label:Object(o.__)("CSV","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-csv"}];return Object(l.Zb)()||t.push({key:"wp",label:Object(o.__)("WordPress","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-wp"}),Object(l.fc)()&&t.push({key:"wc",label:Object(o.__)("WooCommerce","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-wc"}),Object(l.Yb)()&&t.push({key:"wlm",label:Object(n.createElement)(n.Fragment,null,an()," ",Object(o.__)("WishList Member","wp-marketing-automations")),className:"bwf-crm-importer-button bwf-crm-importer-button-wlm"}),Object(l.Gb)()&&t.push({key:"affwp",label:Object(n.createElement)(n.Fragment,null,ln()," ",Object(o.__)("AffiliateWP","wp-marketing-automations")),className:"bwf-crm-importer-button bwf-crm-importer-button-affwp"}),Object(sn.applyFilters)("bwfAddContactImporter",t)}(),x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(G.g)(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(u.isEmpty)(t)||Object(G.k)(t,e,r)},S=function(t){return Object(n.createElement)(n.Fragment,null,function(t,o){switch(o){case"csv":return Object(n.createElement)(En,{step:t,setStep:j,setImporter:i,setImport:e});case"wp":return Object(n.createElement)(Bn,{step:t,setStep:j,setImporter:i,setImport:e});case"wc":return Object(n.createElement)(Xn,{step:t,setStep:j,setImporter:i,setImport:e});case"wlm":return Object(n.createElement)(vo,{step:t,setStep:j,setImporter:i,setImport:e});case"affwp":return Object(n.createElement)(Go,{step:t,setStep:j,setImporter:i,setImport:e});default:return Object(sn.applyFilters)("bwfImporterSelectedContent",Object(n.createElement)(n.Fragment,null),o,t,j,i,v,r,l.Eb,x,e)}}(t,c))},N=[{key:1,label:Object(o.__)("Source","wp-marketing-automations"),content:y?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(n.createElement)("div",{className:"bwf-placeholder-temp dark bwf-h-15 bwf-w-150"}))),Object(n.createElement)(b.Card,{className:"bwf-crm-importer-wrapper"},Object(n.createElement)("div",{className:"bwf-crm-importer"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-150"}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-270"}),Object(n.createElement)("div",{className:"bwf_clear_10"}),[1,2,3].map((function(t){return Object(n.createElement)(b.Button,{key:t,isTertiary:!0,className:"bwf-crm-importer-button"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-60 bwf-w-60"}))})),Object(n.createElement)("div",{className:"bwf_clear_20"})))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(o.__)("Source","wp-marketing-automations"))),Object(n.createElement)(b.Card,{className:"bwf-crm-importer-wrapper"},Object(n.createElement)("div",{className:"bwf-crm-importer"},Object(n.createElement)("div",{className:"bwf-h2"},Object(o.__)("Import Contacts","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-p"},Object(o.__)("Choose the source for importing contacts","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_10"}),k.map((function(t,e){var r=t.key===c?{isPrimary:!0}:{};return Object(n.createElement)(b.Button,$o({key:e,onClick:function(){i(t.key),j(2)}},r,{className:t.className}),t.label)})),Object(n.createElement)("div",{className:"bwf_clear_20"}))))},{key:2,label:Object(o.__)("Configuration","wp-marketing-automations"),content:S(2)},{key:3,label:Object(o.__)("Confirmation","wp-marketing-automations"),content:S(3)}];return Object(n.createElement)(b.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-admin-modal-no-header bwf-import-contact-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(n.createElement)("div",{className:"bwf-import-modal-header"},Object(n.createElement)("div",{className:"bwf-import-modal-title"},Object(o.__)("Import Contacts","wp-marketing-automations")),Object(n.createElement)("div",{onClick:function(){Object(l.l)(Object(o.__)("Contacts","wp-marketing-automations")),Object(G.k)({page:"autonami",path:"/contacts/"},"/",{}),e(!1)},className:"bwf-flex",style:{cursor:"pointer"}},Object(n.createElement)(O.a,{icon:"close"}))),Object(n.createElement)("div",{className:"bwf-crm-main-import-wrapper bwf-crm-import-init"},Object(n.createElement)(Ae.a,{steps:N,currentStep:w,isPending:_})),Object(n.createElement)("div",{className:"bwf_clear_24"}))};function zo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Uo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zo(Object(r),!0).forEach((function(e){Ro(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ro(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(t){i=!0,o=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return qo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.default=function(){var t=Object(d.a)(),e=Object(y.a)(),r=t.getError,c=t.getContacts,i=t.getCountData,s=e.clearError,u=e.startIndexing,f=e.setStateProp,m=Yo(Object(n.useState)(!1),2),p=m[0],b=m[1],h=Yo(Object(n.useState)(!1),2),v=h[0],g=h[1],w=Yo(Object(n.useState)(!1),2),O=w[0],j=w[1],k=Yo(Object(n.useState)({}),2),x=k[0],S=k[1],N=Yo(Object(n.useState)(!1),2),L=N[0],C=N[1],P=location&&location.search?Object(a.parse)(location.search.substring(1)):{},I=r(),A=Object(n.useRef)();Object(n.useEffect)((function(){A.current?s():A.current=I})),Object(n.useEffect)((function(){return Object(l.l)("Contacts"),function(){f("countData",{})}}),[]);var T=Object(n.createElement)(n.Fragment,null,Object(n.createElement)(_.a,{isPrimary:!0,className:"bwf-display-flex bwf-no-ripple",label:Object(o.__)("Create Contact","wp-marketing-automations"),onClick:function(){return b(!0)}},Object(o.__)("Create Contact","wp-marketing-automations"))),F=i(),G=Object(ye.a)().getPageCountData,$=Object(de.a)().setPageCountData,D=G();Object(n.useEffect)((function(){$(Uo(Uo({},D),F))}),[F]),Object(be.a)("contacts","",Object(o.__)("ALL CONTACTS","wp-marketing-automations"),T);var M=c();if("indexing_status"in M){var B="indexing_status"in M&&2===parseInt(M.indexing_status)?Object(o.__)("Contacts indexing is in progress. Kindly, check back after some time.","wp-marketing-automations"):Object(o.__)("Contacts Indexing required, before you can view the contacts.","wp-marketing-automations"),z="indexing_status"in M&&2===parseInt(M.indexing_status)?null:Object(o.__)("Start Indexing","wp-marketing-automations");return Object(n.createElement)(pe.a,{text:B,buttonText:z,onButtonClick:function(){return u()}})}var U=[{type:"heading",data:{title:Object(o.__)("Create contact for smarter engagement","wp-marketing-automations"),desc:Object(o.__)("Increase engagement strategies by creating contacts, apply tags, lists, and personal details.","wp-marketing-automations")}},{type:"image-desc",data:[{img:Object(l.s)()+"contact/contact1.png",title:Object(o.__)("Seamlessly Import Contacts","wp-marketing-automations"),desc:Object(o.__)("Import contacts from WordPress, WooCommerce, CSV files, or other supported sources","wp-marketing-automations")},{img:Object(l.s)()+"contact/contact2.png",title:Object(o.__)("Get 360° Contact view","wp-marketing-automations"),desc:Object(o.__)("View Complete profile with purchase history, tags, lists, open, clicks and more","wp-marketing-automations")}]},{type:"buttons",data:{buttons:[{text:Object(o.__)("Create Contact","wp-marketing-automations"),onClick:function(){S({}),b(!0)}},{text:Object(o.__)("Import Contact","wp-marketing-automations"),isSecondary:!0,proCheck:!0,onClick:function(){Object(l.Sb)()?j(!0):(C(!0),S({isFeature:!0,featureTitle:Object(o.__)("Contacts Import","wp-marketing-automations")}))}}]}},{type:"link-wth-text",data:{text:Object(o.__)("Curious about contact?","wp-marketing-automations"),link:"https://funnelkit.com/docs/autonami-2/contacts/",linkText:Object(o.__)("Learn More","wp-marketing-automations")}}];return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwfcrm-contacts-list__scroll-point"}),I&&!p&&Object(n.createElement)(E.a,{status:"error"},I.message),Object(n.createElement)(Zt,{query:P,isExport:v,setExport:g,isImport:O,setImport:j,menuButtons:T,pitchData:U}),p&&Object(n.createElement)(me,{query:P,onCloseModal:function(){b(!1)}}),v&&Object(n.createElement)(Dr,{setExport:g}),O&&Object(n.createElement)(Bo,{setImport:j}),!Object(l.Sb)()&&Object(n.createElement)(xt.b,{isOpen:L,onRequestClose:function(){return C(!1)},modalContent:x}))}}}]);