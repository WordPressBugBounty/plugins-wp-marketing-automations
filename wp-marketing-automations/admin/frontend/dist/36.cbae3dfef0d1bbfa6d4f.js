(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{1049:function(t,e,n){"use strict";var a=n(74),r=n(0),o=n(1),i=n(3),c=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={workflow:{name:Object(o.__)("Workflow","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t):"admin.php?page=autonami-automations&edit=".concat(t),redirect:!e}};return e&&(n.single_a_contacts={name:Object(o.__)("Contacts","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(t,"/contacts"),showOnClick:!0},n.analytics={name:Object(o.__)("Analytics","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/analytics"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/analytics"),isPro:!0,showOnClick:!0}),n.engagement={name:Object(o.__)("Engagements","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/engagements"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/engagements"),isPro:!0,showOnClick:!0},Object(i.fc)()&&(n.orders={name:Object(o.__)("Orders","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/orders"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/orders"),isPro:!0,showOnClick:!0}),n};e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},b=(p.automation_nav,p.automationv2_nav),d=Object(a.a)(),v=d.setActiveMultiple,y=d.resetHeaderMenu,h=d.setL2NavType,O=d.setL2Nav,w=d.setBackLink,j=d.setL2Title,g=d.setL2Content,_=d.setBackLinkLabel,E=d.setL2NavAlign,k=d.setPageHeader,N=d.setTabHeader;return Object(r.useEffect)((function(){y(!0),!i&&h("menu");var a=c(l,m);f||O(l?a:b),t&&a.hasOwnProperty(t)&&a[t].hasOwnProperty("name")&&N(a[t].name),v({leftNav:"automations-v2",rightNav:t}),n&&w(n),l&&w(n&&!m?"admin.php?page=autonami&path=/automations-v1":"admin.php?page=autonami&path=/automations"),i||m&&l&&_(Object(o.__)("All Automations","wp-marketing-automations")),!m&&l&&_(Object(o.__)("All Automations","wp-marketing-automations")),l&&E("left"),e&&""!==e&&j(e),!n&&s&&g(s),k(Object(o.__)("Automations","wp-marketing-automations")),u&&O({})}),[t,m,f]),!0}},1051:function(t,e,n){"use strict";var a=n(0),r=n(6),o=n.n(r),i=n(1),c=n(8),s=(n(1055),n(39)),l=n(3);function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var a,r,o=[],i=!0,c=!1;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(o.push(a.value),!e||o.length!==e);i=!0);}catch(t){c=!0,r=t}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}e.a=function(t){var e=u(Object(a.useState)(!1),2),n=e[0],r=e[1],m=t.modalContent,f=void 0===m?{}:m,p=t.content,b=t.onPage,d=void 0!==b&&b;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:o()("bwf-upgrade-pro-overlay",{"is-on-page":d}),onClick:function(){d||r(!0)}},d?Object(a.createElement)(s.a,{showHeader:!1,modalContent:f}):Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-king-tag-pro"},Object(a.createElement)(c.a,{icon:"king",size:38,color:"#fff"})),Object(a.createElement)("span",{className:"bwf-mt-8"},p||(Object(l.Ob)()?Object(i.__)("Activate your license to continue using premium features without interruption.","wp-marketing-automations"):Object(i.__)("This feature is locked. To get full access of FunnelKit Automation upgrade to PRO","wp-marketing-automations"))))),Object(a.createElement)(s.b,{isOpen:n,onRequestClose:function(){return r(!1)},modalContent:f}))}},1053:function(t,e,n){"use strict";var a=n(48),r=n(141),o=["getStateProp"];function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a=function(){var t=Object(a.a)("automationList"),e=t.getStateProp,n=l(t,o),i=Object(a.a)(r.a.recipient).getStateProp,s=Object(a.a)(r.a.conversion).getStateProp,u=Object(a.a)(r.a.contacts).getStateProp,m=Object(a.a)(r.a.analytics).getStateProp;return c(c({},n),{},{getAutomations:function(){return e("automations")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getLoadingStatus:function(){return e("isLoading")},getWorkerResponseCode:function(){return e("response_code")},getWorkerDelay:function(){return e("worker_delayed")},getRecipientData:function(){return i("data")},getRecipientLoading:function(){return i("isLoading")},getRecipientOffset:function(){return i("offset")},getRecipientAutomationId:function(){return i("automationId")},getRecipientTotal:function(){return i("total")},getRecipientAutomation:function(){return i("automation")},getRecipientPage:function(){return parseInt(i("offset"))/parseInt(i("limit"))+1},getRecipientLimit:function(){return i("limit")},getRecipientSingleAutomationFailedCount:function(){return i("failedCount")},getConversionData:function(){return s("data")},getConversionLoading:function(){return s("isLoading")},getConversionOffset:function(){return s("offset")},getConversionAutomationId:function(){return s("automationId")},getConversionTotal:function(){return s("total")},getConversionAutomation:function(){return s("automation")},getConversionPage:function(){return parseInt(s("offset"))/parseInt(s("limit"))+1},getConversionLimit:function(){return s("limit")},getCountData:function(){return e("countData")},getConversionSingleAutomationFailedCount:function(){return s("failedCount")},getContactData:function(){return u("data")},getContactLoading:function(){return u("isLoading")},getContactOffset:function(){return u("offset")},getContactAutomationId:function(){return u("automationId")},getContactTotal:function(){return u("total")},getContactAutomation:function(){return u("automation")},getContactPage:function(){return parseInt(u("offset"))/parseInt(u("limit"))+1},getContactLimit:function(){return u("limit")},getContactCountData:function(){return u("contactCount")},getContactSingleAutomationFailedCount:function(){return u("failedCount")},getAnalyticsData:function(){return m("analytics")},getAnalyticsTileData:function(){return m("tiles")},getAnalyticsTableData:function(){return m("tableData")},getAnalyticsLoading:function(){return m("isLoading")},getAnalyticsType:function(){return m("type")},getAnalyticsAutomationData:function(){return m("automation")},getAnalyticsSingleAutomationFailedCount:function(){return m("failedCount")}})}},1055:function(t,e,n){},1070:function(t,e,n){"use strict";var a=n(47),r=n(3),o=n(141),i=n(19),c=["fetch","setStateProp"],s=["s","page","filter","path"];function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a=function(){var t=Object(a.a)("automationList"),e=t.fetch,n=t.setStateProp,l=f(t,c),m=Object(a.a)(o.a.recipient),p=m.fetch,b=m.setStateProp,d=Object(a.a)(o.a.conversion),v=d.fetch,y=d.setStateProp,h=Object(a.a)(o.a.contacts),O=h.fetch,w=h.setStateProp,j=Object(a.a)(o.a.analytics),g=j.fetch,_=j.setStateProp;return u(u({},l),{},{fetch:function(t,a,o,i){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n("automation",{});var l=a.s,u=void 0===l?"":l,m=(a.page,a.filter,a.path,f(a,s)),p={offset:o,limit:i,status:t,search:u,filters:m,version:c?2:1};e("GET",Object(r.y)("/automations"),p)},setAutomationListValues:function(t,e){n(t,e)},fetchRecipient:function(t,e,n){p("GET",Object(r.y)("/v3/automation/".concat(t,"/recipients?limit=").concat(e,"&offset=").concat(n)))},setRecipientsValues:function(t,e){b(t,e)},fetchConversion:function(t,e,n){y("automation",{}),v("GET",Object(r.y)("/v3/automation/".concat(t,"/conversions?limit=").concat(e,"&offset=").concat(n)))},setConversionValues:function(t,e){y(t,e)},fetchContacts:function(t,e,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";w("automation",{}),O("GET",Object(r.y)("/automation/".concat(t,"/contacts?limit=").concat(e,"&offset=").concat(n,"&type=").concat(a,"&search=").concat(o)))},setContactValues:function(t,e){w(t,e)},fetchAnalytics:function(t,e,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=0;4===parseInt(c)&&(s=1),g("GET",Object(r.y)("/analytics/emails/chart/")+"?"+Object(i.stringify)({after:e,before:n,interval:a,oid:t,type:o,mode:c,contact:s}))},setAnalyticsValues:function(t,e){_(t,e)}})}},1078:function(t,e,n){"use strict";var a=n(0),r=n(1),o=n(6),i=n.n(o),c=n(97),s=(n(1088),n(176));function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var a,r,o=[],i=!0,c=!1;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(o.push(a.value),!e||o.length!==e);i=!0);}catch(t){c=!0,r=t}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}e.a=function(t){var e,n=t.className,o=t.align,m=void 0===o?"left":o,f=t.title,p=t.message,b=t.proLink,d=p||Object(r.sprintf)(Object(r.__)("Use our sample data to explore %s. See how it summarises metrics across multiple funnels.","wp-marketing-automations"),f),v=u(Object(a.useState)(!1),2),y=v[0],h=v[1];return Object(a.useEffect)((function(){var t=document.querySelector("body:not(.modal-open) #bwf-header-upgrade-pro-cta");if(t){var e=new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting?h(!1):h(!0)}))}),{root:null,rootMargin:"0px",threshold:.1});return e.observe(t),function(){e.disconnect()}}h(!0)}),[]),Object(a.createElement)("div",{className:i()("bwf-lite-noticebar is-sample-data-notice",n,(e={},l(e,"bwf-notice-".concat(m),!!m),l(e,"is-btn-visible",y),e))},Object(a.createElement)("div",{className:"bwf-lite-noticebar__content-wrap"},Object(a.createElement)("div",{className:"bwf-lite-noticebar__title-wrap"},f," ",Object(a.createElement)(c.b,{content:Object(r.__)("Sample Data","wp-marketing-automations"),type:"black"})),Object(a.createElement)("div",{className:"bwf-noticebar-conatiner"},Object(a.createElement)("div",{className:"bwf-noticebar-content"},d))),Object(a.createElement)(s.a,{isPrimary:!0,proLink:b}))}},1088:function(t,e,n){},1129:function(t,e,n){"use strict";var a=n(0),r=n(6),o=n.n(r),i=n(2),c=n(58),s=n(1),l=n(9),u=n.n(l),m=n(8),f=(n(1130),n(3)),p=n(19);function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var a,r,o=[],i=!0,c=!1;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(o.push(a.value),!e||o.length!==e);i=!0);}catch(t){c=!0,r=t}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}e.a=function(t){var e=t.header,n=void 0===e?Object(s.__)("View Analytics","wp-marketing-automations"):e,r=t.icon,l=void 0===r?"analytic":r,b=t.automationId,v=t.analyticsId,h=t.mode,O=void 0===h?"":h,w=t.extraData,j=void 0===w?{}:w,g=y(Object(a.useState)(!0),2),_=g[0],E=g[1],k=y(Object(a.useState)(!1),2),N=k[0],S=k[1],x=y(Object(a.useState)({}),2),P=x[0],L=x[1],A=function(){parseInt(v)>0&&Object(f.Sb)()?(E(!0),L({}),function(){try{var t=d(d({},j),{},{mode:O});u()({path:Object(f.y)("/automation/".concat(b,"/analytics/").concat(v,"?").concat(Object(p.stringify)(t))),method:"GET"}).then((function(t){200===t.code?Object(i.isEmpty)(t.result)||L(t.result):S(!0),E(!1)}))}catch(t){S(!0),E(!1)}}()):E(!1)},I=function(){var t,e=P.tile,n=void 0===e?[]:e;return N?Object(a.createElement)(a.Fragment,null,Object(s.__)("Error while fetching the Analytics.","wp-marketing-automations")):Object(f.Sb)()?Object(a.createElement)(a.Fragment,null,Object(i.isEmpty)(n)?Object(a.createElement)("div",{className:"bwf-normal-text"},Object(s.__)("No analytics found.","wp-marketing-automations")):Object(a.createElement)("div",{className:"bwf-info-brick"},n.map((function(t,e){var n=t.label,r=void 0===n?"":n,o=t.value,i=void 0===o?"-":o;if(""!==r)return Object(a.createElement)("div",{className:"bwf-info-item",key:e},Object(a.createElement)("span",{className:"bwf-node-content-type"},r),Object(a.createElement)("span",{className:"bwf-node-content-label"},i))})))):(t=[{label:Object(s.__)("Sent","wp-marketing-automations")},{label:Object(s.__)("Open Rate","wp-marketing-automations")}],"email"===O&&t.push({label:Object(s.__)("Click Rate","wp-marketing-automations")},{label:Object(s.__)("Click to Open Rate","wp-marketing-automations")}),t.push({label:Object(s.__)("Revenue","wp-marketing-automations")},{label:Object(s.__)("Revenue/Contact","wp-marketing-automations")},{label:Object(s.__)("Unsubscribe Rate","wp-marketing-automations")}),Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-info-brick"},t.map((function(t,e){return Object(a.createElement)("div",{className:"bwf-info-item",key:e},Object(a.createElement)("span",{className:"bwf-node-content-type"},t.label),Object(a.createElement)("span",{className:"bwf-node-content-label"},"-"))}))),Object(a.createElement)("div",{className:"bwf_clear_10"}),Object(a.createElement)("div",{className:"bwf-normal-text"},Object(s.__)("Email Analytics is a PRO feature.","wp-marketing-automations")+" ",Object(a.createElement)("a",{target:"__blank",className:"bwf-normal-a-t bwf-font-light",href:Object(f.ab)("upgrade",{utm_medium:"Automation+Email+Analytics"})},Object(s.__)("Upgrade to PRO","wp-marketing-automations")))))};return Object(a.createElement)("div",{className:"bwf-info-popup"},Object(a.createElement)(c.a,{contentClassName:"bwf-info__popover",position:"top center",renderToggle:function(t){var e=t.onToggle,r=t.isOpen,i=o()("bwf-info__toggle bwf-cursor-pointer",{"is-opened":r});return Object(a.createElement)("div",{className:i,onClick:function(){e(),A()},"aria-expanded":r},Object(a.createElement)(m.a,{size:14,icon:l}),n)},renderContent:function(t){var e=t.onToggle;return Object(a.createElement)("div",{className:"bwf-info-popover-container"},Object(a.createElement)("div",{className:"bwf-info-popover-header"},Object(a.createElement)("div",{className:"bwf-info-header-text"},n,!Object(f.Sb)()&&f.e),Object(a.createElement)("span",{className:"bwf-info-close",onClick:e},Object(a.createElement)(m.a,{icon:"close",size:20}))),Object(a.createElement)("div",{className:"bwf-info-popover-body"},Object(a.createElement)("div",{className:"bwf-info-wrapper"},Object(a.createElement)("div",{className:"bwf-info--content"},_?Object(a.createElement)("div",{className:"bwf-info-brick"},[1,2,3,4,5,6].map((function(t){return Object(a.createElement)("div",{className:"bwf-info-item",key:t},Object(a.createElement)("span",{className:"bwf-node-content-type"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})),Object(a.createElement)("span",{className:"bwf-node-content-label"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-15"})))}))):I()))))},focusOnMount:!0}))}},1130:function(t,e,n){},1367:function(t,e,n){},1368:function(t,e,n){},1369:function(t,e,n){},1370:function(t,e,n){},1423:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n(1049),o=n(3),i=n(9),c=n.n(i),s=n(74),l=n(108),u=n(341),m=n(33),f=n(12);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(t){var e=t.query,n=t.children;return Object(a.createElement)("div",{className:"bwf-crm-emails-report-filter"},n,Object(a.createElement)(u.a,{siteLocale:"en-US",path:"/",query:e,onDateSelect:function(t){var n=b(b({},e),t);delete n.compare,Object(f.k)(n,"/",{})},showDatePicker:!0,isoDateFormat:m.g,hideCompare:!0,dateQuery:function(t){t.compare="previous_year";var e=Object(m.e)(t),n=e.period,a=e.compare,r=e.before,o=e.after,i=Object(m.c)(t);return{period:n,compare:a,before:r,after:o,primaryDate:i.primary,secondaryDate:i.secondary}}(e),currency:Object(o.sb)()}))},y=n(65),h=n(1),O=n(1053),w=n(331),j=function(t){var e=t.type,n=t.metrics,r=(0,Object(O.a)().getAnalyticsLoading)();return Object(a.createElement)("div",{className:"bwf-crm-emails-report-tiles"},Object(a.createElement)(w.a,{items:n(e),title:Object(h.__)("Overview","wp-marketing-automations"),isLoading:r,rowTileCount:function(){switch(e){case"email":return Object(o.fc)()?5:3;case"sms":return Object(o.fc)()?4:2;case"contact":return Object(o.fc)()?4:3;default:return!1}}()}))},g=n(1070),_=n(138),E=n(320),k=n(2),N=n(327),S=n(5),x=n(6),P=n.n(x);function L(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var a,r,o=[],i=!0,c=!1;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(o.push(a.value),!e||o.length!==e);i=!0);}catch(t){c=!0,r=t}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var I=function(t){var e,n=t.query,r=t.type,o=t.metrics,i=n.chart?n.chart:function(){switch(r){case"contact":return"active_contacts";default:return"email_sents"}}(),c=L(Object(a.useState)(o(r)[0]),2),s=c[0],l=c[1],u=Object(O.a)(),p=u.getAnalyticsData,b=u.getAnalyticsLoading,d=u.getAnalyticsTileData,v=b(),y=p(),w=d(),j=Object(m.f)(n),g=Object(m.b)(((e=n).period&&""!==e.period||(e.period="month"),e.compare&&""!==e.compare||(e.compare="previous_year"),n));g.includes(j)||(j=g[g.length-1]),Object(a.useEffect)((function(){l(o(r)[0])}),[r]);return Object(a.createElement)(N.a,{isRequesting:v,data:function(t){switch(r){case"email":return function(t){var e=[];if(!Object(k.isEmpty)(y)){y.map((function(n){switch(t){case"email_sents":e.push({date:n.start_date,email_sents:{label:Object(h.__)("Email Sent","wp-marketing-automations"),value:parseInt(n.subtotals.email_sents)}});break;case"open_rate":e.push({date:n.start_date,email_open:{label:Object(h.__)("Opens","wp-marketing-automations"),value:parseInt(n.subtotals.email_open)}});break;case"click_rate":e.push({date:n.start_date,email_click:{label:Object(h.__)("Clicks","wp-marketing-automations"),value:parseInt(n.subtotals.email_click)}});break;case"total_orders":e.push({date:n.start_date,total_orders:{label:Object(h.__)("Total Orders","wp-marketing-automations"),value:parseInt(n.subtotals.total_orders)}});break;case"total_revenue":e.push({date:n.start_date,total_revenue:{label:Object(h.__)("Total Revenue","wp-marketing-automations"),value:parseInt(n.subtotals.total_revenue)}})}}))}return e}(t);case"sms":return function(t){var e=[];if(!Object(k.isEmpty)(y)){y.map((function(n){switch(t){case"email_sents":e.push({date:n.start_date,email_sents:{label:Object(h.__)("SMS Sent","wp-marketing-automations"),value:parseInt(n.subtotals.email_sents)}});break;case"email_click":e.push({date:n.start_date,email_click:{label:Object(h.__)("SMS Clicks","wp-marketing-automations"),value:parseInt(n.subtotals.email_click)}});break;case"total_orders":e.push({date:n.start_date,total_orders:{label:Object(h.__)("Total Orders","wp-marketing-automations"),value:parseInt(n.subtotals.total_orders)}});break;case"total_revenue":e.push({date:n.start_date,total_revenue:{label:Object(h.__)("Total Revenue","wp-marketing-automations"),value:parseInt(n.subtotals.total_revenue)}})}}))}return e}(t);case"contact":return function(t){var e=[];if(!Object(k.isEmpty)(y)){y.map((function(n){switch(t){case"active_contacts":e.push({date:n.start_date,active_contacts:{label:Object(h.__)("Active Contacts","wp-marketing-automations"),value:parseInt(n.subtotals.active_contacts)}});break;case"complete_contacts":e.push({date:n.start_date,complete_contacts:{label:Object(h.__)("Complete Contacts","wp-marketing-automations"),value:parseInt(n.subtotals.complete_contacts)}});break;case"unsubscribers":e.push({date:n.start_date,unsubscribers:{label:Object(h.__)("Unsubscribes","wp-marketing-automations"),value:parseInt(n.subtotals.unsubscribers)}});break;case"revenue":e.push({date:n.start_date,revenue:{label:Object(h.__)("Revenue","wp-marketing-automations"),value:parseInt(n.subtotals.revenue)}});break;case"conversions":e.push({date:n.start_date,conversions:{label:Object(h.__)("Orders","wp-marketing-automations"),value:parseInt(n.subtotals.conversions)}});break;case"aov":e.push({date:n.start_date,conversions:{label:Object(h.__)("AOV","wp-marketing-automations"),value:parseInt(n.subtotals.aov)}})}}))}return e}(t)}}(i),title:Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:""},Object(h.__)("Performance","wp-marketing-automations"))),interval:j,layout:"item-comparison",legendTotals:"aov"==i?{conversions:w.hasOwnProperty("aov")?w.aov:0}:null,interactiveLegend:!0,chartType:"curve-line",chartMeta:s,tabs:o(r),hideTypeSelect:!0,customHeaderItem:Object(a.createElement)(a.Fragment,null,o(r)&&Object(k.isArray)(o(r))&&Object(a.createElement)("div",{className:"bwf-chart-tabs"},o(r).filter((function(t){return"convert_time"!==t.key})).map((function(t){return Object(a.createElement)(S.Button,{className:P()({"is-gray-light":s.key!==t.key,"is-secondary-light":s.key===t.key}),key:t.key,onClick:function(e){l(t),e.preventDefault(),delete n.compare,Object(f.k)({chart:t.key},"/",n)}},t.title)}))))})},C=n(137),F=n(19),D=n(54);function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(){M=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function s(t,e,n,a){var r=e&&e.prototype instanceof m?e:m,o=Object.create(r.prototype),i=new _(a||[]);return o._invoke=function(t,e,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return k()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=w(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=l(t,e,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(t,n,i),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var u={};function m(){}function f(){}function p(){}var b={};c(b,r,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(E([])));v&&v!==e&&n.call(v,r)&&(b=v);var y=p.prototype=m.prototype=Object.create(b);function h(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){var a;this._invoke=function(r,o){function i(){return new e((function(a,i){!function a(r,o,i,c){var s=l(t[r],t,o);if("throw"!==s.type){var u=s.arg,m=u.value;return m&&"object"==T(m)&&n.call(m,"__await")?e.resolve(m.__await).then((function(t){a("next",t,i,c)}),(function(t){a("throw",t,i,c)})):e.resolve(m).then((function(t){u.value=t,i(u)}),(function(t){return a("throw",t,i,c)}))}c(s.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=l(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,u;var r=a.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function g(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function E(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function e(){for(;++a<t.length;)if(n.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},h(O.prototype),c(O.prototype,o,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,a,r,o){void 0===o&&(o=Promise);var i=new O(s(e,n,a,r),o);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},h(y),c(y,i,"Generator"),c(y,r,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var a=e.pop();if(a in t)return n.value=a,n.done=!1,n}return n.done=!0,n}},t.values=E,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(g),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(n,a){return i.type="throw",i.arg=t,e.next=n,a&&(e.method="next",e.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),g(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var r=a.arg;g(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function Y(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}function G(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var a,r,o=[],i=!0,c=!1;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(o.push(a.value),!e||o.length!==e);i=!0);}catch(t){c=!0,r=t}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var z=function(t){var e=t.query,n=t.automationId,r=e.period,i=e.interval,s=void 0===i?"day":i,l=e.after,u=e.before,f=Object(D.a)(Object(o.sb)()).formatAmount,p=G(Object(a.useState)([]),2),b=p[0],d=p[1],v=G(Object(a.useState)(!0),2),y=v[0],w=v[1],j=G(Object(a.useState)(25),2),g=j[0],_=j[1],E=G(Object(a.useState)(0),2),N=E[0],S=E[1],x=G(Object(a.useState)(0),2),P=x[0],L=x[1],A=parseInt(N)/parseInt(g)+1,I=Object(O.a)(),T=I.getAnalyticsTileData,R=I.getAnalyticsLoading,z=T(),H=R();Object(a.useEffect)((function(){if(!Object(o.Sb)()){var t=z.email_click,e=void 0===t?0:t,n=z.email_open,a=void 0===n?0:n,r=z.email_sents,i=void 0===r?0:r,c=z.total_orders,s=void 0===c?0:c,l=z.revenue,u=void 0===l?0:l;d([{click_count:e,click_rate:(e/i*100).toFixed(2),conversions:s,oid:"5",open_count:a,open_rate:(a/i*100).toFixed(2),revenue:u,sent:i,subject:"Dummy Subject",template:"",tid:"52",title:"Dummy Mail",type:"1"}]),w(!1)}}),[H]);var q=function(){var t,e=(t=M().mark((function t(e,a){return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(w(!0),Object(o.Sb)()){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,c()({method:"GET",path:Object(o.y)("/analytics/emails/tabular/")+"?"+Object(F.stringify)({after:e,before:a,oid:n,type:1,interval:"day",limit:g,offset:N,mode:1})}).then((function(t){t.hasOwnProperty("result")&&d(t.result),t.hasOwnProperty("total_count")&&L(t.total_count),w(!1)}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),w(!1);case 11:case"end":return t.stop()}}),t,null,[[3,8]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){Y(o,a,r,i,c,"next",t)}function c(t){Y(o,a,r,i,c,"throw",t)}i(void 0)}))});return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){if(Object(o.Sb)()){var t=((r=e).compare="previous_year",Object(m.c)(r).primary),n="",a="";t&&(Object(k.isEmpty)(t.after)||(n=t.after.format("YYYY-MM-DD HH:mm:ss")),Object(k.isEmpty)(t.before)||(a=t.before.format("YYYY-MM-DD 23:59:59")),Object(k.isEmpty)(n)||Object(k.isEmpty)(a)||q(n,a))}var r}),[r,s,l,u]);var U,V=[{key:"subject",label:Object(h.__)("Subject","wp-marketing-automations"),isLeftAligned:!0},{key:"source",label:Object(h.__)("Source","wp-marketing-automations"),isLeftAligned:!1},{key:"sent",label:Object(h.__)("Sent","wp-marketing-automations"),isLeftAligned:!0,isNumeric:!0},{key:"open",label:Object(h.__)("Open Rate","wp-marketing-automations"),isLeftAligned:!0},{key:"click",label:Object(h.__)("Click Rate","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0},Object(o.fc)()?{key:"orders",label:Object(h.__)("Orders","wp-marketing-automations"),isLeftAligned:!0}:{},Object(o.fc)()?{key:"revenue",label:Object(h.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0}:{}],$=function(t){t!==g&&_(t)};return Object(a.createElement)("div",{className:"bwf-table-with-border"},Object(a.createElement)(C.a,{title:Object(h.__)("Email","wp-marketing-automations"),rows:(U=[],Object(k.isEmpty)(b)||b.map((function(t){U.push([{display:t.subject?t.subject:"-",value:t.subject},{display:t.title?t.title:"-",value:t.title},{display:parseInt(t.sent)?parseInt(t.sent):"-",value:t.sent},{display:parseInt(t.open_rate)?parseFloat(t.open_rate).toFixed(1)+"%":"-",value:t.open_count},{display:parseInt(t.click_rate)?parseFloat(t.click_rate).toFixed(1)+"%":"-",value:t.click_count},Object(o.fc)()?{display:parseInt(t.conversions)?parseInt(t.conversions):"-",value:t.conversions}:{},Object(o.fc)()?{display:parseFloat(t.revenue)>0?Object(a.createElement)("span",{className:"bwf-tags bwf-tag-green"},f(parseFloat(t.revenue))):"-",value:t.revenue}:{}])})),U),headers:V,query:{paged:A},rowsPerPage:g,totalRows:P,isLoading:y,onPageChange:function(t,e){S((t-1)*g)},onQueryChange:function(t){return"per_page"!==t?function(){}:$},showMenu:!1,rowHeader:!0,emptyMessage:Object(h.__)("No emails found","wp-marketing-automations")}))};function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(){q=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function s(t,e,n,a){var r=e&&e.prototype instanceof m?e:m,o=Object.create(r.prototype),i=new _(a||[]);return o._invoke=function(t,e,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return k()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=w(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=l(t,e,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(t,n,i),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var u={};function m(){}function f(){}function p(){}var b={};c(b,r,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(E([])));v&&v!==e&&n.call(v,r)&&(b=v);var y=p.prototype=m.prototype=Object.create(b);function h(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){var a;this._invoke=function(r,o){function i(){return new e((function(a,i){!function a(r,o,i,c){var s=l(t[r],t,o);if("throw"!==s.type){var u=s.arg,m=u.value;return m&&"object"==H(m)&&n.call(m,"__await")?e.resolve(m.__await).then((function(t){a("next",t,i,c)}),(function(t){a("throw",t,i,c)})):e.resolve(m).then((function(t){u.value=t,i(u)}),(function(t){return a("throw",t,i,c)}))}c(s.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=l(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,u;var r=a.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function g(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function E(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function e(){for(;++a<t.length;)if(n.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},h(O.prototype),c(O.prototype,o,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,a,r,o){void 0===o&&(o=Promise);var i=new O(s(e,n,a,r),o);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},h(y),c(y,i,"Generator"),c(y,r,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var a=e.pop();if(a in t)return n.value=a,n.done=!1,n}return n.done=!0,n}},t.values=E,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(g),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(n,a){return i.type="throw",i.arg=t,e.next=n,a&&(e.method="next",e.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),g(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var r=a.arg;g(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function U(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}function V(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var a,r,o=[],i=!0,c=!1;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(o.push(a.value),!e||o.length!==e);i=!0);}catch(t){c=!0,r=t}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return $(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var B=function(t){var e=t.query,n=t.automationId,r=e.period,i=e.interval,s=void 0===i?"day":i,l=e.after,u=e.before,f=Object(D.a)(Object(o.sb)()).formatAmount,p=V(Object(a.useState)([]),2),b=p[0],d=p[1],v=V(Object(a.useState)(!0),2),y=v[0],w=v[1],j=V(Object(a.useState)(25),2),g=j[0],_=j[1],E=V(Object(a.useState)(0),2),N=E[0],S=E[1],x=V(Object(a.useState)(0),2),P=x[0],L=x[1],A=parseInt(N)/parseInt(g)+1,I=Object(O.a)(),T=I.getAnalyticsTileData,M=I.getAnalyticsLoading,Y=T(),G=M();Object(a.useEffect)((function(){if(!Object(o.Sb)()){var t=Y.email_click,e=void 0===t?0:t,n=Y.email_open,a=void 0===n?0:n,r=Y.email_sents,i=void 0===r?0:r,c=Y.total_orders,s=void 0===c?0:c,l=Y.revenue,u=void 0===l?0:l;d([{click_count:e,click_rate:(e/i*100).toFixed(2),conversions:s,oid:"5",open_count:a,open_rate:(a/i*100).toFixed(2),revenue:u,sent:i,subject:"Dummy Message",template:"",tid:"52",title:"Dummy SMS",type:"1"}]),w(!1)}}),[G]);var R=function(){var t,e=(t=q().mark((function t(e,a){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(w(!0),Object(o.Sb)()){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,c()({method:"GET",path:Object(o.y)("/analytics/emails/tabular/")+"?"+Object(F.stringify)({after:e,before:a,oid:n,type:1,interval:"day",limit:g,offset:N,mode:2})}).then((function(t){t.hasOwnProperty("result")&&d(t.result),t.hasOwnProperty("total_count")&&L(t.total_count),w(!1)}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),w(!1);case 11:case"end":return t.stop()}}),t,null,[[3,8]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){U(o,a,r,i,c,"next",t)}function c(t){U(o,a,r,i,c,"throw",t)}i(void 0)}))});return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){if(Object(o.Sb)()){var t=((r=e).compare="previous_year",Object(m.c)(r).primary),n="",a="";t&&(Object(k.isEmpty)(t.after)||(n=t.after.format("YYYY-MM-DD HH:mm:ss")),Object(k.isEmpty)(t.before)||(a=t.before.format("YYYY-MM-DD 23:59:59")),Object(k.isEmpty)(n)||Object(k.isEmpty)(a)||R(n,a))}var r}),[r,s,l,u]);var z,H=[{key:"message",label:Object(h.__)("Message","wp-marketing-automations"),isLeftAligned:!0},{key:"source",label:Object(h.__)("Source","wp-marketing-automations"),isLeftAligned:!1},{key:"sent",label:Object(h.__)("Sent","wp-marketing-automations"),isLeftAligned:!0,isNumeric:!0},{key:"click",label:Object(h.__)("Click","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0},Object(o.fc)()?{key:"orders",label:Object(h.__)("Orders","wp-marketing-automations"),isLeftAligned:!0}:{},Object(o.fc)()?{key:"revenue",label:Object(h.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0}:{}],$=function(t){t!==g&&_(t)};return Object(a.createElement)("div",{className:"bwf-table-with-border"},Object(a.createElement)(C.a,{title:Object(h.__)("SMS","wp-marketing-automations"),hideHeader:"yes",rows:(z=[],Object(k.isEmpty)(b)||b.map((function(t){var e=parseFloat(t.click_rate)?" ( "+parseFloat(t.click_rate).toFixed(2)+"% ) ":"";z.push([{display:t.template?Object(a.createElement)("div",{className:"bwf-pre-line"},t.template):"-",value:""},{display:t.title?t.title:"-",value:t.title},{display:parseInt(t.sent)?parseInt(t.sent):"-",value:t.sent},{display:parseInt(t.click_count)?t.click_count+e:"-",value:t.click_count},Object(o.fc)()?{display:parseInt(t.conversions)?parseInt(t.conversions):"-",value:t.conversions}:{},Object(o.fc)()?{display:parseFloat(t.revenue)>0?Object(a.createElement)("span",{className:"bwf-tags bwf-tag-green"},f(parseFloat(t.revenue))):"-",value:t.revenue}:{}])})),z),headers:H,query:{paged:A},rowsPerPage:g,totalRows:P,isLoading:y,onPageChange:function(t,e){S((t-1)*g)},onQueryChange:function(t){return"per_page"!==t?function(){}:$},showMenu:!1,rowHeader:!0,emptyMessage:Object(h.__)("No SMS found","wp-marketing-automations")}))},Q=n(8),W=n(111),J=(n(1367),n(55)),Z=n(1045),K=n(1109),X=(n(1102),n(1104)),tt=function(t){var e=t.readables;return Object(a.createElement)("div",{className:"bwf-step-brick"},e.map((function(t,e){var n=t.map((function(t,e){return Object(k.isEmpty)(t)?Object(a.createElement)(a.Fragment,null):Object(a.createElement)("div",{key:e},0!==e&&Object(a.createElement)("div",{className:"bwf-step-divider"},Object(a.createElement)("span",{className:"bwf-divider"},"AND")),Object(a.createElement)("div",{className:"bwf-step-content-content bwf-two-line-ellipse-text"},t))}));return 0!==e?Object(k.isEmpty)(n)?Object(a.createElement)(a.Fragment,null):Object(a.createElement)("div",{key:e+"-or"},Object(a.createElement)("div",{className:"bwf-step-divider divider-line bwf-or"},Object(a.createElement)("span",{className:"bwf-divider"},"OR")),n):n})))},et=function(t){var e,n,r=t.data,i=void 0===r?{}:r,c=t.id,s=Object(a.useContext)(o.b),l=s.automationId,u=void 0===l?"":l,m=s.eventSlug,f=void 0===m?"":m,p=i.stats,b=Object(k.isEmpty)(f)?{}:Object(X.a)(f,parseInt(u)),d=b.isLoading,v=b.error,y=b.getReadableTexts,O=b.rules,w=(e=i.sidebarValues,n=[],Object(k.isEmpty)(e)?[]:(Object.keys(e).map((function(t){var a=e[t],r=[];!Object(k.isEmpty)(a)&&Object(k.isArray)(a)&&(a.map((function(t){O.hasOwnProperty(t.filter)&&r.push(t)})),Object(k.isEmpty)(r)||n.push(r))})),n)),j=d||v||Object(k.isEmpty)(f)?[]:y(w);return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)(Z.d,{type:"target",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick"},Object(a.createElement)("div",{className:"bwf-node-icon"},Object(a.createElement)(Q.a,{size:26,icon:"condition"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(h.__)("Step","wp-marketing-automations")+" "+c),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(h.__)("Condition","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-node-action"})),Array.isArray(j)&&j.length?Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-content"},Object(a.createElement)(tt,{readables:j}))),Object(a.createElement)("div",{className:"bwf-node-status"},Object(a.createElement)("div",{className:"bwf-status-wrap"},Object(a.createElement)("span",{className:"bwf-node-status-label"},Object(h.__)("Completed","wp-marketing-automations")),Object(a.createElement)("span",{className:"bwf-node-status-count"},p.hasOwnProperty("completed")?Object(o.ic)(parseInt(p.completed)):0)))):Object(a.createElement)(a.Fragment,null,d?Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-brick"},Object(a.createElement)("div",{className:"bwf-step-content-content"},Object(a.createElement)("div",{className:"bwf-step-brick"},Object(a.createElement)("div",{className:"bwf-step-content-content"},Object(h.__)("Loading","wp-marketing-automations")))))):Object(a.createElement)("div",{className:"bwf-control-event-error"},Object(a.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer"},Object(h.__)("Not Configured","wp-marketing-automations")))))),Object(a.createElement)(Z.d,{type:"source",position:"bottom",isConnectable:!1}))},nt=n(140),at=n(1129),rt=function(t){var e,n=t.data,r=void 0===n?{}:n,i=t.id,c=r.desc_text,s=void 0===c?"":c,l=r.integration,u=void 0===l?"-":l,m=r.selected,f=void 0===m?"-":m,p=r.action_slug,b=void 0===p?"":p,d=r.stats,v=void 0===d?{}:d,y=r.stepId,O=void 0===y?"":y,w=Object(a.useContext)(o.b),j=w.automationId,g=void 0===j?"":j,_=w.stepId,E=void 0===_?"":_,N=function(){return Object(a.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf-mt-3 bwf-cursor-pointer bwf-info__toggle "},Object(a.createElement)(at.a,{automationId:g,analyticsId:O,mode:"email",extraData:{split:E}}))},S=function(){return Object(a.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf-mt-3 bwf-cursor-pointer bwf-info__toggle"},Object(a.createElement)(at.a,{automationId:g,analyticsId:O,mode:"sms",extraData:{split:E}}))};return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)(Z.d,{type:"target",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick"},Object(a.createElement)("div",{className:"bwf-node-icon icon-action"},Object(a.createElement)(Q.a,{size:22,icon:"charge"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(h.__)("Step","wp-marketing-automations")+" "+i),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(h.__)("Action","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-node-action"})),Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-content"},Object(a.createElement)("div",{className:"bwf-step-brick"},Object(a.createElement)("div",{className:"bwf-step-content-content"},!Object(k.isEmpty)(r)&&r.hasOwnProperty("selected")&&(e=Object(a.createElement)(a.Fragment,null),"wp_sendemail"===b?e=N():"twilio_send_sms"===b&&(e=S()),Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-content-type"},u),Object(a.createElement)("div",{className:"bwf-node-content-label"},f),""!==s&&!Object(k.isNull)(s)&&Object(a.createElement)("div",{className:"bwf-node-content-label bwf-node-desc"+(Object(k.isArray)(s)?"":" bwf-two-line-ellipse-text")},function(t){if(Object(k.isEmpty)(t))return Object(a.createElement)(a.Fragment,null);if(Object(k.isArray)(t)){var e="",n=[];return t.map((function(t){Object(k.isEmpty)(e)&&(e=t),n.push(Object(a.createElement)("span",{key:t},t))})),Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-table-v-center"},Object(a.createElement)("span",null,!Object(k.isEmpty)(e)&&e),!Object(k.isEmpty)(n)&&n.length>1&&Object(a.createElement)("div",{className:"bwf-display-inline",onClick:function(t){t.preventDefault(),t.stopPropagation()}},Object(a.createElement)(nt.a,{items:n}))))}return t}(s)),e)))))),Object(a.createElement)("div",{className:"bwf-node-status"},Object(a.createElement)("div",{className:"bwf-status-wrap"},Object(a.createElement)("span",{className:"bwf-node-status-label"},Object(h.__)("Completed","wp-marketing-automations")),Object(a.createElement)("span",{className:"bwf-node-status-count"},v.hasOwnProperty("completed")?Object(o.ic)(parseInt(v.completed)):0))))),Object(a.createElement)(Z.d,{type:"source",isConnectable:!1,position:"bottom"}))},ot=n(89),it=n(10),ct=n.n(it),st={1:Object(h.__)("Delay for a specific period","wp-marketing-automations"),2:Object(h.__)("Delay until a specific date and time","wp-marketing-automations"),3:Object(h.__)("Delay until a custom field date","wp-marketing-automations"),4:Object(h.__)("Delay with variable","wp-marketing-automations")},lt={1:Object(h.__)("Sun","wp-marketing-automations"),2:Object(h.__)("Mon","wp-marketing-automations"),3:Object(h.__)("Tue","wp-marketing-automations"),4:Object(h.__)("Wed","wp-marketing-automations"),5:Object(h.__)("Thu","wp-marketing-automations"),6:Object(h.__)("Fri","wp-marketing-automations"),7:Object(h.__)("Sat","wp-marketing-automations")},ut=function(t){var e=t.data,n=t.id,r=e.stats,i=void 0===r?{}:r,c=e.sidebarValues,s=void 0===c?{}:c,l=s.type,u=void 0===l?0:l,m=s.data,f=void 0===m?{}:m,p=function(){switch(parseInt(u)){case 1:var t=f.day_delay,e=void 0===t?{}:t,n=f.enable_time_delay,r=void 0!==n&&n,o=f.enable_week_delay,i=void 0!==o&&o,c=f.time_delay,s=void 0===c?{time:""}:c,l=f.week_delay,m=void 0===l?[]:l;if(!Object(k.isEmpty)(e)){var p=e.text+" "+function(t,e){switch(t){case"min":return parseInt(e)>1?Object(h.__)("Minutes","wp-marketing-automations"):Object(h.__)("Minute","wp-marketing-automations");case"hours":return parseInt(e)>1?Object(h.__)("Hours","wp-marketing-automations"):Object(h.__)("Hour","wp-marketing-automations");case"days":return parseInt(e)>1?Object(h.__)("Days","wp-marketing-automations"):Object(h.__)("Day","wp-marketing-automations");case"weeks":return parseInt(e)>1?Object(h.__)("Weeks","wp-marketing-automations"):Object(h.__)("Week","wp-marketing-automations");case"months":return parseInt(e)>1?Object(h.__)("Months","wp-marketing-automations"):Object(h.__)("Month","wp-marketing-automations");default:return""}}(e.unit,e.text),b=[];return i&&!Object(k.isEmpty)(m)&&m.map((function(t){lt.hasOwnProperty(t)&&b.push(lt[t])})),r&&s.hasOwnProperty("time")&&!Object(k.isEmpty)(s.time)?(p+=" "+Object(h.__)("till","wp-marketing-automations")+" "+Object(ot.format)(bwfcrm_contacts_data.time_format,ct()(s.time,"HH:mm:ss")),Object(k.isEmpty)(b)||(p+=" "+b.join("/")),s.hasOwnProperty("in_contact_timezone")&&s.in_contact_timezone&&(p+=" "+Object(h.__)("in Contact's Timezone","wp-marketing-automations"))):Object(k.isEmpty)(b)||(p+=" "+b.join("/")),p+"."}break;case 2:var d=f.date,v=void 0===d?"":d,y=f.time_delay,O=void 0===y?{time:"",in_contact_timezone:!1}:y,w=f.enable_step_skip,j=void 0!==w&&w,g=f.skip_to_step,_=void 0===g?{step:"",name:""}:g;if(!Object(k.isEmpty)(v)&&!Object(k.isEmpty)(O.time)){var E="",N="";return O.hasOwnProperty("in_contact_timezone")&&O.in_contact_timezone?E+=" "+Object(h.__)("in Contact's Timezone.","wp-marketing-automations"):E+=".",j&&!Object(k.isEmpty)(_)&&_.hasOwnProperty("step")&&""!=_.step&&_.hasOwnProperty("name")&&""!=_.name&&(N=" ".concat(Object(h.__)("Jump to","wp-marketing-automations")," ").concat(_.name,".")),Object(h.__)("Delay till","wp-marketing-automations")+" "+Object(ot.format)(bwfcrm_contacts_data.date_format,ct()(v))+" at "+Object(ot.format)(bwfcrm_contacts_data.time_format,ct()(O.time,"HH:mm:ss"))+" "+E+N}break;case 3:var S=f.custom_field,x=f.enable_time_delay,P=void 0!==x&&x,L=f.time_delay,A=f.enable_step_skip,I=void 0!==A&&A,C=f.skip_to_step;if(S.hasOwnProperty("field")&&""!==S.field){var F=Object(h.__)("Delay","wp-marketing-automations");return P?L.hasOwnProperty("duration")&&(F+=" ".concat(Object(h.__)("of","wp-marketing-automations")," ").concat(L.duration," ").concat(L.type," ").concat(L.timing," ")):F+=" "+Object(h.__)("till","wp-marketing-automations"),S.hasOwnProperty("custom_field_label")&&""!==S.custom_field_label?F+=" ".concat(Object(h.__)("Contacts","wp-marketing-automations")," '").concat(S.custom_field_label,"' ").concat(Object(h.__)("field value","wp-marketing-automations")):F+=" ".concat(Object(h.__)("Contacts","wp-marketing-automations")," ( ").concat(S.field," ) ").concat(Object(h.__)("field value","wp-marketing-automations")),S.hasOwnProperty("time")&&""!==S.time&&(F+=" till ".concat(Object(ot.format)(bwfcrm_contacts_data.time_format,ct()(S.time,"HH:mm:ss")))),S.hasOwnProperty("in_contact_timezone")&&S.in_contact_timezone?F+=" ".concat(Object(h.__)("in Contact's Timezone","wp-marketing-automations"),"."):F+=".",I&&!Object(k.isEmpty)(C)&&C.hasOwnProperty("step")&&""!=C.step&&C.hasOwnProperty("name")&&""!=C.name&&(F+=" ".concat(Object(h.__)("Jump to","wp-marketing-automations")," ").concat(C.name,".")),F}break;case 4:var D=f.variable_field,T=f.enable_time_delay,M=void 0!==T&&T,Y=f.time_delay,G=f.enable_step_skip,R=void 0!==G&&G,z=f.skip_to_step;if(D.hasOwnProperty("variable")&&""!==D.variable){var H=Object(h.__)("Delay","wp-marketing-automations");return M?Y.hasOwnProperty("duration")&&(H+=" of ".concat(Y.duration," ").concat(Y.type," ").concat(Y.timing," ")):H+=" "+Object(h.__)("till","wp-marketing-automations"),D.hasOwnProperty("variable")&&""!==D.variable&&(H+=" ".concat(Object(h.__)("Orders meta key","wp-marketing-automations")," ").concat(D.variable," ").concat(Object(h.__)("value","wp-marketing-automations"))),D.hasOwnProperty("time")&&""!==D.time&&(H+=" ".concat(Object(h.__)("till","wp-marketing-automations")," ").concat(Object(ot.format)(bwfcrm_contacts_data.time_format,ct()(D.time,"HH:mm:ss")))),D.hasOwnProperty("in_contact_timezone")&&D.in_contact_timezone?H+=" ".concat(Object(h.__)("in Contact's Timezone","wp-marketing-automations"),"."):H+=".",R&&!Object(k.isEmpty)(z)&&z.hasOwnProperty("step")&&""!=z.step&&z.hasOwnProperty("name")&&""!=z.name&&(H+=" ".concat(Object(h.__)("Jump to","wp-marketing-automations")," ").concat(z.name,".")),H}break;default:return Object(a.createElement)(a.Fragment,null)}return Object(a.createElement)(a.Fragment,null)};return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)(Z.d,{type:"target",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick"},Object(a.createElement)("div",{className:"bwf-node-icon icon-delay"},Object(a.createElement)(Q.a,{size:28,icon:"time-left"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(h.__)("Step","wp-marketing-automations")+" "+n),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(h.__)("Delay","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-node-action"})),Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-content"},Object(a.createElement)("div",{className:"bwf-step-brick"},Object(a.createElement)("div",{className:"bwf-step-content-content"},st.hasOwnProperty(u)&&Object(a.createElement)("div",{className:"bwf-node-content-type"},st[u]),Object(a.createElement)("div",{className:"bwf-node-content-label bwf-two-line-ellipse-text",title:p()},p()))))),Object(a.createElement)("div",{className:"bwf-node-status"},Object(a.createElement)("div",{className:"bwf-queued-status-wrap"},Object(a.createElement)("span",{className:"bwf-node-status-label"},Object(h.__)("Queued","wp-marketing-automations")),Object(a.createElement)("span",{className:"bwf-node-status-count"},i.hasOwnProperty("queued")?Object(o.ic)(parseInt(i.queued)):0)),Object(a.createElement)("div",{className:"bwf-status-wrap"},Object(a.createElement)("span",{className:"bwf-node-status-label"},Object(h.__)("Completed","wp-marketing-automations")),Object(a.createElement)("span",{className:"bwf-node-status-count"},i.hasOwnProperty("completed")?Object(o.ic)(parseInt(i.completed)):0))))),Object(a.createElement)(Z.d,{type:"source",position:"bottom",isConnectable:!1}))},mt=function(t){return Object(a.createElement)("div",{className:t&&t.data&&t.data.direction&&"no"===t.data.direction?"bwf-yes-no-node  bwf-no-node":"bwf-yes-no-node bwf-yes-node"},Object(a.createElement)(Z.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(a.createElement)("span",{className:"bwf-yes-no-wrap"},t&&t.data&&t.data.direction&&"no"===t.data.direction?Object(h.__)("No","wp-marketing-automations"):Object(h.__)("Yes","wp-marketing-automations")),Object(a.createElement)(Z.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))},ft=function(t){var e=t.id,n=t.data,r=void 0===n?{}:n,i=r.stats,c=void 0===i?{}:i,s=r.desc_text,l=void 0===s?"":s,u=r.desc,m=void 0===u?"":u;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick"},Object(a.createElement)("div",{className:"bwf-node-icon icon-split-test"},Object(a.createElement)(Q.a,{size:26,icon:"split-test"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(h.__)("Step","wp-marketing-automations")+" "+e),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(h.__)("Split Path","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-node-action"})),Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-content"},Object(a.createElement)("div",{className:"bwf-step-brick bwf-split-wrap"},Object(a.createElement)("div",{className:"bwf-step-content-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},""!==l?l:"-"),""!==m&&Object(a.createElement)("div",{className:"bwf-node-content-label bwf-node-desc bwf-two-line-ellipse-text"},m))))),Object(a.createElement)("div",{className:"bwf-node-status bwf-node-mt-10"},Object(a.createElement)("div",{className:"bwf-status-wrap"},Object(a.createElement)("span",{className:"bwf-node-status-label"},Object(h.__)("Completed","wp-marketing-automations")),Object(a.createElement)("span",{className:"bwf-node-status-count"},c.hasOwnProperty("completed")?Object(o.ic)(parseInt(c.completed)):0))))),Object(a.createElement)(Z.d,{type:"source",position:"bottom",isConnectable:!1}))},pt=function(t){var e=t.data,n=void 0===e?{}:e,r=Object(o.Ac)(),i=n.path,c=void 0===i?"1":i;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-splitpath-node-wrapper"},Object(a.createElement)(Z.d,{type:"target",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-split-node split-path-"+c},Object(h.__)("Path","wp-marketing-automations")+" "+r[c])),Object(a.createElement)(Z.d,{type:"source",position:"bottom",isConnectable:!1,style:{opacity:0}}))},bt=function(){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)(Z.d,{type:"source",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-node-content bwf-end"},Object(a.createElement)("div",{className:"bwf-node-content-item"},Object(h.__)("End","wp-marketing-automations")))))},dt=(n(1368),n(1101),n(28));function vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var a,r,o=[],i=!0,c=!1;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(o.push(a.value),!e||o.length!==e);i=!0);}catch(t){c=!0,r=t}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return yt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var ht=function(t){var e=t.stepTitle,n=void 0===e?"":e,r=t.onClose,i=t.stepId,s=t.automationId,l=t.eventSlug,u=vt(Object(a.useState)(!0),2),m=u[0],f=u[1],p=vt(Object(a.useState)(!1),2),b=p[0],d=p[1],v=vt(Object(a.useState)([]),2),y=v[0],O=v[1],w=Object(Z.l)(),j=Object(Z.n)().setCenter;Object(a.useEffect)((function(){!function(){try{c()({path:Object(o.y)("/automation/".concat(s,"/split/").concat(i,"/preview")),method:"GET"}).then((function(t){f(!1),200===t.code?Object(k.isEmpty)(t.result)||O(t.result):d(!0)}))}catch(t){d(!0),f(!1)}}()}),[i]);var g=Object(a.useRef)(),_={end:bt,wait:ut,split:ft,action:rt,yesNoNode:mt,splitpath:pt,conditional:et};Object(a.useEffect)((function(){Object(k.isNull)(document.querySelector("#bwf-single-automation-wrap"))||(g.current=document.querySelector("#bwf-single-automation-wrap").getBoundingClientRect())}),[m]),Object(a.useEffect)((function(){var t=0,e=0,n=w.getState().nodes;if(n.length&&g.current&&!m){var a=n[0];a.hasOwnProperty("__rf")?(t=a.__rf.position.x+140,e=a.__rf.position.y):(t=a.position.x+140,e=a.position.y),e=parseFloat(e)+.4*parseFloat(g.current.height),j(t,e,.8)}}),[m,y,g.current]);return Object(a.createElement)(S.Modal,{title:Object(h.sprintf)(Object(h.__)("Preview - %s ","wp-marketing-automations"),n),onRequestClose:function(){return r(!0)},className:"bwf-admin-modal bwf-admin-modal-xxxl bwf-split-path-analytics-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(a.createElement)(o.b.Provider,{value:{automationId:s,eventSlug:l,stepId:i}},Object(a.createElement)("div",{className:"bwf-single-automation-wrap",id:"bwf-single-automation-wrap"},m?Object(a.createElement)(J.a,null):Object(a.createElement)(a.Fragment,null,b?Object(a.createElement)(dt.a,{status:"error"},Object(h.__)("Unable to fetch split path preview","wp-marketing-automations")):Object(a.createElement)(Z.f,{defaultZoom:.9,minZoom:.5,maxZoom:3,nodeTypes:_,nodesConnectable:!1,nodesDraggable:!1,zoomOnScroll:!1,zoomOnDoubleClick:!1,paneMoveable:!0,panOnScroll:!0,elements:Object(K.a)(y,!0)},Object(a.createElement)(Z.a,{color:"#fff"}),Object(a.createElement)(Z.c,{showInteractive:!1}))))))},Ot=(n(1369),function(t){var e=t.fill,n=t.height,r=void 0===n?16:n;return Object(a.createElement)("span",{className:"bwf-ripple-wrap",style:{height:"".concat(r,"px")}},Object(a.createElement)("span",{className:P()("dot",{transition:"#09B29C"===e,"bwf-mr-16":void 0!==e}),style:{"--ripple-var":e}}))});function wt(t){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(){return(jt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function gt(t){return function(t){if(Array.isArray(t))return St(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Nt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(){_t=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function s(t,e,n,a){var r=e&&e.prototype instanceof m?e:m,o=Object.create(r.prototype),i=new _(a||[]);return o._invoke=function(t,e,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return k()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=w(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=l(t,e,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(t,n,i),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var u={};function m(){}function f(){}function p(){}var b={};c(b,r,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(E([])));v&&v!==e&&n.call(v,r)&&(b=v);var y=p.prototype=m.prototype=Object.create(b);function h(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){var a;this._invoke=function(r,o){function i(){return new e((function(a,i){!function a(r,o,i,c){var s=l(t[r],t,o);if("throw"!==s.type){var u=s.arg,m=u.value;return m&&"object"==wt(m)&&n.call(m,"__await")?e.resolve(m.__await).then((function(t){a("next",t,i,c)}),(function(t){a("throw",t,i,c)})):e.resolve(m).then((function(t){u.value=t,i(u)}),(function(t){return a("throw",t,i,c)}))}c(s.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=l(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,u;var r=a.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function g(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function E(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function e(){for(;++a<t.length;)if(n.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},h(O.prototype),c(O.prototype,o,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,a,r,o){void 0===o&&(o=Promise);var i=new O(s(e,n,a,r),o);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},h(y),c(y,i,"Generator"),c(y,r,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var a=e.pop();if(a in t)return n.value=a,n.done=!1,n}return n.done=!0,n}},t.values=E,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(g),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(n,a){return i.type="throw",i.arg=t,e.next=n,a&&(e.method="next",e.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),g(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var r=a.arg;g(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function Et(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}function kt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var a,r,o=[],i=!0,c=!1;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(o.push(a.value),!e||o.length!==e);i=!0);}catch(t){c=!0,r=t}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return o}(t,e)||Nt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(t,e){if(t){if("string"==typeof t)return St(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(t,e):void 0}}function St(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var xt=function(t){var e=t.automationId,n=kt(Object(a.useState)(!0),2),i=n[0],s=n[1],l=kt(Object(a.useState)({}),2),u=l[0],m=l[1],f=kt(Object(a.useState)({}),2),p=f[0],b=f[1],d=kt(Object(a.useState)(""),2),v=d[0],y=d[1],O=kt(Object(a.useState)(""),2),w=O[0],j=O[1];Object(a.useEffect)((function(){A()}),[]);var g=Object(o.Ac)(),N=Object(_.a)().getAutomationData,S=Object(E.a)().setAutomationData,x=N().title,P=void 0===x?"":x;Object(r.a)("analytics",""!==P&&""===v?P:v,!0,!1,null,e,!1,!0);var L,A=function(){var t,n=(t=_t().mark((function t(){return _t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c()({path:Object(o.y)("/automation/".concat(e,"/split-stats")),method:"GET"}).then((function(t){if(200===t.code){if(t.hasOwnProperty("result")&&!Object(k.isEmpty)(t.result)&&t.result.hasOwnProperty("data")&&!Object(k.isEmpty)(t.result.data)&&m(t.result.data),t.hasOwnProperty("result")&&!Object(k.isEmpty)(t.result)&&t.result.hasOwnProperty("automation_data")&&!Object(k.isEmpty)(t.result.automation_data)){var e=t.result.automation_data,n=e.title,a=void 0===n?"":n,r=e.event,o=void 0===r?"":r;""!==a&&y(a),""!==o&&j(o),S("data",t.result.automation_data)}s(!1)}}));case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0),s(!1);case 9:case"end":return t.stop()}}),t,null,[[0,5]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){Et(o,a,r,i,c,"next",t)}function c(t){Et(o,a,r,i,c,"throw",t)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),I=Object(a.createElement)("div",{className:"bwf-split-analytics-item-header"},Object(a.createElement)("div",{className:"bwf-split-analytics-header-left"},Object(a.createElement)("div",{className:"bwf-split-analytics-header-title"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})),Object(a.createElement)("div",{className:"bwf-split-analytics-header-date"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-15"})),Object(a.createElement)("div",{className:"bwf-split-analytics-header-tag bwf-split-ongoing"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-10"}))),Object(a.createElement)("div",{className:"bwf-split-analytics-header-right"},Object(a.createElement)("div",{className:"bwf-split-analytics-header-preview"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})))),C=Object(a.createElement)("div",{className:"bwf-split-analytics-item"},Object(a.createElement)("div",{className:"bwf-split-description"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15"})),Object(a.createElement)("div",{className:"bwf-split-analytics-path-wrapper"},[1,2].map((function(t){return Object(a.createElement)("div",{className:"bwf-split-analytics-path-item",key:t},Object(a.createElement)("div",{className:"bwf-split-analytics-path-header"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-15"})),Object(a.createElement)("div",{className:"bwf-split-analytics-path-content"},gt(Array(8)).map((function(t,e){return Object(a.createElement)("div",{className:"bwf-split-test-path-content-stat",key:e},Object(a.createElement)("span",{className:"bwf-split-test-path-content-value"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-30 bwf-h-15"})),Object(a.createElement)("span",{className:"bwf-split-test-path-content-label"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})))}))))})))),F=function(t){var e=t.path,n=void 0===e?[]:e,r=t.desc,o=void 0===r?"":r;return Object(k.isEmpty)(n)?Object(a.createElement)("div",{className:"bwf-split-analytics-item"},""!==o&&Object(a.createElement)("div",{className:"bwf-split-description"},Object(a.createElement)("span",{className:"bwf-split-desc-heading"},Object(h.__)("Description","wp-marketing-automations")),":",Object(a.createElement)("span",{className:"bwf-split-desc-text"},o)),Object(a.createElement)("div",{className:"bwf-split-analytics-path-wrapper"},Object(a.createElement)("div",{className:"bwf-mb-10"},Object(h.__)("No paths found","wp-marketing-automations")))):Object(a.createElement)("div",{className:"bwf-split-analytics-item"},""!==o&&Object(a.createElement)("div",{className:"bwf-split-description"},Object(a.createElement)("span",{className:"bwf-split-desc-heading"},Object(h.__)("Description","wp-marketing-automations")),":",Object(a.createElement)("span",{className:"bwf-split-desc-text"},o)),Object(a.createElement)("div",{className:"bwf-split-analytics-path-wrapper"},n.map((function(t,e){var n=t.tile,r=void 0===n?[]:n,o=t.path,i=void 0===o?"":o,c=t.winner,s=void 0!==c&&c;return Object(a.createElement)("div",{className:"bwf-split-analytics-path-item",key:e},Object(a.createElement)("div",{className:"bwf-split-analytics-path-header splitpath-"+i},Object(a.createElement)("span",{className:"bwf-split-path-title"},Object(h.__)("Path","wp-marketing-automations")+" "+g[i]),s&&Object(a.createElement)(Q.a,{icon:"winner"})),Object(a.createElement)("div",{className:"bwf-split-analytics-path-content"},r.map((function(t,e){return Object(a.createElement)("div",{className:"bwf-split-test-path-content-stat",key:e},Object(a.createElement)("span",{className:"bwf-split-test-path-content-value"},t.v),Object(a.createElement)("span",{className:"bwf-split-test-path-content-label"},t.l))}))))}))))},D=function(t){var n=t.started,r=void 0===n?"":n,i=t.status,c=void 0===i?"":i,s=t.title,l=void 0===s?"":s,u=t.completed,m=void 0===u?"":u,f=t.step_id,p=void 0===f?"":f;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-split-analytics-item-header"},Object(a.createElement)("div",{className:"bwf-split-analytics-header-left"},Object(a.createElement)("div",{className:"bwf-split-analytics-header-title"},""!==l?l:"-"),Object(a.createElement)("div",{className:"bwf-split-analytics-header-date"},""!==r?Object(a.createElement)(a.Fragment,null,Object(h.__)("Started on","wp-marketing-automations")," ",Object(o.db)(r),"completed"===c&&""!==m&&Object(a.createElement)(a.Fragment,null," | ",Object(h.__)(" Ended On","wp-marketing-automations")," ",Object(o.db)(m))):Object(a.createElement)(a.Fragment,null)),""!==c&&Object(a.createElement)("div",{className:"bwf-split-analytics-header-tag"},"ongoing"===c&&Object(a.createElement)(Ot,{fill:"#09B29C"}),Object(a.createElement)("span",null,c))),Object(a.createElement)("div",{className:"bwf-split-analytics-header-right"},Object(a.createElement)("div",{className:"bwf-split-analytics-header-preview components-form-toggle__input",onClick:function(t){t.stopPropagation(),b({stepTitle:""!==l?l:"",stepId:p,automationId:e})}},Object(a.createElement)(Q.a,{icon:"view",size:15}),Object(h.__)("Preview","wp-marketing-automations")))))},T=Object(a.createElement)("div",{className:"bwf-split-analytics-zero-state"},Object(a.createElement)(Q.a,{icon:"split-analytics-zero"}),Object(a.createElement)("div",{className:"bwf-heading"},Object(h.__)("No Split Path Created","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-desc"},Object(h.__)("Once you create a split path in the work flow. You stats will start appear here.","wp-marketing-automations")));return Object(a.createElement)("div",{className:"bwf-split-analytics-wrapper"},!i&&Object(k.isEmpty)(u)?Object(a.createElement)(a.Fragment,null,T):Object(a.createElement)(a.Fragment,null,i?Object(a.createElement)(a.Fragment,null,Object(a.createElement)(a.Fragment,null,[1,2].map((function(t){return Object(a.createElement)("div",{key:t,className:" bwf-c-s-collapsible"},Object(a.createElement)("div",{className:"bwf-c-s-heading"},Object(a.createElement)("div",{className:"bwf-accordion-label-elm"},I),Object(a.createElement)("span",{className:"acc-icon"})),Object(a.createElement)("div",{className:"bwf-c-s-full bwf-c-s-allow-edit bwf-accordion"},C))})))):Object(a.createElement)(W.a,{items:(L=[],u.map((function(t,e){L.push({key:e,label:D(t),display:F(t)})})),L)})),!Object(k.isEmpty)(p)&&Object(a.createElement)(Z.e,null,Object(a.createElement)(ht,jt({},p,{onClose:function(){return b({})},eventSlug:w}))))},Pt=n(324),Lt=(n(1370),n(1078)),At=n(1051);function It(t){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ct(t){return function(t){if(Array.isArray(t))return Ft(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Ft(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ft(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Dt(){Dt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function s(t,e,n,a){var r=e&&e.prototype instanceof m?e:m,o=Object.create(r.prototype),i=new _(a||[]);return o._invoke=function(t,e,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return k()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=w(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=l(t,e,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(t,n,i),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var u={};function m(){}function f(){}function p(){}var b={};c(b,r,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(E([])));v&&v!==e&&n.call(v,r)&&(b=v);var y=p.prototype=m.prototype=Object.create(b);function h(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){var a;this._invoke=function(r,o){function i(){return new e((function(a,i){!function a(r,o,i,c){var s=l(t[r],t,o);if("throw"!==s.type){var u=s.arg,m=u.value;return m&&"object"==It(m)&&n.call(m,"__await")?e.resolve(m.__await).then((function(t){a("next",t,i,c)}),(function(t){a("throw",t,i,c)})):e.resolve(m).then((function(t){u.value=t,i(u)}),(function(t){return a("throw",t,i,c)}))}c(s.arg)}(r,o,a,i)}))}return a=a?a.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=l(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,u;var r=a.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function g(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function E(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function e(){for(;++a<t.length;)if(n.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},h(O.prototype),c(O.prototype,o,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,a,r,o){void 0===o&&(o=Promise);var i=new O(s(e,n,a,r),o);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},h(y),c(y,i,"Generator"),c(y,r,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var a=e.pop();if(a in t)return n.value=a,n.done=!1,n}return n.done=!0,n}},t.values=E,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(g),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(n,a){return i.type="throw",i.arg=t,e.next=n,a&&(e.method="next",e.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),g(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var r=a.arg;g(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function Tt(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}function Mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(n),!0).forEach((function(e){Gt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Gt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.default=function(t){var e=t.match.params,n=e.automationId,i=e.type,u=void 0===i?"contact":i,p=t.isV2,b=void 0===p||p,d=Object(f.i)(),w=d.period,N=d.compare,S=d.interval,x=d.after,P=d.before,L=Object(s.a)(),A=L.setL2NavAlign,C=L.setL2Title,F=L.setPageCountData,T=(0,Object(l.a)().getPageCountData)(),M=Object(g.a)(),Y=M.fetchAnalytics,G=M.setAnalyticsValues,R=Object(O.a)(),H=R.getAnalyticsAutomationData,q=R.getAnalyticsTileData,U=R.getAnalyticsSingleAutomationFailedCount,V=R.getAnalyticsLoading,$=H(),Q=U(),W=$.title,J=void 0===W?"":W,Z=Object(E.a)().setAutomationData,K=V();Object(a.useEffect)((function(){Object(k.isEmpty)($)||Z("data",$)}),[$]),Object(a.useEffect)((function(){K||F(Yt(Yt({},T),{},{single_a_contacts:Q}))}),[Q]),Object(a.useEffect)((function(){return function(){G("automation",{})}}),[]);var X=Object(_.a)(),tt=X.getAutomationData,et=X.getAutomationId,nt=tt().title,at=void 0===nt?"":nt,rt=et(),ot=q(),it=Object(D.a)(Object(o.sb)()).formatAmount;Object(r.a)("analytics","",!0,!1,null,n,!1,b),Object(a.useEffect)((function(){A("left"),Object(o.l)("Automation #"+n),G("automationId",n)}),[]),Object(a.useEffect)((function(){C(parseInt(n)===parseInt(rt)&&""!==at&&""===J?at:""!==J?J:Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}))}),[at,J,n]);var ct=function(t){return t.compare="previous_year",Object(m.c)(t).primary},st=function(){for(var t=ct(d),e=0,n=0,a=0,r=0,o=0,i=0,c=0,s=0,l=[],u=t.after;u.isBefore(t.before);u.add(1,"days")){var m=Math.floor(11*Math.random()),f=Math.floor(Math.random()*parseInt(m)),p=Math.floor(Math.random()*parseInt(m)),b=Math.floor(Math.random()*parseInt(p)),v=Math.floor(100*Math.random()).toFixed(2),y=Math.floor(10*Math.random()),h=Math.floor(10*Math.random()),O=Math.floor(10*Math.random()),w=parseFloat(v)>0&&parseInt(b)>0?parseFloat(parseFloat(v)/parseInt(b)).toFixed(2):0;l.push({date_end_gmt:u.format("YYYY-MM-DD")+" 23:59:59",date_start_gmt:u.format("YYYY-MM-DD")+" 00:00:00",end_date:u.format("YYYY-MM-DD")+" 23:59:59",interval:u.format("YYYY-MM-DD"),start_date:u.format("YYYY-MM-DD")+" 00:00:00",subtotals:{click_rate:(f/m*100).toFixed(2),email_click:f,email_open:p,email_sents:m,open_rate:(p/m*100).toFixed(2),total_orders:b,total_revenue:parseFloat(v).toFixed(2),active_contacts:y,complete_contacts:h,unsubscribers:O,revenue:parseFloat(v).toFixed(2),conversions:b,aov:parseFloat(w).toFixed(2)}}),e+=p,n+=m,a+=f,r+=b,o=parseFloat(o)+parseFloat(v),i+=y,c+=h,s+=O}G("tiles",{click_rate:(a/n*100).toFixed(2),email_click:a,email_open:e,email_sents:n,open_rate:(e/n*100).toFixed(2),total_orders:r,total_revenue:o,active_contacts:i,complete_contacts:c,unsubscribers:s,revenue:o,conversions:r,aov:(parseFloat(o)/parseInt(r)).toFixed(2)}),G("analytics",l),G("isLoading",!1)},lt=function(){var t,e=(t=Dt().mark((function t(e,a){var r,i,s,l;return Dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(G("analytics",[]),G("tiles",[]),Object(o.Sb)()){t.next=13;break}return t.prev=3,t.next=6,c()({path:Object(o.y)("/automation/".concat(n,"/contacts?limit=1&offset=0&type=failed")),method:"GET"}).then((function(t){t.hasOwnProperty("result")&&t.result.hasOwnProperty("automation_data")&&Z("data",t.result.automation_data)}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),console.log(t.t0);case 11:return setTimeout((function(){st()}),1e3),t.abrupt("return");case 13:if(r=ct(e),i="",s="",l="",!r){t.next=34;break}Object(k.isEmpty)(r.after)||(i=r.after.format("YYYY-MM-DD HH:mm:ss")),Object(k.isEmpty)(r.before)||(s=r.before.format("YYYY-MM-DD 23:59:59")),t.t1=u,t.next="email"===t.t1?23:"sms"===t.t1?25:"whatsapp"===t.t1?27:"contact"===t.t1?29:31;break;case 23:return l=1,t.abrupt("break",33);case 25:return l=2,t.abrupt("break",33);case 27:return l=3,t.abrupt("break",33);case 29:return l=4,t.abrupt("break",33);case 31:return l=1,t.abrupt("break",33);case 33:Object(k.isEmpty)(i)||Object(k.isEmpty)(s)||Y(n,i,s,a,1,l);case 34:case"end":return t.stop()}}),t,null,[[3,8]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){Tt(o,a,r,i,c,"next",t)}function c(t){Tt(o,a,r,i,c,"throw",t)}i(void 0)}))});return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){if("split"!==u){var t=d.hasOwnProperty("interval")?d.interval:"day";lt(d,t)}}),[w,N,S,x,P,u]);var ut=[{slug:"contact",name:Object(h.__)("Contacts","wp-marketing-automations"),path:"/automation/".concat(n,"/analytics/contact")},{slug:"email",name:Object(h.__)("Emails","wp-marketing-automations"),path:"/automation/".concat(n,"/analytics/email")}];Object(k.isEmpty)(Object(o.w)())||ut.push({slug:"sms",name:Object(h.__)("SMS","wp-marketing-automations"),path:"/automation/".concat(n,"/analytics/sms")}),Object(o.Sb)()&&ut.push({slug:"split",name:Object(h.__)("Split Path","wp-marketing-automations"),path:"/automation/".concat(n,"/analytics/split")});var mt=function(t){return Object(k.isEmpty)(ot)||!ot.hasOwnProperty(t)||Object(k.isNull)(ot[t])?0:ot[t]},ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"contact";return"email"===t?[{key:"email_sents",title:Object(h.__)("Sent","wp-marketing-automations"),icon:"sent-new",value:parseInt(mt("email_sents"))},{key:"open_rate",title:Object(h.__)("Open Rate","wp-marketing-automations"),icon:"open-rate",value:parseFloat(mt("open_rate"))+" %"},{key:"click_rate",title:Object(h.__)("Click Rate","wp-marketing-automations"),icon:"click-rate",value:parseFloat(mt("click_rate"))+" %"}].concat(Ct(Object(o.fc)()?[{key:"total_orders",title:Object(h.__)("Orders","wp-marketing-automations"),icon:"order-summary",value:mt("total_orders")},{key:"total_revenue",title:Object(h.__)("Revenue","wp-marketing-automations"),icon:"revenue-new",value:it(mt("total_revenue")),isCurrency:!0}]:[])):"sms"===t?[{key:"email_sents",title:Object(h.__)("Sent","wp-marketing-automations"),icon:"sent",value:parseInt(mt("email_sents"))},{key:"email_click",title:Object(h.__)("Clicks","wp-marketing-automations"),icon:"click-rate",value:parseInt(mt("email_click"))}].concat(Ct(Object(o.fc)()?[{key:"total_orders",title:Object(h.__)("Orders","wp-marketing-automations"),icon:"order-summary",value:parseInt(mt("total_orders"))},{key:"total_revenue",title:Object(h.__)("Revenue","wp-marketing-automations"),icon:"revenue-new",value:it(mt("total_revenue")),isCurrency:!0}]:[])):"contact"===t?[{key:"active_contacts",title:Object(h.__)("Active Contacts","wp-marketing-automations"),icon:"add-contact-new",value:parseInt(mt("active_contacts"))},{key:"complete_contacts",title:Object(h.__)("Completed Contacts","wp-marketing-automations"),icon:"contact-new",value:parseInt(mt("complete_contacts"))}].concat(Ct(Object(o.fc)()?[{key:"conversions",title:Object(h.__)("Orders","wp-marketing-automations"),icon:"order-summary",value:mt("conversions")},{key:"revenue",title:Object(h.__)("Revenue","wp-marketing-automations"),icon:"revenue-new",value:it(mt("revenue")),isCurrency:!0},{key:"aov",title:Object(h.__)("AOV","wp-marketing-automations"),icon:"order-revenue",value:it(parseFloat(mt("aov"))),isCurrency:!0}]:[]),[{key:"unsubscribers",title:Object(h.__)("Unsubscribes","wp-marketing-automations"),icon:"unsubscribes",value:parseInt(mt("unsubscribers"))}]):void 0};return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>#bwfcrm-page{ overflow: auto !important; }</style>"}}),Object(a.createElement)(y.a,null),Object(a.createElement)("div",{className:"bwf-single-automation-body-header",style:{paddingBottom:"8px"}},Object(a.createElement)("div",{className:"bwf-content-header-left"},Object(a.createElement)("div",{className:"bwf-content-header-title2"},Object(h.__)("Analytics","wp-marketing-automations")),!Object(o.Sb)()&&o.e)),Object(a.createElement)(Pt.a,{tabs:ut,selected:u}),Object(a.createElement)("div",{className:"bwf-crm-analytics-wrap bwf-crm-emails-report-wrap bwf-table-with-border "},!o.Qb&&!Object(o.Sb)()&&Object(a.createElement)(At.a,{onPage:!0,modalContent:{proLink:Object(o.ab)("upgrade",{utm_medium:"Automation+Analytics+Upgrade+Modal"})}}),"split"!==u?Object(a.createElement)(a.Fragment,null,Object(a.createElement)(v,{query:d},o.Qb&&Object(a.createElement)(Lt.a,{title:Object(h.__)("Analytics","wp-marketing-analytics"),message:"contact"===u?Object(h.__)("Analyse the sample data to review Contact Analytics. Use this report to assess key metrics for contacts within the automation.","wp-marketing-automations"):Object(h.__)("Analyse the sample data to review Email Analytics. Use this report to assess key email metrics with the automation.","wp-marketing-automations"),proLink:Object(o.ab)("upgrade",{utm_medium:"Automation+Analytics+Sample+Data+Notice"})})),Object(a.createElement)("div",{className:"bwf_clear_16"}),Object(a.createElement)(j,{query:d,type:u,automationId:n,metrics:function(t){return ft(t)}}),Object(a.createElement)("div",{className:"bwf_clear_24"}),Object(a.createElement)(I,{query:d,type:u,metrics:function(t){return ft(t)}}),function(){switch(u){case"email":return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(z,{query:d,automationId:n}));case"sms":return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(B,{query:d,automationId:n}));default:return Object(a.createElement)(a.Fragment,null)}}()):Object(o.Sb)()?Object(a.createElement)(xt,{automationId:n}):null))}}}]);