(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{1278:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1125),o=n(68),c=n(3),i=n(1),u=n(345),s=n(54),l=n(5),m=n(7),b=n(26),f=n(2),d=n(208),p=n(12),O=n(9),j=n.n(O),g=n(11);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(){var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,a,r,o){var u=a&&a.prototype instanceof i?a:i,s=Object.create(u.prototype);return _(s,"_invoke",function(n,a,r){var o,i,u,s=0,l=r||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,i=0,u=e,b.n=n,c}};function f(n,a){for(i=n,u=a,t=0;!m&&s&&!r&&t<l.length;t++){var r,o=l[t],f=b.p,d=o[2];n>3?(r=d===a)&&(u=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=f&&((r=n<2&&f<o[1])?(i=0,b.v=a,b.n=o[1]):f<d&&(r=n<3||o[0]>a||a>d)&&(o[4]=n,o[5]=a,b.n=d,i=0))}if(r||n>1)return c;throw m=!0,a}return function(r,l,d){if(s>1)throw TypeError("Generator is already running");for(m&&1===l&&f(l,d),i=l,u=d;(t=i<2?e:u)||!m;){o||(i?i<3?(i>1&&(b.n=-1),f(i,u)):b.n=u:b.v=u);try{if(s=2,o){if(i||(r="next"),t=o[r]){if(!(t=t.call(o,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(u=TypeError("The iterator does not provide a '"+r+"' method"),i=1);o=e}else if((t=(m=b.n<0)?u:n.call(a,b))!==c)break}catch(t){o=e,i=1,u=t}finally{s=1}}return{value:t,done:m}}}(n,r,o),!0),s}var c={};function i(){}function u(){}function s(){}t=Object.getPrototypeOf;var l=[][a]?t(t([][a]())):(_(t={},a,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(l);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,_(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return u.prototype=s,_(m,"constructor",s),_(s,"constructor",u),u.displayName="GeneratorFunction",_(s,r,"GeneratorFunction"),_(m),_(m,r,"Generator"),_(m,a,(function(){return this})),_(m,"toString",(function(){return"[object Generator]"})),(w=function(){return{w:o,m:b}})()}function _(e,t,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}(_=function(e,t,n,a){function o(t,n){_(e,t,(function(e){return this._invoke(t,n,e)}))}t?r?r(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,a)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=y(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t,n,a,r,o,c){try{var i=e[o](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(a,r)}var C=function(e){var t=Object(p.i)(),n=e.filter,r=e.config,o=e.audienceDetail,u=e.modalData,s=e.setModal,l=e.setOpen,b=e.reloadList,d=e.title,O=void 0===d?"":d,y=e.desc,_=e.setError,v=e.setOpenProModal,k=Object(a.useContext)(c.h),C=function(){var e,a=(e=w().m((function e(){var a,m,d;return w().w((function(e){for(;;)switch(e.p=e.n){case 0:if(Object(c.fc)()){e.n=1;break}return v(!0),e.a(2);case 1:if(_(!1),""!==O){e.n=2;break}return _(Object(i.__)("Name is required","wp-marketing-automations")),e.a(2);case 2:if(a=Object(p.j)(n,t,r.filters),!Object(f.isEmpty)(a)){e.n=3;break}_(Object(i.__)("Please fill the filter","wp-marketing-automations")),e.n=7;break;case 3:return s({loading:!0}),m=o?Object(c.C)("/audience/".concat(o.ID)):Object(c.C)("/audience"),e.p=4,e.n=5,j()({path:m,method:"POST",data:{name:O,data:{desc:y||"",filters:a}}}).then((function(e){if(200!==e.code)throw Error(Object(c.w)(null==e?void 0:e.message));Object(c.Z)()||(bwfcrm_contacts_data.first_audience_id=1),k(e.message),Object(c.Pb)(k,3e3),b(),s({loading:!1,success:!1,error:!1,message:""}),l(!1)})).catch((function(e){throw Error(Object(c.w)(null==e?void 0:e.message))}));case 5:e.n=7;break;case 6:e.p=6,d=e.v,_(d.message),s(h(h({},u),{},{loading:!1}));case 7:return e.a(2)}}),e,null,[[4,6]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){E(o,a,r,c,i,"next",e)}function i(e){E(o,a,r,c,i,"throw",e)}c(void 0)}))});return function(){return a.apply(this,arguments)}}();return Object(a.createElement)(g.a,{isPrimary:!0,onClick:function(){return C()},disabled:u.loading,isBusy:u.loading},Object(a.createElement)("span",{className:"bwf-display-flex"},!Object(c.fc)()&&Object(a.createElement)(m.a,{icon:"king",size:16,color:"#fff"}),o?Object(i.__)("Save","wp-marketing-automations"):Object(i.__)("Add","wp-marketing-automations")))},S=n(1109),P=n(1171),N=n(1172),A=n(356),x=n(40);function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,c,i=[],u=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);u=!0);}catch(e){s=!0,r=e}finally{try{if(!u&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}t.default=function(){Object(c.m)(Object(i.__)("Audiences","wp-marketing-automations"));var e=Object(S.a)(!1,!0),t=Object(p.i)(),n=D(Object(a.useState)(!1),2),O=n[0],j=n[1],g=D(Object(a.useState)({loading:!1,status:!1}),2),y=g[0],w=g[1],_=D(Object(a.useState)({loading:!1,error:!1,success:!1,message:""}),2),v=_[0],h=_[1],k=D(Object(a.useState)(!1),2),E=k[0],T=k[1],M=Object(P.a)().fetch,L=Object(N.a)(),F=L.getOffset,G=(0,L.getPerPageCount)(),B=F(),q=t.s,U=function(){Object(c.fc)()&&(M(G,B,q||""),T(!1))},I=D(Object(a.useState)(!1),2),R=I[0],z=I[1],J=D(Object(a.useState)(""),2),Z=J[0],$=J[1],H=D(Object(a.useState)(!1),2),K=H[0],Q=H[1],V=D(Object(a.useState)(""),2),W=V[0],X=V[1],Y=D(Object(a.useState)(!1),2),ee=Y[0],te=Y[1],ne=[{type:"heading",data:{title:Object(i.__)("Create Audiences & Send Personalised Messaging","wp-marketing-automations"),desc:Object(i.__)("Get started Segment your contacts based on various filters and send them targeted campaigns","wp-marketing-automations")}},{type:"image-desc",data:[{img:Object(c.u)()+"audience/audience1.png",title:Object(i.__)("Create dynamic audiences","wp-marketing-automations"),desc:Object(i.__)("Pick from over 60+ conditions to create audiences that auto-update based on activity","wp-marketing-automations")},{img:Object(c.u)()+"audience/audience2.png",title:Object(i.__)("Send targeted campaigns","wp-marketing-automations"),desc:Object(i.__)("Use dynamic audiences and reach them with targeted campaigns","wp-marketing-automations")}]},{type:"buttons",data:{buttons:[{text:Object(i.__)("Create Audiences","wp-marketing-automations"),proCheck:!0,onClick:function(){Object(c.fc)()?(Q(!0),$(""),z(!1),X("")):j(!0)}}]}},{type:"link-wth-text",data:{text:Object(i.__)("Curious about audiences?","wp-marketing-automations"),link:"https://funnelkit.com/docs/autonami-2/contacts/audiences/",linkText:Object(i.__)("Learn More","wp-marketing-automations")}}],ae=Object(a.createElement)(l.Button,{isPrimary:!0,key:"add",className:"bwf-display-flex",onClick:function(){Object(c.fc)()?(Q(!0),$(""),z(!1),X("")):j(!0)}},!Object(c.fc)()&&Object(a.createElement)(m.a,{icon:"king",size:"16",color:"#fff"}),Object(i.__)("Create Audience","wp-marketing-automations"));Object(A.a)("manage_audiences","",Object(i.__)("ALL AUDIENCE","wp-marketing-automations"),ae);return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(o.a,null),0!==c.q?Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.b,{setModelData:w,setDescription:X,setTitle:$,setAudienceData:z,setOpen:Q,setPreview:j,contactCountLoad:E,setContactCountLoad:T,menuButtons:ae,pitchData:ne}),Object(a.createElement)(s.a,{deleteEntityName:y.deleteEntityName,confirmButtonText:y.buttonConfirm,cancelButtonText:y.buttonCancel,onConfirm:y.onConfirm,isLoading:y.loading,successMessage:y.success,errorMessage:y.error,onRequestClose:function(){return w({status:!1})},isOpen:y.status,modalTitle:Object(i.__)("Delete Audience","wp-marketing-automations"),isDelete:!0})):Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-content-header-new"},Object(a.createElement)("div",{className:"bwf-content-header-left"},Object(a.createElement)("div",{className:"bwf-content-header-title"},Object(i.__)("Audiences","wp-marketing-automations")),!Object(c.fc)()&&c.e)),Object(a.createElement)(u.a,{data:ne})),!Object(c.fc)()&&Object(a.createElement)(x.b,{isOpen:O,onRequestClose:function(){return j(!1)},modalContent:{isFeature:!0,featureTitle:Object(i.__)("Audiences","wp-marketing-automations"),proLink:Object(c.ib)("upgrade",{utm_medium:"Audiences+Upgrade+Modal"}),image:Object(c.vb)("audience.png"),benefit:Object(i.__)("Unlock Audiences and other awesome features.","wp-marketing-automations")}}),K&&Object(a.createElement)(l.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-audience-modal-update"},Object(a.createElement)("div",{className:"bwf-modal-header bwf-display-flex bwf-space-between"},Object(a.createElement)("div",{className:"bwf-modal-heading"},R?Object(i.__)("Edit Audience","wp-marketing-automations"):Object(i.__)("Add Audience","wp-marketing-automations")),Object(a.createElement)("span",{onClick:function(){return Q(!1)},className:"bwf-modal-close bwf-cursor-pointer"},Object(a.createElement)(m.a,{icon:"close",color:"#353030"}))),Object(a.createElement)("div",{className:"bwf-audience-modal-content"},Object(a.createElement)("div",{className:"bwf-audience-content-wrap"},Object(a.createElement)("div",{className:"bwf_clear_30"}),ee&&Object(a.createElement)(b.a,{status:"error",onRemove:function(){return te(!1)}},ee),Object(a.createElement)(l.TextControl,{type:"text",value:Z,autoFocus:!0,placeholder:Object(i.__)("Enter Name","wp-marketing-automations"),label:Object(i.__)("Name","wp-marketing-automations"),onChange:function(e){$(e),Object(f.isEmpty)(e)?te(Object(i.__)("Name is required","wp-marketing-automations")):te(!1)},disabled:v&&v.loading}),Object(a.createElement)(l.TextareaControl,{placeholder:Object(i.__)("Enter description","wp-marketing-automations"),label:Object(i.__)("Description","wp-marketing-automations"),value:W,onChange:function(e){return X(e)},disabled:v&&v.loading}),Object(a.createElement)("div",{className:"bwf-normal-text bwf-n-b"},Object(i.__)("Filters","wp-marketing-automations")),Object(a.createElement)(d.a,{siteLocale:"en-US",currency:Object(c.uc)()?bwfcrm_contacts_data.currency:{},config:{title:Object(i.__)("Select Rules","wp-marketing-automations"),filters:e,enableGrouping:!0,hideAdvanceControl:!0,footerComponent:function(e){return Object(a.createElement)("div",{style:{marginBottom:"-24px"},className:"bwf-display-flex"},Object(a.createElement)(l.Button,{className:"bwf-cancel-btn",onClick:function(){return Q(!1)}},Object(i.__)("Cancel","wp-marketing-automations")),Object(a.createElement)(C,{filter:e.data,config:e.config,audienceDetail:R,setModal:h,modalData:v,setOpen:Q,title:Z,desc:W,error:ee,setError:te,reloadList:U,setOpenProModal:j}))}},disabled:v&&v.loading,path:"/manage/audience",query:R?R.data.filters:{}})))))}}}]);