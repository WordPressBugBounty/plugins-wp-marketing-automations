(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1119:function(t,e,n){"use strict";var r=n(0),a=n(1),o=n(9),c=n.n(o),i=n(3),s=n(348);function u(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var s=r&&r.prototype instanceof i?r:i,u=Object.create(s.prototype);return l(u,"_invoke",function(n,r,a){var o,i,s,u=0,l=a||[],f=!1,b={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,n){return o=e,i=0,s=t,b.n=n,c}};function m(n,r){for(i=n,s=r,e=0;!f&&u&&!a&&e<l.length;e++){var a,o=l[e],m=b.p,p=o[2];n>3?(a=p===r)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,l,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,p),i=l,s=p;(e=i<2?t:s)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,s)):b.n=s:b.v=s);try{if(u=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(f=b.n<0)?s:n.call(r,b))!==c)break}catch(e){o=t,i=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,a,o),!0),u}var c={};function i(){}function s(){}function f(){}e=Object.getPrototypeOf;var b=[][r]?e(e([][r]())):(l(e={},r,(function(){return this})),e),m=f.prototype=i.prototype=Object.create(b);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,l(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t}return s.prototype=f,l(m,"constructor",f),l(f,"constructor",s),s.displayName="GeneratorFunction",l(f,a,"GeneratorFunction"),l(m),l(m,a,"Generator"),l(m,r,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:o,m:p}})()}function l(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}(l=function(t,e,n,r){function o(e,n){l(t,e,(function(t){return this._invoke(e,n,t)}))}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))})(t,e,n,r)}function f(t,e,n,r,a,o,c){try{var i=t[o](c),s=i.value}catch(t){return void n(t)}i.done?e(s):Promise.resolve(s).then(r,a)}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,c,i=[],s=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(i.push(r.value),i.length!==e);s=!0);}catch(t){u=!0,a=t}finally{try{if(!s&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return m(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}e.a=function(t){var e=t.conversation,n=void 0===e?{}:e,o=n.ID,l=n.mode,m=n.type,p=t.onRequestClose,d=t.isOpen,g=t.contact,y=void 0===g?{}:g,h=b(Object(r.useState)({}),2),w=h[0],v=h[1],O=b(Object(r.useState)(!1),2),j=O[0],k=O[1],_=b(Object(r.useState)(""),2),N=_[0],E=_[1],S=function(){var t,e=(t=u().m((function t(){var e,n;return u().w((function(t){for(;;)switch(t.p=t.n){case 0:if(o&&!(!parseInt(o)>0)){t.n=1;break}return t.a(2);case 1:return k(!0),t.p=2,t.n=3,c()({method:"GET",path:Object(i.C)("/v3/contacts/".concat(y.id,"/engagement/").concat(parseInt(o),"?mode=1"))});case 3:"result"in(e=t.v)&&v(e.result),t.n=5;break;case 4:t.p=4,n=t.v,console.log(n),n&&"message"in n?E(n.message):Object(a.__)("There are some technical difficulties while getting emails. Please contact support.","wp-marketing-automations");case 5:k(!1);case 6:return t.a(2)}}),t,null,[[2,4]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function c(t){f(o,r,a,c,i,"next",t)}function i(t){f(o,r,a,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){d&&S()}),[d]);return Object(r.createElement)(s.a,{isOpen:d,isLoading:j,onRequestClose:function(){p(),v({}),E("")},error:N,subject:![2,3].includes(parseInt(l))&&w?w.subject:"",body:w&&w.body?w.body:"",sourceType:m,mode:l,contact:t.contact,conversation:t.conversation,template:w})}},1284:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(179),o=n(78),c=n(147),i=n(1),s=n(3),u=n(5),l=n(1119),f=n(365),b=n(2),m=n(345),p=n(7);function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,c,i=[],s=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(i.push(r.value),i.length!==e);s=!0);}catch(t){u=!0,a=t}finally{try{if(!s&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}e.default=function(t){var e=t.contactId,n=d(Object(r.useState)({}),2),g=n[0],y=n[1],h=d(Object(r.useState)(!1),2),w=h[0],v=h[1],O=d(Object(r.useState)({status:!1,contactInfo:{}}),2),j=O[0],k=O[1],_=o.a.getContact,N=o.a.getContactLoading,E=o.a.getPushNotifications,S=o.a.getPushNotificationTotal,P=o.a.getPushNotificationLimit,I=o.a.getPushNotificationOffset,A=o.a.getPushNotificationPage,C=o.a.getPushNotificationLoading,T=_(),L=N(),G=Object(a.a)().fetchPushNotifications,x=E(),M=I(),q=P(),F=C(),R=A(),D=S();Object(r.useEffect)((function(){G(e,0,q)}),[]);var J=[{key:"notification_name",label:Object(i.__)("Notifications","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-word-break"},{key:"sent_on",label:Object(i.__)("Sent On","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-word-break"},{key:"clicks",label:Object(i.__)("Clicks","wp-marketing-automations"),isLeftAligned:!0}],U=function(t){return Object(r.createElement)("a",{className:"bwf-a-no-underline bwf_bold",onClick:function(){y(t),v(!0)}},Object(r.createElement)("span",{className:"bwf-mr-5 bwf-limit-word-inside bwf-w-210"},t.message?t.message:"-"))},$=x&&x.length>0?x.map((function(t){return"ID"in t&&parseInt(t.ID)>0&&[{display:U(t),value:t.subject},{display:Object(s.lb)(t.created_at,!1),value:t.created_at},{display:t.click?t.click:0,value:t.click}]})):[],z=Object(r.createElement)(m.a,{data:[{type:"icon",data:{class:"bwf-pb-gap",content:Object(r.createElement)(p.a,{icon:"zero-sales"})}},{type:"content",data:{class:"bwf-heading4-new bwf-pb-10",content:Object(i.__)("This contact has not opted for notification yet.","wp-marketing-automations")}},{type:"content",data:{class:"bwf-heading5-new bwf-pb-gap",content:Object(i.__)("Your notification will appear in the list once contact has opted for notification","wp-marketing-automations")}}]});return Object(r.createElement)("div",{className:"bwf-cs-contact-tab-data"},L||!T||T.hasOwnProperty("push-engage-token")&&!Object(b.isNull)(T["push-engage-token"])&&T["push-engage-token"]?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-content-header-new"},Object(r.createElement)("div",{className:"bwf-content-header-left"},F||L?Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-15"}):Object(r.createElement)("div",{className:"bwf-normal-text"},parseInt(D)>0&&Object(i.sprintf)(Object(i.__)("All Notifications (%d)","wp-marketing-automations"),parseInt(D)))),Object(r.createElement)("div",{className:"bwf-content-header-right"},F||L?Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-30"}):Object(r.createElement)(u.Button,{className:"bwf-btn-small is-blue",isPrimary:!0,onClick:function(){k({status:!0,contactInfo:T})}},Object(i.__)("Send Notification","wp-marketing-automations")))),Object(r.createElement)("div",{className:"bwf-c-s-data"},Object(r.createElement)("div",{className:"bwf-c-s-section"},Object(r.createElement)(c.a,{className:"contact-single-table contact-emails",headers:J,hideHeader:"yes",rows:$,query:{paged:R},totalRows:D,rowsPerPage:q,isLoading:F||L,showMenu:!1,onPageChange:function(t,n){G(e,(t-1)*q,q)},onQueryChange:function(t){return"per_page"===t?function(t){t!==q&&G(e,M,t)}:function(){return{}}},emptyMessage:Object(i.__)("No notification found","wp-marketing-automations")}),Object(r.createElement)(l.a,{onRequestClose:function(){return v(!1)},conversation:g,contact:T,isOpen:w}),j.status&&Object(r.createElement)(f.a,{contact:j.contactInfo,setSendMessageModel:k,onSuccess:function(){G(e,0,q)},messageType:"push-notification"})))):z)}}}]);