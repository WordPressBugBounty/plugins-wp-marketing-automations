(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{1124:function(e,t,n){"use strict";var r=n(2),a=n(51),o=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=["fetch","setStateProp"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(){var e=Object(a.a)("linkTriggerListData"),t=e.fetch,n=e.setStateProp,i=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,c),l=Object(a.a)("singleLinkTriggerData"),s=l.fetch,f=l.setStateProp;return u(u({},i),{},{fetchAll:function(e,a,i){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=arguments.length>4?arguments[4]:void 0;n("isLoading",!0);var s=e.s,f=u({offset:a,limit:i,search:s,status:c},!Object(r.isEmpty)(l)&&{category:l.map((function(e){return e.id})).join(",")});t("GET",Object(o.C)("/link-triggers"),f)},setLinkListValues:function(e,t){n(e,t)},fetchSingleLink:function(e){f("error",{}),s("GET",Object(o.C)("/link-trigger/".concat(e)))},setSingleLinkValue:function(e,t){f(e,t)}})}},1133:function(e,t,n){"use strict";var r=n(52);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=["getStateProp"];function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(){var e=Object(r.a)("linkTriggerListData"),t=e.getStateProp,n=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,o),a=Object(r.a)("singleLinkTriggerData"),i=a.getStateProp,l=a.getLoading;return c(c({},n),{},{getAllLists:function(){return t("data")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getCountData:function(){return t("countData")},getPerPageCount:function(){return parseInt(t("limit"))},getPageOffset:function(){return parseInt(t("offset"))},getTotalCount:function(){return parseInt(t("total_count"))},getActions:function(){return t("actions")},getSingleLinkLoad:function(){return l()},getSingleLinkData:function(){return i("data")},getLinkActionList:function(){return i("actionList")},getLinkActionSchemaList:function(){return i("actionSchema")},getLinkEditableStatus:function(){return i("isEditable")},getSingleLinkError:function(){return i("error")},getSingleLinkListData:function(){return i("listData")}})}},1162:function(e,t,n){"use strict";var r=n(77),a=n(0),o=n(2),i=n(1);t.a=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},l=Object(r.a)(),u=l.setActiveMultiple,s=l.setL2NavType,f=l.setL2Nav,b=l.resetHeaderMenu,m=l.setPageHeader,g=l.setPageCountData,p=l.setL2Content;return Object(a.useEffect)((function(){b(),u({leftNav:"link-triggers",rightNav:t}),s("menu"),f(c.links_triggers_nav),m(Object(i.__)("Link Triggers","wp-marketing-automations")),!Object(o.isEmpty)(n)&&g({templates:n}),e&&p(e)}),[n]),!0}},1318:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(5),o=n(3),i=n(7),c=n(1),l=n(1162),u=n(345),s=n(12),f=n(147),b=n(54),m=n(60),g=n(61),p=n(19),O=n(9),d=n.n(O),y=n(77),j=n(1124),v=n(1133),w=n(149),h=n(110),k=n(2),_=n(150),E=n(97);function P(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof c?r:c,u=Object.create(l.prototype);return S(u,"_invoke",function(n,r,a){var o,c,l,u=0,s=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,c=0,l=e,b.n=n,i}};function m(n,r){for(c=n,l=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,o=s[t],m=b.p,g=o[2];n>3?(a=g===r)&&(l=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(c=0,b.v=r,b.n=o[1]):m<g&&(a=n<3||o[0]>r||r>g)&&(o[4]=n,o[5]=r,b.n=g,c=0))}if(a||n>1)return i;throw f=!0,r}return function(a,s,g){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,g),c=s,l=g;(t=c<2?e:l)||!f;){o||(c?c<3?(c>1&&(b.n=-1),m(c,l)):b.n=l:b.v=l);try{if(u=2,o){if(c||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=o.return)&&t.call(o),c<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),c=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==i)break}catch(t){o=e,c=1,l=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var i={};function c(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(S(t={},r,(function(){return this})),t),f=u.prototype=c.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,S(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,S(f,"constructor",u),S(u,"constructor",l),l.displayName="GeneratorFunction",S(u,a,"GeneratorFunction"),S(f),S(f,a,"Generator"),S(f,r,(function(){return this})),S(f,"toString",(function(){return"[object Generator]"})),(P=function(){return{w:o,m:b}})()}function S(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(S=function(e,t,n,r){function o(t,n){S(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function C(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}var T=function(e){var t=e.isOpen,n=e.links,a=e.onSuccess,i=e.onError,l=e.onRequestClose,u=Object(E.useMutation)(function(){var e,t=(e=P().m((function e(t){return P().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,d()({path:Object(o.C)("/link-triggers/delete"),method:"DELETE",data:{ids:t}});case 1:return e.a(2,e.v)}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){C(o,r,a,i,c,"next",e)}function c(e){C(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){setTimeout((function(){return u.reset()}),2500),a&&a(),l&&l()},onError:function(){i&&i()}});return Object(r.createElement)(b.a,{modalTitle:Object(c.__)("Delete Trigger","wp-marketing-automations"),deleteEntityName:1===n.length?n[0].title:"".concat(n.length," Trigger"),confirmButtonText:Object(c.__)("Delete","wp-marketing-automations"),cancelButtonText:Object(c.__)("Cancel","wp-marketing-automations"),onConfirm:function(){return u.mutate(n.map((function(e){return e.ID})))},errorMessage:u.isError&&(u.error&&u.error.message?u.error.message:Object(c.__)("Unable to delete link triggers","wp-marketing-automations")),onRequestClose:function(){return!!l&&l()},isOpen:t,isDelete:!0})},L=n(44),A=n(203),D=n(26),N=n(347),x=n(1135);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(){return(M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function G(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof c?r:c,u=Object.create(l.prototype);return F(u,"_invoke",function(n,r,a){var o,c,l,u=0,s=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,c=0,l=e,b.n=n,i}};function m(n,r){for(c=n,l=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,o=s[t],m=b.p,g=o[2];n>3?(a=g===r)&&(l=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(c=0,b.v=r,b.n=o[1]):m<g&&(a=n<3||o[0]>r||r>g)&&(o[4]=n,o[5]=r,b.n=g,c=0))}if(a||n>1)return i;throw f=!0,r}return function(a,s,g){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,g),c=s,l=g;(t=c<2?e:l)||!f;){o||(c?c<3?(c>1&&(b.n=-1),m(c,l)):b.n=l:b.v=l);try{if(u=2,o){if(c||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=o.return)&&t.call(o),c<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),c=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==i)break}catch(t){o=e,c=1,l=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var i={};function c(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(F(t={},r,(function(){return this})),t),f=u.prototype=c.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,F(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,F(f,"constructor",u),F(u,"constructor",l),l.displayName="GeneratorFunction",F(u,a,"GeneratorFunction"),F(f),F(f,a,"Generator"),F(f,r,(function(){return this})),F(f,"toString",(function(){return"[object Generator]"})),(G=function(){return{w:o,m:b}})()}function F(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(F=function(e,t,n,r){function o(t,n){F(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function q(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){q(o,r,a,i,c,"next",e)}function c(e){q(o,r,a,i,c,"throw",e)}i(void 0)}))}}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,c=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(e,t)||$(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){if(e){if("string"==typeof e)return J(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Q=function(e){var t=e.selected,n=void 0===t?"all":t,a=e.menuButtons,i=void 0===a?Object(r.createElement)(r.Fragment,null):a,l=e.pitchData,O=void 0===l?{}:l,E=e.setOpenProModal,P=void 0===E?function(){}:E,S=Object(s.i)(),C=S.s,I=void 0===C?"":C,F=Object(y.a)().setActiveMultiple,q={all:"",inactive:1,active:2},B=V(Object(r.useState)(!1),2),z=B[0],J=B[1],Q=V(Object(r.useState)([]),2),K=Q[0],Y=Q[1],W=V(Object(r.useState)(!1),2),X=W[0],Z=W[1],ee=function(){Ve&&Ve(),Y([])},te=Object(r.useCallback)((function(e,t){switch(e){case"delete":Y(t),Z(!0);break;case"assign_category":if(Object(o.fc)()){var n=t.map((function(e){return e.ID}));Te(n.length>1?n:n[0])}else Me(!0)}}),[]);Object(r.useEffect)((function(){return ee(),Object(o.m)(Object(c.__)("Link Triggers","wp-marketing-automations")),function(){return ie("offset",0)}}),[]);var ne=Object(h.a)().getPageCountData,re=Object(y.a)().setPageCountData;Object(r.useEffect)((function(){F({leftNav:"link-triggers",rightNav:n})}),[n]);var ae=Object(j.a)(),oe=ae.fetchAll,ie=ae.setLinkListValues,ce=ae.setSingleLinkValue,le=Object(v.a)(),ue=le.getLoading,se=le.getAllLists,fe=le.getTotalCount,be=le.getPageOffset,me=le.getPerPageCount,ge=le.getPageNumber,pe=le.getCountData,Oe=le.getActions,de=le.getError,ye=se(),je=be(),ve=me(),we=ue(),he=fe(),ke=ge(),_e=pe(),Ee=Oe(),Pe=ne(),Se=de();Object(r.useEffect)((function(){re(R(R({},Pe),_e))}),[_e]);var Ce=Object(x.a)({type:8,fetch:function(e){return oe(S,je,ve,q.hasOwnProperty(n)?q[n]:"",e)}}),Te=Ce.setAssignCategoryItems,Le=Ce.renderCategoryColumn,Ae=Ce.renderCategorySelector,De=Ce.renderAssignCategoryModal,Ne=Ce.renderCategoryTags,xe=Ce.selectedCategories,Ie=Ce.refreshCategory,Me=Ce.setShowProModal,Ge=Ce.renderProModal,Fe=Ce.renderAssignCategoryButton,qe=Object(r.useMemo)((function(){var e={};if(Array.isArray(ye)){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=$(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(ye);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r.ID]=r}}catch(e){n.e(e)}finally{n.f()}}return e}),[ye]),Ue=Object(w.b)(qe),Be=Ue.singleSelectProps,Re=Ue.selectAllProps,ze=Ue.floatingBarProps,Ve=Ue.resetSelection,He=Ue.selected,$e=void 0===He?{}:He,Je=Object.keys($e).filter((function(e){return $e[e]})).length;Object(r.useEffect)((function(){oe(S,je,ve,q.hasOwnProperty(n)?q[n]:"",xe)}),[je,ve,S.s,n]),Object(r.useEffect)((function(){we||J(!1)}),[we]);var Qe,Ke=V(Object(r.useState)({loading:!1,status:!1}),2),Ye=Ke[0],We=Ke[1],Xe=Object(r.useContext)(o.h),Ze=function(){var e=U(G().m((function e(t){var r,a,i,l=arguments;return G().w((function(e){for(;;)switch(e.p=e.n){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},We(R(R({},r),{},{status:!0})),e.p=1,e.n=2,d()({path:Object(o.C)("/link-triggers/delete"),method:"DELETE",data:{ids:[t]}});case 2:if(!(a=e.v)||200!==a.code){e.n=3;break}Xe("Link trigger deleted"),We({status:!1}),oe(S,je,ve,q.hasOwnProperty(n)?q[n]:"",xe),Ie(!0),e.n=4;break;case 3:throw Error(Object(o.w)(null==a?void 0:a.message));case 4:e.n=6;break;case 5:e.p=5,i=e.v,We({status:!0,error:i.message?i.message:Object(c.__)("Error in deleting link","wp-marketing-automations")});case 6:Object(o.Pb)(Xe,3e3);case 7:return e.a(2)}}),e,null,[[1,5]])})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=U(G().m((function e(t){var r;return G().w((function(e){for(;;)switch(e.p=e.n){case 0:return Xe(Object(c.__)("Cloningâ€¦","wp-marketing-automations")),e.p=1,e.n=2,d()({path:Object(o.C)("/link-trigger/".concat(t,"/clone")),method:"GET"}).then((function(e){200==e.code&&(Xe(Object(c.__)("Link Trigger cloned","wp-marketing-automations")),oe(S,0,ve,q.hasOwnProperty(n)?q[n]:"",xe),Ie(!0))}));case 2:e.n=4;break;case 3:e.p=3,r=e.v,Xe(r.message);case 4:Object(o.Pb)(Xe,3e3);case 5:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),tt=function(e){switch(e.hasOwnProperty("status")?parseInt(e.status):1){case 1:return Object(r.createElement)("span",{className:"bwf-tags bwf-tag-red"},Object(c.__)("Inactive","wp-marketing-automations")," ");case 2:return Object(r.createElement)("span",{className:"bwf-tags bwf-tag-green"},Object(c.__)("Active","wp-marketing-automations")," ");default:return Object(r.createElement)("span",{className:"bwf-tags bwf-tag-orange"},Object(c.__)("Draft","wp-marketing-automations")," ")}},nt=function(e){return Object(r.createElement)(m.a,{label:Object(c.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(g.a,{isClickable:!0,onInvoke:function(){ce("listData",e),Object(s.l)({page:"autonami",path:"/link-trigger/"+parseInt(e.ID)},"/",{}),n()}},Object(r.createElement)(p.a,{justify:"space-between"},Object(r.createElement)(p.c,null,Object(c.__)("Edit","wp-marketing-automations")))),Object(r.createElement)(g.a,{isClickable:!0,onInvoke:function(){var t,r,a=Object(o.zb)()+"/?bwfan-link-trigger="+e.hash;t=a,(r=document.createElement("textarea")).value=t,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),Xe(Object(c.__)("Link copied","wp-marketing-automations")),Object(o.Pb)(Xe,3e3),n()}},Object(r.createElement)(p.a,{justify:"flex-start"},Object(r.createElement)(p.c,null,Object(c.__)("Copy Link","wp-marketing-automations")))),Object(r.createElement)(g.a,{isClickable:!0,onInvoke:function(){Object(o.fc)()?et(parseInt(e.ID)):P(!0),n()}},Object(r.createElement)(p.a,{justify:"space-between"},Object(r.createElement)(p.c,null,Object(c.__)("Duplicate","wp-marketing-automations")),!Object(o.fc)()&&Object(r.createElement)(p.c,null,o.e))),Fe({children:Object(r.createElement)(g.a,{isClickable:!0,onInvoke:function(){Object(o.fc)()?Te(e.ID):Me(!0),n()}},Object(r.createElement)(p.a,{justify:"space-between"},Object(r.createElement)(p.c,null,Object(c.__)("Assign Category","wp-marketing-automations")),!Object(o.fc)()&&Object(r.createElement)(p.c,null,o.e)))}),Object(r.createElement)(g.a,{isClickable:!0,onInvoke:function(){var t={modalTitle:Object(c.__)("Delete Trigger"),status:!0,deleteEntityName:e.title,buttonConfirm:Object(c.__)("Confirm","wp-marketing-automations"),buttonCancel:Object(c.__)("Cancel","wp-marketing-automations"),isDelete:!0};We(R(R({},t),{},{onConfirm:function(){return Ze(e.ID,t)}})),n()}},Object(r.createElement)(p.a,{justify:"flex-start"},Object(r.createElement)(p.c,null,Object(c.__)("Delete","wp-marketing-automations")))))}})},rt=[{key:"select_link",label:Object(r.createElement)(L.a,M({type:"checkbox",checked:!1,onChange:function(){}},Re)),isLeftAligned:!1,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"actions",label:"",isLeftAligned:!1,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"name",label:Object(c.__)("Name","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210 bwf-table-col-sticky bwf-sticky-left"}].concat(H(null!==Fe()?[{key:"category",label:Object(c.__)("Category","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-max-w-360"}]:[]),[{key:"created_on",label:Object(c.__)("Created On","wp-marketing-automations"),isLeftAligned:!0,required:!0},{key:"desc",label:Object(c.__)("Description","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"},{key:"linkaction",label:Object(c.__)("Actions","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-360 bwf-max-w-360"},{key:"autologin",label:Object(c.__)("Auto Login","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-100"},{key:"clicks",label:Object(c.__)("Clicks","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-100"},{key:"status",label:Object(c.__)("Status","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-100"}]),at=function(e){return Object(r.createElement)("a",{href:"admin.php?page=autonami&path=/link-trigger/"+e.ID,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(t){t.preventDefault(),ce("listData",e),Object(s.l)({page:"autonami",path:"/link-trigger/"+e.ID},"/",{})}},Object(r.createElement)("b",null,e.title.charAt(0).toUpperCase()+e.title.slice(1)+" "))},ot=function(e){var t="-";return e.hasOwnProperty("data")&&e.data.hasOwnProperty("desc")&&!Object(k.isEmpty)(e.data.desc)&&(t=Object(r.createElement)("p",{className:"bwf-p-0 bwf-m-0"},e.data.desc)),t},it=function(e){if(e.hasOwnProperty("data")&&e.data.hasOwnProperty("actions")&&!Object(k.isEmpty)(e.data.actions)){var t=e.data.actions,n=[],a=[];return Object.keys(t).map((function(e){Ee.hasOwnProperty(e)&&(n.length<5&&n.push(Ee[e]),a.push(Object(r.createElement)("span",{key:e},Ee[e])))})),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-table-v-center"},Object(r.createElement)("span",null,Object(k.isEmpty)(n)?"-":n.join(", ")),!Object(k.isEmpty)(a)&&a.length>5&&Object(r.createElement)(_.a,{items:a,count:5})))}return"-"},ct=function(e){var t="No";return e.hasOwnProperty("data")&&e.data.hasOwnProperty("enable_auto_login")&&e.data.enable_auto_login&&(t="Yes"),t},lt=ye.map((function(e){return[{display:Be&&Be[e.ID]&&Object(r.createElement)(L.a,M({type:"checkbox",checked:!1,onChange:function(){}},Be[e.ID])),value:""},{display:nt(e),value:"action"},{display:e.hasOwnProperty("title")?at(e):"-",value:""}].concat(H(null!==Fe()?[{display:Le(e.category||[]),value:""}]:[]),[{display:e.created_at?Object(o.lb)(e.created_at):" - ",value:e.created_at},{display:ot(e),value:""},{display:it(e),value:""},{display:ct(e),value:""},{display:e.hasOwnProperty("total_clicked")?e.total_clicked:"-",value:""},{display:tt(e),value:""}])})),ut=function(e){e!==ve&&ie("limit",e)},st=we||z||""!==I||0!==he||!["","all"].includes(n)||Se,ft=[{slug:"link-triggers_all",name:Object(c.__)("All","wp-marketing-automations"),path:"/link-triggers/"},{slug:"link-triggers_active",name:Object(c.__)("Active","wp-marketing-automations"),path:"/link-triggers/active"},{slug:"link-triggers_inactive",name:Object(c.__)("Inactive","wp-marketing-automations"),path:"/link-triggers/inactive/"}];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-content-header-new"},Object(r.createElement)("div",{className:"bwf-content-header-left"},Object(r.createElement)("div",{className:"bwf-content-header-title"},Object(c.__)("Link Triggers","wp-marketing-automations")),parseInt(he)>0&&Object(r.createElement)("div",{className:"bwf-content-header-count"},Object(c.sprintf)(Object(c._n)("(%s Result)","(%s Results)",he,"wp-marketing-automations"),he))),Object(r.createElement)("div",{className:"bwf-content-header-right"},st&&i)),Se&&Object(r.createElement)(D.a,{status:"error"},Se.message),st?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(N.a,{tabs:ft,selected:"link-triggers_".concat(n),count:Pe,disableUrlUpdate:!0,onChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ie("offset",0),J(!0),Object(s.l)({page:"autonami",path:t},"/",{})}}),Object(r.createElement)("div",{className:"bwf_clear_16"}),Object(r.createElement)(f.a,{className:"bwf-link-table has-search",title:"",rows:lt,headers:rt,query:{paged:ke},rowsPerPage:ve,totalRows:he,isLoading:we,onPageChange:function(e,t){ie("offset",(e-1)*ve)},onQueryChange:function(e){return"per_page"!==e?function(){}:ut},showMenu:!1,rowHeader:!0,actions:Je>0?[Object(r.createElement)(w.a,M({key:"link-bulk-action",actions:(Qe=null!==Fe(),[].concat(H(Qe?[{id:"assign_category",icon:"add-circle",isPro:!0,hint:Object(c.__)("Assign Category","wp-marketing-automations")}]:[]),[{id:"delete",icon:"delete",hint:Object(c.__)("Delete","wp-marketing-automations")}])),onAction:te,inLine:!0,reset:ee},ze))]:[Object(r.createElement)("div",{key:"table-actions",className:"bwf-w-100p bwf-display-flex-column gap-16"},Object(r.createElement)("div",{className:"bwf-display-flex"},Object(r.createElement)(A.a,{isLoading:we,searchTerm:null==S?void 0:S.s,showResultCount:!1,setSearchData:function(e){if(Object(k.size)(e))Object(s.l)({s:e},"/",S);else{var t=Object(k.cloneDeep)(S);t.hasOwnProperty("s")&&(null==t||delete t.s),J(!0),Object(s.l)(t,"/",{})}}}),Ae({disabled:we})),Ne())],emptyMessage:Object(c.__)("No link trigger found.","wp-marketing-automations")})):Object(r.createElement)(u.a,{data:O}),Object(r.createElement)(b.a,{modalTitle:Object(c.__)("Delete Trigger","wp-marketing-automations"),content:Ye.content,deleteEntityName:Ye.deleteEntityName,confirmText:Ye.confirmText,confirmButtonText:Ye.buttonConfirm,cancelButtonText:Ye.buttonCancel,onConfirm:Ye.onConfirm,isLoading:Ye.loading,successMessage:Ye.success,errorMessage:Ye.error,onRequestClose:function(){return We({status:!1})},isOpen:Ye.status,isDelete:!Ye.hasOwnProperty("isDelete")||Ye.isDelete}),Object(r.createElement)(T,{links:K,isOpen:X,onSuccess:function(){oe(S,0,ve,q.hasOwnProperty(n)?q[n]:"",xe),Ie(!0),ee()},onError:ee,onRequestClose:function(){return Z(!1)}}),De({items:ye}),Ge({proLink:Object(o.ib)("upgrade",{utm_medium:"Link+Trigger+Categories+Upgrade+Modal"})}))},K=n(11);function Y(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof c?r:c,u=Object.create(l.prototype);return W(u,"_invoke",function(n,r,a){var o,c,l,u=0,s=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,c=0,l=e,b.n=n,i}};function m(n,r){for(c=n,l=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,o=s[t],m=b.p,g=o[2];n>3?(a=g===r)&&(l=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(c=0,b.v=r,b.n=o[1]):m<g&&(a=n<3||o[0]>r||r>g)&&(o[4]=n,o[5]=r,b.n=g,c=0))}if(a||n>1)return i;throw f=!0,r}return function(a,s,g){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,g),c=s,l=g;(t=c<2?e:l)||!f;){o||(c?c<3?(c>1&&(b.n=-1),m(c,l)):b.n=l:b.v=l);try{if(u=2,o){if(c||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=o.return)&&t.call(o),c<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),c=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==i)break}catch(t){o=e,c=1,l=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var i={};function c(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(W(t={},r,(function(){return this})),t),f=u.prototype=c.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,W(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,W(f,"constructor",u),W(u,"constructor",l),l.displayName="GeneratorFunction",W(u,a,"GeneratorFunction"),W(f),W(f,a,"Generator"),W(f,r,(function(){return this})),W(f,"toString",(function(){return"[object Generator]"})),(Y=function(){return{w:o,m:b}})()}function W(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(W=function(e,t,n,r){function o(t,n){W(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function X(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,c=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var te=function(e){var t=e.onCloseModal,n=Object(r.useContext)(o.h),l=Z(Object(r.useState)(!1),2),u=l[0],f=l[1],b=Z(Object(r.useState)(""),2),m=b[0],g=b[1],p=Z(Object(r.useState)(null),2),O=p[0],y=p[1],v=Z(Object(r.useState)(null),2),w=v[0],h=v[1],_=Object(j.a)().setSingleLinkValue;Object(r.useEffect)((function(){f(!1),y(""),g("")}),[]);var E=function(){var e,t=(e=Y().m((function e(){var t,r;return Y().w((function(e){for(;;)switch(e.p=e.n){case 0:return f(!0),g(""),e.p=1,e.n=2,d()({path:Object(o.C)("/link-trigger/"),method:"POST",data:{title:O,desc:w,only_title:!0}});case 2:if(!(t=e.v)||200!=t.code){e.n=3;break}Object(o.gb)()||(bwfcrm_contacts_data.first_link_trigger_id=1),n(t.message),_("listData",{title:O,status:0}),Object(s.l)({page:"autonami",path:"/link-trigger/"+t.result.id},"/",{}),e.n=4;break;case 3:throw Error(Object(o.w)(null==t?void 0:t.message));case 4:e.n=6;break;case 5:e.p=5,r=e.v,f(!1),g(r.message);case 6:Object(o.Pb)(n,3e3);case 7:return e.a(2)}}),e,null,[[1,5]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){X(o,r,a,i,c,"next",e)}function c(e){X(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),P=function(){Object(k.isEmpty)(O)?g(Object(c.__)("Name is required.","wp-marketing-automations")):(g(""),E())};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.Modal,{className:"bwf-admin-modal bwf-admin-modal-480 bwf-admin-modal-no-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-admin-m-header-new"},Object(r.createElement)("div",{className:"bwf-admin-m-title"},Object(c.__)("Add Link Trigger","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-admin-m-close",onClick:t},Object(r.createElement)(i.a,{icon:"close",size:20}))),Object(r.createElement)("div",{className:"bwf_clear_16"}),Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&P()}},m&&Object(r.createElement)(D.a,{status:"error",onRemove:function(){return g("")}},m),Object(r.createElement)(a.TextControl,{placeholder:Object(c.__)("Enter link trigger name","wp-marketing-automations"),autoFocus:!0,label:Object(c.__)("Name","wp-marketing-automations"),value:O||"",onChange:function(e){return y(e)},disabled:u}),Object(r.createElement)(a.TextareaControl,{label:Object(c.__)("Description","wp-marketing-automations"),type:"text",value:w||"",placeholder:Object(c.__)("Enter Description","wp-marketing-automations"),onChange:function(e){h(e)}}),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(r.createElement)(K.a,{onClick:function(){return t()},className:"bwf-cancel-btn"},Object(c.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(K.a,{isPrimary:!0,disabled:u,isBusy:u,onClick:function(){P()}},Object(c.__)("Add","wp-marketing-automations"))))))},ne=n(68),re=n(40);function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,c=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return oe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=e.match.params.type,n=void 0===t?"all":t,s=ae(Object(r.useState)(!1),2),f=s[0],b=s[1],m=ae(Object(r.useState)(!1),2),g=m[0],p=m[1],O=Object(r.createElement)(a.Button,{isPrimary:!0,className:"bwf-display-flex",onClick:function(){Object(o.fc)()?p(!0):b(!0)}},!Object(o.fc)()&&Object(r.createElement)(i.a,{icon:"king",size:"16",color:"#fff"}),Object(r.createElement)("span",null,Object(c.__)("Create Link Trigger","wp-marketing-automations")));Object(l.a)(Object(c.__)("Link Triggers","wp-marketing-automations"),O,n);var d=[{type:"heading",data:{title:Object(c.__)("Explore the power of link interactions","wp-marketing-automations"),desc:Object(c.__)("Add responses, track behaviour, and automate workflows with link triggers maximize engagement.","wp-marketing-automations")}},{type:"image-desc",data:[{img:Object(o.u)()+"link-triggers/link-trigger1.png",title:Object(c.__)("Send dynamic links that trigger actions","wp-marketing-automations"),desc:Object(c.__)("Use link triggers to update tags, lists or trigger automations","wp-marketing-automations")},{img:Object(o.u)()+"link-triggers/link-trigger2.png",title:Object(c.__)("Track each click and get insights","wp-marketing-automations"),desc:Object(c.__)("Personalize contact journey based on their interactions","wp-marketing-automations")}]},{type:"buttons",data:{buttons:[{text:Object(c.__)("Create Link Trigger","wp-marketing-automations"),proCheck:!0,onClick:function(){Object(o.fc)()?p(!0):b(!0)}}]}},{type:"link-wth-text",data:{text:Object(c.__)("Curious about link triggers?","wp-marketing-automations"),link:"https://funnelkit.com/docs/autonami-2/link-triggers/",linkText:Object(c.__)("Learn More","wp-marketing-automations")}}];return Object(r.createElement)("div",{className:"bwf-p-24 bwf-link-trigger-wrap"},Object(r.createElement)(ne.a,null),Object(o.gb)()&&0!==o.q?Object(r.createElement)(Q,{selected:n,menuButtons:O,pitchData:d,setOpenProModal:b}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-content-header-new"},Object(r.createElement)("div",{className:"bwf-content-header-left"},Object(r.createElement)("div",{className:"bwf-content-header-title"},Object(c.__)("Link Triggers","wp-marketing-automations")),!Object(o.fc)()&&o.e)),Object(r.createElement)(u.a,{data:d})),!Object(o.fc)()&&Object(r.createElement)(re.b,{isOpen:f,onRequestClose:function(){return b(!1)},modalContent:{isFeature:!0,featureTitle:Object(c.__)("Link Triggers","wp-marketing-automations"),proLink:Object(o.ib)("upgrade",{utm_medium:"Create+Link+Triggers+Upgrade+Modal"}),image:Object(o.vb)("link-triggers.png"),benefit:Object(c.__)("Unlock Link Triggers and other awesome features.","wp-marketing-automations")}}),g&&Object(r.createElement)(te,{onCloseModal:function(){return p(!1)}}))}}}]);