(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1123:function(e,t,n){"use strict";var r=n(52),a=(n(78),n(2));function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=["getStateProp"];function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var m=function(e,t){if(!Array.isArray(e)||0===e.length)return!1;var n,r=s(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!(!1 in a)){var o,c=s(a.fields);try{for(c.s();!(o=c.n()).done;){var i=o.value;if(!(!1 in i)&&t===i.slug)return i}}catch(e){c.e(e)}finally{c.f()}}}}catch(e){r.e(e)}finally{r.f()}return!1},b=function(e,t){if(0===Object(a.size)(e))return!1;for(var n in e){var r=e[n];if(r&&r.slug&&t===r.slug)return r}return!1};t.a=function(){var e=Object(r.a)("groupdata"),t=e.getStateProp;return l(l({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,c)),{},{getGroups:function(){return t("groups")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getTotalCount:function(){return parseInt(t("total"))},getFieldBySlug:function(e){var n=t("groups"),r=t("extra_fields"),a=m(n,e);return(!1!==a||!1!==(a=b(r,e)))&&a.ID},getCountData:function(){return t("countData")}})}},1127:function(e,t,n){"use strict";var r=n(51),a=n(3);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=["fetch","setStateProp"];function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(){var e=Object(r.a)("groupdata"),t=e.fetch,n=e.setStateProp;return l(l({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,c)),{},{fetch:function(e){t("GET",Object(a.C)("/v3/groupfields"),"","",e)},setStateGroupValues:function(e){n("groups",e)},setGroupValues:function(e,t){n(e,t)}})}},1128:function(e,t,n){"use strict";var r=n(0);n(557);function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.count,n=void 0===t?5:t,o=e.className,c=void 0===o?"":o;return Object(r.createElement)("div",{className:"bwf-accordion-placeholder ".concat(c)},a(Array(n)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-mb-16 bwf-c-s-collapsible",key:"bwf-accordion-placeholder__".concat(t),"data-accordion":t},Object(r.createElement)("div",{className:"bwf-placeholder-temp"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp"}))})))}},1197:function(e,t,n){},1306:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(9),o=n.n(a),c=n(1),i=n(179),l=n(78),u=n(1123),s=n(112),f=n(382),m=n(3),b=n(5),p=n(178),d=n(44),y=n(2),O=n(41),v=n(7),j=n(66);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e){var t=e.index,n=e.label,a=e.value,o=e.type,i=e.options,l=e.onChange,u=e.placeholder,s=e.fieldSaving,f=void 0===s?"":s,w=Object(r.useRef)(),g=Object(c.__)("Click to Edit","wp-marketing-automations"),E=h(Object(r.useState)(a),2),_=E[0],k=E[1],S=h(Object(r.useState)(!1),2),P=S[0],N=S[1],C=Object(m.Gb)();Object(m.Vc)(w,(function(){return N(!1)}));var A=function(e,t){var n=!1;try{e&&JSON.parse(e).includes(t)&&(n=!0)}catch(e){}return n};return Object(r.createElement)("div",{className:"bwf-c-s-list"},Object(r.createElement)("div",{className:"bwf-c-s-label"},n||t),Object(r.createElement)("div",{className:"bwf-c-s-value"},Object(r.createElement)("span",{className:"bwf-editable-span",title:g,onClick:function(e){N(!0)}},P&&Object(r.createElement)(O.a,{ref:w,focusOnMount:!0,onFocusOutside:function(e){N(!1)}},Object(r.createElement)("div",{className:"bwf-form-fields bwf-field-edit-popover bwf-s-c-field-t-".concat(parseInt(o))},Object(r.createElement)("div",{className:"bwf-form-header"},n),[4,5,6].includes(parseInt(o))&&Object(y.isEmpty)(i)?Object(c.__)("Add Options to select here","wp-marketing-automations"):Object(r.createElement)(r.Fragment,null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";switch(e){case 1:return Object(r.createElement)(b.TextControl,{value:n,className:"bwf-pop-input-field",placeholder:o||Object(c.__)("Type here","wp-marketing-automations"),onChange:function(e){k(e)},maxLength:99,onKeyPress:function(e){"Enter"==e.key&&(l(t,n),N(!1))},help:Object(c.__)("Max 99 characters","wp-marketing-automations")});case 2:return Object(r.createElement)(b.TextControl,{type:"number",value:n,className:"bwf-pop-input-field",placeholder:o||Object(c.__)("Type here","wp-marketing-automations"),onKeyPress:function(e){"Enter"==e.key&&(l(t,n),N(!1))},onChange:function(e){parseInt(e)>=-9999999999&&parseInt(e)<=9999999999&&k(e)},max:9999999999,help:Object(c.__)("Max 9999999999","wp-marketing-automations")});case 3:return Object(r.createElement)(b.TextareaControl,{value:n,onChange:function(e){k(e)}});case 4:var i=[{key:"",label:Object(c.__)("Select Option","wp-marketing-automations")}];return a.map((function(e){i.push({key:e,label:e})})),Object(r.createElement)(j.b,{onKeyPress:function(e){"Enter"==e.key&&(l(t,n),N(!1))},onChange:function(e){k(e)},options:i,selected:n,key:"s-c-dynamic-field-select"});case 5:var u=[];return a.map((function(e){u.push({value:e,label:e})})),Object(r.createElement)("div",{onKeyPress:function(e){"Enter"==e.key&&(l(t,n),N(!1))}},Object(r.createElement)(b.RadioControl,{label:Object(c.__)("Select an Option","wp-marketing-automations"),selected:n,options:u,onChange:function(e){k(e)}}));case 6:return Object(r.createElement)("div",{className:"bwf-display-flex-column gap-8"},a.map((function(e,a){return Object(r.createElement)(d.a,{key:a,label:e,checked:A(n,e),onChange:function(t){var r=[];try{r=n?JSON.parse(n):[],t?r.push(e):r=r.filter((function(t){return t!==e})),k(JSON.stringify(r))}catch(t){r.push(e),k(JSON.stringify(r))}},onKeyPress:function(e){"Enter"==e.key&&(l(t,n),N(!1))}})})));case 7:return Object(r.createElement)("input",{type:"date",value:n,style:{width:"100%"},onChange:function(e){k(e.target.value)},onKeyPress:function(e){"Enter"==e.key&&(l(t,n),N(!1))}});case 8:return Object(r.createElement)(p.a,{currentDate:["","0000-00-00 00:00:00"].includes(n)?"":n,onChange:function(e){k(e)},inPopOver:!1,is12Hour:!0});case 9:return Object(r.createElement)("input",{type:"time",className:"bwf-h-36",value:n,placeholder:"HH:MM",style:{width:"100%"},onChange:function(e){k(e.target.value)},onKeyPress:function(e){"Enter"==e.key&&(l(t,n),N(!1))}});case 10:var s=[{key:"",label:Object(c.__)("Select timezone","wp-marketing-automations")}];return Object.entries(C).map((function(e){var t=h(e,2),n=t[0],r=t[1];s.push({key:n,label:r})})),Object(r.createElement)(j.b,{onKeyPress:function(e){"Enter"==e.key&&(l(t,n),N(!1))},onChange:function(e){k(e)},options:s,selected:n,key:"s-c-dynamic-field-select"})}}(parseInt(o),_,i,u),Object(r.createElement)("div",{className:"bwf_text_right"},9!==o&&Object(r.createElement)(b.Button,{isTertiary:!0,className:"bwf-modal-cancel-btn",onClick:function(e){e.stopPropagation(),l(t,""),N(!1)}},Object(c.__)("Clear","wp-marketing-automations")),Object(r.createElement)(b.Button,{className:"bwf-modal-cancel-btn",onClick:function(e){e.stopPropagation(),N(!1)}},Object(c.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(b.Button,{isPrimary:!0,className:"bwf-pop-button bwf-no-rippple",onClick:function(e){e.stopPropagation(),l(t,_),N(!1)}},Object(c.__)("Update","wp-marketing-automations")))))),function(){if(f==t)return Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-15"});var e=Object(r.createElement)("div",{className:"bwf-info-empty-value"},Object(r.createElement)(v.a,{icon:"circle-plus",size:14}),Object(r.createElement)("span",null,Object(c.__)("Add","wp-marketing-automations")));if(Object(y.isEmpty)(a))return e;if(6===o)try{var n=JSON.parse(a);Object(y.isEmpty)(n)||(e=n.sort().join(", "))}catch(e){}else e=a;if(9===o&&C.hasOwnProperty(a)&&(e=C[a]),7===o)try{e=Object(m.kb)(a,!1,!1)}catch(e){}if(8===o)try{e=a&&!["","0000-00-00 00:00:00"].includes(a)?Object(m.lb)(a,!1,!1):"-"}catch(e){}if(9===o)try{e=a&&!["",null].includes(a)?Object(m.mb)(a,!0):"-"}catch(e){}return Object(r.createElement)("div",{className:"bwf-non-empty-sc"},Object(r.createElement)("span",{className:"bwf-s-c-f-value"},e),!P&&Object(r.createElement)(v.a,{icon:"edit",color:"#fff",size:16}))}())))},E=n(47),_=n(11),k=n(28),S=n(166),P=n(26);function N(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||F(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,u=Object.create(l.prototype);return A(u,"_invoke",function(n,r,a){var o,i,l,u=0,s=a||[],f=!1,m={p:0,n:0,v:e,a:b,f:b.bind(e,4),d:function(t,n){return o=t,i=0,l=e,m.n=n,c}};function b(n,r){for(i=n,l=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,o=s[t],b=m.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=b&&((a=n<2&&b<o[1])?(i=0,m.v=r,m.n=o[1]):b<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,m.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,s,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&b(s,p),i=s,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(m.n=-1),b(i,l)):m.n=l:m.v=l);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=m.n<0)?l:n.call(r,m))!==c)break}catch(t){o=e,i=1,l=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var c={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(A(t={},r,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,A(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,A(f,"constructor",u),A(u,"constructor",l),l.displayName="GeneratorFunction",A(u,a,"GeneratorFunction"),A(f),A(f,a,"Generator"),A(f,r,(function(){return this})),A(f,"toString",(function(){return"[object Generator]"})),(C=function(){return{w:o,m:m}})()}function A(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(A=function(e,t,n,r){function o(t,n){A(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function T(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){T(o,r,a,c,i,"next",e)}function i(e){T(o,r,a,c,i,"throw",e)}c(void 0)}))}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||F(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){if(e){if("string"==typeof e)return G(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var D=function(e){var t=Object(r.useContext)(m.h),n=e.contactId,a=e.lists,i=e.saveList,l=x(Object(r.useState)(a),2),u=l[0],s=l[1],f=x(Object(r.useState)(!1),2),p=f[0],d=f[1],O=x(Object(r.useState)(!1),2),j=O[0],h=O[1],w=x(Object(r.useState)([]),2),g=w[0],A=w[1],T=x(Object(r.useState)(""),2),F=T[0],G=T[1],D=function(){var e=I(C().m((function e(r){var a;return C().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,o()({path:Object(m.C)("/v3/contacts/".concat(n,"/lists")),method:"DELETE",data:{lists:[parseInt(r.ID)]}}).then((function(e){200==e.code?(t(e.message),s(u.filter((function(e){return e.ID!=r.ID}))),i("lists",u.filter((function(e){return e.ID!=r.ID})))):t(e.message),Object(m.Pb)(t,3e3)}));case 1:e.n=3;break;case 2:e.p=2,a=e.v,t(a.message),Object(m.Pb)(t,3e3);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=I(C().m((function e(r){var a,c;return C().w((function(e){for(;;)switch(e.p=e.n){case 0:return h(!0),a=r.map((function(e){var t={};return e.hasOwnProperty("id")&&(t.id=e.id),e.hasOwnProperty("name")&&(t.value=e.name),t})),e.p=1,e.n=2,o()({path:Object(m.C)("/v3/contacts/".concat(n,"/lists")),method:"POST",data:{lists:a},headers:{"Content-Type":"application/json"}}).then(function(){var e=I(C().m((function e(n){var r,a;return C().w((function(e){for(;;)switch(e.n){case 0:t(n.message),Object(y.isEmpty)(n.result)||(r=n.result.list_added.map((function(e){return e})),a=[].concat(N(u),N(r)),a=Object(y.uniqBy)(a,"ID"),s(a),i("lists",a)),A([]),d(!1),h(!1),Object(m.Pb)(t,3e3);case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw Error(Object(m.w)(null==e?void 0:e.message))}));case 2:e.n=4;break;case 3:e.p=3,c=e.v,G(c.message),h(!1),s(r);case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),B=g&&g.map((function(e){return{key:e.id,label:e.name}})),z=function(){0===g.length?G(Object(c.__)("Please select a list.","wp-marketing-automations")):(G(""),M(g))};return Object(r.createElement)("div",{className:"bwf-c-s-list bwf-c-s-tags-ui"},Object(r.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Lists","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-c-s-value"},Object(r.createElement)("div",{className:"bwf-sc-tag-value"},u&&u.map((function(e,t){return Object(r.createElement)(E.a,{key:t,label:e.name,id:e.id,screenReaderLabel:e.name,remove:function(){return D(e)}})})),Object(r.createElement)("span",{className:"bwf-tag bwf-c-s-tag-add bwf-cursor-pointer",onClick:function(){return d(!0)}},Object(r.createElement)(v.a,{icon:"circle-plus",size:14})," ",Object(r.createElement)("span",null,Object(c.__)("Add","wp-marketing-automations")))),p&&Object(r.createElement)(b.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-overflow-visible bwf-h--core-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(c.__)("Add Lists","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return d(!1)},className:"bwf-modal-close"},Object(r.createElement)(v.a,{icon:"close",color:"#353030"}))),F&&Object(r.createElement)(P.a,{status:"error",onRemove:function(){return G("")}},F),Object(r.createElement)("div",{onKeyPress:function(e){"Enter"==e.key&&z()}},Object(r.createElement)("div",{style:j?{pointerEvents:"none"}:{}},Object(r.createElement)(k.a,{autocompleter:S.a,multiple:!0,allowFreeTextSearch:!0,inlineTags:!1,selected:B,onChange:function(e){e=e.map((function(e){return e.hasOwnProperty("key")&&(e.id=e.key,delete e.key),e.hasOwnProperty("label")&&(e.name=e.label,delete e.label),e})),A(e)},onRemoveTag:function(e){A(g.filter((function(t){return t.id!==e})))},placeholder:Object(c.__)("Search by list name","wp-marketing-automations"),bwfEnableEmptySearch:!0,showClearButton:!1,disabled:!1})),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf_text_right"},Object(r.createElement)(_.a,{className:"bwf-cancel-btn",disabled:j,onClick:function(){d(!1)}},Object(c.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(_.a,{isPrimary:!0,isBusy:j,disabled:j,onClick:function(){z()},className:"bwf-ml-0"},Object(c.__)("Add","wp-marketing-automations")))))))},M=n(122);function B(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,u=Object.create(l.prototype);return K(u,"_invoke",function(n,r,a){var o,i,l,u=0,s=a||[],f=!1,m={p:0,n:0,v:e,a:b,f:b.bind(e,4),d:function(t,n){return o=t,i=0,l=e,m.n=n,c}};function b(n,r){for(i=n,l=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,o=s[t],b=m.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=b&&((a=n<2&&b<o[1])?(i=0,m.v=r,m.n=o[1]):b<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,m.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,s,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&b(s,p),i=s,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(m.n=-1),b(i,l)):m.n=l:m.v=l);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=m.n<0)?l:n.call(r,m))!==c)break}catch(t){o=e,i=1,l=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var c={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(K(t={},r,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,K(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,K(f,"constructor",u),K(u,"constructor",l),l.displayName="GeneratorFunction",K(u,a,"GeneratorFunction"),K(f),K(f,a,"Generator"),K(f,r,(function(){return this})),K(f,"toString",(function(){return"[object Generator]"})),(z=function(){return{w:o,m:m}})()}function K(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(K=function(e,t,n,r){function o(t,n){K(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function L(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){L(o,r,a,c,i,"next",e)}function i(e){L(o,r,a,c,i,"throw",e)}c(void 0)}))}}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||$(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){if(e){if("string"==typeof e)return J(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var q=function(e){var t=Object(r.useContext)(m.h),n=e.contactId,a=e.tags,i=e.saveTags,l=R(Object(r.useState)(a),2),u=l[0],s=l[1],f=R(Object(r.useState)(!1),2),p=f[0],d=f[1],O=R(Object(r.useState)([]),2),j=O[0],h=O[1],w=R(Object(r.useState)(!1),2),g=w[0],S=w[1],N=R(Object(r.useState)(""),2),C=N[0],A=N[1],T=function(){var e=U(z().m((function e(r){var a;return z().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,o()({path:Object(m.C)("/v3/contacts/".concat(n,"/tags")),method:"DELETE",data:{tags:[parseInt(r.ID)]}}).then((function(e){t(e.message),s(u.filter((function(e){return e.ID!=r.ID}))),i("tags",u.filter((function(e){return e.ID!=r.ID}))),Object(m.Pb)(t,3e3)}));case 1:e.n=3;break;case 2:e.p=2,a=e.v,t(a.message),Object(m.Pb)(t,3e3);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=U(z().m((function e(r){var a,c;return z().w((function(e){for(;;)switch(e.p=e.n){case 0:return S(!0),a=r.map((function(e){var t={};return e.hasOwnProperty("id")&&(t.id=e.id),e.hasOwnProperty("name")&&(t.value=e.name),t})),e.p=1,e.n=2,o()({path:Object(m.C)("/v3/contacts/".concat(n,"/tags")),method:"POST",data:{tags:a},headers:{"Content-Type":"application/json"}}).then(function(){var e=U(z().m((function e(n){var r,a;return z().w((function(e){for(;;)switch(e.n){case 0:t(n.message),Object(y.isEmpty)(n.result)||(r=n.result.tags_added.map((function(e){return e})),a=[].concat(B(u),B(r)),a=Object(y.uniqBy)(a,"ID"),s(a),i("tags",a)),d(!1),h([]),S(!1),Object(m.Pb)(t,3e3);case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw Error(Object(m.w)(null==e?void 0:e.message))}));case 2:e.n=4;break;case 3:e.p=3,c=e.v,A(c.message),S(!1),s(r);case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),x=j&&j.map((function(e){return{key:e.id,label:e.name}})),F=function(){0==j.length?A(Object(c.__)("Please select a tag.","wp-marketing-automations")):(A(""),I(j))};return Object(r.createElement)("div",{className:"bwf-c-s-list bwf-c-s-tags-ui"},Object(r.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Tags","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-c-s-value"},Object(r.createElement)("div",{className:"bwf-sc-tag-value"},u&&u.map((function(e,t){return Object(r.createElement)(E.a,{key:t,label:e.name,id:e.id,screenReaderLabel:e.name,remove:function(){return T(e)}})})),Object(r.createElement)("span",{className:"bwf-tag bwf-c-s-tag-add bwf-cursor-pointer",onClick:function(){return d(!0)}},Object(r.createElement)(v.a,{icon:"circle-plus",size:14})," ",Object(r.createElement)("span",null,Object(c.__)("Add","wp-marketing-automations")))),p&&Object(r.createElement)(b.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-overflow-visible bwf-h--core-header"},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(c.__)("Add Tags","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return d(!1)},className:"bwf-modal-close"},Object(r.createElement)(v.a,{icon:"close",color:"#353030"}))),C&&Object(r.createElement)(P.a,{status:"error",onRemove:function(){return A("")}},C),Object(r.createElement)("div",{onKeyPress:function(e){"Enter"==e.key&&F()}},Object(r.createElement)("div",{style:g?{pointerEvents:"none"}:{}},Object(r.createElement)(k.a,{autocompleter:M.a,multiple:!1,allowFreeTextSearch:!0,inlineTags:!1,selected:x,onChange:function(e){e=e.map((function(e){return e.hasOwnProperty("key")&&(e.id=e.key,delete e.key),e.hasOwnProperty("label")&&(e.name=e.label,delete e.label),e})),h(e)},onRemoveTag:function(e){h(j.filter((function(t){return t.id!==e})))},placeholder:Object(c.__)("Search by tag name","wp-marketing-automations"),bwfEnableEmptySearch:!0,showClearButton:!1,disabled:!1})),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf_text_right"},Object(r.createElement)(_.a,{className:"bwf-cancel-btn",disabled:g,onClick:function(){d(!1)}},Object(c.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(_.a,{isPrimary:!0,isBusy:g,disabled:g,onClick:function(){F()},className:"bwf-ml-0"},Object(c.__)("Add","wp-marketing-automations")))))))};function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Q=function(e){var t=e.links,n=V(Object(r.useState)(t),1)[0];return Object(r.createElement)("div",{className:"bwf-c-s-list bwf-c-s-tags-ui"},Object(r.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Link Triggers","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-c-s-value"},Object(r.createElement)("div",{className:"bwf-sc-tag-value"},Object(y.isEmpty)(n)?"-":n.map((function(e){return Object(r.createElement)(E.a,{key:e.ID,label:e.title,id:e.ID,screenReaderLabel:e.title})})))))},X=n(352);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Z(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||te(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){if(e){if("string"==typeof e)return ne(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var re=function(e){var t=e.meta,n=void 0===t?{}:t,a=e.onChange,o=e.contact,i=void 0===o?{}:o,l=e.fieldSaving,s=void 0===l?"":l,f=Object(u.a)().getFieldBySlug,p={addressOne:f("address-1"),addressTwo:f("address-2"),pinCode:f("postcode"),city:f("city")},d=ee(Object(r.useState)(""),2),j=d[0],h=d[1],w=ee(Object(r.useState)(""),2),g=w[0],E=w[1],_=ee(Object(r.useState)(""),2),k=_[0],S=_[1],P=ee(Object(r.useState)(""),2),N=P[0],C=P[1],A=ee(Object(r.useState)(""),2),T=A[0],I=A[1],x=ee(Object(r.useState)(""),2),F=x[0],G=x[1],D=ee(Object(r.useState)(!1),2),M=D[0],B=D[1],z=Object(m.B)();Object(r.useEffect)((function(){h(n[p.addressOne]),E(n[p.addressTwo]),S(n[p.pinCode]),C(n[p.city]),I(i.state),G(i.country)}),[M]);var K=Object(c.__)("Click to Edit","wp-marketing-automations"),L=Object.entries(X).map((function(e){var t=ee(e,2),n=t[0];return{label:t[1],value:n}}));return Object(r.createElement)("div",{className:"bwf-c-s-list"},Object(r.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Address","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-c-s-value"},Object(r.createElement)("div",{className:"bwf-editable-span",title:K,onClick:function(){return B(!0)}},Object(r.createElement)("div",{className:"bwf-non-empty-sc"},function(){if("address"===s)return Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-120"});var e=[];return z.map((function(t){var r=function(e){var t="";switch(e){case"address-1":p.hasOwnProperty("addressOne")&&n.hasOwnProperty(p.addressOne)&&""!==n[p.addressOne]&&(t=n[p.addressOne]);break;case"address-2":p.hasOwnProperty("addressTwo")&&n.hasOwnProperty(p.addressTwo)&&""!==n[p.addressTwo]&&(t=n[p.addressTwo]);break;case"postcode":p.hasOwnProperty("pinCode")&&n.hasOwnProperty(p.pinCode)&&""!==n[p.pinCode]&&(t=n[p.pinCode]);break;case"city":p.hasOwnProperty("city")&&n.hasOwnProperty(p.city)&&""!==n[p.city]&&(t=n[p.city]);break;case"country":""!==(t=i.hasOwnProperty("country")?i.country:"")&&X.hasOwnProperty(t)&&(t=X[i.country]);break;case"state":i.hasOwnProperty("state")&&""!==i.state&&(t=i.state)}return t}(t);""!==r&&e.push(r)})),e=Object(y.isEmpty)(e)?Object(c.__)("Click to enter Address","wp-marketing-automations"):e.filter((function(e){return!!e})).join(", "),Object(r.createElement)(r.Fragment,null,e)}(),!M&&Object(r.createElement)(v.a,{icon:"edit",color:"#fff",size:16}))),Object(r.createElement)("div",{className:"bwf-editable-span bwf-w-30 bwf-h-0",style:{display:"block",position:"relative"}},M&&Object(r.createElement)(O.a,{className:"bwf-address-field",onFocusOutside:function(){B(!1)},placement:"bottom-end",shift:!0},Object(r.createElement)("div",{className:"bwf-form-fields bwf-field-edit-popover"},Object(r.createElement)("div",{className:"bwf-form-header"},Object(c.__)("Address","wp-marketing-automations")),Object(r.createElement)(b.TextControl,{type:"text",key:"1",value:j,className:"bwf-pop-input-field",placeholder:Object(c.__)("Enter Address 1","wp-marketing-automations"),onChange:function(e){h(e)}}),Object(r.createElement)(b.TextControl,{type:"text",key:"2",value:g,className:"bwf-pop-input-field",placeholder:Object(c.__)("Enter Address 2","wp-marketing-automations"),onChange:function(e){E(e)}}),Object(r.createElement)(b.TextControl,{type:"text",key:"3",value:k,className:"bwf-pop-input-field",placeholder:Object(c.__)("Postal/ Zip Code","wp-marketing-automations"),onChange:function(e){S(e)}}),Object(r.createElement)(b.TextControl,{type:"text",key:"4",value:N,className:"bwf-pop-input-field",placeholder:Object(c.__)("Enter City","wp-marketing-automations"),onChange:function(e){C(e)}}),Object(r.createElement)(b.SelectControl,{value:F,className:"bwf-c-s-width-full bwf-pop-input-field",options:[{label:Object(c.__)("Select country","wp-marketing-automations"),value:""}].concat(W(L)),onChange:function(e){G(e)}}),Object(r.createElement)(b.TextControl,{type:"text",key:"5",value:T,className:"bwf-pop-input-field",placeholder:Object(c.__)("Enter State","wp-marketing-automations"),onChange:function(e){I(e)}}),Object(r.createElement)("div",{className:"bwf_text_right"},Object(r.createElement)(b.Button,{key:"cancel",className:"bwf-modal-cancel-btn",onClick:function(e){e.stopPropagation(),B(!1)}},Object(c.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(b.Button,{key:"save",isPrimary:!0,className:"bwf-pop-button",onClick:function(e){var t;e.stopPropagation(),t=Y(Y(Y(Y(Y(Y({},p.addressOne,Object(y.isEmpty)(j)?"":j.trim()),p.addressTwo,Object(y.isEmpty)(g)?"":g.trim()),p.pinCode,Object(y.isEmpty)(k)?"":k.trim()),p.city,Object(y.isEmpty)(N)?"":N.trim()),"state",Object(y.isEmpty)(T)?"":T.trim()),"country",Object(y.isEmpty)(F)?"":F.trim()),a(t),B(!1)}},Object(c.__)("Update","wp-marketing-automations"))))))))},ae=(n(1197),n(355)),oe=n(357),ce=n(49),ie=n(1127),le=n(97);n(22);function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,u=Object.create(l.prototype);return fe(u,"_invoke",function(n,r,a){var o,i,l,u=0,s=a||[],f=!1,m={p:0,n:0,v:e,a:b,f:b.bind(e,4),d:function(t,n){return o=t,i=0,l=e,m.n=n,c}};function b(n,r){for(i=n,l=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,o=s[t],b=m.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=b&&((a=n<2&&b<o[1])?(i=0,m.v=r,m.n=o[1]):b<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,m.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,s,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&b(s,p),i=s,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(m.n=-1),b(i,l)):m.n=l:m.v=l);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=m.n<0)?l:n.call(r,m))!==c)break}catch(t){o=e,i=1,l=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var c={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(fe(t={},r,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,fe(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,fe(f,"constructor",u),fe(u,"constructor",l),l.displayName="GeneratorFunction",fe(u,a,"GeneratorFunction"),fe(f),fe(f,a,"Generator"),fe(f,r,(function(){return this})),fe(f,"toString",(function(){return"[object Generator]"})),(se=function(){return{w:o,m:m}})()}function fe(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(fe=function(e,t,n,r){function o(t,n){fe(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function me(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ue(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ve=function(e){var t=e.options,n=e.field,a=e.setField,o="";return Object(y.isEmpty)(t)||(o=t.map((function(e,t){return Object(r.createElement)("div",{className:"bwf-m-f-option-wrapper",key:t},Object(r.createElement)(b.TextControl,{value:e,className:"bwf-m-f-add-option",placeholder:Object(c.__)("Add Option Name","wp-marketing-automations"),onChange:function(e){var r=n.meta&&n.meta.options?n.meta.options:[];r[t]=e,a(ye(ye({},n),{},{meta:ye(ye({},n.meta),{},{options:r})}))}}),Object(r.createElement)("span",{onClick:function(){var e=n.meta.options;e.splice(t,1),a(ye(ye({},n),{},{meta:ye(ye({},n.meta),{},{options:e})}))}},Object(r.createElement)(v.a,{icon:"trash",size:20})))}))),Object(r.createElement)("div",{className:"bwf-m-f-field-wrapper"},o&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-m-f-label"},Object(c.__)("Options","wp-marketing-automations")),o),Object(r.createElement)(_.a,{isTertiary:!0,className:"is-light is-small is-tertiary bwf-m-f-add-option-btn",onClick:function(){var e=n.meta&&n.meta.options?n.meta.options:[];e.push(""),a(ye(ye({},n),{},{meta:ye(ye({},n.meta),{},{options:e})}))}},Object(c.__)("Add Option","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}))},je=function(e){var t=e.state;return t.success?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(ae.a,null),Object(r.createElement)("div",{className:"bwf-h1"},t.message))):t.error?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(oe.a,null),Object(r.createElement)("div",{className:"bwf-h1"},t.message))):Object(r.createElement)(ce.a,null)},he=function(){var e=Object(r.useContext)(m.h),t=Object(ie.a)(),n=be(Object(r.useState)([]),2),a=n[0],i=n[1],l=be(Object(r.useState)({group:0}),2),s=l[0],f=l[1],p=be(Object(r.useState)(!1),2),d=p[0],O=p[1],h=be(Object(r.useState)({status:!1,message:""}),2),w=h[0],g=h[1],E=Object(le.useQueryClient)(),k=function(){var n,r=(n=se().m((function n(r){var a,c;return se().w((function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,o()({path:Object(m.C)("/v3/fields/"),method:"POST",data:{group_id:r.group,field:{name:r.name,type:r.type,search:3===parseInt(r.type)?2:r.search,options:r.meta&&r.meta.options&&[4,5,6].includes(parseInt(r.type))?r.meta.options:[],placeholder:r.meta&&r.meta.placeholder?r.meta.placeholder:""}},headers:{"Content-Type":"application/json"}});case 1:if(!(a=n.v)||200!==a.code){n.n=2;break}E.getQueryData(["get-bwf-fields"])&&E.removeQueries(["get-bwf-fields"]),g({status:!1}),t.fetch(),Object(m.yc)().catch((function(e){console.error("Failed to refresh settings schema:",e)})),O(!1),e(a.message),Object(m.Pb)(e,3e3),n.n=3;break;case 2:throw Error(Object(m.w)(null==a?void 0:a.message));case 3:n.n=5;break;case 4:n.p=4,c=n.v,i([null==c?void 0:c.message]),g({status:!1});case 5:return n.a(2)}}),n,null,[[0,4]])})),function(){var e=this,t=arguments;return new Promise((function(r,a){var o=n.apply(e,t);function c(e){me(o,r,a,c,i,"next",e)}function i(e){me(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(e){return r.apply(this,arguments)}}(),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Object(u.a)(),n=t.getGroups(),a=Object(ie.a)();Object(r.useEffect)((function(){Object(y.isEmpty)(n)&&a.fetch()}),[]);var o=[{key:"",label:Object(c.__)("Select Group","wp-marketing-automations")}];return n&&n.map((function(t){0!==parseInt(e)&&parseInt(t.id)===parseInt(e)||o.push({key:t.id,label:t.name})})),o}(),N=s&&s.id?Object(c.__)("Edit Field","wp-marketing-automations"):Object(c.__)("Create New Field","wp-marketing-automations"),C=function(){var e,t=[];if(s.name||t.push(Object(c.__)("Please enter field name.","wp-marketing-automations")),""===s.group&&t.push(Object(c.__)("Please select a group for field.","wp-marketing-automations")),s.type||t.push(Object(c.__)("Please select a type for field.","wp-marketing-automations")),![4,5,6].includes(parseInt(s.type))||(e=s).meta&&e.meta.options&&Object(y.isArray)(e.meta.options)&&0!==e.meta.options.length&&0!==e.meta.options.filter((function(e){return null!=e&&""!=e})).length||t.push(Object(c.__)("Please enter options for field.","wp-marketing-automations")),Object(y.isEmpty)(t)){var n=[];s.meta&&!Object(y.isEmpty)(s.meta.options)&&(n=s.meta.options.filter((function(e){return null!=e&&""!=e}))),f(ye(ye({},s),{},{meta:ye(ye({},s.meta),{},{options:n})})),g({status:!0}),k(ye(ye({},s),{},{meta:ye(ye({},s.meta),{},{options:n})}))}else i(t)};return Object(r.createElement)(r.Fragment,null,d&&Object(r.createElement)(b.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-m-f-field-model bwf-admin-modal bwf-admin-modal-squeezy bwf-h--core-header"},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},N),Object(r.createElement)("span",{onClick:function(){return O(!1)},className:"bwf-modal-close"},Object(r.createElement)(v.a,{icon:"close",color:"#353030"}))),w.success||w.error?Object(r.createElement)(je,{state:w}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&C()}},Array.isArray(a)&&a.length>0&&Object(r.createElement)(P.a,{status:"error",onRemove:function(){return i([])}},a.map((function(e,t){return Object(r.createElement)("p",{className:"bwf-error-notice-p",key:t},e)}))),Object(r.createElement)("div",{className:"bwf-m-f-field-wrapper"},Object(r.createElement)("div",{className:"bwf-m-f-label"},Object(c.__)("Name","wp-marketing-automations")),Object(r.createElement)(b.TextControl,{className:"bwf-m-f-model-field-name",autoFocus:!0,value:s&&s.name?s.name:"",placeholder:Object(c.__)("Type here â€¦","wp-marketing-automations"),onChange:function(e){f(ye(ye({},s),{},{name:e}))},disabled:w.status})),(!s||!parseInt(s.id))&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-m-f-field-wrapper"},Object(r.createElement)("div",{className:"bwf-m-f-label"},Object(c.__)("Group","wp-marketing-automations")),Object(r.createElement)(j.a,{selected:s.group,className:"bwf-m-f-model-group-name",options:S,onChange:function(e){var t;return f(ye(ye({},s),{},{group:Object(y.isArray)(e)?null===(t=e[0])||void 0===t?void 0:t.key:e}))},disabled:w.status})),Object(r.createElement)("div",{className:"bwf-m-f-field-wrapper"},Object(r.createElement)("div",{className:"bwf-m-f-label"},Object(c.__)("Type","wp-marketing-automations")),Object(r.createElement)(j.a,{selected:s?s.type:1,className:"bwf-m-f-model-field-type",options:Object(m.X)(),onChange:function(e){var t;return f(ye(ye({},s),{},{type:Object(y.isArray)(e)?null===(t=e[0])||void 0===t?void 0:t.key:e}))},disabled:w.status}))),!!s&&[1,2,3].includes(parseInt(s.type))&&Object(r.createElement)("div",{className:"bwf-m-f-field-wrapper"},Object(r.createElement)("div",{className:"bwf-m-f-label"},Object(c.__)("Placeholder","wp-marketing-automations")),Object(r.createElement)(b.TextControl,{className:"bwf-m-f-model-placeholder-name",value:s&&s.meta?s.meta.placeholder:"",placeholder:Object(c.__)("Type here â€¦","wp-marketing-automations"),onChange:function(e){f(ye(ye({},s),{},{meta:ye(ye({},s.meta),{},{placeholder:e})}))},disabled:w.status})),!!s&&[4,5,6].includes(parseInt(s.type))&&Object(r.createElement)(ve,{options:s.meta&&s.meta.options?s.meta.options:[],field:s,setField:f}),3!==parseInt(s.type)&&Object(r.createElement)(b.ToggleControl,{label:Object(r.createElement)("div",{className:"bwf-display-flex-column bwf-flex-align-end"},Object(c.__)("Show Fields in Filter Search?","wp-marketing-automations"),Object(r.createElement)("div",{className:"bwf-normal-text"},Object(c.__)("By enabling this field, you can search within contact filters.","wp-marketing-automations"))),className:"bwf-tooglecontrol-advance",checked:!s||!s.search||2!=parseInt(s.search),onChange:function(e){var t=1;e||(t=2),f(ye(ye({},s),{},{search:t}))},disabled:w.status}),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(r.createElement)(_.a,{className:"bwf-cancel-btn",onClick:function(){return O(!1)}},Object(c.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(_.a,{isPrimary:!0,onClick:function(){C()},className:"bwf-m-f-model-save-btn bwf-ml-0",disabled:w.status,isBusy:w.status},Object(c.__)("Create","wp-marketing-automations")))))),Object(r.createElement)(_.a,{className:" bwf-btn-small is-blue",isPrimary:!0,onClick:function(){f({group:0}),i([]),O(!0)}},Object(c.__)("Add Field","wp-marketing-automations")))};function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=we(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=we(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==we(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ke(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,u=Object.create(l.prototype);return Se(u,"_invoke",function(n,r,a){var o,i,l,u=0,s=a||[],f=!1,m={p:0,n:0,v:e,a:b,f:b.bind(e,4),d:function(t,n){return o=t,i=0,l=e,m.n=n,c}};function b(n,r){for(i=n,l=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,o=s[t],b=m.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=b&&((a=n<2&&b<o[1])?(i=0,m.v=r,m.n=o[1]):b<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,m.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,s,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&b(s,p),i=s,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(m.n=-1),b(i,l)):m.n=l:m.v=l);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=m.n<0)?l:n.call(r,m))!==c)break}catch(t){o=e,i=1,l=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var c={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(Se(t={},r,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Se(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,Se(f,"constructor",u),Se(u,"constructor",l),l.displayName="GeneratorFunction",Se(u,a,"GeneratorFunction"),Se(f),Se(f,a,"Generator"),Se(f,r,(function(){return this})),Se(f,"toString",(function(){return"[object Generator]"})),(ke=function(){return{w:o,m:m}})()}function Se(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Se=function(e,t,n,r){function o(t,n){Se(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function Pe(e){return function(e){if(Array.isArray(e))return Te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||Ae(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){if(e){if("string"==typeof e)return Te(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(e,t):void 0}}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ie=function(){var e=Object(ie.a)().setStateGroupValues,t=Object(r.useContext)(m.h),n=Object(u.a)().getGroups(),a=Ce(Object(r.useState)([]),2),i=a[0],l=a[1],s=Ce(Object(r.useState)({}),2),f=s[0],p=s[1],d=Ce(Object(r.useState)(!1),2),O=d[0],j=d[1],h=Ce(Object(r.useState)({status:!1,message:""}),2),w=h[0],g=h[1],E=function(){var r,a=(r=ke().m((function r(a){var c,i,u;return ke().w((function(r){for(;;)switch(r.p=r.n){case 0:return r.p=0,r.n=1,o()({path:Object(m.C)("/v3/groupfields/"),method:"POST",data:{group_name:a.name},headers:{"Content-Type":"application/json"}});case 1:if(200!=(c=r.v).code){r.n=2;break}i=c.result?c.result[0]:{},Object(y.isEmpty)(i)||e([].concat(Pe(n),[{id:i.id,name:i.name,fields:[]}])),g({status:!1}),j(!1),t(c.message),Object(m.Pb)(t,3e3),r.n=3;break;case 2:throw Error(Object(m.w)(null==c?void 0:c.message));case 3:r.n=5;break;case 4:r.p=4,u=r.v,l([null==u?void 0:u.message]),g({status:!1});case 5:return r.a(2)}}),r,null,[[0,4]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var o=r.apply(e,t);function c(e){Ne(o,n,a,c,i,"next",e)}function i(e){Ne(o,n,a,c,i,"throw",e)}c(void 0)}))});return function(e){return a.apply(this,arguments)}}(),k=Object(y.isEmpty)(f.group_id)&&"0"!=f.group_id?Object(c.__)("Create New Fields Group","wp-marketing-automations"):Object(c.__)("Edit Field Group","wp-marketing-automations"),S=function(){var e=[];f.name||e.push(Object(c.__)("Please enter group name.","wp-marketing-automations")),Object(y.isEmpty)(e)?(g({status:!0}),E(f)):l(e)};return Object(r.createElement)(r.Fragment,null,O&&Object(r.createElement)(b.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-m-f-field-model bwf-admin-modal bwf-admin-modal-squeezy bwf-h--core-header"},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},k),Object(r.createElement)("span",{onClick:function(){return j(!1)},className:"bwf-modal-close"},Object(r.createElement)(v.a,{icon:"close",color:"#353030"}))),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&S()}},!Object(y.isEmpty)(i)&&Object(r.createElement)(P.a,{status:"error",onRemove:function(){return l([])}},i.map((function(e,t){return Object(r.createElement)("p",{className:"bwf-error-notice-p",key:t},e)}))),Object(r.createElement)("div",{className:"bwf-m-f-field-wrapper"},Object(r.createElement)("div",{className:"bwf-m-f-label"},Object(c.__)("Name","wp-marketing-automations")),Object(r.createElement)(b.TextControl,{type:"text",value:f&&f.name?f.name:"",autoFocus:!0,placeholder:Object(c.__)("Type hereâ€¦","wp-marketing-automations"),onChange:function(e){p(Ee(Ee({},f),{},{name:e}))},disabled:w.status})),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(r.createElement)(_.a,{className:"bwf-cancel-btn",onClick:function(){return j(!1)}},Object(c.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(_.a,{isPrimary:!0,onClick:function(){S()},className:"bwf-m-f-model-save-btn bwf-ml-0",disabled:w.status,isBusy:w.status},Object(y.isEmpty)(f)?Object(c.__)("Create","wp-marketing-automations"):Object(c.__)("Save","wp-marketing-automations")))))),Object(r.createElement)(_.a,{className:" bwf-btn-small is-border",isSecondary:!0,onClick:function(){p({}),l([]),j(!0)}},Object(c.__)("Create Field Group","wp-marketing-automations")))},xe=n(1128);function Fe(e){return function(e){if(Array.isArray(e))return Ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ze(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,u=Object.create(l.prototype);return De(u,"_invoke",function(n,r,a){var o,i,l,u=0,s=a||[],f=!1,m={p:0,n:0,v:e,a:b,f:b.bind(e,4),d:function(t,n){return o=t,i=0,l=e,m.n=n,c}};function b(n,r){for(i=n,l=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,o=s[t],b=m.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=b&&((a=n<2&&b<o[1])?(i=0,m.v=r,m.n=o[1]):b<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,m.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,s,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&b(s,p),i=s,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(m.n=-1),b(i,l)):m.n=l:m.v=l);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=m.n<0)?l:n.call(r,m))!==c)break}catch(t){o=e,i=1,l=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var c={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(De(t={},r,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,De(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,De(f,"constructor",u),De(u,"constructor",l),l.displayName="GeneratorFunction",De(u,a,"GeneratorFunction"),De(f),De(f,a,"Generator"),De(f,r,(function(){return this})),De(f,"toString",(function(){return"[object Generator]"})),(Ge=function(){return{w:o,m:m}})()}function De(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(De=function(e,t,n,r){function o(t,n){De(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function Me(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||ze(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){if(e){if("string"==typeof e)return Ke(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ke(e,t):void 0}}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(){var e=Object(i.a)().setStateProps,t=Object(r.useContext)(m.h),n=l.a.getContactLoading(),a=Be(Object(r.useState)(""),2),b=a[0],p=a[1],d=l.a.getContact(),O=Object(u.a)(),v=O.getLoading(),j=O.getGroups(),h=Object(ie.a)();if(Object(r.useEffect)((function(){var e=new AbortController,t=e.signal;return Object(y.isEmpty)(j)&&h.fetch(t),function(){null==e||e.abort()}}),[]),n||v)return Object(r.createElement)(f.b,null);var w,E=d.id,_=void 0===E?0:E,k=d.tags,S=void 0===k?[]:k,P=d.lists,N=void 0===P?[]:P,C=d.link_triggers,A=void 0===C?[]:C,T=function(){var n,r=(n=Ge().m((function n(r){var a;return Ge().w((function(n){for(;;)switch(n.p=n.n){case 0:return t(Object(c.__)("Savingâ€¦","wp-marketing-automations")),n.p=1,n.n=2,o()({path:Object(m.C)("/v3/contacts/".concat(_,"/fields/")),method:"POST",data:{email:d.email,fields:r}}).then((function(n){200===parseInt(n.code)?(p(""),t(n.message),e(n.result)):(p(""),t(n.message)),Object(m.Pb)(t,3e3)}));case 2:n.n=4;break;case 3:n.p=3,a=n.v,t(a.hasOwnProperty("message")?a.message:Object(c.__)("Unable to update field","wp-marketing-automations")),p(""),Object(m.Pb)(t,3e3);case 4:return n.a(2)}}),n,null,[[1,3]])})),function(){var e=this,t=arguments;return new Promise((function(r,a){var o=n.apply(e,t);function c(e){Me(o,r,a,c,i,"next",e)}function i(e){Me(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(e){return r.apply(this,arguments)}}(),I=function(e,t){var n={};n[e]=t,p(e),T(n)},x=function(t,n){e(d,t,n)},F=function(e){p("address"),T(e)};return v?Object(r.createElement)(xe.a,null):Object(r.createElement)("div",{className:"bwf-cs-contact-tab-data"},Object(r.createElement)("div",{className:"bwf-c-s-section"}),Object(r.createElement)(s.a,{items:(w=[],j&&j.map((function(e,t){var n,a;w.push({key:e.hasOwnProperty("id")?e.id:t,label:e.name,display:(n=e.fields,a=e.id,Object(r.createElement)(r.Fragment,null,Object(y.isEmpty)(n)?Object(r.createElement)("div",{style:{padding:"0 15px"}},Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(c.__)("No fields Found","wp-marketing-automations"),Object(r.createElement)("div",{className:"bwf_clear_10"})):n.map((function(e){if("marketing_status"!==e.id){if("f_name"===e.id||"l_name"===e.id)return Object(r.createElement)(g,{key:e.id,index:e.id,label:e.name,type:e.type?parseInt(e.type):1,options:e.meta&&e.meta.options?e.meta.options:[],value:d&&d[e.id]?d[e.id]:"",placeholder:e.meta&&e.meta.placeholder?e.meta.placeholder:"",onChange:I,fieldSaving:b});var t=e.meta&&e.meta.options?e.meta.options:[],n=e.type?parseInt(e.type):1;if("0"==a){if("address"===e.id)return Object(r.createElement)(re,{key:e.id,meta:d.fields,contact:d,onChange:F,fieldSaving:b});if("gender"===e.id&&(t=["Male","Female","Others"],n=4),"timezone"===e.id)return Object(r.createElement)(g,{key:e.id,index:e.id,label:e.name,type:10,options:[],value:d[e.id],placeholder:"",onChange:I,fieldSaving:b});if("email"==e.id)return Object(r.createElement)(g,{key:e.id,index:e.id,label:Object(c.__)("Email","wp-marketing-automations"),type:1,value:d.email,placeholder:"",onChange:I,fieldSaving:b});if("contact_no"==e.id)return Object(r.createElement)(g,{key:e.id,index:e.id,label:e.name,type:n,options:t,value:d[e.id]?d[e.id]:"",placeholder:e.meta&&e.meta.placeholder?e.meta.placeholder:"",onChange:I,fieldSaving:b})}return Object(r.createElement)(g,{key:e.id,index:e.id,label:e.name,type:n,options:t,value:d.fields&&d.fields[e.id]?d.fields[e.id]:"",placeholder:e.meta&&e.meta.placeholder?e.meta.placeholder:"",onChange:I,fieldSaving:b})}})),0==a&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(q,{tags:S,saveTags:x,contactId:_}),Object(r.createElement)(D,{lists:N,saveList:x,contactId:_}),Object(r.createElement)(Q,{links:A}),Object(m.gc)()&&Object(r.createElement)("div",{className:"bwf-c-s-list bwf-c-s-tags-ui"},Object(r.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Push Notification","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-c-s-value"},d.hasOwnProperty("push-engage-token")&&!Object(y.isNull)(d["push-engage-token"])&&Object(y.isArray)(d["push-engage-token"])&&d["push-engage-token"].length>0?Object(c.sprintf)(Object(c.__)("Opted on %d %s","wp-marketing-automations"),d["push-engage-token"].length,d["push-engage-token"].length>1?Object(c.__)("devices","wp-marketing-automations"):Object(c.__)("device","wp-marketing-automations")):"-")))))})})),w),openedKeys:Fe(Array(j.length)).map((function(e,t){return t}))}),Object(r.createElement)("div",{className:"bwf-sc-contact-header bwf-mt-16"},Object(r.createElement)("div",{className:"bwf-display-flex gap-8"},Object(r.createElement)(Ie,null),Object(r.createElement)(he,null))))}}}]);