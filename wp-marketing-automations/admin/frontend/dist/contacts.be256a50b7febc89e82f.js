(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1093:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r(0);var a=function(t,e){var r=Object(n.useRef)();Object(n.useEffect)((function(){r.current=t}),[t]),Object(n.useEffect)((function(){if(null!==e){var t=setInterval((function(){r.current()}),e);return function(){return clearInterval(t)}}}),[e])}},1094:function(t,e,r){"use strict";var n=r(0),a=r(6),o=r.n(a),c=r(1),i=r(8),l=(r(1098),r(40)),u=r(3);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(t){var e=s(Object(n.useState)(!1),2),r=e[0],a=e[1],f=t.modalContent,m=void 0===f?{}:f,p=t.content,b=t.onPage,h=void 0!==b&&b;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:o()("bwf-upgrade-pro-overlay",{"is-on-page":h}),onClick:function(){h||a(!0)}},h?Object(n.createElement)(l.a,{showHeader:!1,modalContent:m}):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-king-tag-pro"},Object(n.createElement)(i.a,{icon:"king",size:38,color:"#fff"})),Object(n.createElement)("span",{className:"bwf-mt-8"},p||(Object(u.Wb)()?Object(c.__)("Activate your license to continue using premium features without interruption.","wp-marketing-automations"):Object(c.__)("This feature is locked. To get full access of FunnelKit Automation upgrade to PRO","wp-marketing-automations"))))),Object(n.createElement)(l.b,{isOpen:r,onRequestClose:function(){return a(!1)},modalContent:m}))}},1098:function(t,e,r){},1105:function(t,e,r){"use strict";var n=r(49),a=r(3),o=r(2);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=["fetch","setStateProp"],l=["s","page","filter","path"],u=["s","page","filter","path"];function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}e.a=function(){var t=Object(n.a)("contacts"),e=t.fetch,r=t.setStateProp;return f(f({},p(t,i)),{},{setStateProp:r,fetch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,f=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7],b=arguments.length>8&&void 0!==arguments[8]&&arguments[8],h=arguments.length>9&&void 0!==arguments[9]&&arguments[9],d=arguments.length>10&&void 0!==arguments[10]&&arguments[10],y=arguments.length>11&&void 0!==arguments[11]?arguments[11]:[];r("isLoading",!0);var v=t.s,g=void 0===v?"":v,w=(t.page,t.filter,t.path,p(t,l)),O={offset:n,limit:c,search:g,filters:w,get_wc:Object(a.qc)(),grab_totals:i,only_count:u,fetch_base:s,grab_custom_fields:!1,include_unsubs:!f,exclude_unsubs_lists:m,includeUnverified:h,includeSoftBounce:d,include_ids:y},j=Object(a.Bb)("table_sort_data"),E=j.hasOwnProperty("contact_sort_data")?j.contact_sort_data:{},_=Object(o.isObject)(E)&&!Object(o.isEmpty)(E)?E:{},k=_.orderby,x=void 0===k?"last_modified":k,S=_.order,N=void 0===S?"desc":S;N&&x&&(O.order=N,O.order_by=x),b&&(O.unopen_broadcast=parseInt(b)),e("GET",Object(a.A)("/contacts"),O)},fetchListing:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,f=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7],b=arguments.length>8&&void 0!==arguments[8]&&arguments[8];r("isLoading",!0);var h=t.s,d=void 0===h?"":h,y=(t.page,t.filter,t.path,p(t,u)),v={offset:n,limit:c,search:d,filters:y,get_wc:Object(a.qc)(),grab_totals:i,only_count:l,fetch_base:s,grab_custom_fields:!1,exclude_unsubs:f,exclude_unsubs_lists:m},g=Object(a.Bb)("table_sort_data"),w=g.hasOwnProperty("contact_sort_data")?g.contact_sort_data:{},O=Object(o.isObject)(w)&&!Object(o.isEmpty)(w)?w:{},j=O.orderby,E=void 0===j?"last_modified":j,_=O.order,k=void 0===_?"desc":_;k&&E&&(v.order=k,v.order_by=E),b&&(v.unopen_broadcast=parseInt(b)),e("GET",Object(a.A)("/v3/contacts/listing"),v)},startIndexing:function(){return e("GET",Object(a.A)("/contacts"),{start_indexing:!0})}})}},1112:function(t,e,r){"use strict";var n=r(0),a=r(27),o=r(1),c=r(202);e.a=function(t){var e=t.selected,r=t.onTagsChange;return Object(n.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(n.createElement)("div",{className:"bwf-input-label"},Object(o.__)("Add Tags","wp-marketing-automations")),Object(n.createElement)(a.a,{autocompleter:c.b,multiple:!1,allowFreeTextSearch:!0,inlineTags:!1,selected:e,onChange:function(t){r(t)},onRemoveTag:function(t,n){var a=e.filter((function(e){return!(e.key==t&&e.label==n)}));r(a)},placeholder:Object(o.__)("Search by tag name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},1121:function(t,e,r){"use strict";var n=r(50);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=["getStateProp"];function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}e.a=function(){var t=Object(n.a)("contacts"),e=t.getStateProp;return i(i({},function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(t,o)),{},{getContacts:function(){return e("contacts_list")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getTotalCount:function(){return parseInt(e("total"))},getCountData:function(){return e("countData")}})}},1122:function(t,e,r){"use strict";var n=r(0),a=r(27),o=r(1),c=r(202);e.a=function(t){var e=t.selected,r=t.onListsChange;return Object(n.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(n.createElement)("div",{className:"bwf-input-label"},Object(o.__)("Add to Lists","wp-marketing-automations")),Object(n.createElement)(a.a,{autocompleter:c.a,multiple:!1,allowFreeTextSearch:!0,selected:e,onChange:function(t){r(t)},onRemoveTag:function(t){var n=e.filter((function(e){return e.key!=t}));r(n)},placeholder:Object(o.__)("Search by list name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},1159:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(122),a={"am-AM":/^(\+?374|0)(33|4[134]|55|77|88|9[13-689])\d{6}$/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)([569]\d{7}|41\d{6})$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?(9[1-9])\d{6}$/,"ar-PS":/^(\+?970|0)5[6|9](\d{7})$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SD":/^((\+?249)|0)?(9[012369]|1[012])\d{7}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(10|5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^((\+49|0)1)(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"dv-MV":/^(\+?960)?(7[2-9]|9[1-9])\d{5}$/,"el-GR":/^(\+?30|0)?6(8[5-9]|9(?![26])[0-9])\d{7}$/,"el-CY":/^(\+?357?)?(9(9|6)\d{6})$/,"en-AI":/^(\+?1|0)264(?:2(35|92)|4(?:6[1-2]|76|97)|5(?:3[6-9]|8[1-4])|7(?:2(4|9)|72))\d{4}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-AG":/^(?:\+1|1)268(?:464|7(?:1[3-9]|[28]\d|3[0246]|64|7[0-689]))\d{4}$/,"en-BM":/^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}$))/,"en-BS":/^(\+?1[-\s]?|0)?\(?242\)?[-\s]?\d{3}[-\s]?\d{4}$/,"en-GB":/^(\+?44|0)7[1-9]\d{8}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|53|28|55|59)\d{7}$/,"en-GY":/^(\+592|0)6\d{6}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-JM":/^(\+?876)?\d{7}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"fr-CF":/^(\+?236| ?)(70|75|77|72|21|22)\d{6}$/,"en-SS":/^(\+?211|0)(9[1257])\d{7}$/,"en-KI":/^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,"en-KN":/^(?:\+1|1)869(?:46\d|48[89]|55[6-8]|66\d|76[02-7])\d{4}$/,"en-LS":/^(\+?266)(22|28|57|58|59|27|52)\d{6}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-MW":/^(\+?265|0)(((77|88|31|99|98|21)\d{7})|(((111)|1)\d{6})|(32000\d{4}))$/,"en-NA":/^(\+?264|0)(6|8)\d{7}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PG":/^(\+?675|0)?(7\d|8[18])\d{6}$/,"en-PK":/^((00|\+)?92|0)3[0-6]\d{8}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?0[79][567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"en-BW":/^(\+?267)?(7[1-8]{1})\d{6}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-CU":/^(\+53|0053)?5\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8|3|2]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-GT":/^(\+?502)?[2|6|7]\d{7}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-NI":/^(\+?505)\d{7,8}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-SV":/^(\+?503)?[67]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"es-VE":/^(\+?58)?(2|4)\d{9}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4[0-6]|50)\s?(\d\s?){4,8}$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-BF":/^(\+226|0)[67]\d{7}$/,"fr-BJ":/^(\+229)\d{8}$/,"fr-CD":/^(\+?243|0)?(8|9)\d{8}$/,"fr-CM":/^(\+?237)6[0-9]{8}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-PF":/^(\+?689)?8[789]\d{6}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"fr-WF":/^(\+681)?\d{6}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36|06)(20|30|31|50|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"ir-IR":/^(\+98|0)?9\d{9}$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(79\d{7}|5\d{8})$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"ky-KG":/^(\+996\s?)?(22[0-9]|50[0-9]|55[0-9]|70[0-9]|75[0-9]|77[0-9]|880|990|995|996|997|998)\s?\d{3}\s?\d{3}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"mg-MG":/^((\+?261|0)(2|3)\d)?\d{7}$/,"mn-MN":/^(\+|00|011)?976(77|81|88|91|94|95|96|99)\d{6}$/,"my-MM":/^(\+?959|09|9)(2[5-7]|3[1-2]|4[0-5]|6[6-9]|7[5-9]|9[6-9])[0-9]{7}$/,"ms-MY":/^(\+?60|0)1(([0145](-|\s)?\d{7,8})|([236-9](-|\s)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nl-AW":/^(\+)?297(56|59|64|73|74|99)\d{5}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?([5-8]\d|45) ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[1-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+244)\d{9}$/,"ro-MD":/^(\+?373|0)((6(0|1|2|6|7|8|9))|(7(6|7|8|9)))\d{6}$/,"ro-RO":/^(\+?40|0)\s?7\d{2}(\/|\s|\.|-)?\d{3}(\s|\.|-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"so-SO":/^(\+?252|0)((6[0-9])\d{7}|(7[1-9])\d{7})$/,"sq-AL":/^(\+355|0)6[2-9]\d{7}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"tg-TJ":/^(\+?992)?[5][5]\d{7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"tk-TM":/^(\+993|993|8)\d{8}$/,"uk-UA":/^(\+?38)?0(50|6[36-8]|7[357]|9[1-9])\d{7}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"dz-BT":/^(\+?975|0)?(17|16|77|02)\d{6}$/,"ar-YE":/^(((\+|00)9677|0?7)[0137]\d{7}|((\+|00)967|0)[1-7]\d{6})$/,"ar-EH":/^(\+?212|0)[\s\-]?(5288|5289)[\s\-]?\d{5}$/,"fa-AF":/^(\+93|0)?(2{1}[0-8]{1}|[3-5]{1}[0-4]{1})(\d{7})$/,"mk-MK":/^(\+?389|0)?((?:2[2-9]\d{6}|(?:3[1-4]|4[2-8])\d{6}|500\d{5}|5[2-9]\d{6}|7[0-9][2-9]\d{5}|8[1-9]\d{6}|800\d{5}|8009\d{4}))$/};function o(t,e,r){if(Object(n.a)(t),r&&r.strictMode&&!t.startsWith("+"))return!1;if(Array.isArray(e))return e.some((function(e){if(a.hasOwnProperty(e)&&a[e].test(t))return!0;return!1}));if(e in a)return a[e].test(t);if(!e||"any"===e){for(var o in a){if(a.hasOwnProperty(o))if(a[o].test(t))return!0}return!1}throw new Error("Invalid locale '".concat(e,"'"))}a["en-CA"]=a["en-US"],a["fr-CA"]=a["en-CA"],a["fr-BE"]=a["nl-BE"],a["zh-HK"]=a["en-HK"],a["zh-MO"]=a["en-MO"],a["ga-IE"]=a["en-IE"],a["fr-CH"]=a["de-CH"],a["it-CH"]=a["fr-CH"];Object.keys(a)},1160:function(t,e,r){},1193:function(t,e,r){"use strict";r.d(e,"a",(function(){return w}));var n=r(0),a=r(5),o=r(1),c=r(2),i=r(1112),l=r(1122),u=r(19),s=r(68),f=r(8),m=r(29),p=r(3);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=b(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==b(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var w=function(t){var e=t.headersData,r=t.onRequestImport,b=t.submitButtonText,h=t.secondaryButtonText,g=t.onSecondaryButtonClick,w=t.savedData,O=t.buttonAlignClass,j=t.backButtonText,E=t.backButtonClick,_=t.extra,k=t.isSubmitButtonBusy,x=t.sourceHeaderText,S=void 0===x?Object(o.__)("Columns To Import","wp-marketing-automations"):x,N=t.contactHeaderText,L=void 0===N?Object(o.__)("Map Into Field","wp-marketing-automations"):N,P=t.updateExistingText,C=void 0===P?Object(o.__)("Update Existing Contacts","wp-marketing-automations"):P,I=t.secondaryClass,A=void 0===I?"":I,T=e.headers,F=e.fields,G=v(Object(n.useState)(w&&w.mapped_fields?function(t,e){if(!t)return{};var r={},n=function(n){e.find((function(t){return t.index.toString()===n}))&&(r[n]=t[n])};for(var a in t)n(a);return r}(w.mapped_fields,T):{}),2),D=G[0],$=G[1],M=v(Object(n.useState)(0),2),B=M[0],z=M[1],U=w&&w.tags?w.tags.map((function(t){return{key:t.id,label:t.value}})):[],R=w&&w.lists?w.lists.map((function(t){return{key:t.id,label:t.value}})):[],q=v(Object(n.useState)(U),2),Y=q[0],V=q[1],W=v(Object(n.useState)(R),2),H=W[0],K=W[1],Z=v(Object(n.useState)(!(!w||!("update_existing"in w))&&w.update_existing),2),J=Z[0],Q=Z[1],X=v(Object(n.useState)(!w||!("update_blank"in w)||w.update_blank),2),tt=X[0],et=X[1],rt=v(Object(n.useState)(!w||!("marketing_status"in w)||w.marketing_status),2),nt=rt[0],at=(rt[1],v(Object(n.useState)(!(!w||!("trigger_events"in w))&&w.trigger_events),2)),ot=at[0],ct=at[1],it=v(Object(n.useState)(null),2),lt=it[0],ut=it[1],st=(_||{}).disableMarketingStatusCheck,ft=void 0!==st&&st,mt=function(){return ut(null),0===Object(c.size)(D)?(setTimeout((function(){return ut(Object(o.__)("Select the contact fields.","wp-marketing-automations"))}),500),!1):!!Object.values(D).includes("email")||(setTimeout((function(){return ut(Object(o.__)("Map contact email with a form field.","wp-marketing-automations"))}),500),!1)},pt=function(){if(mt()){var t={};T.map((function(e){e.index in D&&(t[e.index]=D[e.index])}));var e={map:t,tags:Y.map((function(t){return{id:t.key,value:t.label}})),lists:H.map((function(t){return{id:t.key,value:t.label}})),update_existing:J,trigger_events:ot,imported_contact_status:B,dont_update_blank:tt};!ft&&(e.marketing_status=nt),r(e)}},bt=function(){if(mt()){var t={};T.map((function(e){e.index in D&&(t[e.index]=D[e.index])}));var e={map:t,tags:Y.map((function(t){return{id:t.key,value:t.label}})),lists:H.map((function(t){return{id:t.key,value:t.label}})),update_existing:J,trigger_events:ot};!ft&&(e.marketing_status=nt),g(e)}},ht=Object(p.M)();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-import-mapper-fields bwf-card-wrap bwf-form-fields bwf-crm-importer-csv-wrap"},Object(n.createElement)("div",{className:"bwf-card-header"},Object(n.createElement)("span",{className:"bwf-form-title"},Object(o.__)("Mapping","wp-marketing-automations"))),lt&&Object(n.createElement)("div",{className:"bwf-mr-16 bwf-ml-16"},Object(n.createElement)(s.a,null),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)(m.a,{status:"error",onRemove:function(){return ut(null)}},lt)),!Object(c.isArray)(F)||!F.length>0||!Object(c.isArray)(T)||!T.length>0?!Object(c.isArray)(F)||!F.length>0?Object(n.createElement)(m.a,{status:"error",className:"bwf-mlr-24 bwf-mt-24-i"},Object(o.__)("No contact fields found","wp-marketing-automations")):!Object(c.isArray)(T)||!T.length>0?Object(n.createElement)(m.a,{status:"error",className:"bwf-mlr-24 bwf-mt-24-i"},Object(o.__)("No mapping fields found","wp-marketing-automations")):void 0:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-c-import-field",key:"mapper-sel-wrap"},Object(n.createElement)("strong",null,S),Object(n.createElement)("span",null),Object(n.createElement)("strong",null,L)),T.map((function(t,e){return Object(n.createElement)("div",{key:e,className:"bwf-c-import-field"},Object(n.createElement)(a.TextControl,{disabled:!0,value:t.header}),Object(n.createElement)("span",{className:"bwf-display-flex"},Object(n.createElement)(f.a,{icon:"mapper"})),Object(n.createElement)("select",{value:t.index in D?D[t.index]:"",onChange:function(e){return function(t,e){var r=e.target.value,n="index"in t?t.index:"";""===r&&n in D?$(Object(c.omit)(D,n)):""!==r&&""!==n&&$(d(d({},D),{},y({},n,r)))}(t,e)},key:"bwf-select-field"},Object(n.createElement)("option",{value:"",key:"default-key"+e},Object(o.__)("Do Not Import This Field","wp-marketing-automations")),F.map((function(t,r){return"fields"in t&&t.fields.length>0&&Object(n.createElement)("optgroup",{key:t.id+"-"+r+"-"+e,label:t.name},t.fields.map((function(t){return Object(n.createElement)("option",{key:t.id,value:t.id},t.name)})))}))))}))),Object(n.createElement)("div",{className:"bwf-crm-import-section",style:{border:0}},Object(n.createElement)("div",{className:"bwf-h4"},Object(o.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-import-field",key:"select-tag-list"},Object(n.createElement)(i.a,{onTagsChange:V,selected:Y}),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(l.a,{onListsChange:K,selected:H})),!ft&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-heading7-new"},Object(o.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-csv-status-select",onChange:function(t){z(t.target.value)},key:"bwf-select-status",value:B},Object.keys(ht).map((function(t){return Object(n.createElement)("option",{key:t,value:t},ht[t])}))),Object(n.createElement)("div",{className:"bwf_clear_24"})),Object(n.createElement)("div",null,Object(n.createElement)(a.ToggleControl,{label:C,checked:J,className:"bwf-tooglecontrol-advance",onChange:Q})),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",null,Object(n.createElement)(a.ToggleControl,{label:Object(o.__)("Don't Update Blank Values","wp-marketing-automations"),checked:tt,className:"bwf-tooglecontrol-advance",onChange:et})),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",null,Object(n.createElement)(a.ToggleControl,{label:Object(o.__)("Trigger Automations (For Tag & List Related Events)","wp-marketing-automations"),checked:ot,className:"bwf-tooglecontrol-advance",onChange:ct})))),Object(n.createElement)("div",{className:"bwf-pt-0"},O?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(u.a,null,!!j&&Object(n.createElement)(u.b,null,Object(n.createElement)(a.Button,{isSecondary:!0,onClick:E,className:A},j)),Object(n.createElement)(u.b,{className:O},Object(n.createElement)(a.Button,{onClick:pt,isBusy:!!k,disabled:!(!k&&T.length>0),isPrimary:!0},Object(n.createElement)("span",null,b||Object(o.__)("Import","wp-marketing-automations"))),h&&Object(n.createElement)(a.Button,{onClick:bt,className:"bwf-ml-10",isSecondary:!0},h)))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(a.Button,{onClick:pt,isPrimary:!0,isBusy:!!k,disabled:!!k,className:"bwf-display-flex"},Object(n.createElement)("span",null,b||Object(o.__)("Import","wp-marketing-automations"))),h&&Object(n.createElement)(a.Button,{onClick:bt,className:"bwf-ml-10",isSecondary:!0},h)))))}},1194:function(t,e,r){},1257:function(t,e,r){},1258:function(t,e,r){},1259:function(t,e,r){},1260:function(t,e,r){},1261:function(t,e,r){},1262:function(t,e,r){},1499:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r(1),o=r(18),c=r(6),i=r.n(c),l=r(3),u=r(144),s=r(2),f=r(201),m=r(61),p=r(62),b=r(5),h=r(19),d=r(1121),y=r(1105),v=r(9),g=r.n(v),w=r(364),O=r(8),j=r(157),E=r(29),_=r(11);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var x=["body"];function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){L(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function L(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=k(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==k(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P(){P=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new C(n||[]);return a(c,"_invoke",{value:x(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(I([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==k(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function x(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=S(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function S(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(k(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;L(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function C(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return A(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var T=function(t){var e=t.contact,r=Object(n.useContext)(l.h),o=I(Object(n.useState)(!1),2),c=o[0],i=o[1],u=I(Object(n.useState)({type:"email",title:"",body:"",id:0,send:!1}),2),f=u[0],m=u[1],p=I(Object(n.useState)({status:!1,message:""}),2),h=p[0],d=p[1],y=[{value:"",label:Object(a.__)("Select Type","wp-marketing-automations")}].concat(Object(l.L)()),v=function(){var n,a=(n=P().mark((function n(a){var o;return P().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(o={title:a.title,body:a.body,type:a.type,private:a.send,modified_by:Object(l.N)()}).created_by=Object(l.N)(),i(!0),n.prev=3,n.next=6,g()({path:Object(l.A)("/v3/contacts/".concat(e.id,"/notes/")),method:"POST",data:{notes:o},headers:{"Content-Type":"application/json"}}).then((function(e){if(200!=e.code)throw Error(Object(l.u)(null==e?void 0:e.message));r(e.message),t.setModelStatus({status:!1,contactInfo:{}})})).catch((function(t){throw Error(Object(l.u)(null==t?void 0:t.message))}));case 6:n.next=12;break;case 8:n.prev=8,n.t0=n.catch(3),d({status:!0,message:n.t0.message}),i(!1);case 12:Object(l.Lb)(r,3e3);case 13:case"end":return n.stop()}}),n,null,[[3,8]])})),function(){var t=this,e=arguments;return new Promise((function(r,a){var o=n.apply(t,e);function c(t){C(o,r,a,c,i,"next",t)}function i(t){C(o,r,a,c,i,"throw",t)}c(void 0)}))});return function(t){return a.apply(this,arguments)}}();return Object(n.createElement)(b.Modal,{className:"bwf-admin-modal bwf-admin-modal-large bwf-message-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Add Note","wp-marketing-automations")),Object(n.createElement)("span",{onClick:function(){return t.setModelStatus(!1)},className:"bwf-modal-close"},Object(n.createElement)(O.a,{icon:"close",color:"#353030"}))),Object(n.createElement)("div",{className:"bwf-form-fields"},h.status&&Object(n.createElement)(E.a,{status:"error",onRemove:function(){return d(!1)},className:"bwf-send-note-notice"},h.message?h.message:Object(a.__)("Title, type and body are mandatory field. Kindly fill them","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-message-wrap"},Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-mb-24"},Object(n.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Contact","wp-marketing-automations")),Object(n.createElement)("div",null,Object(n.createElement)("span",{className:"bwf-highlight-content"},Object(n.createElement)("b",null,e.f_name+" "+e.l_name)," ( "+e.email+" ) "))),Object(n.createElement)("div",{className:"bwf-mb-24"},Object(n.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Type","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-select-full-wrap"},Object(n.createElement)(b.SelectControl,{value:f.type,className:"bwf-w-100p",options:y,onChange:function(t){return m(N(N({},f),{},{type:t}))},disabled:c}))),Object(n.createElement)("div",{className:"bwf-mb-24"},Object(n.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Title","wp-marketing-automations")),Object(n.createElement)(b.TextControl,{type:"text",value:f.title,placeholder:Object(a.__)("Type here …","wp-marketing-automations"),disabled:c,onChange:function(t){return m(N(N({},f),{},{title:t}))}})),Object(n.createElement)("div",{className:"bwf-message-textarea"},Object(n.createElement)(j.a,{keyid:"bwf-note-editor",content:f.body,setContent:function(t){m((function(e){e.body;return N(N({},function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(e,x)),{},{body:t})}))},height:200})),Object(n.createElement)("div",{className:"bwf-message-footer"},0==parseInt(f.id)&&Object(n.createElement)("div",{className:"bwf-note-send"},Object(n.createElement)(b.ToggleControl,{label:Object(a.__)("Send Note to Contact","wp-marketing-automations"),checked:Boolean(parseInt(f.send)),onChange:function(t){return m(N(N({},f),{},{send:t?"1":"0"}))},className:"bwf-tooglecontrol-advance"})),Object(n.createElement)("div",{className:"bwf-button-col"},Object(n.createElement)(_.a,{className:"bwf-cancel-btn",onClick:function(){return t.setModelStatus(!1)},disabled:c},Object(a.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(_.a,{isPrimary:!0,isBusy:c,disabled:c,onClick:function(){Object(s.isEmpty)(f.title)||Object(s.isEmpty)(f.body)||Object(s.isEmpty)(f.type)?d({status:!0,message:""}):(d({status:!1,message:""}),m(N(N({},f),{},{loading:!0})),v(f))}},Object(a.__)("Add Note","wp-marketing-automations")))))))},F=r(47),G=r(147),D=r(14),$=r(350),M=r(146),B=(r(1194),r(1111)),z=r(1134),U=r(206),R=r(1094),q=function(t){var e=t.isOpen,r=void 0!==e&&e,o=t.query,c=Object(B.a)(!0,!0),i=c.loading,u=c.filters;return r&&!Object(l.ac)()?Object(n.createElement)("div",{className:"bwf-filter-placeholder bwf-w-100p "+(Object(l.ac)()?"":"bwf-position-relative bwf-h-200")},!!u&&Object(n.createElement)(U.a,{siteLocale:"en-US",currency:{},config:{title:Object(a.__)("Select Rules","wp-marketing-automations"),filters:u,footerComponent:function(t){return Object(n.createElement)(z.a,{filter:t.data,config:t.config})},enableGrouping:!0},path:"/contacts",query:{}}),Object(n.createElement)(R.a,{modalContent:{isFeature:!0,featureTitle:Object(a.__)("Contact Filters","wp-marketing-automations"),proLink:Object(l.fb)("upgrade",{utm_medium:"Contacts+Filters"})},content:Object(a.__)("We're sorry, this feature is not available on your plan. Learn more about Contact Filters.","wp-marketing-automations")})):r&&i?Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-filter-placeholder"},Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start gap-12"},Object(n.createElement)("div",{className:"bwf-w-60"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-60"})),Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-210"}),Object(n.createElement)("br",null),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-30 bwf-w-90"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-30 bwf-w-90"}))),Object(n.createElement)("div",{className:"bwf_clear_20"})):r&&!!u&&Object(n.createElement)(U.a,{siteLocale:"en-US",currency:Object(l.qc)()?bwfcrm_contacts_data.currency:{},config:{title:Object(a.__)("Select Rules","wp-marketing-automations"),filters:u,footerComponent:function(t){return Object(n.createElement)(z.a,{filter:t.data,config:t.config})},enableGrouping:!0},path:"/contacts",query:o})},Y=r(44),V=r(87);function W(t){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(){H=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==W(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(W(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function K(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?K(Object(r),!0).forEach((function(e){J(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function J(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=W(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==W(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function X(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return tt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var et=function(t){var e=t.refreshTable,r=X(Object(n.useState)(!1),2),o=r[0],c=r[1],i=Object(l.Bb)("table_sort_data"),u=i.hasOwnProperty("contact_sort_data")?i.contact_sort_data:{},f=Object(s.isObject)(u)&&!Object(s.isEmpty)(u)?u:{},p=f.orderby,b=void 0===p?"last_modified":p,h=f.order,d=void 0===h?"desc":h,y=Object(n.useContext)(l.h),v=[{value:"f_name",label:Object(a.__)("Contact Name","wp-marketing-automations")},{value:"creation_date",label:Object(a.__)("Creation Date","wp-marketing-automations")},{value:"last_modified",label:Object(a.__)("Last Updated","wp-marketing-automations")},{value:"country",label:Object(a.__)("Country","wp-marketing-automations")},{value:"state",label:Object(a.__)("State","wp-marketing-automations")}];Object(l.qc)()&&v.push({value:"total_order_count",label:Object(a.__)("Orders","wp-marketing-automations")},{value:"total_order_value",label:Object(a.__)("Total Spend","wp-marketing-automations")},{value:"l_order_date",label:Object(a.__)("Last Order Date","wp-marketing-automations")});var w=X(Object(n.useState)(b),2),j=w[0],E=w[1],k=X(Object(n.useState)(d),2),x=k[0],S=k[1],N=function(){var t,r=(t=H().mark((function t(r){var n,o;return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.prev=1,n={orderby:j,order:x},(o=Z({},i)).contact_sort_data=n,t.next=7,g()({path:Object(l.A)("/user-preference/".concat(Object(l.N)(),"/")),method:"POST",data:{data:{table_sort_data:o}}}).then((function(t){if(200!==t.code)throw Error(Object(l.u)(null==t?void 0:t.message));bwfcrm_contacts_data.table_column_data.table_sort_data.contact_sort_data=n,y(t.message),e(),r(),c(!1)})).catch((function(t){throw Error(Object(l.u)(null==t?void 0:t.message))}));case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),c(!1),y(t.t0.message?t.t0.message:Object(a.__)("Error in saving sort data","wp-marketing-automations"));case 13:Object(l.Lb)(y,2e3);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){Q(o,n,a,c,i,"next",t)}function i(t){Q(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(t){return r.apply(this,arguments)}}();return Object(n.createElement)("div",{className:"bwf-custom-ellipsis bwf-sort-ellipsis-contact-list",style:{width:"30px"}},Object(n.createElement)(m.a,{label:"",buttonIcon:Object(n.createElement)("div",{className:"bwf-sort-button components-button is-light bwf-btn-small",key:"import",style:{width:"30px",padding:"7px"},title:Object(a.__)("Sort Order","wp-marketing-automations")},Object(n.createElement)(O.a,{icon:"sort",size:14})),renderContent:function(t){var e=t.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-heading-1"},Object(a.__)("Sorting","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-heading-2 bwf-mt-16"},Object(a.__)("Sort Order","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-contact-sort-popover"},Object(n.createElement)("div",{className:"bwf-display-flex gap-8 bwf-flex-start bwf-sort-order-buttons"},Object(n.createElement)(_.a,{isSecondary:!x||"desc"===x,isTertiary:x&&"desc"!==x,onClick:function(){return S("desc")}},Object(a.__)("Descending","wp-marketing-automations")),Object(n.createElement)(_.a,{isSecondary:x&&"asc"===x,isTertiary:x&&"asc"!==x,onClick:function(){return S("asc")}},Object(a.__)("Ascending","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-sort-column-list bwf-mt-16"},Object(n.createElement)(V.a,{className:"bwfcrm-inline-option",selected:j,label:"",options:v,onChange:function(t){return E(t)}})),Object(n.createElement)("div",{className:"bwf-contact-sort-action bwf-mt-16"},Object(n.createElement)(_.a,{isPrimary:!0,className:"bwf-update-button",onClick:function(){return N(e)},isBusy:o},Object(a.__)("Update","wp-marketing-automations")))))}}))},rt=r(178),nt=r(123);function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t){return function(t){if(Array.isArray(t))return bt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||pt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function it(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(r),!0).forEach((function(e){lt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function lt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=at(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=at(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==at(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ut(){ut=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==at(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(at(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function st(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function ft(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){st(o,n,a,c,i,"next",t)}function i(t){st(o,n,a,c,i,"throw",t)}c(void 0)}))}}function mt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||pt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(t,e){if(t){if("string"==typeof t)return bt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bt(t,e):void 0}}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var ht=Object(nt.c)((function(){return Object(n.createElement)(O.a,{icon:"menu-2",size:20})})),dt=Object(nt.b)((function(t){var e=t.item,r=t.onRemove;return Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-contact-preferences__item"},Object(n.createElement)("div",{className:"bwf-contact-preferences__item-title"},Object(n.createElement)(ht,null),e.label),Object(n.createElement)("div",{className:"bwf-contact-preferences__item-type"},Object(n.createElement)("span",{className:"bwf-tags bwf-tag-gray bwf-w-fit-content"},e.groupLabel)),Object(n.createElement)("div",{className:"bwf-display-flex bwf-cursor-pointer",onClick:function(){r(Object.keys(e)[0],e.groupKey)}},Object(n.createElement)(O.a,{icon:"delete",size:20}))))})),yt=Object(nt.a)((function(t){var e=t.items,r=t.onRemove;return Object(n.createElement)("div",{className:"bwf-contact-preferences__items-wrap"},Object(s.isEmpty)(e)?Object(n.createElement)("div",{className:"bwf-h4 bwf_text_center bwf-m-20"},Object(a.__)("No Additional Columns Selected. Click the Add New Columns button.","wp-marketing-automations")):e.map((function(t,e){return Object(n.createElement)(dt,{item:t,key:"bwf-contact-preferences__item-".concat(e),index:e,onRemove:r})})))})),vt=["contact_details","geography","contact_custom_fields","woocommerce","segments","engagement"],gt=function(t){var e=t.onRequestClose,r=t.refreshTable,o=t.setModelData,c=Object(n.useContext)(l.h),i=mt(Object(n.useState)(!1),2),u=i[0],f=i[1],m=mt(Object(n.useState)(!1),2),p=m[0],h=m[1],d=mt(Object(n.useState)(!1),2),y=d[0],v=d[1],w=mt(Object(n.useState)(0),2),j=w[0],E=w[1],k=Object(n.useRef)(null),x=mt(Object(n.useState)([]),2),S=x[0],N=x[1],L=mt(Object(n.useState)([]),2),P=L[0],C=L[1],I=mt(Object(n.useState)({}),2),A=I[0],T=I[1],F=mt(Object(n.useState)(!1),2),G=F[0],D=F[1],$=Object(n.useRef)(new AbortController),M=Object(B.a)(!0,!1),z=M.loading,U=void 0===z||z,R=M.filters,q=void 0===R?{}:R,V=function(){var t=ft(ut().mark((function t(){return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.A)("/contact/export/custom-selections"),signal:$.current.signal}).then((function(t){if(200===t.code){var e=Object.create({});Object.keys(t.result).forEach((function(r){"wishlist-member"!==r&&(e[r]={label:t.result[r].name},e[r].fields=Object.keys(t.result[r].selections).map((function(e){return{key:t.result[r].selections[e].slug,label:t.result[r].selections[e].name}})))})),T(e),h(!0)}})).catch((function(t){console.log(t)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),W=Object(n.useMemo)((function(){var t=[],e=["engaged","unengaged","broadcast_sent","broadcast_open","broadcast_click"];return Object.entries(q).forEach((function(r){var n=mt(r,2),a=n[0],o=n[1];if(e.includes(a)||["email","creation_date"].includes(a))return!1;var c;c={key:a,label:o.labels.add},t.hasOwnProperty(o.group)?t[o.group].fields.push(c):t[o.group]={label:o.groupLabel,fields:[c]}})),it(it({},t),A)}),[q,A]);Object(n.useEffect)((function(){return Object(l.ac)()?V():h(!0),function(){$.current.abort()}}),[]),Object(n.useEffect)((function(){if(Object(s.isEmpty)(S)&&p&&!G){if(W.hasOwnProperty("contact_details")){var t=[],e=[];if(!Object(s.isEmpty)(bwfcrm_contacts_data.table_column_data.contactv2))bwfcrm_contacts_data.table_column_data.contactv2.map((function(e){Object(s.isObject)(e)&&t.push(e)})),Object.keys(W).forEach((function(r){W[r].fields.map((function(t){return t.key})).every((function(e){return t.some((function(t){return t.hasOwnProperty(e)}))}))&&e.push(lt({},r,W[r].label))}));N(t),C(e)}D(!0)}}),[W]);var H=function(t,e){var r=W[t].fields.map((function(t){return t.key}));if(P.some((function(e){return e.hasOwnProperty(t)})))N((function(t){return t.filter((function(t){return!r.some((function(e){return t.hasOwnProperty(e)}))}))})),C((function(e){return e.filter((function(e){return!e.hasOwnProperty(t)}))}));else{var n=W[t].fields.map((function(r){return lt(lt(lt(lt({},r.key,r.label),"label",r.label),"groupKey",t),"groupLabel",e)}));N((function(t){return Object(s.uniqBy)([].concat(ot(t),ot(n)),(function(t){return Object.keys(t)[0]}))})),C((function(r){return[].concat(ot(r),[lt({},t,e)])}))}},K=function(){var t=ft(ut().mark((function t(){return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!0),t.prev=1,t.next=4,g()({path:Object(l.A)("/user-preference/".concat(Object(l.N)(),"/")),method:"POST",data:{data:{contact_columnv2:S}}}).then((function(t){if(200!==t.code)throw Error(Object(l.u)(null==t?void 0:t.message));bwfcrm_contacts_data.table_column_data.contactv2=S,c(t.message),Object(l.Lb)(c,2e3),r(),e(),f(!1)})).catch((function(t){throw Error(Object(l.u)(null==t?void 0:t.message))}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),f(!1),o({status:!0,modalTitle:Object(a.__)("Save Columns","wp-marketing-automations"),error:t.t0.message?t.t0.message:Object(a.__)("Error in saving preferences","wp-marketing-automations")});case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}();return Object(n.createElement)(b.Modal,{title:Object(n.createElement)(n.Fragment,null,Object(a.__)("Table Columns","wp-marketing-automations"),Object(n.createElement)("span",null,Object(a.__)("Add new columns or arrange existing columns in contact table","wp-marketing-automations"))),ref:k,onRequestClose:function(){return e()},className:"bwf-admin-modal bwf-contact-preferences-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-contact-preferences-modal__content"},y?Object(n.createElement)("div",{className:"bwf-contact-preferences"},Object(n.createElement)("div",{className:"bwf-contact-preferences__header"},Object(n.createElement)("div",{className:"bwf-contact-preferences__back-btn",onClick:function(){return v(!1)}},Object(n.createElement)(O.a,{icon:"arrow-left-long",width:20,height:14}),Object(n.createElement)("span",null,Object(a.__)("Back","wp-marketing-automations")))),Object(n.createElement)("div",{className:"bwf-contact-preferences__items-wrap"},Object(s.isEmpty)(Object.keys(W))||U?Object(n.createElement)(wt,null):[].concat(vt,ot(Object.keys(A))).map((function(t,e){return W.hasOwnProperty(t)&&Object(n.createElement)("div",{className:"bwf-contact-preferences__add-col-group",key:"bwf-contact-preferences__add-col-group-".concat(e)},Object(n.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){return E((function(t){return t!==e&&e}))}},Object(n.createElement)("label",{className:"bwf-contact-preferences__add-col-group-header"},Object(n.createElement)(Y.a,{checked:P.some((function(e){return e.hasOwnProperty(t)})),onChange:function(){return H(t,W[t].label)},onClick:function(e){e.stopPropagation(),H(t,W[t].label)}}),Object(n.createElement)("div",{className:"bwf-contact-preferences__add-col-group-title"},W[t].label,function(t){var e=W[t].fields.map((function(t){return t.key})),r=0;return e.forEach((function(t){S.forEach((function(e){e.hasOwnProperty(t)&&r++}))})),r>0?Object(n.createElement)("span",null," (",r," Selected )"):""}(t))),Object(n.createElement)(_.a,{className:"bwf-contact-preferences__accordian-icon",onClick:function(t){t.stopPropagation(),E((function(t){return t!==e&&e}))}},Object(n.createElement)(O.a,{icon:j===e?"angle-up":"angle-down",width:"16",height:"18"}))),j===e&&Object(n.createElement)("div",{className:"bwf-contact-preferences__add-col-group-content"},W[t].fields.map((function(e,r){return Object(n.createElement)("label",{className:"bwf-contact-preferences__add-col-group-item",key:"bwf-contact-preferences__add-col-group-item-".concat(r)},Object(n.createElement)(Y.a,{checked:S.some((function(t){return t.hasOwnProperty(e.key)})),onChange:function(){return function(t,e,r,n){var a=W[r].fields.map((function(t){return t.key}));S.some((function(e){return e.hasOwnProperty(t)}))?N((function(e){var n=e.filter((function(e){return!e.hasOwnProperty(t)}));return a.every((function(t){return n.hasOwnProperty(t)}))||C((function(t){return t.filter((function(t){return!t.hasOwnProperty(r)}))})),n})):N((function(o){var c=[].concat(ot(o),[lt(lt(lt(lt({},t,e),"label",e),"groupKey",r),"groupLabel",n)]);return a.every((function(t){return c.some((function(e){return e.hasOwnProperty(t)}))}))&&C((function(t){return[].concat(ot(t),[lt({},r,n)])})),c}))}(e.key,e.label,t,W[t].label)}}),Object(n.createElement)("div",null,e.label))}))))})))):Object(n.createElement)("div",{className:"bwf-contact-preferences"},Object(n.createElement)("div",{className:"bwf-contact-preferences__header"},Object(n.createElement)("div",{className:"bwf-contact-preferences__header-heading"},Object(a.__)("Columns","wp-marketing-automations")),Object(n.createElement)(_.a,{isSecondary:!0,className:"bwf-btn-small is-border",onClick:function(){return v(!0)}},Object(a.__)("Add New Columns","wp-marketing-automations"))),p&&G?Object(n.createElement)(yt,{helperContainer:k.current,helperClass:"bwf-contacts-preferences-item__helper",useDragHandle:!0,axis:"y",items:S,onRemove:function(t,e){var r=W[e].fields.map((function(t){return t.key}));N((function(n){var a=n.filter((function(e){return!e.hasOwnProperty(t)}));return r.every((function(t){return a.hasOwnProperty(t)}))||C((function(t){return t.filter((function(t){return!t.hasOwnProperty(e)}))})),a}))},onSortEnd:function(t){var e=t.oldIndex,r=t.newIndex;e!==r&&N((function(t){return Object(nt.d)(t,e,r)}))}}):Object(n.createElement)(wt,{type:"fields"}))),Object(n.createElement)("div",{className:"bwf-contact-preferences__actions"},Object(n.createElement)(_.a,{onClick:function(){return e()},disabled:u},Object(a.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(_.a,{isPrimary:!0,onClick:K,disabled:u,isBusy:u},Object(a.__)("Save","wp-marketing-automations"))))},wt=function(t){var e=t.type,r=void 0===e?"add-col":e;return ot(Array(5)).map((function(t,e){return Object(n.createElement)("div",{key:"bwf-preferences-placeholder-".concat(e),className:"bwf-contact-preferences__add-col-group"},Object(n.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(n.createElement)("div",{className:"bwf-flex"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-20 bwf-ml-16"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-ml-10 ".concat("fields"===r?"bwf-w-90":"bwf-w-120")})),"fields"===r&&Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-20 bwf-mr-15"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-mr-15 ".concat("fields"===r?"bwf-w-80 bwf-h-30 bwf-rounded-4":"bwf-w-20 bwf-h-20")})))}))},Ot=function(t){var e=t.refreshTable,r=t.setModelData,o=mt(Object(n.useState)(!1),2),c=o[0],i=o[1];return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-sort-button components-button is-light bwf-btn-small "+(c?"is-active":""),onClick:function(){return i(!0)},style:{width:"30px",padding:"7px"},title:Object(a.__)("Column Preference","wp-marketing-automations")},Object(n.createElement)(O.a,{icon:"filters",size:16})),c&&Object(n.createElement)(gt,{onRequestClose:function(){return i(!1)},refreshTable:e,setModelData:r}))},jt=r(54),Et=r(358),_t=r(96),kt=r(51),xt=r(200),St=r(40),Nt=r(343),Lt=r(342),Pt=r(362);function Ct(t){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function It(){It=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Ct(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Ct(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function At(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function Tt(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){At(o,n,a,c,i,"next",t)}function i(t){At(o,n,a,c,i,"throw",t)}c(void 0)}))}}function Ft(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Gt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Dt=function(t){var e=t.onClose,r=void 0===e?function(){}:e,o=t.selectedContacts,c=void 0===o?[]:o,i=t.refreshContactData,u=void 0===i?function(){}:i,f=Ft(Object(n.useState)({}),2),m=f[0],p=f[1],h=Ft(Object(n.useState)([]),2),d=h[0],y=h[1],v=Ft(Object(n.useState)(!0),2),w=v[0],j=v[1],k=Ft(Object(n.useState)(!1),2),x=k[0],S=k[1],N=Ft(Object(n.useState)([]),2),L=N[0],P=N[1],C=Ft(Object(n.useState)([]),2),I=C[0],A=C[1],T=Ft(Object(n.useState)(0),2),F=T[0],G=T[1],$=Ft(Object(n.useState)(!1),2),M=$[0],B=$[1],z=function(){var t=Tt(It().mark((function t(){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.A)("/link-triggers/actions"),method:"GET"}).then((function(t){200===t.code&&(t.result.hasOwnProperty("actions")&&P(t.result.actions),t.result.hasOwnProperty("actions_schema")&&A(t.result.actions_schema)),j(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useLayoutEffect)((function(){z(),y([]),p({}),B(!1)}),[]);var U,R=function(t){var e={};return Object.keys(t).map((function(r){if("new"!==r)if(Object(s.isEmpty)(t[r]))Object(s.isEmpty)(I[r])&&(e[r]=t[r]);else if(Object(s.isObject)(t[r])&&!Object(s.isArray)(t[r])){var n={};Object.keys(t[r]).map((function(e){Object(s.isEmpty)(t[r][e])||(n[e]=t[r][e])})),e[r]=n}else Object(s.isArray)(t[r])&&(e[r]=t[r])})),e},q=function(){var t=Tt(It().mark((function t(){var e;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=R(m),!Object(s.isEmpty)(e)||!(Object(s.isEmpty)(m)||1===Object.keys(m).length&&m.hasOwnProperty("new"))){t.next=6;break}return y([Object(a.__)("No actions selected","wp-marketing-automations")]),t.abrupt("return");case 6:if(Object.entries(m).length===Object.entries(e).length){t.next=9;break}return y([Object(a.__)("Please fill all the required fields","wp-marketing-automations")]),t.abrupt("return");case 9:return y([]),t.prev=10,S(!0),t.next=14,g()({path:Object(l.A)("/bulk-action/"),method:"POST",data:{include_ids:c.map((function(t){return t.id})),actions:e,only_action:!0,enable_automation:M}}).then((function(t){200==t.code&&t.hasOwnProperty("result")&&t.result.hasOwnProperty("id")&&(Object(l.Z)()||(bwfcrm_contacts_data.first_bulk_action_id=1),G(t.result.id))})).catch((function(t){throw Error(Object(l.u)(null==t?void 0:t.message))}));case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(10),y(t.t0.message),S(!1);case 20:case"end":return t.stop()}}),t,null,[[10,16]])})));return function(){return t.apply(this,arguments)}}();return x&&parseInt(F)>0?Object(n.createElement)(b.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,onRequestClose:r,className:"bwf-admin-modal bwf-admin-modal-640 bwf-admin-modal-no-header bwf-show-close no-btn-css"},Object(n.createElement)("div",{className:"bwf-perform-bulk-action-modal-body bwf-mtb-12"},Object(n.createElement)("div",{className:"bwf-heading4-new bwf-display-flex"},Object(a.__)("Bulk Action has started","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-heading5-new bwf-display-flex bwf-mt-8 is-black"},Object(a.__)("The actions are being processing in the background.","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex gap-16 bwf-mt-24"},Object(n.createElement)(_.a,{onClick:function(){u(),r()},isPrimary:!0},Object(a.__)("View Contacts","wp-marketing-automations")),Object(n.createElement)(_.a,{onClick:function(){return Object(D.k)({page:"autonami",path:"/bulk-action/"+F},"/",{})},isSecondary:!0},Object(a.__)("Take to Bulk Action Screen","wp-marketing-automations"))))):Object(n.createElement)(b.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-large bwf-admin-modal-no-header"},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Create Bulk Action","wp-marketing-automations")),Object(n.createElement)("span",{onClick:r,className:"bwf-modal-close"},Object(n.createElement)(O.a,{icon:"close",color:"#353030"}))),d.length>0&&(U=Object(s.isArray)(d)?Object(n.createElement)("ul",null,d.map((function(t){return Object(n.createElement)("li",{key:Math.random()},t)}))):d,Object(n.createElement)(E.a,{status:"error"},U)),Object(n.createElement)("div",{className:"bwf-perform-bulk-action-modal-body "+(x?"is-creating-baction":"")},w?Object(n.createElement)("div",null,[1,2,3].map((function(t){return Object(n.createElement)("div",{key:t},Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between gap-24"},Object(n.createElement)("div",{className:"bwf-display-flex gap-20"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-20"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-400 bwf-h-20"})),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-20 bwf-w-150"})))}))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(Pt.b,{actions:L,actionSchema:I,value:Object(s.isEmpty)(m)?{new:{}}:m,setActionValue:function(t){p(t)},onEmptyError:function(t){y(t?Object(a.__)("Please fill the empty actions to add new one.","wp-marketing-automations"):"")}}),1===Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.2.1")&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_16"}),Object(n.createElement)(b.ToggleControl,{label:Object(a.__)("Trigger automations (for tag, list and status change related events)","wp-marketing-automations"),checked:M,className:"bwf-tooglecontrol-advance",onChange:function(t){B(t)}})))),Object(n.createElement)("div",{className:"bwf_text_right bwf-form-buttons bwf-mt-24"},w?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-30 bwf-mr-16"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-30"})):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(_.a,{className:"bwf-cancel-btn",onClick:r},Object(a.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(_.a,{onClick:q,className:Object(s.size)(d)||function(){if(Object(s.isEmpty)(m)||1===Object.keys(m).length&&m.hasOwnProperty("new"))return!1;var t=[];return Object.keys(m).map((function(e){(""===e||Object(s.isEmpty)(m[e])&&!Object(s.isEmpty)(I[e]))&&t.push(e)})),!!Object(s.isEmpty)(t)}()?"bwf-no-ripple":"",isPrimary:!0,isBusy:x},Object(a.__)("Apply","wp-marketing-automations")))))};function $t(t){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Mt=["path","page","filter"],Bt=["s"],zt=["s"];function Ut(){return(Ut=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(null,arguments)}function Rt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Rt(Object(r),!0).forEach((function(e){Yt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Yt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=$t(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$t(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vt(){Vt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==$t(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError($t(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Wt(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function Ht(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){Wt(o,n,a,c,i,"next",t)}function i(t){Wt(o,n,a,c,i,"throw",t)}c(void 0)}))}}function Kt(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Zt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||Jt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(t,e){if(t){if("string"==typeof t)return Qt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qt(t,e):void 0}}function Qt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Xt=function(t){var e=Object(n.useContext)(l.h),r=Zt(Object(n.useState)(!1),2),o=r[0],c=r[1],v=Zt(Object(n.useState)(!1),2),j=v[0],E=v[1],k=Zt(Object(n.useState)(!1),2),x=k[0],S=k[1],N=Zt(Object(n.useState)({}),2),L=N[0],P=N[1],C=Zt(Object(n.useState)(!1),2),I=C[0],A=C[1],B=Zt(Object(n.useState)(!1),2),U=B[0],R=B[1],V=Zt(Object(n.useState)(!0),2),W=V[0],H=V[1],K=Object(d.a)(),Z=Object(y.a)(),J=t.query,Q=t.isExport,X=t.setExport,tt=t.isImport,nt=t.setImport,at=t.menuButtons,ot=t.pitchData,ct=J.path,it=J.page,lt=J.filter,ut=Kt(J,Mt),st=Object(n.useRef)(ut),ft=Zt(Object(n.useState)({status:!1}),2),mt=ft[0],pt=ft[1],bt=Zt(Object(n.useState)({status:!1,contactInfo:{}}),2),ht=bt[0],dt=bt[1],yt=Zt(Object(n.useState)({loading:!1,status:!1}),2),vt=yt[0],gt=yt[1],wt=Zt(Object(n.useState)({status:!1,contactInfo:{}}),2),Pt=wt[0],Ct=wt[1],It=Z.fetchListing,At=Object(rt.a)().setSingleContactListData,Tt=Zt(Object(n.useState)([]),2),Ft=Tt[0],Gt=Tt[1],$t=Zt(Object(n.useState)(!1),2),Rt=$t[0],Yt=$t[1],Wt=function(){_e&&_e(),Gt([]),setTimeout((function(){Qt.reset()}),2500)},Qt=Object(_t.useMutation)(function(){var t=Ht(Vt().mark((function t(e){return Vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.A)("/v3/contacts/"),method:"DELETE",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){Wt(),It(J,0,ue,!0)},onError:function(){}}),Xt=Object(n.useCallback)((function(t,e){switch(t){case"delete":Gt(e),Yt(!0);break;case"perform-bulk-action":Gt(e),E(!0)}}),[]),te=K.getPageNumber,ee=K.getPerPageCount,re=K.getTotalCount,ne=K.getLoading,ae=K.getContacts,oe=K.getError,ce=K.getCountData,ie=ae(),le=te(),ue=ee(),se=re(),fe=ne(),me=oe(),pe=ce();Object(n.useEffect)((function(){It(J,0,25,!0),A(!0)}),[]),Object(n.useEffect)((function(){Object(l.xc)(ut,st.current)||Q||It(J,0,25,!0),st.current=ut}),[J]),Object(n.useEffect)((function(){fe||R(!1)}),[fe]),Object(n.useEffect)((function(){!Q&&I&&It(J,0,25,!0)}),[Q]),Object(n.useEffect)((function(){!tt&&I&&It(J,0,25,!0)}),[tt]);var be,he,de=function(t){var e=t.f_name,r=void 0===e?"":e,a=t.l_name,o=void 0===a?"":a,c=t.id,i=void 0===c?"":c;return Object(n.createElement)(f.a,{to:"wp-admin/admin.php?page=autonami&path=/contact/"+i,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(t){t.preventDefault(),At(Object(l.rc)([r,o]," "));var e=ut.s,n=void 0===e?"":e,a=Kt(ut,Bt),c=Object(s.isEmpty)(a)?""!==n?{s:n}:{}:qt(qt({},ut),{},{filter:"advanced"});Object(D.k)({page:"autonami",path:"/contact/"+parseInt(i),return_to:"/contacts"},"/",c)}},Object(n.createElement)(Nt.a,{contact:t,hideJoiningDate:!0}))},ye=function(t){return Object(n.createElement)("div",{className:"bwf-c-contact-details-cell"},t.email?Object(n.createElement)(h.a,{justify:"justify",align:"top"},Object(n.createElement)(h.c,null,t.email)):"-")},ve=function(t){return Object(n.createElement)(m.a,{label:Object(a.__)("Quick Actions","wp-marketing-automations"),renderContent:function(e){var r=e.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){}},Object(n.createElement)(f.a,{to:"admin.php?page=autonami&path=/contact/"+t.id,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(e){e.preventDefault(),At(Object(l.rc)([t.f_name,t.l_name]," "));var r=ut.s,n=void 0===r?"":r,a=Kt(ut,zt),o=Object(s.isEmpty)(a)?""!==n?{s:n}:{}:qt(qt({},ut),{},{filter:"advanced"});Object(D.k)({path:"/contact/"+parseInt(t.id),return_to:"/contacts"},"/",o)}},Object(n.createElement)(h.a,{justify:"flex-start"},Object(n.createElement)(h.c,null,Object(a.__)("View","wp-marketing-automations"))))),Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){dt({status:!0,contactInfo:t}),r()}},Object(n.createElement)(h.a,{justify:"space-between"},Object(n.createElement)(h.c,null,Object(a.__)("Send Message","wp-marketing-automations")))),Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){Ct({status:!0,contactInfo:t}),r()}},Object(n.createElement)(h.a,{justify:"flex-start"},Object(n.createElement)(h.c,null,Object(a.__)("Add Note","wp-marketing-automations")))),Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){pt({status:!0,contactID:t.id,data:t}),r()}},Object(n.createElement)(h.a,{justify:"flex-start"},Object(n.createElement)(h.c,null,Object(a.__)("Delete","wp-marketing-automations")))))}})},ge=Object(n.useMemo)((function(){var t={};if(Array.isArray(ie)){var e,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Jt(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){i=!0,o=t},f:function(){try{c||null==r.return||r.return()}finally{if(i)throw o}}}}(ie);try{for(r.s();!(e=r.n()).done;){var n=e.value;t[n.id]=n}}catch(t){r.e(t)}finally{r.f()}}return t}),[ie]),we=Object(M.b)(ge),Oe=we.singleSelectProps,je=we.selectAllProps,Ee=we.floatingBarProps,_e=we.resetSelection,ke=we.selected,xe=void 0===ke?[]:ke,Se=Object.keys(xe).filter((function(t){return xe[t]})).length,Ne=bwfcrm_contacts_data.table_column_data.contactv2,Le=function(t){t!==ue&&It(J,0,t)},Pe=function(){It(J,0,ue,!0)},Ce=i()("bwfcrm-contacts-list",{"has-search":!0}),Ie=function(){var t=Ht(Vt().mark((function t(r){return Vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.prev=1,t.next=4,g()({path:Object(l.A)("/v3/contacts/".concat(r,"/")),method:"DELETE"}).then((function(t){if(200!==t.code)throw Error(Object(l.u)(null==t?void 0:t.message));e(t.message),c(!1),pt({}),It(J,0,ue,!0)})).catch((function(t){throw Error(Object(l.u)(null==t?void 0:t.message))}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),pt(qt(qt({},mt),{},{content:t.t0.message})),c(!1);case 10:Object(l.Lb)(e,3e3);case 11:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),Ae=Object(l.M)("withtag"),Te=function(t,e){if(""===e||Object(s.isUndefined)(e)||Object(s.isNull)(e)||!t.hasOwnProperty(e)||Object(s.isNull)(t[e])||Object(s.isUndefined)(t[e])||""===t[e])return"-";if("status"===e){var r=Ae.hasOwnProperty(parseInt(t[e]))?Ae[parseInt(t[e])]:Ae[0];return Object(n.createElement)("span",{className:r.statusclass},r.label)}if("country"===e){var o=t.country?$[t.country]:"";return Object(n.createElement)(h.a,{justify:"start"},Object(n.createElement)(Et.a,{code:t[e],size:15}),o&&Object(n.createElement)("span",{style:{textAlign:"left"}},o))}return"total_order_value"===e?Object(n.createElement)("span",{className:"bwf-tags bwf-tag-revenue",dangerouslySetInnerHTML:{__html:t[e]}}):Object(s.isArray)(t[e])?(c=t[e],i=[],l=[],Object(s.isEmpty)(c)?"-":(c.map((function(t){Object(s.isEmpty)(t)||(i.length<5&&(t.hasOwnProperty("link")&&""!==t.link?i.push(Object(n.createElement)("a",{className:"bwf-a-no-underline",href:Object(s.unescape)(t.link),target:"_blank",key:t.id,rel:"noreferrer"},t.name)):i.push(t.name)),t.hasOwnProperty("link")&&""!==t.link?l.push(Object(n.createElement)("a",{className:"bwf-a-no-underline",href:Object(s.unescape)(t.link),target:"_blank ",key:t.id},t.name)):l.push(Object(n.createElement)("span",{key:t.id},t.name)))})),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-table-v-center"},!Object(s.isEmpty)(i)&&i.map((function(t,e){return Object(n.createElement)("span",{key:e},t,e!==i.length-1&&", ")})),!Object(s.isEmpty)(l)&&l.length>5&&Object(n.createElement)(G.a,{items:l,count:5}))))):Object(s.isBoolean)(t[e])?t[e]?Object(a.__)("Yes","wp-marketing-automations"):Object(a.__)("No","wp-marketing-automations"):Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:t[e]}});var c,i,l},Fe=0===parseInt(Se)?Object(n.createElement)("div",{className:"bwf-display-flex gap-8"},Object(n.createElement)(_.a,{className:"bwf-btn-small is-light",key:"export",onClick:function(){Object(l.ac)()?X(!0):(P({isFeature:!0,featureTitle:Object(a.__)("Contacts Export","wp-marketing-automations"),proLink:Object(l.fb)("upgrade",{utm_medium:"Contacts+Export+Upgrade+Modal"})}),S(!0))}},Object(n.createElement)("span",{className:"bwf-display-flex gap-4"},Object(l.ac)()?Object(n.createElement)(O.a,{icon:"export",size:14}):Object(n.createElement)(O.a,{icon:"king",size:16}),Object(a.__)("Export","wp-marketing-automations"))),Object(n.createElement)(_.a,{className:"bwf-btn-small is-light",key:"import",onClick:function(){Object(l.ac)()?nt(!0):(P({isFeature:!0,featureTitle:Object(a.__)("Contacts Import","wp-marketing-automations"),proLink:Object(l.fb)("upgrade",{utm_medium:"Contacts+Import+Upgrade+Modal"})}),S(!0))}},Object(n.createElement)("span",{className:"bwf-display-flex gap-4"},Object(l.ac)()?Object(n.createElement)(O.a,{icon:"import",size:14}):Object(n.createElement)(O.a,{icon:"king",size:16}),Object(a.__)("Import","wp-marketing-automations"))),Object(n.createElement)(et,{refreshTable:Pe}),Object(n.createElement)(Ot,{refreshTable:Pe,setModelData:gt})):Object(n.createElement)(n.Fragment,null),Ge=fe||me||se>0||"advanced"===lt||!Object(s.isEmpty)(ut)&&ut.hasOwnProperty("s")&&""!==ut.s||U;return Object(n.createElement)(n.Fragment,null,mt&&mt.status&&Object(n.createElement)(b.Modal,{onRequestClose:function(){return pt({})},className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},mt.confirm?Object(n.createElement)(F.a,null):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Delete Contact?","wp-marketing-automations")),Object(n.createElement)("span",{onClick:function(){return pt({})},className:"bwf-modal-close"},Object(n.createElement)(O.a,{icon:"close",color:"#353030"}))),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-modal-content"},Object(n.createElement)("div",{style:{wordBreak:"break-word"}},mt.content?mt.content:Object(n.createElement)(n.Fragment,null,Object(a.__)("You are about to delete this contact ","wp-marketing-automations"),Object(n.createElement)("strong",null,"".concat(mt.data&&mt.data.f_name," ").concat(mt.data&&mt.data.l_name,". ")),Object(a.__)("This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")))),Object(n.createElement)("div",{className:"bwf_text_right bwf-mt-20"},mt.content?Object(n.createElement)(_.a,{isPrimary:!0,onClick:function(){pt({status:!1})}},Object(a.__)("OK","wp-marketing-automations")):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(_.a,{className:"bwf-cancel-btn",onClick:function(){pt({status:!1})},disabled:o},Object(a.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(_.a,{className:"bwf-delete-btn",isBusy:o,onClick:function(){Ie(mt.contactID)}},Object(a.__)("Delete","wp-marketing-automations"))))))),Object(n.createElement)("div",{className:"bwf-content-header-new bwf-pb-0"},Object(n.createElement)("div",{className:"bwf-content-header-left"},Object(n.createElement)("div",{className:"bwf-content-header-title"},Object(a.__)("All Contacts","wp-marketing-automations")),parseInt(se)>0&&Object(n.createElement)("div",{className:"bwf-content-header-count"},Object(a.sprintf)(Object(a._n)("(%s Result)","(%s Results)",se,"wp-marketing-automations"),se))),Object(n.createElement)("div",{className:"bwf-content-header-right"},Ge&&!fe&&at)),!fe&&!Object(s.isEmpty)(pe)&&pe.hasOwnProperty("contacts_active_bulk_actions")&&parseInt(pe.contacts_active_bulk_actions)>0&&W&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-single-automation-notice no-icon bwf-m-0 bwf-san-no-border bwf-mt-8"},Object(n.createElement)("div",{className:"bwf-display-flex gap-24 bwf-flex-start bwf-align-center"},Object(n.createElement)("div",{className:"bwf-display-flex gap-8 bwf-flex-start bwf-w-100p"},Object(n.createElement)(O.a,{icon:"info",color:"#353030",size:20}),Object(n.createElement)("div",{className:"bwf-display-flex gap-8 bwf-space-between bwf-w-100p"},Object(n.createElement)("span",{className:"bwf-normal-text bwf-l-h-16"},Object(n.createElement)("span",{className:"bwf-normal-text bwf-n-b bwf-l-h-16"},Object(a.__)("Information","wp-marketing-automations"),": "),Object(a.__)("Bulk action on contacts is in progress.","wp-marketing-automations")),Object(n.createElement)(_.a,{onClick:function(){return Object(D.k)({page:"autonami",path:"/bulk-actions/ongoing"},"/",{})},className:"bwf-btn-small is-black"},Object(a.__)("Go to Bulk Actions","wp-marketing-automations")))),Object(n.createElement)("span",{className:"bwf-cursor-pointer bwf-w-16 bwf-h-16",onClick:function(){return H(!1)}},Object(n.createElement)(O.a,{icon:"cross",color:"#353030",size:16}))))),Ge?Object(n.createElement)(u.a,{className:Ce,rows:Object(s.isEmpty)(ie)?[]:ie.map((function(t){var e=[{display:Oe[t.id]&&Object(n.createElement)(Y.a,Ut({type:"checkbox",checked:!1,onChange:function(){}},Oe[t.id])),value:null},{display:ve(t),value:null},{display:de(t),value:Object(l.rc)([t.f_name,t.l_name]," ")},{display:ye(t),value:""},{display:Object(s.isEmpty)(Object(s.trim)(t.creation_date))?"-":t.creation_date,value:t.creation_date}];return Ne.map((function(r){var n=qt({},r);delete n.label,delete n.groupKey,delete n.groupLabel;var a=Object.keys(n)[0];e.push({display:Te(t,a),value:"-"})})),e})),headers:(he=[{key:"select_contact",label:Object(n.createElement)(Y.a,Ut({type:"checkbox",checked:!1,onChange:function(){}},je)),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"actions",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"f_name",label:Object(a.__)("Name","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-210 bwf-table-col-sticky bwf-sticky-left"},{key:"contact_details",label:Object(a.__)("Email","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210 bwf-word-break"},{key:"created_on",label:Object(a.__)("Created On","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"}],Ne.map((function(t){Object(s.isObject)(t)&&he.push({key:Object.keys(t).find((function(e){return t[e]==(null==t?void 0:t.label)})),label:null==t?void 0:t.label,isLeftAligned:!0,cellClassName:t.hasOwnProperty("label")&&(t.label.toLocaleLowerCase().includes("tag")||t.label.toLocaleLowerCase().includes("list")||t.label.toLocaleLowerCase().includes("product")||t.label.toLocaleLowerCase().includes("category")||t.label.toLocaleLowerCase().includes("trigger"))?"bwf-max-w-360":"bwf-w-150"})})),he),query:{paged:le,order:J.order,orderby:J.orderby},rowsPerPage:ue,totalRows:se,isLoading:fe,onPageChange:function(t,e){It(J,(t-1)*ue,ue)},onQueryChange:function(t){return"per_page"!==t?function(){}:Le},actions:Se>0?[Object(n.createElement)(M.a,Ut({key:"contact-bulk-action",actions:(be=[],1===Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.0.3")&&be.push({id:"perform-bulk-action",icon:"bulk-action",hint:Object(a.__)("Bulk Action","wp-marketing-automations"),isPro:!0,proLink:Object(l.fb)("upgrade",{utm_medium:"Contact+List+Bulk+Action+Upgrade+Modal"}),featureTitle:Object(a.__)("Perform Bulk Action","wp-marketing-automations")}),be.push({id:"delete",icon:"trash",hint:Object(a.__)("Delete","wp-marketing-automations")}),be),onAction:Xt,inLine:!0,reset:Wt},Ee))]:[Object(n.createElement)(xt.a,{key:"search",isLoading:fe,searchTerm:null==ut?void 0:ut.s,showResultCount:!1,setSearchData:function(t){if(Object(s.size)(t))Object(D.k)({s:t},"/",J);else{var e=Object(s.cloneDeep)(J);e.hasOwnProperty("s")&&(null==e||delete e.s),R(!0),Object(D.k)(e,"/",{})}}}),Object(n.createElement)(kt.b,{onChange:function(t){R(!0),"all"===t&&Object(D.k)({page:it},ct,{}),"filters"===t&&Object(D.k)({filter:"advanced"},ct,J)},options:[{key:"all",label:Object(a.__)("All Contacts","wp-marketing-automations")},{key:"filters",label:Object(a.__)("Advanced Filters","wp-marketing-automations")}],selected:J.hasOwnProperty("filter")&&"advanced"===J.filter?"filters":"all",key:"select-contact",className:"bwf-w-150"}),Object(n.createElement)(z.c,{key:"list-audience"})],rowHeader:!0,emptyMessage:Object(a.__)("No contacts found","wp-marketing-automations"),extraSectionBeforefilterCol:Fe,showMenu:!1,beforeTable:Object(n.createElement)(q,{query:J,isOpen:J.hasOwnProperty("filter")&&"advanced"===J.filter})}):Object(n.createElement)(Lt.a,{data:ot}),ht.status&&Object(n.createElement)(w.a,{contact:ht.contactInfo,setSendMessageModel:dt}),Pt.status&&Object(n.createElement)(T,{contact:Pt.contactInfo,setModelStatus:Ct}),Object(n.createElement)(jt.a,{modalTitle:Object(a._n)("Delete Contact","Delete Contacts",Ft.length,"wp-marketing-automations"),deleteEntityName:1===Ft.length?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",{style:{fontWeight:"normal"}},Object(a.__)("contact","wp-marketing-automations")," "),Ft[0].f_name," ",Ft[0].l_name):Object(n.createElement)(n.Fragment,null,Ft.length," ",Object(n.createElement)("span",{style:{fontWeight:"normal"}},Object(a.__)("contact","wp-marketing-automations"))),confirmButtonText:Object(a.__)("Delete","wp-marketing-automations"),cancelButtonText:Object(a.__)("Cancel","wp-marketing-automations"),onConfirm:function(){var t={contacts:Ft.map((function(t){return t.id}))};Qt.mutate(t)},isLoading:Qt.isLoading,successMessage:Qt.isSuccess&&Object(a.__)("Contacts Deleted!","wp-marketing-automations"),errorMessage:Qt.isError&&(Qt.error&&Qt.error.message?Qt.error.message:Object(a.__)("Unable to delete contacts","wp-marketing-automations")),onRequestClose:function(){Wt(),Yt(!1)},isOpen:Rt,confirmDescription:Object(a.__)("This action is irreversible","wp-marketing-automations"),isDelete:!0}),Object(n.createElement)(jt.a,{modalTitle:vt.modalTitle,deleteEntityName:vt.deleteEntityName,confirmText:vt.confirmText,confirmButtonText:vt.buttonConfirm,cancelButtonText:vt.buttonCancel,onConfirm:vt.onConfirm,isLoading:vt.loading,successMessage:vt.success,errorMessage:vt.error,content:vt.content,onRequestClose:function(){return gt({status:!1})},isOpen:vt.status,isDelete:!vt.hasOwnProperty("isDelete")||vt.isDelete}),!Object(l.ac)()&&Object(n.createElement)(St.b,{isOpen:x,onRequestClose:function(){return S(!1)},modalContent:L}),j&&Object(n.createElement)(Dt,{onClose:function(){Wt(),E(!1)},selectedContacts:Ft,refreshContactData:Pe}))},te=r(89),ee=r(1159),re=r(353),ne=r(355),ae=r(1112),oe=r(1122);function ce(t){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ie(){return(ie=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(null,arguments)}function le(){le=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==ce(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(ce(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function ue(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function se(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){ue(o,n,a,c,i,"next",t)}function i(t){ue(o,n,a,c,i,"throw",t)}c(void 0)}))}}function fe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return me(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?me(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var pe={email:"",f_name:"",l_name:"",marketing_status:!0,contact_no:""},be=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onCloseModal:function(){}},e=Object(n.useContext)(l.h),r=Object(n.useState)([]),o=fe(r,2),c=o[0],i=o[1],u=Object(n.useState)([]),f=fe(u,2),m=f[0],p=f[1],h=Object(n.useState)(null),d=fe(h,2),v=d[0],w=d[1],j=Object(n.useState)(null),k=fe(j,2),x=k[0],S=k[1],N=Object(n.useState)(pe),L=fe(N,2),P=L[0],C=L[1],I=Object(n.useState)(!1),A=fe(I,2),T=A[0],G=A[1],$=Object(n.useState)({}),M=fe($,2),B=M[0],z=M[1],U=Object(rt.a)(),R=U.setSingleContactListData,q=function(){var r=se(le().mark((function r(n){return le().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return G(!0),r.prev=1,r.next=4,g()({path:Object(l.A)("/v3/contacts"),method:"POST",data:n}).then((function(r){if(200!=r.code)throw Error(Object(l.u)(null==r?void 0:r.message));e(r.message),z({}),G(!1),Object(l.ab)()||(bwfcrm_contacts_data.first_contact_id=1),R(Object(l.rc)([n.f_name,n.l_name]," ")),Object(D.k)({page:"autonami",path:"/contact/"+parseInt(r.result.id)},"/",{}),t.onCloseModal()})).catch((function(t){throw Error(Object(l.u)(null==t?void 0:t.message))}));case 4:r.next=10;break;case 6:r.prev=6,r.t0=r.catch(1),G(!1),w(r.t0);case 10:Object(l.Lb)(e,3e3);case 11:case"end":return r.stop()}}),r,null,[[1,6]])})));return function(t){return r.apply(this,arguments)}}(),V=function(t){var e={};return!Object(s.isEmpty)(t.email)&&Object(l.gc)(t.email?t.email:"")||(e.email=Object(s.isEmpty)(t.email)?Object(a.__)("Email is required","wp-marketing-automations"):Object(a.__)("Email is not valid","wp-marketing-automations")),Object(s.isEmpty)(t.phone)||Object(ee.a)(t.phone?t.phone:"")||(e.phone=Object(a.__)("Phone is not valid","wp-marketing-automations")),e},W=function(t){var e=t.email,r=t.f_name,n=t.l_name,a=t.marketing_status,o=t.phone,i=[];Object(s.isEmpty)(c)||c.map((function(t){i.push({id:t.key,value:t.label})}));var l=[];Object(s.isEmpty)(m)||m.map((function(t){l.push({id:t.key,value:t.label})})),C({email:e,f_name:r,l_name:n,contact_no:o,status:a,tags:i,lists:l}),q({email:e,f_name:r,l_name:n,contact_no:o,status:a,tags:i,lists:l})},H=Object(y.a)(),K=H.fetch,Z=t.query,J=function(){x&&(S(null),K(Z,0,25)),t.onCloseModal()},Q=function(){return B&&B.success&&B.message?Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(re.a,null),Object(n.createElement)("div",{className:"bwf-h1"},B.message)):B&&B.error&&B.message?Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(ne.a,null),Object(n.createElement)("div",{className:"bwf-h1"},B.message)):Object(n.createElement)(F.a,null)};return Object(n.createElement)(b.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-medium bwf-add-new-contact-modal "},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Create Contact","wp-marketing-automations")),Object(n.createElement)("span",{onClick:J,className:"bwf-modal-close"},Object(n.createElement)(O.a,{icon:"close",color:"#353030"}))),v&&Object(n.createElement)(E.a,{status:"error",onRemove:function(){return w(null)}},v.hasOwnProperty("message")?v.message:Object(a.__)("Unknown Error while creating contact","wp-marketing-automations")),B.error||B.success?Q():Object(n.createElement)(te.a,{validate:V,onSubmitCallback:W,initialValues:P},(function(t){var e=t.getInputProps,r=t.values,o=t.errors,l=t.handleSubmit,u=t.touched;return Object(n.createElement)("div",{className:"bwf-form-fields"},Object(n.createElement)("div",null,Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-input-label",id:"required"},Object(a.__)("Email","wp-marketing-automations")),Object(n.createElement)(b.TextControl,ie({disabled:T,type:"email",help:Object(a.__)("Required","wp-marketing-automations")},e("email"))),(null==u?void 0:u.email)&&(null==o?void 0:o.email)&&Object(n.createElement)("div",{className:"bwf-error-text"},null==o?void 0:o.email)),Object(n.createElement)(b.TextControl,ie({disabled:T,label:Object(a.__)("Phone","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},e("phone"))),(null==u?void 0:u.phone)&&o.hasOwnProperty("phone")&&Object(n.createElement)("div",{className:"bwf-error-text"},null==o?void 0:o.phone),Object(n.createElement)(b.TextControl,ie({disabled:T,label:Object(a.__)("First Name","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},e("f_name"))),Object(n.createElement)(b.TextControl,ie({disabled:T,label:Object(a.__)("Last Name","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},e("l_name"))),Object(n.createElement)(ae.a,{onTagsChange:i,selected:c}),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(oe.a,{onListsChange:p,selected:m}),Object(n.createElement)("div",{className:"bwf_clear_24"})),Object(n.createElement)("div",null,Object(n.createElement)(Y.a,ie({type:"checkbox",disabled:T,label:Object(a.__)("Mark Contact as Subscribed","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},e("marketing_status")))),Object(n.createElement)("div",{className:"bwf_text_right bwf-form-buttons bwf-mt-24"},Object(n.createElement)(_.a,{className:"bwf-cancel-btn",onClick:J},Object(a.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(_.a,{onClick:function(){V(r)&&l()},className:Object(s.size)(o)||V(r)?"bwf-no-ripple":"",isPrimary:!0,isBusy:T},Object(a.__)("Add","wp-marketing-automations"))))})))},he=r(379),de=r(354),ye=r(68),ve=r(76),ge=r(107),we=(r(1257),r(50));function Oe(t){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var je=["getStateProp"];function Ee(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _e(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(r),!0).forEach((function(e){ke(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ke(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Oe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oe(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var xe=function(){var t=Object(we.a)("exporter"),e=t.getStateProp;return _e(_e({},function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(t,je)),{},{getExporter:function(){return e("export")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getLoadingStatus:function(){return e("isLoading")},getExistingExport:function(){return e("existingExport")}})},Se=r(49);function Ne(t){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Le=["fetch","setStateProp"];function Pe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ce(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pe(Object(r),!0).forEach((function(e){Ie(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ie(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Ne(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ne(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ae=function(){var t=Object(Se.a)("exporter"),e=t.fetch,r=t.setStateProp;return Ce(Ce({},function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(t,Le)),{},{fetch:function(t,r,n){e("GET",Object(l.A)("/contact/export?limit=".concat(t,"&offset=").concat(r,"&search=").concat(n)))},setStateExportValues:function(t,e){r(t,e)}})},Te=r(1131),Fe=r(349),Ge=r(347),De=r(1093);function $e(t){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Me(){Me=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==$e(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError($e(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Be(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function ze(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ue(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ue(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Re=function(t){var e=t.exportId,r=void 0===e?"":e,o=t.setLoading,c=t.setComplete,i=t.preExportData,u=void 0===i?{}:i,f=ze(Object(n.useState)(!1),2),m=f[0],p=f[1],b=ze(Object(n.useState)(u),2),h=b[0],d=b[1],y=ze(Object(n.useState)(0),2),v=y[0],w=y[1],O=ze(Object(n.useState)(!1),2),j=O[0],E=O[1],_=ze(Object(n.useState)(!1),2),k=_[0],x=_[1];Object(n.useEffect)((function(){100===parseInt(v)&&setTimeout((function(){E(!0)}),2e3)}),[v]);var S=function(){var t,e=(t=Me().mark((function t(){return Me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(!0),t.prev=1,t.next=4,g()({method:"GET",path:Object(l.A)("/contact/export/".concat(r))}).then((function(t){200==t.code&&d(t.result),x(!1)}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),x(!1);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){Be(o,n,a,c,i,"next",t)}function i(t){Be(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(!Object(s.isEmpty)(h))if(3==h.status)o(!1),p(!0),w(100),c(!0);else{var t=parseInt(h.offset)/parseInt(h.count)*100;w(t<100?parseInt(t):100)}}),[h]),Object(De.a)((function(){m||k||S()}),5e3),Object(n.createElement)("div",{className:"bwf-display-flex-column",style:{alignItems:"center"}},r&&m&&j?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("h2",null,Object(a.__)("Export Completed","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Your file is ready for download. Now you can download the exported contact list.","wp-marketing-automations"))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Export Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("The file is being created in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)(Ge.a,{noStriped:!0,size:"sm",progress:parseInt(v),text:"".concat(parseInt(v),"% ").concat(Object(a.__)("Completed","wp-marketing-automations"))})))};function qe(t){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ye(){Ye=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==qe(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(qe(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Ve(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function We(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){Ve(o,n,a,c,i,"next",t)}function i(t){Ve(o,n,a,c,i,"throw",t)}c(void 0)}))}}function He(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ke(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ke(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Ze=function(t){var e,r=t.title,o=t.fields,c=t.expfilter,i=t.setPending,u=t.setAdd,s=t.contactCount,f=t.exportID,m=void 0===f?0:f,p=t.preExportData,h=void 0===p?{}:p,d=He(Object(n.useState)(!1),2),y=d[0],v=d[1],w=He(Object(n.useState)(""),2),O=w[0],j=w[1],k=He(Object(n.useState)(!1),2),x=k[0],S=k[1],N=He(Object(n.useState)(!1),2),L=N[0],P=N[1],C=He(Object(n.useState)(!1),2),I=C[0],A=C[1],T=He(Object(n.useState)({loading:!1,status:!1}),2),F=T[0],G=T[1],D=He(Object(n.useState)(Object(a.__)("Unable to create export.","wp-marketing-automations")),2),$=D[0],M=D[1];Object(n.useEffect)((function(){i(!0),0===parseInt(m)?B():(v(!0),j(m))}),[]);var B=function(){var t=We(Ye().mark((function t(){var e;return Ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={title:r,fields:o,filters:c,count:s},t.next=4,g()({method:"POST",data:e,path:Object(l.A)("/contact/export/add")}).then((function(t){200==t.code&&(Object(l.bb)()||(bwfcrm_contacts_data.first_export_id=2),v(!0),t.result.hasOwnProperty("id")&&j(t.result.id))}));case 4:t.next=11;break;case 6:t.prev=6,t.t0=t.catch(0),v(!0),S(!0),t.t0.hasOwnProperty("message")&&M(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}();I&&setTimeout((function(){var t=document.querySelectorAll(".bwf-export-add-modal .bwf-crm-export-init .bwf-stepper .bwf-stepper__steps");t.length>0&&t[0].remove()}),2e3);var z=function(){var t=We(Ye().mark((function t(){return Ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return P(!0),t.prev=1,t.next=4,g()({path:Object(l.A)("/contact/export/cancel/".concat(O)),method:"DELETE"}).then((function(t){if(200!==t.code)throw Error(Object(l.u)(null==t?void 0:t.message));u(!1)})).catch((function(t){throw Error(Object(l.u)(null==t?void 0:t.message))}));case 4:t.next=11;break;case 6:t.prev=6,t.t0=t.catch(1),P(!1),S(!0),M(t.t0.message?t.t0.message:Object(a.__)("Error in canceling export","wp-marketing-automations"));case 11:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(b.Card,{className:"bwfcrm-overview-wrap bwf-contact-export-step-three"},Object(n.createElement)("div",{style:{alignItems:"center"}},y?Object(n.createElement)(n.Fragment,null,O?Object(n.createElement)(Re,{exportId:O,setLoading:i,setComplete:A,preExportData:h}):Object(n.createElement)("div",{className:"bwf-h4"},x&&Object(n.createElement)(E.a,{status:"error",isDismissible:!1},$))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-display-flex-column",style:{alignItems:"center"}},Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-30 bwf-w-90"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-270"}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-100p"}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-150"}),Object(n.createElement)("div",{className:"bwf_clear_20"}))),Object(n.createElement)("div",{className:"bwf_clear_20"}))),Object(n.createElement)("div",{className:"bwf-display-flex"},y?Object(n.createElement)(n.Fragment,null,I?Object(n.createElement)(_.a,{isPrimary:!0,className:"bwf-mt-24",onClick:function(){-1!==Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.5.3")?window.open(Object(l.wb)()+"/wp-json"+Object(l.A)("/contact/export/download/".concat(O,"?bwf-nonce=").concat(Object(l.F)())),"_blank"):G({status:!0,isDelete:!1,buttonConfirm:Object(a.__)("Upgrade Now","wp-marketing-automations"),onConfirm:function(){window.open("plugins.php?s=Funnelkit%20Automations","_blank"),G({status:!1})},title:Object(a.__)("Unable To Download File","wp-marketing-automations"),confirmDescription:Object(a.__)("FunnelKit Automation PRO version 3.5.3 or higher is required.","wp-marketing-automations")})}},Object(a.__)("Download File","wp-marketing-automations")):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(_.a,{isPrimary:!0,className:"bwf-mt-24",onClick:function(){u(!1)}},Object(n.createElement)("span",{className:"bwf-p-5"},Object(a.__)("Go to Export List","wp-marketing-automations"))),-1!==Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.2.2")&&Object(n.createElement)(_.a,{isSecondary:!0,className:"bwf-mt-24",onClick:z,isBusy:L},Object(n.createElement)("span",{className:"bwf-p-5"},Object(a.__)("Cancel Export","wp-marketing-automations"))))):Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-90"}))),Object(n.createElement)(jt.a,{modalTitle:null!==(e=F.title)&&void 0!==e?e:Object(a.__)("Delete","wp-marketing-automations"),confirmText:F.confirmText,deleteEntityName:F.deleteEntityName,confirmButtonText:F.buttonConfirm,cancelButtonText:F.buttonCancel,onConfirm:F.onConfirm,isLoading:F.loading,successMessage:F.success,confirmDescription:F.confirmDescription,errorMessage:F.error,onRequestClose:function(){return G({status:!1})},isOpen:F.status,isDelete:!F.hasOwnProperty("isDelete")||F.isDelete}),Object(n.createElement)("div",{className:"bwf_clear_30"}))};function Je(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Qe(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qe(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Xe=function(t){var e=t.exportData,r=void 0===e?{}:e,o=t.onClose,c=void 0===o?function(){}:o,i=Je(Object(n.useState)(!0),2),l=i[0],u=i[1],s=[{key:1,label:Object(a.__)("Fields","wp-marketing-automations"),content:Object(n.createElement)(n.Fragment,null)},{key:2,label:Object(a.__)("Contacts","wp-marketing-automations"),content:Object(n.createElement)(n.Fragment,null)},{key:3,label:Object(a.__)("Confirmation","wp-marketing-automations"),content:function(t){switch(t){case 3:return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(Ze,{setPending:u,exportID:r.id,preExportData:r,setAdd:function(){return c(!0)}}));default:return Object(n.createElement)(n.Fragment,null)}}(3)}];return Object(n.createElement)(b.Modal,{onRequestClose:function(){return c(!0)},className:"bwf-admin-modal bwf-admin-modal-xxl bwf-export-add-modal",title:Object(a.__)("Export Inprogress","wp-marketing-automations"),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-crm-export-init"},Object(n.createElement)(Fe.a,{steps:s,currentStep:3,isPending:l})))};function tr(t){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function er(){er=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==tr(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(tr(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function rr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function nr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rr(Object(r),!0).forEach((function(e){ar(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ar(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=tr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function or(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function cr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ir(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ir(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var lr=function(t){var e,r=t.isAdd,o=Object(D.i)(),c=Object(B.a)(),i=cr(Object(n.useState)({loading:!1,status:!1}),2),f=i[0],d=i[1],y=cr(Object(n.useState)(!1),2),v=y[0],w=y[1],j=cr(Object(n.useState)(!1),2),E=j[0],_=j[1],k=cr(Object(n.useState)({}),2),x=k[0],S=k[1],N=o.s,L=void 0===N?"":N,P=Ae(),C=P.fetch,I=P.setStateExportValues,A=xe(),T=A.getExporter,F=A.getOffset,G=A.getLoading,$=A.getTotalCount,M=A.getPageNumber,z=A.getPerPageCount,U=[{key:"actions",label:"",isLeftAligned:!1,cellClassName:"bwf-col-action bwf-w-30 "},{key:"name",label:Object(a.__)("Name","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-300"},{key:"createdon",label:Object(a.__)("Created On","wp-marketing-automations"),isLeftAligned:!0},{key:"contactcount",label:Object(a.__)("Contacts","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-120"},{key:"status",label:Object(a.__)("Status","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-150"},{key:"file",label:"",isLeftAligned:!1,cellClassName:"bwf-w-150"}],R=T(),q=M(),Y=z(),V=$(),W=F(),H=G(),K=Object(ve.a)().setPageCountData;Object(n.useEffect)((function(){K({contacts_export:V})}),[V]),Object(n.useEffect)((function(){r||C(Y,W,L)}),[Y,W,L,r]);var Z,J=function(t){t!==Y&&I("limit",t)},Q=function(){var t,e=(t=er().mark((function t(e){var r,n=arguments;return er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},d(nr(nr({},r),{},{status:!0})),t.prev=2,t.next=5,g()({path:Object(l.A)("/contact/export/delete/".concat(e)),method:"DELETE"}).then((function(t){if(200!==t.code)throw Error(Object(l.u)(null==t?void 0:t.message));d({}),C(Y,W,L)})).catch((function(t){throw Error(Object(l.u)(null==t?void 0:t.message))}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),d({status:!0,error:t.t0.message?t.t0.message:Object(a.__)("Error in deleting export","wp-marketing-automations")});case 10:case"end":return t.stop()}}),t,null,[[2,7]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){or(o,n,a,c,i,"next",t)}function i(t){or(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(t){return e.apply(this,arguments)}}(),X=function(t){return Object(n.createElement)(m.a,{label:Object(a.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var r=e.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){t.hasOwnProperty("status")&&1===parseInt(t.status)?(S(t),_(!0)):(S(t),w(!0)),r()}},Object(n.createElement)(h.a,{justify:"flex-start"},Object(n.createElement)(h.c,null,Object(a.__)("View","wp-marketing-automations")))),Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){var e={status:!0,deleteEntityName:Object(n.createElement)(n.Fragment,null,Object(a.__)("item ")," ",t.title),buttonConfirm:Object(a.__)("Delete","wp-marketing-automations"),buttonCancel:Object(a.__)("Cancel","wp-marketing-automations")};d(nr(nr({},e),{},{onConfirm:function(){return Q(t.id,e)}})),r()}},Object(n.createElement)(h.a,{justify:"flex-start"},Object(n.createElement)(h.c,null,Object(a.__)("Delete","wp-marketing-automations")))))}})},tt={1:Object(a.__)("In Progress","wp-marketing-automations"),2:Object(a.__)("Failed","wp-marketing-automations"),3:Object(a.__)("Completed","wp-marketing-automations"),4:Object(a.__)("Cancelled","wp-marketing-automations")},et=function(t){switch(parseInt(t.status)){case 3:if(t.file)return-1===Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.5.3")?Object(n.createElement)("div",{onClick:function(){d({status:!0,isDelete:!1,buttonConfirm:Object(a.__)("Upgrade Now","wp-marketing-automations"),onConfirm:function(){window.open("plugins.php?s=Funnelkit%20Automations","_blank"),d({status:!1})},title:Object(a.__)("Unable To Download File","wp-marketing-automations"),confirmDescription:Object(a.__)("FunnelKit Automation PRO version 3.5.3 or higher is required.","wp-marketing-automations")})},style:{cursor:"pointer"},title:Object(a.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline"},Object(n.createElement)("div",{className:"bwf-download-btn"},Object(n.createElement)("span",null,Object(n.createElement)(O.a,{icon:"download"})),Object(n.createElement)("span",null,Object(a.__)("Download","wp-marketing-automations")))):Object(n.createElement)("a",{target:"_blank",href:Object(l.wb)()+"/wp-json"+Object(l.A)("/contact/export/download/".concat(t.id,"?bwf-nonce=").concat(Object(l.F)())),title:Object(a.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline",rel:"noreferrer"},Object(n.createElement)("div",{className:"bwf-download-btn"},Object(n.createElement)("span",null,Object(n.createElement)(O.a,{icon:"download"})),Object(n.createElement)("span",null,Object(a.__)("Download","wp-marketing-automations"))));default:return"-"}},rt=function(t){return 1===parseInt(t.status)?Object(n.createElement)(n.Fragment,null,Object(a.sprintf)(Object(a.__)("%d of %d Completed","wp-marketing-automations"),parseInt(t.offset),parseInt(t.count))):t.count},nt=Object(s.isEmpty)(R)?[]:R.map((function(t){return[{display:X(t),value:"action"},{display:t.title?t.title:"-",value:t.title},{display:(r=t.created_date,Object(n.createElement)("div",{className:"bwf-display-flex-column"},Object(n.createElement)("span",null,Object(l.ib)(r)))),value:""},{display:rt(t),value:t.count},{display:(e=t,Object(n.createElement)("span",{className:"bwf-export-status-tag bwf-status-"+parseInt(e.status)},tt[parseInt(e.status)])),value:t.status},{display:et(t),value:""}];var e,r}));return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ye.a,null),Object(n.createElement)(u.a,{title:"",className:"bwf-export-contact-table",rows:nt,headers:U,query:{paged:q},rowsPerPage:Y,totalRows:V,isLoading:H,onPageChange:function(t,e){I("offset",(t-1)*Y)},onQueryChange:function(t){return"per_page"!==t?function(){}:J},showMenu:!1,rowHeader:!0,actions:[],emptyMessage:Object(a.__)("No export available","wp-marketing-automations"),minHeight:!0}),Object(n.createElement)(jt.a,{modalTitle:null!==(e=f.title)&&void 0!==e?e:Object(a.__)("Delete","wp-marketing-automations"),confirmText:f.confirmText,deleteEntityName:f.deleteEntityName,confirmButtonText:f.buttonConfirm,cancelButtonText:f.buttonCancel,onConfirm:f.onConfirm,isLoading:f.loading,successMessage:f.success,confirmDescription:f.confirmDescription,errorMessage:f.error,onRequestClose:function(){return d({status:!1})},isOpen:f.status,isDelete:!f.hasOwnProperty("isDelete")||f.isDelete}),v&&!Object(s.isEmpty)(x)&&Object(n.createElement)(b.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-large bwf-export-list-modal bwf-show-close"},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Export Details","wp-marketing-automations")),Object(n.createElement)("span",{onClick:function(){return w(!1)},className:"bwf-modal-close"},Object(n.createElement)(O.a,{icon:"close",color:"#353030"}))),(Z=[],Object(s.isEmpty)(x.fields)||x.fields.map((function(t){var e=cr(Object.entries(t)[0],2),r=e[0];e[1],c.hasOwnProperty(r)&&Z.push(c[r].labels.add)})),Object(n.createElement)(n.Fragment,null,x.hasOwnProperty("filters")&&Object(n.createElement)("div",{className:"bwf-export-modal-row"},Object(n.createElement)("div",{className:"bwf-export-modal-row-label"},Object(a.__)("Filters","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-export-modal-row-value"},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(s.isEmpty)(t)?"-":Object(n.createElement)(n.Fragment,null,Object(Te.b)(t))}(x.filters))),!Object(s.isEmpty)(Z)&&Object(n.createElement)("div",{className:"bwf-export-modal-row"},Object(n.createElement)("div",{className:"bwf-export-modal-row-label"},Object(a.__)("Fields","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-export-modal-row-value"},Z.join(" | ")))))),E&&!Object(s.isEmpty)(x)&&Object(n.createElement)(Xe,{exportData:x,onClose:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&C(Y,W,L),_(!1)}}))},ur=function(t){var e=t.setAdd,r=t.isAdd;return Object(n.useEffect)((function(){Object(l.m)(Object(a.__)("Export List","wp-marketing-automations"))}),[]),Object(n.createElement)(n.Fragment,null,Object(n.createElement)(lr,{setAdd:e,isAdd:r}))};r(195);function sr(t){return(sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fr(){fr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==sr(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(sr(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function mr(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}var pr=function(){var t,e=(t=fr().mark((function t(){var e;return fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.A)("/contact/export/custom-selections")});case 2:if((e=t.sent)&&e.result){t.next=5;break}throw new Error(Object(a.__)("Unable to get Custom Export Selections","wp-marketing-automations"));case 5:return t.abrupt("return",e.result);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){mr(o,n,a,c,i,"next",t)}function i(t){mr(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}(),br=function(){return Object(_t.useQuery)(["bwfcrm-get-export-selections"],pr)};function hr(t){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=hr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yr(t){return function(t){if(Array.isArray(t))return vr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return vr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vr(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var gr=function(t){var e=t.checked,r=void 0!==e&&e,a=t.onChange,o=void 0===a?function(){}:a,c=t.title,i=void 0===c?"":c,l=t.count,u=void 0===l?0:l,s=t.groupKey,f=void 0===s?"":s,m=t.selectedGroup,p=void 0===m?"":m,b=t.setSelectedGroup,h=void 0===b?function(){}:b;return Object(n.createElement)("div",{className:"bwf-export-field-header-wrap",onClick:function(t){t.target.classList.contains("components-checkbox-control__label")||t.target.classList.contains("components-checkbox-control__input")||h(p==f?"":f)}},Object(n.createElement)("div",null,Object(n.createElement)(Y.a,{className:"bwf-export-toggler",checked:r,onChange:o,label:Object(n.createElement)(n.Fragment,null,i,u>0&&Object(n.createElement)("span",{className:"bwf-light"}," ","( ",u," selected )"))})),Object(n.createElement)("span",null,Object(n.createElement)(O.a,{icon:"tailless-arrow-down-new",size:15})))},wr=function(t){var e=t.selected,r=t.onChange,a=t.selectedGroup,o=t.setSelectedGroup,c=br(),i=c.isLoading,l=c.data,u=Array.isArray(e)?e.map((function(t){return Object.keys(t)[0]})):[],s=function(t,n){if(t)r([].concat(yr(e),[n]));else{var a=e.filter((function(t){return Object.keys(t)[0]!==Object.keys(n)[0]}));r(a)}},f=function(t,n){var a=l[n].selections,o=Object.keys(a);if(t){var c=o.map((function(t){return!u.includes(t)&&dr({},t,a[t].name)})).filter(Boolean);r([].concat(yr(e),yr(c)))}else{var i=e.filter((function(t){return!o.includes(Object.keys(t)[0])}));r(i)}};return i?Object(n.createElement)(n.Fragment,null):Object.keys(l).map((function(t,r){var c,i=l[t],m=i.name,p=i.selections,b=Object.keys(l[t].selections).filter((function(t){return u.includes(t)}));return Object(n.createElement)("div",{className:"bwf-export-field-section",key:r},Object(n.createElement)(gr,{title:m,checked:(c=t,Object.keys(l[c].selections).filter((function(t){return u.includes(t)})).length===Object.keys(l[c].selections).length),groupKey:t,onChange:function(e){return f(e,t)},count:Array.isArray(b)?b.length:0,selectedGroup:a,setSelectedGroup:o}),a==t&&Object(n.createElement)("div",{className:"bwf-p-20 bwf-export-field-list"},Object.keys(p).map((function(t,r){var a=Array.isArray(e)&&e.find((function(e){return!!e[t]}));return Object(n.createElement)("div",{key:r},Object(n.createElement)(Y.a,{label:p[t].name,className:"bwf-export-field",checked:a,onChange:function(e){return s(e,dr({},t,p[t].name))}}))}))))}))};function Or(t){return function(t){if(Array.isArray(t))return _r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Er(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||Er(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Er(t,e){if(t){if("string"==typeof t)return _r(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_r(t,e):void 0}}function _r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var kr=function(t){var e=t.title,r=t.setTitle,o=t.selected,c=t.setSelected,i=t.setStep,l=t.expfilter,u=jr(Object(n.useState)("contact_details"),2),f=u[0],m=u[1],p=jr(Object(n.useState)(""),2),h=p[0],d=p[1],y=Object(D.i)(),v=Object(B.a)(),g=Object(n.useMemo)((function(){var t=[],e=["engaged","unengaged","broadcast_sent","broadcast_open","broadcast_click"];return Object.entries(v).map((function(r){var n=jr(r,2),a=n[0],o=n[1];if(e.includes(a))return!1;var c;c={key:a,label:o.labels.add},t.hasOwnProperty(o.group)?t[o.group].fields.push(c):t[o.group]={label:o.groupLabel,fields:[c]}})),t}),[v]);Object(n.useEffect)((function(){if(Object(s.isEmpty)(o)&&g.hasOwnProperty("contact_details")){var t=[];g.contact_details.fields.map((function(e){var r={};r[e.key]=e.label,t.push(r)})),c(t)}}),[]);var w=function(t){var e=!1;return o.find((function(r){var n=jr(Object.entries(r)[0],2),a=n[0];n[1];t==a&&(e=!0)})),e},j=function(t,e){var r=0,a=!1;return g[t].fields.map((function(t){w(t.key)&&r++})),parseInt(g[t].fields.length)===parseInt(r)&&(a=!0),Object(n.createElement)("div",{className:"bwf-export-field-header-wrap",onClick:function(e){e.target.classList.contains("components-checkbox-control__label")||e.target.classList.contains("components-checkbox-control__input")||m(f==t?"":t)}},Object(n.createElement)("div",null,Object(n.createElement)(Y.a,{checked:a,className:"bwf-export-toggler",onChange:function(e){!function(t,e){var r=Or(o);t?g[e].fields.map((function(t){if(!w(t.key)){var e={};e[t.key]=t.label,r.push(e)}})):g[e].fields.map((function(t){w(t.key)&&(r=r.filter((function(e){var r=jr(Object.entries(e)[0],2),n=r[0];r[1];return n!==t.key})))})),c(r)}(e,t)},label:Object(n.createElement)(n.Fragment,null,e,r>0&&Object(n.createElement)("span",{className:"bwf-light"}," ","( ",r," selected )"))})),Object(n.createElement)("span",null,Object(n.createElement)(O.a,{icon:"tailless-arrow-down-new",size:15})))},_=Object(n.createElement)(n.Fragment,null,["contact_details","geography","contact_custom_fields","woocommerce","segments","engagement"].map((function(t,e){return g.hasOwnProperty(t)?Object(n.createElement)("div",{className:"bwf-export-field-section",key:"bwf-export-field-section-".concat(e)},j(t,g[t].label),f==t&&function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(n.createElement)("div",{className:"bwf-export-field-list"},t.map((function(t,e){return Object(n.createElement)(Y.a,{label:t.label,checked:w(t.key),onChange:function(e){if(e){var r=Or(o),n={};n[t.key]=t.label,r.push(n),c(r)}else c(o.filter((function(e){var r=jr(Object.entries(e)[0],2),n=r[0];r[1];return n!==t.key})))},key:"bwf-export-field-".concat(e)})})))}(g[t].fields)):["woocommerce","contact_custom_fields"].includes(t)?"":function(t){return Object(n.createElement)("div",{className:"bwf-export-field-section",key:"'bwf-export-field-section'-".concat(t)},Object(n.createElement)("div",{className:"bwf-export-field-header-wrap"},Object(n.createElement)("div",{className:"bwf-w-120 bwf-placeholder-temp"}),Object(n.createElement)("div",{className:"bwf-w-30 bwf-placeholder-temp"})),0===parseInt(t)&&Object(n.createElement)("div",{className:"bwf-export-field-list"},Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:1}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:2}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:3}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:4}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:5}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:6})))}(e)})),Object(n.createElement)(wr,{selected:o,onChange:function(t){c(t)},selectedGroup:f,setSelectedGroup:m}));return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwfcrm-overview-wrap bwf-contact-export-step-one"},h&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ye.a,null),Object(n.createElement)(E.a,{status:"error",onRemove:function(){return d("")}},h),Object(n.createElement)("div",{className:"bwf_clear_20"})),Object(n.createElement)(b.TextControl,{type:"text",value:e,placeholder:Object(a.__)("Enter Name","wp-marketing-automations"),label:Object(n.createElement)("span",{className:"bwf-h4"},Object(a.__)("Name","wp-marketing-automations")),onChange:function(t){r(t)}}),Object(n.createElement)("div",{className:"bwf-field-wrapper"},_)),Object(n.createElement)("div",{className:"bwfcrm-export-buttons bwf-display-flex"},Object(n.createElement)("div",null),Object(n.createElement)(b.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,onClick:function(){Object(s.isEmpty)(e)?d(Object(a.__)("Name is required.","wp-marketing-automations")):Object(s.isEmpty)(o)?d(Object(a.__)("Please select field to export.","wp-marketing-automations")):(Object(s.isEmpty)(l)||Object(D.k)(l,"/",y),i(2))}},Object(n.createElement)("span",null,Object(a.__)("Next","wp-marketing-automations")))))},xr=r(46),Sr=r(33);function Nr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Lr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lr(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Pr=Object(xr.a)(Object(l.zb)()).formatAmount,Cr=function(t){var e=t.setContactCount,r=t.queryFilters,o=void 0===r?{}:r,c=function(t){var e=Object(s.isEmpty)(t.country)?"":$[t.country],r=Object(l.rc)([t.city,t.state,e],", ");return Object(s.isEmpty)(Object(s.trim)(r))?"":r},f=function(t){var e=c(t);return t.country||e?Object(n.createElement)(h.a,{justify:"start"},!Object(s.isEmpty)(t.country)&&Object(n.createElement)(h.c,null,Object(n.createElement)(Et.a,{code:t.country,size:18})),Object(n.createElement)(h.c,null,e&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",null,c(t)),Object(n.createElement)("br",null)))):"-"},m=function(t){return Object(n.createElement)(Sr.a,{href:"admin.php?page=autonami&path=/contact/"+t.id,className:"bwf-a-no-underline"},Object(n.createElement)(Nt.a,{contact:t,hideJoiningDate:!0}))},p=function(t){return Object(n.createElement)("div",{className:"bwf-c-contact-details-cell"},t.email&&Object(n.createElement)(h.a,{justify:"start",align:"top"},Object(n.createElement)(h.c,null,Object(n.createElement)(O.a,{icon:"mail"})),Object(n.createElement)(h.c,null,Object(n.createElement)(Sr.a,{href:"mailto:"+t.email,className:"bwf-a-no-underline",type:"external"},t.email))),t.phone&&Object(n.createElement)(h.a,{justify:"start",align:"top"},Object(n.createElement)(h.c,null,Object(n.createElement)(O.a,{icon:"phone"})),Object(n.createElement)(h.c,null,Object(n.createElement)(Sr.a,{href:"tel:"+t.phone,className:"bwf-a-no-underline",type:"external"},t.phone))))},b=Object(d.a)(),v=b.getPageNumber,g=b.getPerPageCount,w=b.getTotalCount,j=b.getLoading,E=b.getContacts,_=Object(y.a)(),k=_.fetch,x=_.setStateProp;t.query;Object(n.useEffect)((function(){return x("limit",10),function(){return x("limit",25)}}),[]);var S=E(),N=v(),L=g(),P=w(),C=j(),I=Nr(Object(n.useState)(!0),2),A=I[0],T=I[1];Object(n.useEffect)((function(){A&&P>0&&T(!1),e(P)}),[P]);var F=[{key:"contact",label:Object(a.__)("Contact","wp-marketing-automations"),isLeftAligned:!0,required:!0},{key:"contact_details",label:Object(a.__)("Details","wp-marketing-automations"),isLeftAligned:!0}];Object(l.qc)()?(F.push({key:"total_spent",label:Object(a.__)("Total Spent","wp-marketing-automations"),isLeftAligned:!0}),F.push({key:"last_order",label:Object(a.__)("Last Order","wp-marketing-automations"),isLeftAligned:!0})):F.push({key:"column_location",label:Object(a.__)("Location","wp-marketing-automations"),isLeftAligned:!0});var G=function(t){var e=t.wc,r=e.total_order_count,o=e.total_order_value;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-listing-total-spent"},o&&r?Object(n.createElement)("div",{className:"bwf-c-total-spent-amount"},Pr(o)," |"," ",r," ",parseInt(r)>1?Object(a.__)("orders","wp-marketing-automations"):Object(a.__)("order","wp-marketing-automations")):"-"))},D=function(t){var e=t.wc.l_order_date;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",null,e&&"0000-00-00"!=e?Object(n.createElement)("div",{className:"bwf-c-total-spent-amount"},Object(l.hb)(e)):"-"))},M=S.map((function(t){var e=function(t){return Object(s.merge)({id:0,email:"-",first_name:"",last_name:"",creation_date:"",fields:{marketing_status:"0",first_order_date:"",country:"",city:"",state:"",phone:""},wc:{id:1,l_order_date:"",total_order_count:0,total_order_value:0,total_purchased_items:0}},t)}(t),r=[{display:m(e),value:Object(l.rc)([e.first_name,e.last_name]," ")},{display:p(e),value:"'".concat(Object(a.__)("Email","wp-marketing-automations"),": ").concat(e.email,", ").concat(Object(a.__)("Phone","wp-marketing-automations"),": ").concat(e.phone)}];return Object(l.qc)()?(r.push({display:G(e),value:""}),r.push({display:D(e),value:""})):r.push({display:f(e),value:c(e)}),r})),B=function(t){t!==L&&k(o,0,t,!0,!1,"",!1)},z=i()("bwfcrm-contacts-list",{"has-search":!0}),U=parseInt(P)>0?" ("+parseInt(P)+")":"";return Object(n.createElement)(u.a,{className:z,title:Object(a.__)("Contacts ","wp-marketing-automations")+U,rows:M,headers:F,query:{paged:N},rowsPerPage:L,totalRows:P,isLoading:C,onPageChange:function(t,e){k(o,(t-1)*L,L,!0,!1,"",!1)},onQueryChange:function(t){return"per_page"!==t?function(){}:B},showMenu:!1,emptyMessage:Object(a.__)("No contacts found","wp-marketing-automations")})},Ir=r(208),Ar=["page","path","s","filter"];var Tr=function(t){var e=t.setStep,r=t.setExportFilter,o=t.contactCount,c=t.setContactCount,i=Object(B.a)(!0,!0),u=i.loading,f=void 0===u||u,m=i.filters,p=void 0===m?{}:m,h=Object(D.i)(),d=h.page,v=h.path,g=(h.s,h.filter,function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(h,Ar)),w=Object(y.a)(),O=Object(n.useRef)(g),j=w.fetch;Object(n.useEffect)((function(){j(g,0,10,!0,!1,"",!1)}),[]),Object(n.useEffect)((function(){Object(l.xc)(g,O.current)||j(g,0,10,!0,!1,"",!1),O.current=g}),[g]);var E=Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-contact-export-step-two"},Object(n.createElement)("div",{className:"bwf-bulk-action-step-loading bwf-p-20"},Object(n.createElement)("div",{className:"bwf-bulk-action-step-loading"},Object(n.createElement)("div",{className:"bwf-filter-placeholder"},Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(n.createElement)("div",{className:"bwf-w-150"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-150"})),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-36"})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}),Object(n.createElement)("br",null),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-400"})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(n.createElement)("div",null),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-36 bwf-w-90"}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-w-150"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-15"})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(Ir.a,{numberOfRows:5,headers:[{key:"2",label:Object(n.createElement)("div",{className:"bwf-w-210"},Object(n.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))},{key:"3",label:Object(n.createElement)("div",{className:"bwf-w-210"},Object(n.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))},{key:"4",label:Object(n.createElement)("div",{className:"bwf-w-210"},Object(n.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))}]})))),Object(n.createElement)("div",{className:"bwf-display-flex bwfcrm-export-buttons"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-36"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-36"})));return f?Object(n.createElement)(n.Fragment,null,E):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-contact-export-step-two"},Object(n.createElement)("div",{className:"bwf-export-filter-wrapper"},Object(n.createElement)("div",{className:"bwf-display-flex bwf-mb-16",style:{justifyContent:"space-between"}},Object(n.createElement)("div",{className:"bwf-h3 bwf-w-300"},Object(a.__)("Segment Contacts","wp-marketing-automations")),Object(n.createElement)(z.c,{addAdvance:!1})),Object(n.createElement)("div",{className:"bwf-p-0"},Object(n.createElement)(U.a,{siteLocale:"en-US",currency:Object(l.qc)()?bwfcrm_contacts_data.currency:{},config:{title:Object(a.__)("Select Rules","wp-marketing-automations"),filters:p,footerComponent:function(t){return Object(n.createElement)(z.a,{filter:t.data,config:t.config})},enableGrouping:!0},path:"/contacts",query:h}))),Object(n.createElement)("div",{className:"bwf-export-table-wrapper"},Object(n.createElement)(Cr,{setContactCount:c,queryFilters:g}))),Object(n.createElement)("div",{className:"bwf-display-flex bwfcrm-export-buttons"},Object(n.createElement)(b.Button,{className:"bwfcrm-export-prev bwf-display-flex",isSecondary:!0,onClick:function(){Object(s.isEmpty)(g)||Object(D.k)({page:d,path:v},"/",{}),r(g),e(1)}},Object(n.createElement)("span",null,Object(a.__)("Previous","wp-marketing-automations"))),Object(n.createElement)(b.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,disabled:!(o>0),onClick:function(){Object(s.isEmpty)(g)||Object(D.k)({page:d,path:v},"/",{}),r(g),o>0&&e(3)}},Object(n.createElement)("span",null,Object(a.__)("Next","wp-marketing-automations")))))};function Fr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Gr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gr(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Dr=function(t){var e=t.setAdd,r=Fr(Object(n.useState)(!1),2),o=r[0],c=(r[1],Fr(Object(n.useState)(1),2)),i=c[0],l=c[1],u=Fr(Object(n.useState)(!1),2),s=u[0],f=u[1],m=Fr(Object(n.useState)(""),2),p=m[0],h=m[1],d=Fr(Object(n.useState)([]),2),y=d[0],v=d[1],g=Fr(Object(n.useState)([]),2),w=g[0],O=g[1],j=Fr(Object(n.useState)(0),2),E=j[0],_=j[1],k=function(t){switch(t){case 1:return Object(n.createElement)(kr,{title:p,setTitle:h,selected:y,expfilter:w,setSelected:v,setStep:l});case 2:return Object(n.createElement)(Tr,{setStep:l,setExportFilter:O,contactCount:E,setContactCount:_});case 3:return Object(n.createElement)(Ze,{title:p,fields:y,expfilter:w,contactCount:E,setPending:f,setAdd:e})}},x=[{key:1,label:Object(a.__)("Fields","wp-marketing-automations"),content:k(1)},{key:2,label:Object(a.__)("Contacts","wp-marketing-automations"),content:k(2)},{key:3,label:Object(a.__)("Confirmation","wp-marketing-automations"),content:k(3)}];return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(b.Modal,{onRequestClose:function(){return e(!1)},className:"bwf-admin-modal bwf-admin-modal-xxl bwf-export-add-modal",title:Object(a.__)("Create Export","wp-marketing-automations"),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-crm-export-init"},o?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(F.a,null)):Object(n.createElement)(Fe.a,{steps:x,currentStep:i,isPending:s}))))};function $r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Mr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mr(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Br=function(t){var e=t.setExport,r=$r(Object(n.useState)(!1),2),o=r[0],c=r[1];Object(n.useEffect)((function(){Object(l.m)(Object(a.__)("Export Contacts","wp-marketing-automations"))}),[]);var i=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(n.createElement)(O.a,{icon:"export",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(a.__)("Export your contacts to CSV file.","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(a.__)("Start Exporting","wp-marketing-automations"),proCheck:!0,onClick:function(){Object(l.ac)()&&c(!0)}}]}}];return Object(n.createElement)(b.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-admin-modal-no-header bwf-export-contact-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(n.createElement)("div",{className:"bwf-export-modal-header"},Object(n.createElement)("div",{className:"bwf-export-modal-title"},Object(a.__)("Export Contacts","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex gap-24"},!o&&Object(l.bb)()&&Object(n.createElement)(b.Button,{variant:"primary",className:"bwf-add-contact-export-btn",onClick:function(){return c(!0)},isBusy:!1,disabled:!1},Object(a.__)("Create Export","wp-marketing-automations")),Object(n.createElement)("div",{onClick:function(){Object(l.m)(Object(a.__)("Contacts","wp-marketing-automations")),Object(D.k)({page:"autonami",path:"/contacts/"},"/",{}),e(!1)},className:"bwf-flex",style:{cursor:"pointer",marginRight:"-10px"}},Object(n.createElement)(O.a,{icon:"close"})))),o&&Object(n.createElement)(Dr,{setAdd:c}),Object(l.bb)()?Object(n.createElement)(ur,{setAdd:c,isAdd:o}):Object(n.createElement)(Lt.a,{data:i}))};r(1160);function zr(t){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ur=["getStateProp"];function Rr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Rr(Object(r),!0).forEach((function(e){Yr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Yr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=zr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Vr=function(){var t=Object(we.a)("importerReducer"),e=t.getStateProp;return qr(qr({},function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(t,Ur)),{},{showBackButton:function(){return e("showBackButton")},getExistingImports:function(){return e("existingImports")}})};function Wr(t){return(Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Hr=["fetch","setStateProp"];function Kr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Zr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Kr(Object(r),!0).forEach((function(e){Jr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Jr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Wr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Wr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Qr,Xr,tn,en,rn=function(){var t=Object(Se.a)("importerReducer"),e=t.fetch,r=t.setStateProp;return Zr(Zr({},function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(t,Hr)),{},{showBackButton:function(t){return r("showBackButton",t)},fetch:function(){return e("GET",Object(l.A)("/import/processes"))}})},nn=r(7);function an(){return(an=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(null,arguments)}var on,cn,ln=function(t){return nn.createElement("svg",an({id:"wlm_svg__WishList_Member","data-name":"WishList Member",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 532.46 217.17"},t),Qr||(Qr=nn.createElement("defs",null,nn.createElement("style",null,".wlm_svg__cls-1{fill:#1e7fc0}.wlm_svg__cls-2{fill:#333}"))),Xr||(Xr=nn.createElement("g",{id:"wlm_svg__member"},nn.createElement("path",{className:"wlm_svg__cls-1",d:"M238.05 219.81c-.11-3-.22-6.52-.21-10.12h-.1c-.78 3.15-1.82 6.64-2.74 9.53l-3 9.58h-4.31l-2.69-9.49c-.79-2.89-1.6-6.38-2.21-9.62h-.08c-.12 3.34-.26 7.14-.4 10.19l-.46 9.32h-5.14l1.57-24.55h7.4l2.4 8.2c.78 2.82 1.53 5.9 2.08 8.78h.12c.67-2.84 1.5-6.08 2.34-8.82l2.6-8.16h7.27l1.31 24.55h-5.39zM270.09 218.81h-9v5.84h10.1v4.55H255.5v-24.55h15.13v4.55h-9.57v5.11h9zM303.08 219.81c-.11-3-.22-6.52-.21-10.12h-.1c-.78 3.15-1.82 6.64-2.74 9.53l-3 9.58h-4.31l-2.65-9.49c-.79-2.89-1.6-6.38-2.21-9.62h-.08c-.12 3.34-.26 7.14-.41 10.19l-.45 9.32h-5.14l1.57-24.55h7.4l2.4 8.2c.77 2.82 1.53 5.9 2.08 8.78h.12c.67-2.84 1.5-6.08 2.33-8.82l2.61-8.16h7.26l1.32 24.55h-5.39zM320.53 205a45.06 45.06 0 017.16-.52c3.39 0 5.47.33 7.27 1.37a5.35 5.35 0 012.92 4.84c0 2.16-1.26 4.2-4 5.23v.08a6.11 6.11 0 014.89 6 6.5 6.5 0 01-2.56 5.21c-1.8 1.45-4.76 2.24-9.65 2.24a41.31 41.31 0 01-6-.37zm5.5 9.4h1.8c2.94 0 4.48-1.22 4.48-3s-1.42-2.85-3.93-2.85a12.1 12.1 0 00-2.35.17zm0 10.87a13.63 13.63 0 002.13.1c2.52 0 4.74-1 4.74-3.56s-2.2-3.44-5-3.44H326zM364.49 218.81h-9v5.84h10.1v4.55h-15.68v-24.55H365v4.55h-9.57v5.11h9zM376.73 205a47.35 47.35 0 017.38-.52c3.65 0 6.2.55 7.95 1.94a6.22 6.22 0 012.27 5.15 6.5 6.5 0 01-4.33 6v.12c1.7.69 2.66 2.31 3.28 4.57a71.49 71.49 0 002 6.93h-5.68a30.77 30.77 0 01-1.69-5.72c-.69-3.07-1.72-3.89-4-3.92h-1.65v9.64h-5.51zm5.51 10.56h2.17c2.76 0 4.4-1.4 4.4-3.54s-1.54-3.39-4.07-3.41a11.35 11.35 0 00-2.5.19z",transform:"translate(-39.77 -12.28)"}))),tn||(tn=nn.createElement("g",{id:"wlm_svg__WishList"},nn.createElement("path",{className:"wlm_svg__cls-2",d:"M64.62 180L39.77 75h25.41l8 43.21c2.24 12.5 4.42 26.12 6.1 36.71h.32c1.69-11.4 4.2-24 6.85-37L95.4 75h25.21l8.39 44.3c2.24 12.24 4 23.45 5.54 35.07h.32c1.64-11.7 3.85-23.87 6.17-36.46L149.51 75h24.12l-27.06 105h-25.63L112 134.77c-2.1-10.5-3.74-20.4-5.06-32.29h-.31c-1.78 11.81-3.47 21.77-6 32.36l-10 45.16zM180.94 180v-76.26h23.73V180zM218.57 159.31a46.05 46.05 0 0020.31 5.69c7.15 0 10.21-2.4 10.21-6.29s-2.43-5.86-11.18-8.81c-15.85-5.21-21.81-13.83-21.72-22.78 0-14.31 12.07-25.06 31-25.06 8.92 0 16.8 2.1 21.46 4.44l-4.12 16.32a38.83 38.83 0 00-16.51-4.3c-5.78 0-9.09 2.3-9.09 6.14 0 3.65 3 5.57 12.36 8.8 14.46 4.91 20.51 12.34 20.61 23.45 0 14.22-11.1 24.71-32.93 24.71-9.93 0-18.86-2.25-24.67-5.37zM279.32 69.41h23.73v43.51h.31a26.93 26.93 0 019.28-7.87A26.39 26.39 0 01325 102c15.12 0 26.7 10.48 26.7 33.46V180h-23.76v-41.91c0-10-3.45-16.89-12.24-16.89a12.46 12.46 0 00-11.88 8.37 14.45 14.45 0 00-.77 5.18V180h-23.73zM359.57 75h23.72v85.05H425V180h-65.43zM432.35 180v-76.26h23.72V180zM468 159.31c4.31 2.65 13.42 5.66 20.31 5.66 7.15 0 10.21-2.4 10.21-6.29s-2.43-5.86-11.18-8.81c-15.85-5.21-21.81-13.83-21.72-22.78 0-14.31 12.08-25.06 31-25.06 8.92 0 16.81 2.1 21.47 4.44l-4.13 16.32a38.79 38.79 0 00-16.51-4.3c-5.78 0-9.09 2.3-9.09 6.14 0 3.65 3 5.57 12.36 8.8 14.46 4.91 20.52 12.34 20.61 23.45 0 14.22-11.09 24.71-32.93 24.71-9.93 0-18.86-2.25-24.67-5.37zM555.18 82v21.73h17.05v17.48h-17.05v27.61c0 9.19 2.28 13.43 9.35 13.43a30.89 30.89 0 007-.71l.19 18c-3.06 1.1-8.72 2-15.35 2-7.66 0-14-2.67-17.86-6.62-4.4-4.51-6.55-11.76-6.55-22.58v-31.12h-10.08v-17.48H532V87.37z",transform:"translate(-39.77 -12.28)"}))),en||(en=nn.createElement("path",{id:"wlm_svg__bounce",className:"wlm_svg__cls-1",d:"M456.86 82a13.41 13.41 0 01-13.4 13.5c-7.93 0-13.59-7-13.53-13.13.08-8 6.8-14.15 13.72-13.64 6.8-.56 13.24 5.85 13.21 13.27zm-33.32-7S302.47-38.88 195.48 88.11c0 0-36.78-75.63-119.47-74.84 0 0 71.11-13.4 120.07 58.58 0 0 106.11-125.65 242.11-10.49 0 0-13.52-.85-14.65 13.64z",transform:"translate(-39.77 -12.28)"})))};function un(){return(un=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(null,arguments)}var sn=function(t){return nn.createElement("svg",un({xmlns:"http://www.w3.org/2000/svg",width:400,height:90,viewBox:"20 20 700 155",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.414},t),on||(on=nn.createElement("path",{d:"M135.1 105.3c-1 0-2 .1-3 .2l-14.4-25.9c3.2-3.8 5.1-8.7 5.1-14 0-12.1-9.8-21.9-21.9-21.9-12.1 0-21.9 9.9-21.9 21.9 0 5.2 1.8 10 4.9 13.8l-15 26.2c-1.1-.2-2.2-.3-3.3-.3-12.1 0-21.9 9.8-21.9 21.9 0 12.1 9.8 21.9 21.9 21.9 12.1 0 21.9-9.8 21.9-21.9 0-5.2-1.8-10-4.9-13.8l15-26.2c1.1.2 2.2.3 3.3.3 1 0 2-.1 3-.2l14.4 25.9c-3.2 3.8-5.1 8.7-5.1 14 0 12.1 9.8 21.9 21.9 21.9 12.1 0 21.9-9.8 21.9-21.9 0-12.1-9.8-21.9-21.9-21.9zm-34.2-47.2c4.1 0 7.5 3.4 7.5 7.5s-3.4 7.5-7.5 7.5-7.5-3.4-7.5-7.5 3.4-7.5 7.5-7.5zm-35.3 76.6c-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5 7.5 3.4 7.5 7.5-3.4 7.5-7.5 7.5zm69.5 0c-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5 7.5 3.4 7.5 7.5-3.3 7.5-7.5 7.5z",fill:"#e34f43",fillRule:"nonzero"})),cn||(cn=nn.createElement("g",{fill:"#2d2d2d",fillRule:"nonzero"},nn.createElement("path",{d:"M205.5 64h25.2l21.6 68h-20.6l-3.6-12.7h-22.5L202 132h-18.2l21.7-68zm3.8 42h14.9l-7.4-26.2-7.5 26.2zM258.1 93.9h-6.3V82.3h6.3v-3.8c0-12.4 7.6-18.2 19.4-18.2 3.1 0 5.4.4 7.6 1v12.5c-1.2-.4-2.7-.7-4.6-.7-3.8 0-5.5 2.3-5.5 5.4v3.8h14.5v-4.4c0-12.4 7.7-18.3 19.5-18.3 3.1 0 5.3.4 7.5 1v12.5c-1.2-.4-2.5-.6-4.5-.6-3.9 0-5.5 2.2-5.5 5.4v4.4h10v11.6h-10V132h-17V93.9H275V132h-16.9V93.9zM320.5 68.8c0-5 4-8.8 9.3-8.8 5.3 0 9.4 3.8 9.4 8.8 0 5-4.1 8.8-9.4 8.8-5.3-.1-9.3-3.8-9.3-8.8zm.9 13.5h17V132h-17V82.3zM347.5 60.4h16.9V132h-16.9zM372.7 68.8c0-5 4-8.8 9.3-8.8 5.3 0 9.4 3.8 9.4 8.8 0 5-4.1 8.8-9.4 8.8-5.3-.1-9.3-3.8-9.3-8.8zm.9 13.5h17V132h-17V82.3zM396.7 118.2c0-11.7 9.9-16.3 26.4-16.3h4.8v-1.1c0-4.8-1.1-7.9-6.6-7.9-4.7 0-6.4 2.8-6.8 5.9h-16c.8-12 10.2-17.9 23.8-17.9 13.7 0 22.4 5.6 22.4 18.8V132h-16.6v-5.8c-2.4 3.6-6.8 6.9-14.7 6.9-8.8.1-16.7-4.3-16.7-14.9zm31.2-3.6v-3h-4.5c-6.8 0-9.9 1.3-9.9 5.4 0 2.9 1.9 4.7 5.9 4.7 4.9 0 8.5-2.8 8.5-7.1zM455 116.1V93.9h-6V82.3h6V71.9h17v10.4h9.8v11.6H472v20.5c0 3.6 1.8 5.2 5 5.2 1.9 0 3.3-.3 4.9-.9v12.9c-2.2.6-5.4 1.4-9.4 1.4-11.3.2-17.5-5.2-17.5-16.9zM484.8 107.8v-.8c0-16 11.9-26.1 26.9-26.1 13.6 0 25.3 7.8 25.3 25.7v4.5h-35c.5 6.6 4.3 10.4 10.4 10.4 5.6 0 8-2.6 8.7-5.9h16c-1.5 11.2-10.2 17.6-25.2 17.6-15.7 0-27.1-9.2-27.1-25.4zm35.6-6.3c-.3-6-3.2-9.3-8.8-9.3-5.1 0-8.7 3.3-9.5 9.3h18.3zM536.8 64h19.7l8.8 42.4 9.1-42.4h17.3l9.9 42.8 9.2-42.8h18.1L613 132h-20.4l-10.5-43.2-10.4 43.2h-19l-15.9-68zM634.6 64h25.9c18.6 0 27.3 8.3 27.3 22.7v.4c0 14.3-9.6 22-26.4 22H654V132h-19.4V64zm25 31.8c6.3 0 9.6-2.9 9.6-8.6v-.4c0-5.8-3.4-8.2-9.5-8.2H654v17.1h5.6v.1z"}))))},fn=r(84),mn=r(1193),pn=r(381);r(1258);function bn(t){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hn(){hn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==bn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(bn(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function dn(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function yn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return vn(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var gn=function(t){var e,r=t.requestData,o=t.headersData,c=t.setImport,i=o.import_id,u=yn(Object(n.useState)(null),2),f=u[0],m=u[1],p=yn(Object(n.useState)(!0),2),h=p[0],d=p[1],y=yn(Object(n.useState)({loading:!1,status:!1}),2),v=y[0],w=y[1],O=f&&"log"in f?f.log:{},j=O.skipped,_=void 0===j?[]:j,k=O.failed,x=void 0===k?[]:k,S=O.succeed,N=void 0===S?[]:S,L=yn(Object(n.useState)(null),2),P=L[0],C=L[1],I=rn().showBackButton,A=yn(Object(n.useState)(!1),2),T=A[0],G=A[1],D=yn(Object(n.useState)(!1),2),$=D[0],M=D[1],B=yn(Object(n.useState)(!1),2),z=B[0],U=B[1],R=function(){var t,e=(t=hn().mark((function t(){var e,n,a,o=arguments;return hn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]&&o[0],t.prev=1,M(!0),n=r&&"useExisting"in r&&r.useExisting?{}:r,!r.useExisting&&(n.start_import=e),t.next=7,g()({method:"POST",data:n,path:Object(l.A)("/import/csv/status/".concat(i))});case 7:a=t.sent,m(a.result),a.result&&"status"in a.result&&"success"===a.result.status&&(U(!0),I(!0),G(!0)),d(!1),M(!1),t.next=20;break;case 14:t.prev=14,t.t0=t.catch(1),I(!0),C(t.t0),d(!1),M(!1);case 20:case"end":return t.stop()}}),t,null,[[1,14]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){dn(o,n,a,c,i,"next",t)}function i(t){dn(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(De.a)((function(){$||z||!Object(s.isEmpty)(P)||R()}),5e3),Object(n.useEffect)((function(){return I(!1),window.scrollTo(0,0),R(!0),function(){I(!0),d(!1)}}),[]),h?Object(n.createElement)(F.a,null):P||f&&!1 in f?Object(n.createElement)(E.a,{status:"error",className:"bwf-ml-16 bwf-mr-16"},P&&"message"in P?P.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):f&&"percent"in f?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Ge.a,{noStriped:!0,size:"sm",progress:parseInt(f.percent),text:"".concat(f.percent,"% ").concat(Object(a.__)("Completed","wp-marketing-automations"))}),Object(n.createElement)("p",null,"Skipped: ",parseInt(_)>0?_:0,", Failed:"," ",parseInt(x)>0?x:0,", Success:"," ",parseInt(N)>0?N:0)),T&&Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){c(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations")),!!f&&!!f.has_log_file&&Object(n.createElement)(n.Fragment,null,-1===Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.5.3")?Object(n.createElement)("span",{onClick:function(){w({status:!0,isDelete:!1,buttonConfirm:Object(a.__)("Upgrade Now","wp-marketing-automations"),onConfirm:function(){window.open("plugins.php?s=Funnelkit%20Automations","_blank"),w({status:!1})},title:Object(a.__)("Unable To Download File","wp-marketing-automations"),confirmDescription:Object(a.__)("FunnelKit Automation PRO version 3.5.3 or higher is required.","wp-marketing-automations")})},style:{cursor:"pointer",marginLeft:"10px"},title:Object(a.__)("Download Error Log","wp-marketing-automations"),className:"bwf-a-no-underline"},Object(n.createElement)(b.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations"))):Object(n.createElement)("a",{target:"_blank",href:Object(l.wb)()+"/wp-json"+Object(l.A)("/importer-log/download/".concat(i,"?bwf-nonce=").concat(Object(l.F)())),title:Object(a.__)("Download Error Log","wp-marketing-automations"),className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(n.createElement)(b.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations")))),Object(n.createElement)(jt.a,{modalTitle:null!==(e=v.title)&&void 0!==e?e:Object(a.__)("Delete","wp-marketing-automations"),confirmText:v.confirmText,deleteEntityName:v.deleteEntityName,confirmButtonText:v.buttonConfirm,cancelButtonText:v.buttonCancel,onConfirm:v.onConfirm,isLoading:v.loading,successMessage:v.success,confirmDescription:v.confirmDescription,errorMessage:v.error,onRequestClose:function(){return w({status:!1})},isOpen:v.status,isDelete:!v.hasOwnProperty("isDelete")||v.isDelete}))):null};function wn(t){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function On(){On=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==wn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(wn(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function jn(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function En(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return _n(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_n(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var kn=function(t){Object(l.m)(Object(a.__)("CSV Importer","wp-marketing-automations"));var e=En(Object(n.useState)(null),2),r=e[0],o=e[1],c=En(Object(n.useState)(null),2),i=c[0],u=c[1],s=En(Object(n.useState)(null),2),f=s[0],m=s[1],p=En(Object(n.useState)(!1),2),h=p[0],d=p[1],y=Object(n.useContext)(l.h),v=(0,Vr().getExistingImports)().csv,w=t.step,O=t.setImport,j=function(){var t,e=(t=On().mark((function t(){var e,n,c;return On().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.prev=1,(e=new FormData).append("csv",r),n=1===Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.4.0")?"/import/csv-upload":"/import/csv/upload",t.next=7,g()({method:"POST",body:e,path:Object(l.A)(n)});case 7:c=t.sent,u(c.result),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),o(null),y(t.t0&&"message"in t.t0?t.t0.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 15:Object(l.Lb)(y,3e3),d(!1);case 17:case"end":return t.stop()}}),t,null,[[1,11]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){jn(o,n,a,c,i,"next",t)}function i(t){jn(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){r&&j()}),[r]),Object(n.useEffect)((function(){v&&(u({import_id:v}),m({useExisting:!0}))}),[]),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},2==w&&!v&&!r&&!h&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ye.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)(pn.a,{onFileSelected:function(t){return o(t)},filetypeArray:["text/csv","text/plain","application/csv","text/comma-separated-values","application/excel","application/vnd.ms-excel","application/vnd.msexcel","text/anytext","application/octet-stream","application/txt"],btnLabel:Object(a.__)("Drop your CSV file here OR","wp-marketing-automations")})),h&&Object(n.createElement)(F.a,null),2==w&&i&&"import_id"in i&&!f&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ye.a,null),Object(n.createElement)(mn.a,{buttonAlignClass:"bwf-crm-btn-right-alignment",headersData:i,onRequestImport:function(e){m(e),t.setStep(3)},contactHeaderText:Object(a.__)("Contact Fields","wp-marketing-automations"),updateExistingText:Object(a.__)("Update existing contact status","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf_clear_24"})),2==w&&!h&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){t.setStep(1),t.setImporter(null)}},Object(a.__)("Back","wp-marketing-automations")))),3==w&&f&&i&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ye.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(gn,{requestData:f,setStep:t.setStep,setImporter:t.setImporter,headersData:i,setImport:O}))))};r(1259);function xn(t){return function(t){if(Array.isArray(t))return Ln(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Nn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||Nn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nn(t,e){if(t){if("string"==typeof t)return Ln(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ln(t,e):void 0}}function Ln(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Pn=function(t){var e=t.roles,r=void 0===e?{}:e,o=t.onRolesSelected,c=Sn(Object(n.useState)(Object.keys(r)),2),i=c[0],u=c[1],f=Sn(Object(n.useState)(!0),2),m=f[0],p=(f[1],Sn(Object(n.useState)(!1),2)),h=p[0],d=p[1],y=Sn(Object(n.useState)(!1),2),v=y[0],g=y[1],w=Sn(Object(n.useState)([]),2),O=w[0],j=w[1],E=Sn(Object(n.useState)([]),2),_=E[0],k=E[1],x=Sn(Object(n.useState)(1),2),S=x[0],N=x[1],L=Object(l.M)();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(b.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("User Roles","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-crm-import-checkbox-3col"},r&&Object.keys(r).map((function(t){return Object(n.createElement)(Y.a,{checked:i.includes(t),key:t,label:r[t],onChange:function(e){return function(t,e){u(t?[].concat(xn(i),[e]):i.filter((function(t){return t!==e})))}(e,t)}})})))),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-c-import-field"},Object(n.createElement)(ae.a,{onTagsChange:j,selected:O}),Object(n.createElement)(oe.a,{onListsChange:k,selected:_})),Object(n.createElement)("div",{className:"bwf-heading7-new"},Object(a.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(t){N(t.target.value)},value:Object(s.isEmpty)(S)?"":S},Object.keys(L).map((function(t){return Object(n.createElement)("option",{key:t,value:t},L[t])}))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(b.ToggleControl,{checked:h,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(t){return d(t)}}),Object(n.createElement)(b.ToggleControl,{label:Object(a.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:v,onChange:g})),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-crm-btn-right-alignment",style:{bottom:"-60px"}},Object(n.createElement)(b.Button,{disabled:0===i.length,isPrimary:!0,onClick:function(){return o({roles:i,tags:O.map((function(t){return{id:t.key,value:t.label}})),lists:_.map((function(t){return{id:t.key,value:t.label}})),marketing_status:m,update_existing:h,disable_events:v,imported_contact_status:S})}},Object(a.__)("Import","wp-marketing-automations"))))),Object(n.createElement)("div",{className:"bwf-crm-importer-navigation",style:{marginTop:"15px"}},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){t.setStep(1),t.setImporter(null)}},Object(a.__)("Back","wp-marketing-automations"))))};function Cn(t){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function In(){In=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Cn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Cn(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function An(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function Tn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Fn(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Gn=function(t){var e,r=t.requestData,c=t.setImport,i=Tn(Object(n.useState)(!1),2),u=i[0],f=i[1],m=Tn(Object(n.useState)(null),2),p=m[0],h=m[1],d=Tn(Object(n.useState)({loading:!1,status:!1}),2),y=d[0],v=d[1],w=Tn(Object(n.useState)(r&&"importId"in r?parseInt(r.importId):0),2),O=w[0],j=w[1],_=p&&"log"in p?p.log:{},k=_.skipped,x=void 0===k?0:k,S=_.failed,N=void 0===S?0:S,L=_.succeed,P=void 0===L?0:L,C=Tn(Object(n.useState)(null),2),I=C[0],A=C[1],T=rn().showBackButton,F=(location&&location.search&&Object(o.parse)(location.search.substring(1)),0),G=Tn(Object(n.useState)(5e3),2),D=G[0],$=G[1],M=function(){var t,e=(t=In().mark((function t(){var e,n;return In().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return F++,t.prev=1,e=parseInt(O)>0?{import_id:O}:r,parseInt(O)>0?e.start_import=!1:e.start_import=!0,t.next=6,g()({method:"POST",data:e,path:Object(l.A)("/import/wp/status")});case 6:n=t.sent,h(n.result),j(parseInt(n.result.import_id)),n.result&&"status"in n.result&&"success"===n.result.status&&($(null),T(!1),f(!0)),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),$(null),T(!1),A(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){An(o,n,a,c,i,"next",t)}function i(t){An(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(De.a)((function(){Object(s.isEmpty)(O)&&0!=F||M()}),D),Object(n.useEffect)((function(){return T(!0),window.scrollTo(0,0),function(){T(!1)}}),[]),I||p&&!1 in p?Object(n.createElement)(E.a,{status:"error"},I&&"message"in I?I.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):p?p&&"percent"in p?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(Ge.a,{progress:parseInt(p.percent),noStriped:!0,size:"sm",text:"".concat(p.percent,"% Completed")}),Object(n.createElement)("p",{className:"bwf-p"},"Skipped: ",parseInt(x)>0?x:0,", Failed:"," ",parseInt(N)>0?N:0,", Success:"," ",parseInt(P)>0?P:0)),u&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){c(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations")),!!p&&!!p.has_log_file&&Object(n.createElement)(n.Fragment,null,-1===Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.5.3")?Object(n.createElement)("span",{onClick:function(){v({status:!0,isDelete:!1,buttonConfirm:Object(a.__)("Upgrade Now","wp-marketing-automations"),onConfirm:function(){window.open("plugins.php?s=Funnelkit%20Automations","_blank"),v({status:!1})},title:Object(a.__)("Unable To Download File","wp-marketing-automations"),confirmDescription:Object(a.__)("FunnelKit Automation PRO version 3.5.3 or higher is required.","wp-marketing-automations")})},style:{cursor:"pointer",marginLeft:"10px"},title:Object(a.__)("Download Error Log","wp-marketing-automations"),className:"bwf-a-no-underline"},Object(n.createElement)(b.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations"))):Object(n.createElement)("a",{target:"_blank",href:Object(l.wb)()+"/wp-json"+Object(l.A)("/importer-log/download/".concat(O,"?bwf-nonce=").concat(Object(l.F)())),title:Object(a.__)("Download Error Log","wp-marketing-automations"),className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(n.createElement)(b.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations")))),Object(n.createElement)(jt.a,{modalTitle:null!==(e=y.title)&&void 0!==e?e:Object(a.__)("Delete","wp-marketing-automations"),confirmText:y.confirmText,deleteEntityName:y.deleteEntityName,confirmButtonText:y.buttonConfirm,cancelButtonText:y.buttonCancel,onConfirm:y.onConfirm,isLoading:y.loading,successMessage:y.success,confirmDescription:y.confirmDescription,errorMessage:y.error,onRequestClose:function(){return v({status:!1})},isOpen:y.status,isDelete:!y.hasOwnProperty("isDelete")||y.isDelete})))):null:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(Ge.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(n.createElement)("p",{className:"bwf-p"},"Skipped: ",parseInt(x)>0?x:0,", Failed: ",parseInt(N)>0?N:0,", Success: ",parseInt(P)>0?P:0)))};function Dn(t){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $n(){$n=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Dn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Dn(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Mn(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function Bn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return zn(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Un=function(t){Object(l.m)("WP Importer");var e=t.step,r=t.setImport,o=Bn(Object(n.useState)({}),2),c=o[0],i=o[1],u=Bn(Object(n.useState)(null),2),f=u[0],m=u[1],p=Bn(Object(n.useState)(!1),2),b=p[0],h=p[1],d=(0,Vr().getExistingImports)().wp,y=Object(n.useContext)(l.h),v=function(){var t,e=(t=$n().mark((function t(){var e;return $n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),t.prev=1,t.next=4,g()({method:"GET",path:Object(l.A)("/import/wp/roles")});case 4:e=t.sent,i(e.result),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),i(null),y(t.t0&&"message"in t.t0?t.t0.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 12:Object(l.Lb)(y,3e3),h(!1);case 14:case"end":return t.stop()}}),t,null,[[1,8]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){Mn(o,n,a,c,i,"next",t)}function i(t){Mn(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){d?m({importId:d}):v()}),[]),Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},b&&Object(n.createElement)(F.a,null),2==e&&!f&&c&&Object(s.size)(c)>0&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ye.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)(Pn,{roles:c,setStep:t.setStep,setImporter:t.setImporter,onRolesSelected:function(e){m(e),t.setStep(3)}})),3==e&&f&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ye.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(Gn,{setStep:t.setStep,requestData:f,setImporter:t.setImporter,setImport:r})))};r(1260);function Rn(t){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qn(){qn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Rn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Rn(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Yn(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function Vn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Wn(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Hn=function(t){var e,r=t.importData,c=t.setImport,i=r.importId,u=Vn(Object(n.useState)(null),2),s=u[0],f=u[1],m=s&&"log"in s?s.log:{},p=m.skipped,h=void 0===p?0:p,d=m.failed,y=void 0===d?0:d,v=m.succeed,w=void 0===v?0:v,O=Vn(Object(n.useState)({loading:!1,status:!1}),2),j=O[0],E=O[1],_=Vn(Object(n.useState)(!1),2),k=_[0],x=_[1],S=Vn(Object(n.useState)(!1),2),N=S[0],L=S[1],P=function(){var t,e=(t=qn().mark((function t(){var e,r;return qn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={start_import:!1,import_id:i},t.next=4,g()({method:"GET",path:Object(l.A)("/import/wc/status?"+Object(o.stringify)(e))});case 4:r=t.sent,f(r.result),r.result&&"status"in r.result&&"success"===r.result.status&&r.result.percent>=100&&(x(!0),L(!0)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),setError(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){Yn(o,n,a,c,i,"next",t)}function i(t){Yn(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(De.a)((function(){N||P()}),5e3),s?s&&"percent"in s?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Ge.a,{noStriped:!0,size:"sm",progress:parseInt(s.percent),text:"".concat(s.percent,"% Completed")}),Object(n.createElement)("p",null,"Skipped: ",parseInt(h)>0?h:0,", Failed:"," ",parseInt(y)>0?y:0,", Success:"," ",parseInt(w)>0?w:0)),k&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){c(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations")),!!s&&!!s.has_log_file&&Object(n.createElement)(n.Fragment,null,-1===Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.5.3")?Object(n.createElement)("span",{onClick:function(){E({status:!0,isDelete:!1,buttonConfirm:Object(a.__)("Upgrade Now","wp-marketing-automations"),onConfirm:function(){window.open("plugins.php?s=Funnelkit%20Automations","_blank"),E({status:!1})},title:Object(a.__)("Unable To Download File","wp-marketing-automations"),confirmDescription:Object(a.__)("FunnelKit Automation PRO version 3.5.3 or higher is required.","wp-marketing-automations")})},style:{cursor:"pointer",marginLeft:"10px"},title:Object(a.__)("Download Error Log","wp-marketing-automations"),className:"bwf-a-no-underline"},Object(n.createElement)(b.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations"))):Object(n.createElement)("a",{target:"_blank",href:Object(l.wb)()+"/wp-json"+Object(l.A)("/importer-log/download/".concat(i,"?bwf-nonce=").concat(Object(l.F)())),title:Object(a.__)("Download Error Log","wp-marketing-automations"),className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(n.createElement)(b.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations"))))),Object(n.createElement)(jt.a,{modalTitle:null!==(e=j.title)&&void 0!==e?e:Object(a.__)("Delete","wp-marketing-automations"),confirmText:j.confirmText,deleteEntityName:j.deleteEntityName,confirmButtonText:j.buttonConfirm,cancelButtonText:j.buttonCancel,onConfirm:j.onConfirm,isLoading:j.loading,successMessage:j.success,confirmDescription:j.confirmDescription,errorMessage:j.error,onRequestClose:function(){return E({status:!1})},isOpen:j.status,isDelete:!j.hasOwnProperty("isDelete")||j.isDelete}))):null:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Ge.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf-p"},"Skipped: ",parseInt(h)>0?h:0,", Failed: ",parseInt(y)>0?y:0,", Success: ",parseInt(w)>0?w:0)),Object(n.createElement)("div",{className:"bwf_clear_20"}))};function Kn(t){return(Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zn(){Zn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Kn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Kn(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Jn(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function Qn(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){Jn(o,n,a,c,i,"next",t)}function i(t){Jn(o,n,a,c,i,"throw",t)}c(void 0)}))}}function Xn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ta(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ta(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ta(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var ea=function(t){Object(l.m)("WC Importer");var e=t.step,r=t.setImport,c=Xn(Object(n.useState)({}),2),i=c[0],u=c[1],f=Xn(Object(n.useState)(!0),2),m=f[0],p=f[1],h=Xn(Object(n.useState)(null),2),d=h[0],y=h[1],v=Xn(Object(n.useState)(!1),2),w=v[0],O=v[1],j=Xn(Object(n.useState)(!0),2),E=j[0],_=(j[1],Xn(Object(n.useState)(!1),2)),k=_[0],x=_[1],S=Xn(Object(n.useState)([]),2),N=S[0],L=S[1],P=Xn(Object(n.useState)([]),2),C=P[0],I=P[1],A=Object(n.useContext)(l.h),T=Xn(Object(n.useState)(1),2),G=T[0],D=T[1],$=(0,Vr().getExistingImports)().wc,M=Object(l.M)(),B=function(){var e=Qn(Zn().mark((function e(){var r,n,c,i=arguments;return Zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]&&i[0],e.prev=1,n={start_import:r,tags:N.map((function(t){return{id:t.key,value:t.label}})),lists:C.map((function(t){return{id:t.key,value:t.label}})),marketing_status:E,update_existing:k,disable_events:w,imported_contact_status:G},e.next=5,g()({method:"GET",path:Object(l.A)("/import/wc/status?"+Object(o.stringify)(n))});case 5:c=e.sent,u({importId:c.result.import_id}),t.setStep(3),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),u(null),A(e.t0&&"message"in e.t0?e.t0.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 14:Object(l.Lb)(A,3e3),p(!1);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var t=Qn(Zn().mark((function t(){return Zn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({method:"GET",path:Object(l.A)("/import/wc/get-orders")}).then((function(t){y(parseInt(t.result)),p(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){parseInt($)>0?(u({importId:$}),p(!1)):z()}),[]);return Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},2==e&&m&&(Object(s.isEmpty)(i)||1===i.status)&&Object(n.createElement)(F.a,null),2==e&&!m&&!Object(s.isNull)(d)&&(d>0?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ye.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-importer-wc-wrap"},Object(n.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("WooCommerce Customers","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},d+" "+Object(a.__)("paid orders are available for import.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_16"}),Object(n.createElement)("div",{className:"bwf-c-import-field"},Object(n.createElement)(ae.a,{onTagsChange:L,selected:N}),Object(n.createElement)(oe.a,{onListsChange:I,selected:C})),Object(n.createElement)("div",{className:"bwf-heading7-new"},Object(a.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-wc-status-select",onChange:function(t){D(t.target.value)},value:Object(s.isEmpty)(G)?"":G},Object.keys(M).map((function(t){return Object(n.createElement)("option",{key:t,value:t},M[t])}))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(b.ToggleControl,{checked:k,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(t){return x(t)}}),Object(n.createElement)(b.ToggleControl,{label:Object(a.__)("Trigger Automations (for Tag & List related Events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:w,onChange:O})),Object(n.createElement)("div",{className:"bwf-crm-btn-right-alignment"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){t.setStep(3),p(!0),B(!0)}},Object(a.__)("Import","wp-marketing-automations"))))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ye.a,null),Object(n.createElement)("div",{className:"bwf-crm-importer-wc-wrap"},Object(n.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("WooCommerce Customers","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("No Orders are available for import.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_20"})))),2==e&&!m&&Object(n.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){t.setStep(1),t.setImporter(null)}},Object(a.__)("Back","wp-marketing-automations"))),3==e&&m&&Object(n.createElement)(F.a,null),3==e&&!m&&i&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ye.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)(Hn,{importData:i,setStep:t.setStep,setImporter:t.setImporter,setImport:r})))};r(1261);function ra(t){return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function na(){na=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==ra(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(ra(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function aa(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function oa(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){aa(o,n,a,c,i,"next",t)}function i(t){aa(o,n,a,c,i,"throw",t)}c(void 0)}))}}var ca=function(){return Object(_t.useQuery)(["get-wlm-members-count"],oa(na().mark((function t(){var e;return na().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.A)("/import/wlm/get-members-count")});case 2:if((e=t.sent).code&&200===e.code){t.next=5;break}throw new Error(Object(a.__)("Unable to load members count","wp-marketing-automations"));case 5:return t.abrupt("return",parseInt(e.result));case 6:case"end":return t.stop()}}),t)}))))};function ia(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return la(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?la(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function la(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var ua=Object(l.M)(),sa=function(t){var e=t.onStartImport,r=t.setStep,o=t.setImporter,c=ca(),i=c.isLoading,u=c.data,f=void 0===u?0:u,m=c.isError,p=c.error,h=ia(Object(n.useState)(!1),2),d=h[0],y=h[1],v=ia(Object(n.useState)(!1),2),g=v[0],w=v[1],O=ia(Object(n.useState)([]),2),j=O[0],E=O[1],_=ia(Object(n.useState)([]),2),k=_[0],x=_[1],S=ia(Object(n.useState)(1),2),N=S[0],L=S[1],P=Object(n.useContext)(l.h),C=Object(n.useCallback)((function(){return e({tags:j.map((function(t){return{id:t.key,value:t.label}})),lists:k.map((function(t){return{id:t.key,value:t.label}})),update_existing:d,disable_events:g,imported_contact_status:N})}),[j,k,d,g,N,e]);return Object(n.useEffect)((function(){m&&(P("string"==typeof p?p:p&&p.message?p.message:Object(a.__)("Unknown API Error","wp-marketing-automations")),Object(l.Lb)(P,3e3))}),[m,p]),i?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ye.a,null),Object(n.createElement)(F.a,null)):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(b.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("WishList Members","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},f+" "+Object(a.__)("members are available for import.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-c-import-field"},Object(n.createElement)(ae.a,{onTagsChange:E,selected:j}),Object(n.createElement)(oe.a,{onListsChange:x,selected:k})),Object(n.createElement)("div",{className:"bwf-heading7-new"},Object(a.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(t){L(t.target.value)},value:Object(s.isEmpty)(N)?"":N},Object.keys(ua).map((function(t){return Object(n.createElement)("option",{key:t,value:t},ua[t])}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(b.ToggleControl,{checked:d,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(t){return y(t)}}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)(b.ToggleControl,{label:Object(a.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:g,onChange:w})),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-crm-btn-right-alignment"},Object(n.createElement)(b.Button,{disabled:0===parseInt(f),isPrimary:!0,onClick:C},Object(a.__)("Import","wp-marketing-automations"))))),Object(n.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){r(1),o(null)}},Object(a.__)("Back","wp-marketing-automations"))))};function fa(t){return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ma(){ma=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==fa(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(fa(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function pa(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function ba(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ha(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ha(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ha(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var da=function(t){var e=t.requestData,r=t.existingImport,c=(t.setStep,t.setImport),i=ba(Object(n.useState)(!1),2),u=i[0],f=i[1],m=ba(Object(n.useState)(null),2),p=m[0],h=m[1],d=ba(Object(n.useState)(e&&"importId"in e?parseInt(e.importId):0),2),y=d[0],v=d[1],w=p&&"log"in p?p.log:{},O=w.skipped,j=void 0===O?0:O,_=w.failed,k=void 0===_?0:_,x=w.succeed,S=void 0===x?0:x,N=ba(Object(n.useState)(null),2),L=N[0],P=N[1],C=rn().showBackButton,I=(location&&location.search&&Object(o.parse)(location.search.substring(1)),0),A=ba(Object(n.useState)(5e3),2),T=A[0],F=A[1],G=ba(Object(n.useState)(!0),2),D=G[0],$=G[1],M=function(){var t,n=(t=ma().mark((function t(){var n,a;return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I++,t.prev=1,n=parseInt(y)>0?{import_id:y}:e,D&&!r?($(!1),n.start_import=!0):n.start_import=!1,t.next=6,g()({method:"POST",data:n,path:Object(l.A)("/import/wlm/status")});case 6:a=t.sent,h(a.result),v(parseInt(a.result.import_id)),a.result&&"status"in a.result&&"success"===a.result.status&&(bwfcrm_contacts_data.is_wlm_active="1",F(null),C(!1),f(!0)),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),F(null),C(!1),P(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){pa(o,n,a,c,i,"next",t)}function i(t){pa(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(De.a)((function(){Object(s.isEmpty)(y)&&0!=I||M()}),T),Object(n.useEffect)((function(){return C(!0),window.scrollTo(0,0),function(){C(!1)}}),[]),L||p&&!1 in p?Object(n.createElement)(E.a,{status:"error"},L&&"message"in L?L.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):p?p&&"percent"in p?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Ge.a,{noStriped:!0,size:"sm",progress:parseInt(p.percent),text:"".concat(p.percent,"% Completed")}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("p",{className:"bwf-t-center"},"Skipped: ",parseInt(j)>0?j:0,", Failed:"," ",parseInt(k)>0?k:0,", Success:"," ",parseInt(S)>0?S:0)),u&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){c(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations"))))):null:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Ge.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-p bwf-t-center"},Object(a.__)("Skipped","wp-marketing-automations"),": ",parseInt(j)>0?j:0,",",Object(a.__)("Failed","wp-marketing-automations"),": ",parseInt(k)>0?k:0,",",Object(a.__)("Success","wp-marketing-automations"),": ",parseInt(S)>0?S:0)),Object(n.createElement)("div",{className:"bwf_clear_20"}))};function ya(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return va(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?va(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function va(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var ga=function(t){var e=t.step,r=t.setStep,o=t.setImporter,c=t.setImport;Object(l.m)("WLM Importer");var i=ya(Object(n.useState)(null),2),u=i[0],s=i[1],f=(0,Vr().getExistingImports)().wlm;return Object(n.useEffect)((function(){parseInt(f)>0&&(s({importId:f}),r(3))}),[]),Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},2==e&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(sa,{setStep:r,setImporter:o,onStartImport:function(t){s(t),r(3)}})),3==e&&u&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ye.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(da,{setStep:r,requestData:u,setImporter:o,existingImport:parseInt(f)>0,setImport:c})))};r(1262);function wa(t){return(wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oa(){Oa=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==wa(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(wa(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function ja(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function Ea(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){ja(o,n,a,c,i,"next",t)}function i(t){ja(o,n,a,c,i,"throw",t)}c(void 0)}))}}var _a=function(){return Object(_t.useQuery)(["get-affwp-affiliate-count"],Ea(Oa().mark((function t(){var e;return Oa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.A)("/import/affwp/get-affiliate-count")});case 2:if((e=t.sent).code&&200===e.code){t.next=5;break}throw new Error(Object(a.__)("Unable to load affiliate count","wp-marketing-automations"));case 5:return t.abrupt("return",parseInt(e.result));case 6:case"end":return t.stop()}}),t)}))))};function ka(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return xa(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xa(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xa(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Sa=Object(l.M)(),Na=function(t){var e=t.onStartImport,r=t.setStep,o=t.setImporter,c=_a(),i=c.isLoading,u=c.data,s=void 0===u?0:u,f=c.isError,m=c.error,p=ka(Object(n.useState)(!1),2),h=p[0],d=p[1],y=ka(Object(n.useState)(!1),2),v=y[0],g=y[1],w=ka(Object(n.useState)([]),2),O=w[0],j=w[1],E=ka(Object(n.useState)([]),2),_=E[0],k=E[1],x=ka(Object(n.useState)(1),2),S=x[0],N=x[1],L=Object(n.useContext)(l.h),P=Object(n.useCallback)((function(){return e({tags:O.map((function(t){return{id:t.key,value:t.label}})),lists:_.map((function(t){return{id:t.key,value:t.label}})),update_existing:h,disable_events:v,imported_contact_status:S})}),[O,_,h,v,S,e]);return Object(n.useEffect)((function(){f&&(L("string"==typeof m?m:m&&m.message?m.message:Object(a.__)("Unknown API Error","wp-marketing-automations")),Object(l.Lb)(L,3e3))}),[f,m]),i?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ye.a,null),Object(n.createElement)(F.a,null)):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(b.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("AffiliateWP Affiliates","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},s+" "+Object(a.__)("affiliates are available for import.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-c-import-field"},Object(n.createElement)(ae.a,{onTagsChange:j,selected:O}),Object(n.createElement)(oe.a,{onListsChange:k,selected:_})),Object(n.createElement)("div",{className:"bwf-heading7-new"},Object(a.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(t){N(t.target.value)}},Object.keys(Sa).map((function(t){return Object(n.createElement)("option",{key:t,value:t,selected:S==t},Sa[t])}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(b.ToggleControl,{checked:h,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(t){return d(t)}}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)(b.ToggleControl,{label:Object(a.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:v,onChange:g})),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-crm-btn-right-alignment",style:{bottom:"-60px"}},Object(n.createElement)(b.Button,{disabled:0===parseInt(s),isPrimary:!0,onClick:P},Object(a.__)("Import","wp-marketing-automations"))))),Object(n.createElement)("div",{className:"bwf-crm-importer-navigation",style:{marginTop:"15px"}},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){r(1),o(null)}},Object(a.__)("Back","wp-marketing-automations"))))};function La(t){return(La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pa(){Pa=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==La(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(La(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Ca(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function Ia(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Aa(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Aa(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Aa(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Ta=function(t){var e=t.requestData,r=t.existingImport,c=(t.setStep,t.setImport),i=Ia(Object(n.useState)(!1),2),u=i[0],f=i[1],m=Ia(Object(n.useState)(null),2),p=m[0],h=m[1],d=Ia(Object(n.useState)(e&&"importId"in e?parseInt(e.importId):0),2),y=d[0],v=d[1],w=p&&"log"in p?p.log:{},O=w.skipped,j=void 0===O?0:O,_=w.failed,k=void 0===_?0:_,x=w.succeed,S=void 0===x?0:x,N=Ia(Object(n.useState)(null),2),L=N[0],P=N[1],C=rn().showBackButton,I=(location&&location.search&&Object(o.parse)(location.search.substring(1)),0),A=Ia(Object(n.useState)(5e3),2),T=A[0],F=A[1],G=Ia(Object(n.useState)(!0),2),D=G[0],$=G[1],M=function(){var t,n=(t=Pa().mark((function t(){var n,a;return Pa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I++,t.prev=1,n=parseInt(y)>0?{import_id:y}:e,D&&!r?($(!1),n.start_import=!0):n.start_import=!1,t.next=6,g()({method:"POST",data:n,path:Object(l.A)("/import/affwp/status")});case 6:a=t.sent,h(a.result),v(parseInt(a.result.import_id)),a.result&&"status"in a.result&&"success"===a.result.status&&(F(null),C(!1),f(!0)),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),F(null),C(!1),P(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){Ca(o,n,a,c,i,"next",t)}function i(t){Ca(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(De.a)((function(){Object(s.isEmpty)(y)&&0!=I||M()}),T),Object(n.useEffect)((function(){return C(!0),window.scrollTo(0,0),function(){C(!1)}}),[]),L||p&&!1 in p?Object(n.createElement)(E.a,{status:"error"},L&&"message"in L?L.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):p?p&&"percent"in p?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Ge.a,{noStriped:!0,size:"sm",progress:parseInt(p.percent),text:"".concat(p.percent,"% ").concat(Object(a.__)("Completed","wp-marketing-automations"))}),Object(n.createElement)("p",null,"Skipped: ",parseInt(j)>0?j:0,", Failed:"," ",parseInt(k)>0?k:0,", Success:"," ",parseInt(S)>0?S:0)),u&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){c(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations"))))):null:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Ge.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf-p"},"Skipped: ",parseInt(j)>0?j:0,", Failed: ",parseInt(k)>0?k:0,", Success: ",parseInt(S)>0?S:0)),Object(n.createElement)("div",{className:"bwf_clear_20"}))};function Fa(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ga(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ga(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ga(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Da=function(t){var e=t.step,r=t.setStep,o=t.setImporter,c=t.setImport;Object(l.m)(Object(a.__)("AFFWP Importer","wp-marketing-automations"));var i=Fa(Object(n.useState)(null),2),u=i[0],s=i[1],f=(0,Vr().getExistingImports)().affwp;return Object(n.useEffect)((function(){parseInt(f)>0&&(s({importId:f}),r(3))}),[]),Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},2==e&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(Na,{setStep:r,setImporter:o,onStartImport:function(t){s(t),r(3)}})),3==e&&u&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ye.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(Ta,{setStep:r,requestData:u,setImporter:o,existingImport:parseInt(f)>0,setImport:c})))};function $a(){return($a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(null,arguments)}function Ma(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ba(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ba(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ba(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var za=function(t){var e=t.setImport,r=Object(n.useContext)(l.h),o=Ma(Object(n.useState)(null),2),c=o[0],i=o[1],u=Ma(Object(n.useState)(!0),2),f=(u[0],u[1]),m=Vr(),p=(m.showBackButton,m.getLoading),h=m.getExistingImports,d=rn().fetch,y=p(),v=h(),g=Ma(Object(n.useState)(1),2),w=g[0],j=g[1],E=Ma(Object(n.useState)(!1),2),_=E[0];E[1];Object(n.useEffect)((function(){d(),f(!1),Object(l.m)(Object(a.__)("Import Contacts","wp-marketing-automations"))}),[]),Object(n.useEffect)((function(){v&&Object(s.size)(v)>0&&(i(Object.keys(v)[0]),j(3))}),[v]);var k=function(){var t=[{key:"csv",label:Object(a.__)("CSV","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-csv"}];return Object(l.kc)()||t.push({key:"wp",label:Object(a.__)("WordPress","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-wp"}),Object(l.qc)()&&t.push({key:"wc",label:Object(a.__)("WooCommerce","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-wc"}),Object(l.jc)()&&t.push({key:"wlm",label:Object(n.createElement)(n.Fragment,null,ln()," ",Object(a.__)("WishList Member","wp-marketing-automations")),className:"bwf-crm-importer-button bwf-crm-importer-button-wlm"}),Object(l.Nb)()&&t.push({key:"affwp",label:Object(n.createElement)(n.Fragment,null,sn()," ",Object(a.__)("AffiliateWP","wp-marketing-automations")),className:"bwf-crm-importer-button bwf-crm-importer-button-affwp"}),Object(fn.applyFilters)("bwfAddContactImporter",t)}(),x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(D.g)(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(s.isEmpty)(t)||Object(D.k)(t,e,r)},S=function(t){return Object(n.createElement)(n.Fragment,null,function(t,a){switch(a){case"csv":return Object(n.createElement)(kn,{step:t,setStep:j,setImporter:i,setImport:e});case"wp":return Object(n.createElement)(Un,{step:t,setStep:j,setImporter:i,setImport:e});case"wc":return Object(n.createElement)(ea,{step:t,setStep:j,setImporter:i,setImport:e});case"wlm":return Object(n.createElement)(ga,{step:t,setStep:j,setImporter:i,setImport:e});case"affwp":return Object(n.createElement)(Da,{step:t,setStep:j,setImporter:i,setImport:e});default:return Object(fn.applyFilters)("bwfImporterSelectedContent",Object(n.createElement)(n.Fragment,null),a,t,j,i,v,r,l.Lb,x,e)}}(t,c))},N=[{key:1,label:Object(a.__)("Source","wp-marketing-automations"),content:y?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ye.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(n.createElement)("div",{className:"bwf-placeholder-temp dark bwf-h-15 bwf-w-150"}))),Object(n.createElement)(b.Card,{className:"bwf-crm-importer-wrapper"},Object(n.createElement)("div",{className:"bwf-crm-importer"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-150"}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-270"}),Object(n.createElement)("div",{className:"bwf_clear_10"}),[1,2,3].map((function(t){return Object(n.createElement)(b.Button,{key:t,isTertiary:!0,className:"bwf-crm-importer-button"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-60 bwf-w-60"}))})),Object(n.createElement)("div",{className:"bwf_clear_20"})))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ye.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Source","wp-marketing-automations"))),Object(n.createElement)(b.Card,{className:"bwf-crm-importer-wrapper"},Object(n.createElement)("div",{className:"bwf-crm-importer"},Object(n.createElement)("div",{className:"bwf-h2"},Object(a.__)("Import Contacts","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-p"},Object(a.__)("Choose the source for importing contacts","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_10"}),k.map((function(t,e){var r=t.key===c?{isPrimary:!0}:{};return Object(n.createElement)(b.Button,$a({key:e,onClick:function(){i(t.key),j(2)}},r,{className:t.className}),t.label)})),Object(n.createElement)("div",{className:"bwf_clear_20"}))))},{key:2,label:Object(a.__)("Configuration","wp-marketing-automations"),content:S(2)},{key:3,label:Object(a.__)("Confirmation","wp-marketing-automations"),content:S(3)}];return Object(n.createElement)(b.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-admin-modal-no-header bwf-import-contact-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(n.createElement)("div",{className:"bwf-import-modal-header"},Object(n.createElement)("div",{className:"bwf-import-modal-title"},Object(a.__)("Import Contacts","wp-marketing-automations")),Object(n.createElement)("div",{onClick:function(){Object(l.m)(Object(a.__)("Contacts","wp-marketing-automations")),Object(D.k)({page:"autonami",path:"/contacts/"},"/",{}),e(!1)},className:"bwf-flex",style:{cursor:"pointer"}},Object(n.createElement)(O.a,{icon:"close"}))),Object(n.createElement)("div",{className:"bwf-crm-main-import-wrapper bwf-crm-import-init"},Object(n.createElement)(Fe.a,{steps:N,currentStep:w,isPending:_})),Object(n.createElement)("div",{className:"bwf_clear_24"}))};function Ua(t){return(Ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ra(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ra(Object(r),!0).forEach((function(e){Ya(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ra(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ya(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Ua(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ua(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ua(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Va(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Wa(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wa(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wa(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}e.default=function(){var t=Object(d.a)(),e=Object(y.a)(),r=t.getError,c=t.getContacts,i=t.getCountData,u=e.clearError,s=e.startIndexing,f=e.setStateProp,m=Va(Object(n.useState)(!1),2),p=m[0],b=m[1],h=Va(Object(n.useState)(!1),2),v=h[0],g=h[1],w=Va(Object(n.useState)(!1),2),O=w[0],j=w[1],k=Va(Object(n.useState)({}),2),x=k[0],S=k[1],N=Va(Object(n.useState)(!1),2),L=N[0],P=N[1],C=location&&location.search?Object(o.parse)(location.search.substring(1)):{},I=r(),A=Object(n.useRef)();Object(n.useEffect)((function(){A.current?u():A.current=I})),Object(n.useEffect)((function(){return Object(l.m)("Contacts"),function(){f("countData",{})}}),[]);var T=Object(n.createElement)(n.Fragment,null,Object(n.createElement)(_.a,{isPrimary:!0,className:"bwf-display-flex bwf-no-ripple",label:Object(a.__)("Create Contact","wp-marketing-automations"),onClick:function(){return b(!0)}},Object(a.__)("Create Contact","wp-marketing-automations"))),F=i(),G=Object(ge.a)().getPageCountData,D=Object(ve.a)().setPageCountData,$=G();Object(n.useEffect)((function(){D(qa(qa({},$),F))}),[F]),Object(de.a)("contacts","",Object(a.__)("ALL CONTACTS","wp-marketing-automations"),T);var M=c();if("indexing_status"in M){var B="indexing_status"in M&&2===parseInt(M.indexing_status)?Object(a.__)("Contacts indexing is in progress. Kindly, check back after some time.","wp-marketing-automations"):Object(a.__)("Contacts Indexing required, before you can view the contacts.","wp-marketing-automations"),z="indexing_status"in M&&2===parseInt(M.indexing_status)?null:Object(a.__)("Start Indexing","wp-marketing-automations");return Object(n.createElement)(he.a,{text:B,buttonText:z,onButtonClick:function(){return s()}})}var U=[{type:"heading",data:{title:Object(a.__)("Create contact for smarter engagement","wp-marketing-automations"),desc:Object(a.__)("Increase engagement strategies by creating contacts, apply tags, lists, and personal details.","wp-marketing-automations")}},{type:"image-desc",data:[{img:Object(l.t)()+"contact/contact1.png",title:Object(a.__)("Seamlessly Import Contacts","wp-marketing-automations"),desc:Object(a.__)("Import contacts from WordPress, WooCommerce, CSV files, or other supported sources","wp-marketing-automations")},{img:Object(l.t)()+"contact/contact2.png",title:Object(a.__)("Get 360° Contact view","wp-marketing-automations"),desc:Object(a.__)("View Complete profile with purchase history, tags, lists, open, clicks and more","wp-marketing-automations")}]},{type:"buttons",data:{buttons:[{text:Object(a.__)("Create Contact","wp-marketing-automations"),onClick:function(){S({}),b(!0)}},{text:Object(a.__)("Import Contact","wp-marketing-automations"),isSecondary:!0,proCheck:!0,onClick:function(){Object(l.ac)()?j(!0):(P(!0),S({isFeature:!0,featureTitle:Object(a.__)("Contacts Import","wp-marketing-automations")}))}}]}},{type:"link-wth-text",data:{text:Object(a.__)("Curious about contact?","wp-marketing-automations"),link:"https://funnelkit.com/docs/autonami-2/contacts/",linkText:Object(a.__)("Learn More","wp-marketing-automations")}}];return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ye.a,null),Object(n.createElement)("div",{className:"bwfcrm-contacts-list__scroll-point"}),I&&!p&&Object(n.createElement)(E.a,{status:"error"},I.message),Object(n.createElement)(Xt,{query:C,isExport:v,setExport:g,isImport:O,setImport:j,menuButtons:T,pitchData:U}),p&&Object(n.createElement)(be,{query:C,onCloseModal:function(){b(!1)}}),v&&Object(n.createElement)(Br,{setExport:g}),O&&Object(n.createElement)(za,{setImport:j}),!Object(l.ac)()&&Object(n.createElement)(St.b,{isOpen:L,onRequestClose:function(){return P(!1)},modalContent:x}))}}}]);