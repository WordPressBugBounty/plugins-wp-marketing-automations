(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{1095:function(t,e,n){"use strict";var a=n(52),r=n(353),i=Object(a.a)(r.b.cartAnalytics).getStateProp,c=Object(a.a)(r.b.contactAnalytics).getStateProp,o=Object(a.a)(r.b.emailAnalytics).getStateProp,l=Object(a.a)(r.b.emailTable).getStateProp,u=Object(a.a)(r.b.engagementAnalytics).getStateProp,s=Object(a.a)(r.b.directEmailTable).getStateProp,f={getCartAnalytics:function(){return i("data")},getCartAnalyticsLoading:function(){return i("isLoading")},getContactAnalytics:function(){return c("data")},getContactAnalyticsLoading:function(){return c("isLoading")},getEmailAnalytics:function(){return o("data")},getEmailAnalyticsLoading:function(){return o("isLoading")},getEmailTableList:function(){return l("data")},getEmailTableTotal:function(){return l("total")},getEmailTableOffset:function(){return l("offset")},getEmailTableLimit:function(){return l("limit")},getEmailTableLoading:function(){return l("isLoading")},getEmailTablePage:function(){return parseInt(l("offset"))/parseInt(l("limit"))+1},getEngagementAnalytics:function(){return u("data")},getEngagementAnalyticsLoading:function(){return u("isLoading")},getDirectEmailTableList:function(){return s("data")},getDirectEmailTableTotal:function(){return s("total")},getDirectEmailTableOffset:function(){return s("offset")},getDirectEmailTableLimit:function(){return s("limit")},getDirectEmailTableLoading:function(){return s("isLoading")},getDirectEmailTablePage:function(){return parseInt(s("offset"))/parseInt(s("limit"))+1}};e.a=f},1112:function(t,e,n){"use strict";var a=n(51),r=n(3),i=n(353),c=n(17),o=function(t){var e=0;return"automation"===t?e=1:"broadcast"===t&&(e=2),e};e.a=function(){var t=Object(a.a)(i.b.cartAnalytics).fetch,e=Object(a.a)(i.b.contactAnalytics),n=e.fetch,l=e.setStateProp,u=Object(a.a)(i.b.emailAnalytics),s=u.fetch,f=u.setStateProp,b=Object(a.a)(i.b.emailTable),m=b.fetch,p=b.setStateProp,y=Object(a.a)(i.b.engagementAnalytics),g=y.fetch,d=y.setStateProp,O=Object(a.a)(i.b.directEmailTable),v=O.fetch,j=O.setStateProp;return{fetchCartAnalytics:function(e,n,a){t("GET",Object(r.C)("/analytics/carts/")+"?"+Object(c.stringify)({after:e,before:n,interval:a}))},fetchContactAnalytics:function(t,e,a){n("GET",Object(r.C)("/analytics/contacts/")+"?"+Object(c.stringify)({after:t,before:e,interval:a}))},fetchEmailAnalytics:function(t,e,n,a,i){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;s("GET",Object(r.C)("/analytics/emails/chart/")+"?"+Object(c.stringify)({after:t,before:e,interval:n,oid:a,type:o(i),mode:l}))},fetchEmailTable:function(t,e,n,a,i,l,u){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;m("GET",Object(r.C)("/analytics/emails/tabular/")+"?"+Object(c.stringify)({after:n,before:a,interval:i,oid:l,type:o(u),limit:t,offset:e,mode:s}))},setEmailTableData:function(t,e){p(t,e)},fetchEngagementData:function(t,e){g("GET",Object(r.C)("/analytics/engagement")+"?"+Object(c.stringify)({after:t,before:e}))},setContactAnalyticsData:function(t,e){l(t,e)},setEmailAnalyticsData:function(t,e){f(t,e)},setEngagementData:function(t,e){d(t,e)},fetchDirectEmailTable:function(t,e,n,a,i){v("GET",Object(r.C)("/analytics/direct-emails/tabular/")+"?"+Object(c.stringify)({after:n,before:a,interval:i,limit:t,offset:e}))},setDirectEmailTableData:function(t,e){j(t,e)}}}},1113:function(t,e,n){"use strict";var a=n(77),r=n(0),i=n(1);e.a=function(t,e,n){var c=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},o=Object(a.a)(),l=o.setActiveMultiple,u=o.resetHeaderMenu,s=o.setL2NavType,f=o.setL2Nav,b=o.setBackLink,m=o.setL2Title,p=o.setPageHeader;return Object(r.useEffect)((function(){u(),!e&&s("menu"),!e&&f(c.reports_nav),l({leftNav:"analytics",rightNav:t+"-analytics"}),e&&b(e),n&&m(n),p(Object(i.__)("Analytics","wp-marketing-automations"))}),[t,n]),!0}},1119:function(t,e,n){"use strict";var a=n(0),r=n(1),i=n(9),c=n.n(i),o=n(3),l=n(348);function u(){var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function i(n,a,r,i){var l=a&&a.prototype instanceof o?a:o,u=Object.create(l.prototype);return s(u,"_invoke",function(n,a,r){var i,o,l,u=0,s=r||[],f=!1,b={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,n){return i=e,o=0,l=t,b.n=n,c}};function m(n,a){for(o=n,l=a,e=0;!f&&u&&!r&&e<s.length;e++){var r,i=s[e],m=b.p,p=i[2];n>3?(r=p===a)&&(l=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=t):i[0]<=m&&((r=n<2&&m<i[1])?(o=0,b.v=a,b.n=i[1]):m<p&&(r=n<3||i[0]>a||a>p)&&(i[4]=n,i[5]=a,b.n=p,o=0))}if(r||n>1)return c;throw f=!0,a}return function(r,s,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,p),o=s,l=p;(e=o<2?t:l)||!f;){i||(o?o<3?(o>1&&(b.n=-1),m(o,l)):b.n=l:b.v=l);try{if(u=2,i){if(o||(r="next"),e=i[r]){if(!(e=e.call(i,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,o<2&&(o=0)}else 1===o&&(e=i.return)&&e.call(i),o<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),o=1);i=t}else if((e=(f=b.n<0)?l:n.call(a,b))!==c)break}catch(e){i=t,o=1,l=e}finally{u=1}}return{value:e,done:f}}}(n,r,i),!0),u}var c={};function o(){}function l(){}function f(){}e=Object.getPrototypeOf;var b=[][a]?e(e([][a]())):(s(e={},a,(function(){return this})),e),m=f.prototype=o.prototype=Object.create(b);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,r,"GeneratorFunction")),t.prototype=Object.create(m),t}return l.prototype=f,s(m,"constructor",f),s(f,"constructor",l),l.displayName="GeneratorFunction",s(f,r,"GeneratorFunction"),s(m),s(m,r,"Generator"),s(m,a,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:i,m:p}})()}function s(t,e,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}(s=function(t,e,n,a){function i(e,n){s(t,e,(function(t){return this._invoke(e,n,t)}))}e?r?r(t,e,{value:n,enumerable:!a,configurable:!a,writable:!a}):t[e]=n:(i("next",0),i("throw",1),i("return",2))})(t,e,n,a)}function f(t,e,n,a,r,i,c){try{var o=t[i](c),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(a,r)}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,i,c,o=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=i.call(n)).done)&&(o.push(a.value),o.length!==e);l=!0);}catch(t){u=!0,r=t}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw r}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return m(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}e.a=function(t){var e=t.conversation,n=void 0===e?{}:e,i=n.ID,s=n.mode,m=n.type,p=t.onRequestClose,y=t.isOpen,g=t.contact,d=void 0===g?{}:g,O=b(Object(a.useState)({}),2),v=O[0],j=O[1],h=b(Object(a.useState)(!1),2),E=h[0],w=h[1],T=b(Object(a.useState)(""),2),_=T[0],S=T[1],A=function(){var t,e=(t=u().m((function t(){var e,n;return u().w((function(t){for(;;)switch(t.p=t.n){case 0:if(i&&!(!parseInt(i)>0)){t.n=1;break}return t.a(2);case 1:return w(!0),t.p=2,t.n=3,c()({method:"GET",path:Object(o.C)("/v3/contacts/".concat(d.id,"/engagement/").concat(parseInt(i),"?mode=1"))});case 3:"result"in(e=t.v)&&j(e.result),t.n=5;break;case 4:t.p=4,n=t.v,console.log(n),n&&"message"in n?S(n.message):Object(r.__)("There are some technical difficulties while getting emails. Please contact support.","wp-marketing-automations");case 5:w(!1);case 6:return t.a(2)}}),t,null,[[2,4]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function c(t){f(i,a,r,c,o,"next",t)}function o(t){f(i,a,r,c,o,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){y&&A()}),[y]);return Object(a.createElement)(l.a,{isOpen:y,isLoading:E,onRequestClose:function(){p(),j({}),S("")},error:_,subject:![2,3].includes(parseInt(s))&&v?v.subject:"",body:v&&v.body?v.body:"",sourceType:m,mode:s,contact:t.contact,conversation:t.conversation,template:v})}},1314:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n(1113),i=n(1),c=n(211),o=n(53),l=n(24),u=(n(558),n(12));function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=s(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){var e=t.query;return Object(a.createElement)("div",{className:"bwf-crm-contacts-report-filter"},Object(a.createElement)(o.a,{className:"screen-reader-text"},Object(i.__)("Filters","wp-marketing-automations")),Object(a.createElement)(o.b,{component:"div",className:"bwf-filters"},Object(a.createElement)("div",{className:"bwfcrm-filters-basic-filters"},Object(a.createElement)(c.a,{key:JSON.stringify(e),onRangeSelect:function(t){var n=b(b({},e),t);delete n.compare,Object(u.l)(n,"/",{})},dateQuery:function(t){t.compare="previous_year";var e=Object(l.g)(t),n=e.period,a=e.compare,r=e.before,i=e.after,c=Object(l.e)(t);return{period:n,compare:a,before:r,after:i,primaryDate:c.primary,secondaryDate:c.secondary}}(e),isoDateFormat:l.j,hideCompare:!0}))))},y=(n(350),n(147)),g=n(33),d=n(346),O=n(3),v=n(7),j=n(5),h=n(1112),E=n(1095),w=n(2),T=n(1119);function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,i,c,o=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=i.call(n)).done)&&(o.push(a.value),o.length!==e);l=!0);}catch(t){u=!0,r=t}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw r}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return S(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}var A=function(t){var e=t.query,n=e.period,r=e.compare,c=e.interval,o=e.after,u=e.before,s=e.id,f=e.filter,b=_(Object(a.useState)({}),2),m=b[0],p=b[1],S=_(Object(a.useState)(""),2),A=S[0],P=S[1],k=_(Object(a.useState)(!1),2),D=k[0],L=k[1],C=Object(h.a)(),I=C.fetchDirectEmailTable,N=C.setDirectEmailTableData,G=E.a.getDirectEmailTableList,M=E.a.getDirectEmailTableLimit,q=E.a.getDirectEmailTableLoading,x=E.a.getDirectEmailTableOffset,Y=E.a.getDirectEmailTablePage,F=E.a.getDirectEmailTableTotal,R=function(t){return t.compare="previous_year",Object(l.e)(t).primary};e.hasOwnProperty("period")||(e.period="month");var H=function(t,e){var n=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,r=R(t),i="",c="";r&&(Object(w.isEmpty)(r.after)||(i=r.after.format("YYYY-MM-DD HH:mm:ss")),Object(w.isEmpty)(r.before)||(c=r.before.format("YYYY-MM-DD 23:59:59")),Object(w.isEmpty)(i)||Object(w.isEmpty)(c)||I(n,a,i,c,e))};Object(a.useEffect)((function(){if(Object(O.fc)()){var t=e.hasOwnProperty("interval")?e.interval:"day";H(e,t,!0,z,Q)}}),[n,r,c,o,u,s,f]);var J,B=G(),U=q(),Q=x(),$=F(),z=M(),K=Y(),V=[{key:"contact",label:Object(i.__)("Contact","wp-marketing-automations"),isLeftAligned:!1},{key:"subject",label:Object(i.__)("Subject","wp-marketing-automations"),isLeftAligned:!1},{key:"sentby",label:Object(i.__)("Sent By","wp-marketing-automations"),isLeftAligned:!0},{key:"last_activity",label:Object(i.__)("Last Activity","wp-marketing-automations"),isLeftAligned:!0},{key:"opens",label:Object(i.__)("Opens","wp-marketing-automations"),isLeftAligned:!0},{key:"clicks",label:Object(i.__)("Clicks","wp-marketing-automations"),isLeftAligned:!0},{key:"view",label:"",isLeftAligned:!0,cellClassName:"bwf-w-60"}],W=function(t){return Object(a.createElement)(g.a,{href:"admin.php?page=autonami&path=/contact/"+t.cid,type:"bwf-crm",className:"bwf-a-no-underline"},Object(a.createElement)(d.a,{contact:t,dateText:Object(i.__)("Sent","wp-marketing-automations"),date:t.date}))};return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(y.a,{headers:V,rows:(J=[],Object(w.isEmpty)(B)||(J=B.map((function(t){return[{display:W(t),value:""},{display:t.sub?t.sub:"-",value:t.sub},{display:t.author?(r=t.author,i="-",c="",r.hasOwnProperty("name")&&!Object(w.isEmpty)(r.name)&&(i=r.name[0].toUpperCase()+r.name.slice(1,r.name.length)),r.hasOwnProperty("contact")&&!Object(w.isEmpty)(r.contact)&&parseInt(r.contact)>0&&(c=r.contact),c?Object(a.createElement)(g.a,{href:"admin.php?page=autonami&path=/contact/"+c,type:"bwf-crm",className:"bwf-a-no-underline"},i):i):"-",value:t.sub},{display:t.o_interaction?(e=JSON.parse(t.o_interaction),n=e[e.length-1],Object(O.lb)(n)):"-",value:""},{display:parseInt(t.open)>0?parseInt(t.open):"-",value:parseInt(t.open)},{display:parseInt(t.click)>0?parseInt(t.click):"-",value:parseInt(t.click)},{display:Object(a.createElement)(j.Button,{className:"bwf-w-60 bwf-display-flex",onClick:function(){p({ID:t.track_id,mode:1,type:4}),P({id:parseInt(t.cid)}),L(!0)}},Object(a.createElement)(v.a,{icon:"view"})),value:""}];var e,n,r,i,c}))),J),query:{paged:K},totalRows:$,rowsPerPage:z,isLoading:U,showMenu:!1,onPageChange:function(t,n){var a=(t-1)*z;N("offset",a);var r=e.hasOwnProperty("interval")?e.interval:"day";H(e,r,!0,z,a)},onQueryChange:function(t){return"per_page"===t?function(t){if(t!==z){N("limit",t);var n=e.hasOwnProperty("interval")?e.interval:"day";H(e,n,!0,t,Q)}}:function(){return{}}},emptyMessage:Object(i.__)("No emails found","wp-marketing-automations")}),Object(a.createElement)(T.a,{onRequestClose:function(){return L(!1)},conversation:m,contact:A,isOpen:D}))},P=n(68);e.default=function(){Object(r.a)("direct-emails",!1,"");var t=Object(u.i)();return Object(a.useEffect)((function(){Object(O.m)(Object(i.__)("Direct Email Analytics","wp-marketing-automations"))}),[]),Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-content-header-new"},Object(a.createElement)("div",{className:"bwf-content-header-left"},Object(a.createElement)("div",{className:"bwf-content-header-title"},Object(i.__)("Direct Mails","wp-marketing-automations")))),Object(a.createElement)(P.a,null),Object(a.createElement)("div",{className:"bwf-crm-analytics-wrap bwf-crm-emails-report-wrap"},Object(a.createElement)(p,{query:t}),Object(a.createElement)("div",{className:"bwf_clear_10"}),Object(a.createElement)(A,{query:t})))}}}]);