(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{1049:function(e,t,n){"use strict";var r=n(74),a=n(0),o=n(1),i=n(3),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={workflow:{name:Object(o.__)("Workflow","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e):"admin.php?page=autonami-automations&edit=".concat(e),redirect:!t}};return t&&(n.single_a_contacts={name:Object(o.__)("Contacts","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(e,"/contacts"),showOnClick:!0},n.analytics={name:Object(o.__)("Analytics","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e,"/analytics"):"admin.php?page=autonami&path=/automation-v1/".concat(e,"/analytics"),isPro:!0,showOnClick:!0}),n.engagement={name:Object(o.__)("Engagements","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e,"/engagements"):"admin.php?page=autonami&path=/automation-v1/".concat(e,"/engagements"),isPro:!0,showOnClick:!0},Object(i.fc)()&&(n.orders={name:Object(o.__)("Orders","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e,"/orders"):"admin.php?page=autonami&path=/automation-v1/".concat(e,"/orders"),isPro:!0,showOnClick:!0}),n};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},b=(p.automation_nav,p.automationv2_nav),d=Object(r.a)(),h=d.setActiveMultiple,y=d.resetHeaderMenu,v=d.setL2NavType,w=d.setL2Nav,O=d.setBackLink,g=d.setL2Title,j=d.setL2Content,E=d.setBackLinkLabel,_=d.setL2NavAlign,k=d.setPageHeader,N=d.setTabHeader;return Object(a.useEffect)((function(){y(!0),!i&&v("menu");var r=c(s,m);f||w(s?r:b),e&&r.hasOwnProperty(e)&&r[e].hasOwnProperty("name")&&N(r[e].name),h({leftNav:"automations-v2",rightNav:e}),n&&O(n),s&&O(n&&!m?"admin.php?page=autonami&path=/automations-v1":"admin.php?page=autonami&path=/automations"),i||m&&s&&E(Object(o.__)("All Automations","wp-marketing-automations")),!m&&s&&E(Object(o.__)("All Automations","wp-marketing-automations")),s&&_("left"),t&&""!==t&&g(t),!n&&l&&j(l),k(Object(o.__)("Automations","wp-marketing-automations")),u&&w({})}),[e,m,f]),!0}},1103:function(e,t,n){},1127:function(e,t,n){},1129:function(e,t,n){"use strict";var r=n(0),a=n(6),o=n.n(a),i=n(2),c=n(58),l=n(1),s=n(9),u=n.n(s),m=n(8),f=(n(1130),n(3)),p=n(19);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.header,n=void 0===t?Object(l.__)("View Analytics","wp-marketing-automations"):t,a=e.icon,s=void 0===a?"analytic":a,b=e.automationId,h=e.analyticsId,v=e.mode,w=void 0===v?"":v,O=e.extraData,g=void 0===O?{}:O,j=y(Object(r.useState)(!0),2),E=j[0],_=j[1],k=y(Object(r.useState)(!1),2),N=k[0],S=k[1],x=y(Object(r.useState)({}),2),P=x[0],L=x[1],C=function(){parseInt(h)>0&&Object(f.Sb)()?(_(!0),L({}),function(){try{var e=d(d({},g),{},{mode:w});u()({path:Object(f.y)("/automation/".concat(b,"/analytics/").concat(h,"?").concat(Object(p.stringify)(e))),method:"GET"}).then((function(e){200===e.code?Object(i.isEmpty)(e.result)||L(e.result):S(!0),_(!1)}))}catch(e){S(!0),_(!1)}}()):_(!1)},A=function(){var e,t=P.tile,n=void 0===t?[]:t;return N?Object(r.createElement)(r.Fragment,null,Object(l.__)("Error while fetching the Analytics.","wp-marketing-automations")):Object(f.Sb)()?Object(r.createElement)(r.Fragment,null,Object(i.isEmpty)(n)?Object(r.createElement)("div",{className:"bwf-normal-text"},Object(l.__)("No analytics found.","wp-marketing-automations")):Object(r.createElement)("div",{className:"bwf-info-brick"},n.map((function(e,t){var n=e.label,a=void 0===n?"":n,o=e.value,i=void 0===o?"-":o;if(""!==a)return Object(r.createElement)("div",{className:"bwf-info-item",key:t},Object(r.createElement)("span",{className:"bwf-node-content-type"},a),Object(r.createElement)("span",{className:"bwf-node-content-label"},i))})))):(e=[{label:Object(l.__)("Sent","wp-marketing-automations")},{label:Object(l.__)("Open Rate","wp-marketing-automations")}],"email"===w&&e.push({label:Object(l.__)("Click Rate","wp-marketing-automations")},{label:Object(l.__)("Click to Open Rate","wp-marketing-automations")}),e.push({label:Object(l.__)("Revenue","wp-marketing-automations")},{label:Object(l.__)("Revenue/Contact","wp-marketing-automations")},{label:Object(l.__)("Unsubscribe Rate","wp-marketing-automations")}),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-info-brick"},e.map((function(e,t){return Object(r.createElement)("div",{className:"bwf-info-item",key:t},Object(r.createElement)("span",{className:"bwf-node-content-type"},e.label),Object(r.createElement)("span",{className:"bwf-node-content-label"},"-"))}))),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-normal-text"},Object(l.__)("Email Analytics is a PRO feature.","wp-marketing-automations")+" ",Object(r.createElement)("a",{target:"__blank",className:"bwf-normal-a-t bwf-font-light",href:Object(f.ab)("upgrade",{utm_medium:"Automation+Email+Analytics"})},Object(l.__)("Upgrade to PRO","wp-marketing-automations")))))};return Object(r.createElement)("div",{className:"bwf-info-popup"},Object(r.createElement)(c.a,{contentClassName:"bwf-info__popover",position:"top center",renderToggle:function(e){var t=e.onToggle,a=e.isOpen,i=o()("bwf-info__toggle bwf-cursor-pointer",{"is-opened":a});return Object(r.createElement)("div",{className:i,onClick:function(){t(),C()},"aria-expanded":a},Object(r.createElement)(m.a,{size:14,icon:s}),n)},renderContent:function(e){var t=e.onToggle;return Object(r.createElement)("div",{className:"bwf-info-popover-container"},Object(r.createElement)("div",{className:"bwf-info-popover-header"},Object(r.createElement)("div",{className:"bwf-info-header-text"},n,!Object(f.Sb)()&&f.e),Object(r.createElement)("span",{className:"bwf-info-close",onClick:t},Object(r.createElement)(m.a,{icon:"close",size:20}))),Object(r.createElement)("div",{className:"bwf-info-popover-body"},Object(r.createElement)("div",{className:"bwf-info-wrapper"},Object(r.createElement)("div",{className:"bwf-info--content"},E?Object(r.createElement)("div",{className:"bwf-info-brick"},[1,2,3,4,5,6].map((function(e){return Object(r.createElement)("div",{className:"bwf-info-item",key:e},Object(r.createElement)("span",{className:"bwf-node-content-type"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})),Object(r.createElement)("span",{className:"bwf-node-content-label"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-15"})))}))):A()))))},focusOnMount:!0}))}},1130:function(e,t,n){},1371:function(e,t,n){},1372:function(e,t,n){},1373:function(e,t,n){},1374:function(e,t,n){},1375:function(e,t,n){},1376:function(e,t,n){},1377:function(e,t,n){},1422:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1045),o=n(2),i=n(6),c=n.n(i),l=n(1),s=(n(1102),n(8)),u=n(5),m=n(320),f=n(138),p=n(3);var b=n(9),d=n.n(b),h=(n(1103),n(66)),y=n(13),v=n(39);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){O=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new k(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return S()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=j(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(N([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==w(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function j(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function N(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(g.prototype),c(g.prototype,o,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new g(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function g(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){g(o,r,a,i,c,"next",e)}function c(e){g(o,r,a,i,c,"throw",e)}i(void 0)}))}}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=function(e){var t=Object(r.useContext)(p.h),n=e.isOpen,a=e.onRequestClose,i=e.node,b=e.isEvent,w=void 0===b||b,g=e.automationID,E=i.id,k=Object(m.a)(),S=k.setNodeDatabyId,x=k.fetchAutomation,P=k.setAutomationData,L=k.showSidebar,C=Object(f.a)(),A=C.getEventsList,I=C.getActionsList,D=C.getAutomationSteps,T=C.getAutomationLinks,M=C.getCount,F=C.getAutomationData,G=C.getNodeDataByID,z=C.getautomationMeta,U=w?A():I(),q=N(Object(r.useState)({loading:!1,status:!1}),2),B=q[0],R=q[1],Y=U.group,H=void 0===Y?[]:Y,V=U.list,$=void 0===V?{}:V,J=U.subgroup,W=void 0===J?[]:J,Q=U.subgroup_priority,X=void 0===Q?{}:Q,Z=N(Object(r.useState)(""),2),K=Z[0],ee=Z[1],te=N(Object(r.useState)(""),2),ne=te[0],re=te[1],ae=N(Object(r.useState)(""),2),oe=ae[0],ie=ae[1],ce=N(Object(r.useState)(""),2),le=ce[0],se=ce[1],ue=N(Object(r.useState)(!1),2),me=ue[0],fe=ue[1],pe=N(Object(r.useState)({status:!1}),2),be=pe[0],de=pe[1],he=D(),ye=T(),ve=M(),we=F("data"),Oe=G(E),ge=Oe.data,je=void 0===ge?{}:ge,Ee=Oe.stepId,_e=void 0===Ee?0:Ee,ke=z(),Ne=Object.keys(X).sort((function(e,t){return X[e]-X[t]})),Se=we.source,xe=void 0===Se?"":Se,Pe=we.event,Le=void 0===Pe?"":Pe,Ce=function(e){var t=[],n="";return H.map((function(r){(Object(o.isArray)(r.subgroup)&&r.subgroup.includes(e)||Object(o.isObject)(r.subgroup)&&Object.values(r.subgroup).includes(e))&&(t=r.subgroup,n=r.group_slug)})),{acsubgp:t,acgrp:n}};Object(r.useEffect)((function(){if(Object(o.isEmpty)(H)||(""!=xe||""!=Le)&&w){var e=Ce(xe),t=e.acsubgp,n=e.acgrp;ie(Object(o.isObject)(t)?Object.values(t):t),re(n),se(Le)}else re(H[0].group_slug),ie(Object(o.isObject)(H[0].subgroup)?Object.values(H[0].subgroup):H[0].subgroup)}),[n]),Object(r.useEffect)((function(){if(Object(o.isEmpty)(K))if(Object(o.isEmpty)(H)||(""!=xe||""!=Le)&&w){var e=Ce(xe),t=e.acsubgp,n=e.acgrp;ie(Object(o.isObject)(t)?Object.values(t):t),re(n),se(Le)}else re(H[0].group_slug);else re("")}),[K]);var Ae,Ie,De=function(){a&&a()},Te=function(){var e=j(O().mark((function e(n,r,a,c){var s,u;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=!1,c.hasOwnProperty("event")&&$.hasOwnProperty(c.event)&&$[c.event].hasOwnProperty("need_unique_key")&&$[c.event].need_unique_key&&(s=!0),u={},u=""==Le?{steps:Object(o.cloneDeep)(n).map((function(e){return e.hasOwnProperty("data")&&e.data.hasOwnProperty("sidebarValues")&&(e.data.sidebarValues={}),e})),links:r,count:a,data:c,need_unique_key:s}:{data:c,need_unique_key:s},e.prev=4,fe(!0),t(Object(l.__)("Updating automation…","wp-marketing-automations")),e.next=9,d()({path:Object(p.y)("/automation/".concat(g)),method:"POST",data:{data:u}}).then(function(){var e=j(O().mark((function e(n){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==n.code){e.next=7;break}return e.next=3,x(g).then((function(){P("openStartSidebar",!0)})).then((function(){var e=Object(o.cloneDeep)(i);e.data.selected="start",P("sidebarNodeData",e),L(!0)}));case 3:t(n.message),Object(p.Eb)(t,3e3),e.next=8;break;case 7:throw Error(Object(p.t)(null==n?void 0:n.message));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),Object(p.Eb)(t,3e3),fe(!1),setTimeout((function(){R({status:!0,error:e.t0.message})}),[1500]);case 16:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Me=function(){var e=j(O().mark((function e(n,r){var a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={steps:Object(o.cloneDeep)(he).map((function(e){return e.hasOwnProperty("data")&&e.data.hasOwnProperty("sidebarValues")&&(e.data.sidebarValues={}),e})),links:ye,count:ve,data:{action:{action:n,intergration:r}},updateStatus:2},e.prev=1,fe(!0),t(Object(l.__)("Updating automation…","wp-marketing-automations")),e.next=6,d()({path:Object(p.y)("/automation/".concat(g,"/step/").concat(_e)),method:"POST",data:a}).then((function(e){if(200!==e.code)throw Error(Object(p.t)(null==e?void 0:e.message));S(i.id,{selected:n},{step_status:2}),e.hasOwnProperty("result")&&e.result.hasOwnProperty("meta")&&P("meta",_(_({},ke),e.result.meta)),t(e.message)})).then((function(){var e=Object(o.cloneDeep)(i);e.data.selected=n,P("sidebarNodeData",e),L(!0),fe(!1),De(),Object(p.Eb)(t,3e3)}));case 6:e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),Object(p.Eb)(t,3e3),fe(!1),setTimeout((function(){R({status:!0,error:e.t0.message})}),[1500]);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),Fe=function(e){if("string"==typeof e&&""!==e&&Le!==e)if("start"===E&&w)je.evtGroup=$[e].source_type,je.event=e,function(e){var t={};t=he.map((function(t){return"start"==t.id&&(t.data=e),t}));var n=[];1==he.length?(t.push({id:"end",type:"end",data:{label:Object(l.__)("End Automation","wp-marketing-automations")},hidden:!1,position:{x:250,y:600}}),n=[{id:"endlink",source:"start",target:"end",sourceHandle:"",animated:!1}]):n=Object(o.cloneDeep)(ye);var r=Object(o.cloneDeep)(we);r.event=e.event,r.source=e.evtGroup,Te(t,n,2,r)}(je);else{var n=$[e].integration_slug;Me(e,n)}else t(Le===e?Object(l.__)("Please choose a different event to save.","wp-marketing-automations"):w?Object(l.__)("Please choose an event.","wp-marketing-automations"):Object(l.__)("Please choose an action.","wp-marketing-automations")),Object(p.Eb)(t,3e3)};return n?Object(r.createElement)(u.Modal,{className:"bwf-admin-modal bwf-event-search-modal bwf-admin-modal-xl",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-modal-search-header"},Object(r.createElement)("div",{className:"bwf-modal-title"},w?Object(l.__)("Select an Event","wp-marketing-automations"):Object(l.__)("Select an Action","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-modal-search-wrap"},Object(r.createElement)("div",{className:"bwf-component-search-control"},Object(r.createElement)(s.a,{icon:"search",size:15}),Object(r.createElement)(u.TextControl,{value:K,onChange:ee,placeholder:Object(l.__)("Search…","wp-marketing-automations")}))),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",onClick:De},Object(r.createElement)(s.a,{icon:"close",size:20}))),Object(r.createElement)("div",{className:"bwf-event-modal-main"},Object(r.createElement)("div",{className:"bwf-event-modal-body"},Object(r.createElement)("div",{className:"bwf-modal-sidebar"},Object(r.createElement)("div",{className:"bwf-modal-filter-wrap"},H.map((function(e,t){if(function(e){var t=!1;if(e.hasOwnProperty("subgroup")&&!Object(o.isEmpty)(e.subgroup)){var n=[];(Object(o.isObject)(e.subgroup)?Object.values(e.subgroup):e.subgroup).map((function(e){W.hasOwnProperty(e)&&n.push(e)})),Object(o.isEmpty)(n)||(t=!0)}return t}(e))return Object(r.createElement)("div",{key:t,className:c()("bwf-modal-filter",{active:ne===e.group_slug}),onClick:function(){se(""),re(e.group_slug),ie(Object(o.isObject)(e.subgroup)?Object.values(e.subgroup):e.subgroup)}},e.label)})))),Object(r.createElement)("div",{className:"bwf-modal-content-content"},Object(r.createElement)("div",{className:"bwf-modal-content-brick"},Object(r.createElement)("div",{className:"modal-brick-wrap bwfan_pb20"},Object(r.createElement)("div",{className:"bwf-brick-content"},(Ae=[],Ie={},Object(o.isEmpty)(K)?oe.map((function(e){Ie=_(_({},Ie),W[e])})):Object.values(W).map((function(e){Ie=_(_({},Ie),e)})),Ae.push(Ie),Ae).map((function(e,t){if(Object(o.isEmpty)(e))return Object(r.createElement)(r.Fragment,{key:t});var n=[],a=Object.keys(e);return Object(o.isEmpty)(Ne)?n=a:Ne.map((function(e){a.includes(e)&&n.push(e)})),Object(r.createElement)("div",{key:t+"-2"},n.map((function(t,n){var a=[];return a=function(e){var t=[];return(Object(o.isObject)(e)?Object.values(e):e).map((function(e){if($.hasOwnProperty(e)&&$[e].hasOwnProperty(w?"event_name":"action_name")){var n=w?$[e].event_name:$[e].action_name;(Object(o.isEmpty)(K)||n.toLowerCase().includes(K.toLowerCase()))&&t.push(e)}})),t}(e[t]),!Object(o.isEmpty)(a)&&Object(r.createElement)(r.Fragment,{key:n},Object(r.createElement)("div",{className:"bwf-brick-content-header",key:n},t),a.map((function(e,t){var n=!!$[e].hasOwnProperty("lock")&&$[e].lock;return Object(r.createElement)(y.a,{key:t,isPrimary:le===e,isSecondary:le!==e,className:"bwf-secondary-alter "+(Object(p.Sb)()?n?"locked":"":n?"not-pro locked":"not-pro"),onClick:function(){!Object(p.Sb)()&&n?de({status:!0,featureTitle:w?$[e].event_name:$[e].action_name}):se(e)},disabled:Object(p.Sb)()&&n},le===e&&Object(r.createElement)("span",{className:"bwf-circle-tick"},Object(r.createElement)(s.a,{icon:"tick",size:10})),w?$[e].event_name:$[e].action_name,n&&!Object(p.Sb)()&&Object(r.createElement)("span",{className:"bwf-display-flex bwf-ml-5"},Object(r.createElement)(s.a,{icon:"king",size:15})))})))})))}))))),Object(r.createElement)("div",{className:"bwf-modal-inner-footer bwf_text_right"},Object(r.createElement)(y.a,{className:"bwf-modal-cancel-btn",onClick:De},Object(l.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(y.a,{isPrimary:!0,isBusy:me,className:"bwf-no-ripple",onClick:function(){me||Fe(le)}},Object(l.__)("Done","wp-marketing-automations")))))),Object(r.createElement)(h.a,{modalTitle:w?Object(l.__)("Event Selection","wp-marketing-automations"):Object(l.__)("Action Selection","wp-marketing-automations"),errorMessage:B.error,onRequestClose:function(){return R({status:!1})},isOpen:B.status}),!Object(p.Sb)()&&Object(r.createElement)(v.b,{isOpen:be.status,onRequestClose:function(){return de({status:!1})},modalContent:{title:Object(l.sprintf)(Object(l.__)("%s is a PRO Event","wp-marketing-automations"),be.featureTitle),proLink:Object(p.ab)("upgrade",{utm_medium:"Automation+Event+Upgrade+Modal"})}})):""};function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(){L=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==P(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F=function(e){var t=Object(r.useContext)(p.h),n=e.isOpen,a=e.onRequestClose,i=e.node,b=e.automationID,h=i.id,v=Object(m.a)(),w=v.setNodeDatabyId,O=v.setAutomationData,g=v.showSidebar,j=Object(f.a)(),E=j.getGoals,_=j.getAutomationSteps,k=j.getAutomationLinks,N=j.getCount,S=j.getNodeDataByID,x=(0,j.getautomationMeta)(),P=E(),C=P.group,I=void 0===C?[]:C,M=P.list,F=void 0===M?{}:M,G=P.subgroup,z=void 0===G?[]:G,U=P.subgroup_priority,q=void 0===U?{}:U,B=T(Object(r.useState)(""),2),R=B[0],Y=B[1],H=T(Object(r.useState)(""),2),V=H[0],$=H[1],J=T(Object(r.useState)(""),2),W=J[0],Q=J[1],X=T(Object(r.useState)(""),2),Z=X[0],K=X[1],ee=T(Object(r.useState)(!1),2),te=ee[0],ne=ee[1],re=_(),ae=k(),oe=N(),ie=S(h),ce=ie.data,le=void 0===ce?{}:ce,se=ie.stepId,ue=void 0===se?0:se,me=q[V]?q[V]:{},fe=le.source,pe=void 0===fe?"":fe,be=le.benchmark,de=void 0===be?"":be,he=function(e){var t=[],n="";return I.map((function(r){r.subgroup.includes(e)&&(t=r.subgroup,n=r.group_slug)})),{acsubgp:t,acgrp:n}};Object(r.useEffect)((function(){if(Object(o.isEmpty)(I)||""!=pe||""!=de){var e=he(pe),t=e.acsubgp,n=e.acgrp;Q(t),$(n),K(de)}else $(I[0].group_slug),Q(I[0].subgroup)}),[n]),Object(r.useEffect)((function(){if(Object(o.isEmpty)(R))if(Object(o.isEmpty)(I)||""!=pe||""!=de){var e=he(pe),t=e.acsubgp,n=e.acgrp;Q(t),$(n),K(de)}else $(I[0].group_slug);else $("")}),[R]);var ye,ve=function(){a&&a()},we=function(){var e,n=(e=L().mark((function e(n,r){var a,c;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=le,ne(!0),a.benchmark=n,t(Object(l.__)("Adding benchmark..","wp-marketing-automations")),e.prev=4,c={steps:Object(o.cloneDeep)(re).map((function(e){return e.hasOwnProperty("data")&&e.data.hasOwnProperty("sidebarValues")&&(e.data.sidebarValues={}),e})),links:ae,count:oe,data:{action:{benchmark:n,source:r}},updateStatus:2},e.next=8,d()({path:Object(p.y)("/automation/".concat(b,"/step/").concat(ue)),method:"POST",data:c}).then((function(e){200===e.code&&(t(e.message),w(parseInt(h),a,{step_status:2}),e.hasOwnProperty("result")&&e.result.hasOwnProperty("meta")&&O("meta",A(A({},x),e.result.meta)))})).then((function(){var e=Object(o.cloneDeep)(i);e.data.benchmark=n,O("sidebarNodeData",e),g(!0),ne(!1),ve()}));case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0),ne(!0);case 14:Object(p.Eb)(t,3e3);case 15:case"end":return e.stop()}}),e,null,[[4,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){D(o,r,a,i,c,"next",e)}function c(e){D(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e,t){return n.apply(this,arguments)}}();return n?Object(r.createElement)(u.Modal,{className:"bwf-admin-modal bwf-event-search-modal bwf-admin-modal-xl",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-modal-search-header"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(l.__)("Select an Goal","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-modal-search-wrap"},Object(r.createElement)("div",{className:"bwf-component-search-control"},Object(r.createElement)(s.a,{icon:"search",size:15}),Object(r.createElement)(u.TextControl,{value:R,onChange:Y,placeholder:Object(l.__)("Search…..")}))),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",onClick:ve},Object(r.createElement)(s.a,{icon:"close",size:20}))),Object(r.createElement)("div",{className:"bwf-event-modal-main"},Object(r.createElement)("div",{className:"bwf-event-modal-body"},Object(r.createElement)("div",{className:"bwf-modal-sidebar"},Object(r.createElement)("div",{className:"bwf-modal-filter-wrap"},I.map((function(e,t){if(function(e){var t=!1;if(e.hasOwnProperty("subgroup")&&!Object(o.isEmpty)(e.subgroup)){var n=[];e.subgroup.map((function(e){z.hasOwnProperty(e)&&n.push(e)})),Object(o.isEmpty)(n)||(t=!0)}return t}(e))return Object(r.createElement)("div",{key:t,className:c()("bwf-modal-filter",{active:V===e.group_slug}),onClick:function(){K(""),$(e.group_slug),Q(e.subgroup)}},e.label)})))),Object(r.createElement)("div",{className:"bwf-modal-content-content"},Object(r.createElement)("div",{className:"bwf-modal-content-brick"},Object(r.createElement)("div",{className:"modal-brick-wrap bwfan_pb20"},Object(r.createElement)("div",{className:"bwf-brick-content"},(ye=[],Object(o.isEmpty)(R)&&!Object(o.isEmpty)(W)?W.map((function(e){ye.push(z[e])})):Object.values(z).map((function(e){ye.push(e)})),ye).map((function(e,t){if(Object(o.isEmpty)(e))return Object(r.createElement)("div",{key:t});var n=[];return n=me&&Object.keys(me).length>0?Object.keys(e).sort((function(e,t){return me[e]||me[t]?me[e]&&!me[t]?1:!me[e]&&me[t]?-1:me[e]-me[t]:1})):Object.keys(e),Object(r.createElement)("div",{key:t},n.map((function(t,n){var a=function(e){var t=[];return e.map((function(e){if(F.hasOwnProperty(e)&&F[e].hasOwnProperty("event_name")){var n=F[e].event_name;(Object(o.isEmpty)(R)||n.toLowerCase().includes(R.toLowerCase()))&&t.push(e)}})),t}(e[t]);return!Object(o.isEmpty)(a)&&Object(r.createElement)("div",{key:n},Object(r.createElement)("div",{className:"bwf-brick-content-header"},t),a.map((function(e){return Object(r.createElement)(y.a,{key:e,isPrimary:Z===e,isSecondary:Z!==e,className:"bwf-secondary-alter",onClick:function(){K(e)}},Z===e&&Object(r.createElement)("span",{className:"bwf-circle-tick"},Object(r.createElement)(s.a,{icon:"tick",size:10})),Object(r.createElement)(r.Fragment,null,F[e].event_name))})))})))}))))),Object(r.createElement)("div",{className:"bwf-modal-inner-footer bwf_text_right"},Object(r.createElement)(y.a,{className:"bwf-modal-cancel-btn",onClick:ve},Object(l.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(y.a,{isPrimary:!0,className:"bwf-no-ripple",isBusy:te,onClick:function(){te||function(e){if("string"==typeof e&&""!==e){var n=F[e].source_type;we(e,n)}else t(Object(l.__)("Please choose an benchmark.","wp-marketing-automations")),Object(p.Eb)(t,3e3)}(Z)}},Object(l.__)("Done","wp-marketing-automations"))))))):""},G=function(e){var t=e.onNodeClick,n=e.onNoteToggleClick,a=e.onElipsisToggleClick,o=e.onInfoToggleClick,i=e.onNodeStatClick,c=e.onNodeQueuedStatClick,l=e.onNodeFailedStatClick,s=e.onAnalyticsClick,u=e.onNodeSkippedStatClick,m=Object(f.a)(),p=m.getEnableCopy,b=m.getEnableMove,d=p(),h=b(),y=Object(r.useCallback)((function(e,t){var n=!(!e.target||"string"!=typeof e.target.className)&&e.target.className;return!!n&&n.includes(t)||e.target.closest("."+t)}),[]);return function(e){if(!d&&!h)if(y(e,"bwf-note__toggle"))n&&n();else if(y(e,"bwf-ellipsis-menu__toggle"))a&&a();else if(y(e,"bwf-info__toggle"))o&&o();else if(y(e,"bwf-queued-status-wrap"))c&&c();else if(y(e,"bwf-failed-status-wrap"))l&&l();else if(y(e,"bwf-skipped-status-wrap"))u&&u();else if(y(e,"bwf-node-analytics"))s&&s();else if(y(e,"bwf-status-wrap"))i&&i();else{var r=y(e,"bwf-ellipsis-menu"),m=y(e,"bwf-note-popup"),f=y(e,"bwf-info-popup");r||m||f||t&&t()}}},z=n(63),U=n(18),q=n(62);function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Y=function(e){var t=e.selected,n=void 0!==t&&t,i=B(Object(r.useState)(!1),2),c=i[0],u=i[1],b=Object(f.a)(),d=b.getEventsList,h=b.getAutomationData,y=b.getOpenStartSidebar,v=b.getEnableMove,w=b.getEnableCopy,O=b.getStatLoading,g=b.getStatData,j=w(),E=v(),_=h(),k=y(),N=O(),S=g(),P=_.ID,L=_.event,C=void 0===L?"":L,A=S.hasOwnProperty("start")?S.start:{};Object(r.useEffect)((function(){k&&(D("sidebarNodeData",e),T(!0))}),[k]);var I=Object(m.a)(),D=I.setAutomationData,T=I.showSidebar,M=d(),F=G({onNodeClick:!Object(o.isEmpty)(C)&&M.list.hasOwnProperty(C)&&function(){M.list[C].hasOwnProperty("fields")&&!Object(o.isEmpty)(M.list[C].fields)&&(D("sidebarNodeData",e),T(!0))},onNodeStatClick:function(){D("showContactModalId",C),D("showContactModalType","completed")},onNodeQueuedStatClick:function(){D("showContactModalId",C),D("showContactModalType","active")}});return Object(r.createElement)("div",{className:"bwf-node-wrapper"},Object(r.createElement)("div",{className:"bwf-inner-wrapper "+(n?"bwf-selected-node":"")+(Object(o.isEmpty)(C)?" bwf-empty-start-node":""),onClick:F},Object(o.isEmpty)(C)?Object(r.createElement)("div",{className:"bwf-node-brick is-start-node",onClick:function(){return u(!0)}},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(s.a,{size:22,icon:"tap-icon"})),Object(r.createElement)("div",{className:"bwf-display-flex bwf-h4"},Object(l.__)("Select an Event","wp-marketing-automations"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-brick is-start-node-selected"},Object(r.createElement)("div",{className:"bwf-node-icon icon-start"},Object(r.createElement)(s.a,{size:22,icon:"rocket"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},M.list.hasOwnProperty(C)&&M.list[C].hasOwnProperty("source_label")?M.list[C].source_label:""),Object(r.createElement)("div",{className:"bwf-node-content-label"},M.list.hasOwnProperty(C)&&M.list[C].hasOwnProperty("event_name")?M.list[C].event_name:Object(l.__)("Event Not Found","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"},!Object(o.isEmpty)(C)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(q.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations"),classes:"bwf-event-action",isDisable:!(!j&&!E),renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){u(!0),t()}},Object(r.createElement)(U.a,{justify:"flex-start"},Object(r.createElement)(U.c,null,Object(l.__)("Change Event","wp-marketing-automations")))))}})))),Object(r.createElement)("div",{className:"bwf-node-status bwf-node-m-0"},Object(r.createElement)("div",{className:"bwf-queued-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Active","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count"},N?Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(r.createElement)(r.Fragment,null,A.hasOwnProperty("active")?Object(p.ic)(parseInt(A.active)):0))),Object(r.createElement)("div",{className:"bwf-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Completed","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count"},N?Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(r.createElement)(r.Fragment,null,A.hasOwnProperty("completed")?Object(p.ic)(parseInt(A.completed)):0)))))),!Object(o.isEmpty)(C)&&Object(r.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1}),Object(r.createElement)(x,{isOpen:c,node:e,onRequestClose:function(){return u(!1)},automationID:P}))},H=(n(58),n(1371),n(40));function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(){$=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==V(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function J(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=function(e){var t,n,a=e.node,i=a.id,b=void 0===i?"":i,h=a.data,y=Object(r.useContext)(p.h),v=W(Object(r.useState)(!1),2),w=v[0],O=v[1],g=W(Object(r.useState)(h.hasOwnProperty("note")?h.note:""),2),j=g[0],E=g[1],_=W(Object(r.useState)(!1),2),k=_[0],N=_[1],S=Object(m.a)().setNodeDatabyId,x=Object(f.a)(),P=x.getAutomationData,L=x.getNodeDataByID,C=x.getEnableMove,A=x.getEnableCopy,I=C(),D=A(),T=Object(o.isEmpty)(b)?{}:L(b),M=T.stepId,F=void 0===M?0:M,G=T.data,U=(void 0===G?{}:G).note,B=void 0===U?"":U,R=P().ID,Y=function(){var e,t=(e=$().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,d()({path:Object(p.y)("/automation/".concat(R,"/step/").concat(F)),method:"POST",data:{data:{data:{note:t}}}}).then((function(e){200===e.code&&(y(e.message),h.note=t,S(b,h),N(!1))}));case 4:O(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),y(e.t0.message),O(!1);case 11:Object(p.Eb)(y,3e3);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){J(o,r,a,i,c,"next",e)}function c(e){J(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),V=W(Object(r.useState)(!1),2),Q=V[0],X=V[1];return Object(r.createElement)("div",{className:"bwf-note-popup"},function(e,t){var n=c()("bwf-note__toggle bwf-cursor-pointer",{"is-opened":t});return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:n,onClick:function(t){I||D||e(t)},"aria-expanded":t},!Object(o.isEmpty)(j)&&Object(r.createElement)("span",{className:"bwf-has-note"}),Object(r.createElement)(s.a,{size:16,icon:"note"})))}((function(){return X(!Q)}),!0),Q&&Object(r.createElement)(H.a,{position:"top right",className:"bwf-note__popover",onClose:function(){return X(!1)},focusOnMount:!0},(t=function(){return X(!Q)},Object(r.createElement)("div",{className:"bwf-note-popover-container"},Object(r.createElement)("div",{className:"bwf-note-popover-header"},Object(r.createElement)("div",{className:"bwf-note-header-text"},Object(l.__)("Notes","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-note-close",onClick:t},Object(r.createElement)(s.a,{icon:"close",size:20}))),Object(r.createElement)("div",{className:"bwf-note-popover-body"},Object(o.isEmpty)(j)||k?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(u.TextareaControl,{value:j,onChange:function(e){N(!0),E(e)}}),Object(r.createElement)("div",{className:"bwf_text_right",onClick:function(){return Y(j)}},Object(r.createElement)(u.Button,{isPrimary:!0,isBusy:w},Object(o.isEmpty)(B)?Object(l.__)("Add","wp-marketing-automations"):Object(l.__)("Update","wp-marketing-automations")))):Object(r.createElement)("div",{className:"bwf-note-wrapper"},Object(r.createElement)("div",{className:"bwf-note--content"},Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:(n=j,n.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,'<a href="$1" target="_blank" class="bwf-a-no-underline">$1</a>'))}})),Object(r.createElement)(q.a,{label:Object(l.__)("Event note action","wp-marketing-automations"),renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){N(!0)}},Object(l.__)("Edit","wp-marketing-automations")),Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){t(),E(""),Y("")}},Object(l.__)("Delete","wp-marketing-automations")))}})))))))},Z=n(1104);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(){ee=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==K(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function te(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ae=function(e){var t=e.readables;return Object(r.createElement)("div",{className:"bwf-step-brick"},t.map((function(e,t){var n=e.map((function(e,t){return Object(o.isEmpty)(e)?Object(r.createElement)(r.Fragment,null):Object(r.createElement)("div",{key:t},0!==t&&Object(r.createElement)("div",{className:"bwf-step-divider"},Object(r.createElement)("span",{className:"bwf-divider"},"AND")),Object(r.createElement)("div",{className:"bwf-step-content-content bwf-two-line-ellipse-text"},e))}));return 0!==t?Object(o.isEmpty)(n)?Object(r.createElement)(r.Fragment,null):Object(r.createElement)("div",{key:t+"-or"},Object(r.createElement)("div",{className:"bwf-step-divider divider-line bwf-or"},Object(r.createElement)("span",{className:"bwf-divider"},"OR")),n):n})))},oe=function(e){var t=e.data,n=void 0===t?{}:t,i=e.selected,c=void 0!==i&&i,u=e.id,b=ne(Object(r.useState)({status:!1,loading:!0}),2),d=b[0],y=b[1],v=Object(m.a)(),w=v.deleteNode,O=v.setAutomationData,g=v.showSidebar,j=v.setNodeForAdd,E=v.copyNodeHere,_=v.setOpenStepModal,k=v.setModalAnchorNode,N=v.fetchSplitPathNodes,S=Object(f.a)(),x=S.getAutomationId,P=S.getAutomationData,L=S.getEnableCopy,C=S.getEnableMove,A=S.getNodeDataByID,I=S.getLastAddedNode,D=S.getStatLoading,T=S.getStatData,M=I(),F=P().event,B=x(),R=D(),Y=T();Object(r.useEffect)((function(){M==u&&(O("sidebarNodeData",e),g(!0),O("lastAddedNode",0))}),[M]);var H,V,$=L(),J=C(),W=A(e.id),Q=W.hasMultiParents,K=void 0!==Q&&Q,re=W.stepId,oe=W.step_status,ie=void 0===oe?1:oe,ce=Y.hasOwnProperty(re)?Y[re]:{},le=Object(o.isEmpty)(F)||p.Qb?{}:Object(Z.a)(F,parseInt(B)),se=le.isLoading,ue=le.error,me=le.getReadableTexts,fe=le.rules,pe=p.Qb?[]:(H=n.sidebarValues,V=[],Object(o.isEmpty)(H)?[]:(Object.keys(H).map((function(e){var t=H[e],n=[];!Object(o.isEmpty)(t)&&Object(o.isArray)(t)&&(t.map((function(e){fe.hasOwnProperty(e.filter)&&n.push(e)})),Object(o.isEmpty)(n)||V.push(n))})),V)),be=p.Qb||se||ue||Object(o.isEmpty)(F)?[]:me(pe),de=G({onNodeClick:function(){O("sidebarNodeData",e),g(!0)},onNodeStatClick:function(){p.Qb?(O("proModalContent",Object(l.__)("Conditional Step","wp-marketing-automations")),O("showProModal",!0)):(O("showContactModalId",re),O("showContactModalType","completed"))}});return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper","data-stepid":re},Object(r.createElement)(a.d,{type:"target",position:"top",isConnectable:!1}),p.Qb?Object(r.createElement)("div",{className:"bwf-inner-wrapper "+(c?"bwf-selected-node":"")+(2===parseInt(ie)?" bwf-draft-node":""),onClick:function(){O("proModalContent",Object(l.__)("Conditional Step","wp-marketing-automations")),O("showProModal",!0)}},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(s.a,{size:26,icon:"condition"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(l.__)("Step","wp-marketing-automations")+" "+re),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Condition","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"})),Object(r.createElement)("div",{className:"bwf-control-event-error"},Object(r.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer bwf-display-flex"},Object(r.createElement)(s.a,{icon:"king",size:16,color:"#E15334"}),Object(l.__)("Pro Feature","wp-marketing-automations")))):Object(r.createElement)("div",{className:"bwf-inner-wrapper "+(c?"bwf-selected-node":"")+(2===parseInt(ie)?" bwf-draft-node":""),onClick:de},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(s.a,{size:26,icon:"condition"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(l.__)("Step","wp-marketing-automations")+" "+u),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Condition","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"},Object(r.createElement)(X,{node:e}),Object(r.createElement)(q.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations"),classes:"bwf-event-action",isDisable:!(!$&&!J),renderContent:function(t){var n=t.onToggle,a=N();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){Object(p.Sb)()?(O("enableCopy",!0),O("copyData",{type:"conditional",data:e.data,id:e.id})):(O("proModalContent",Object(l.__)("Copy Step","wp-marketing-automations")),O("showProModal",!0)),n()}},Object(r.createElement)(U.a,{justify:"space-between"},Object(r.createElement)(U.c,null,Object(l.__)("Copy","wp-marketing-automations")),!Object(p.Sb)()&&Object(r.createElement)(U.c,null,p.e))),!a.includes(u)&&Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){Object(p.Sb)()?(O("enableMove",!0),O("moveID",e.id),O("copyData",{type:"conditional",data:e.data,id:e.id})):(O("proModalContent",Object(l.__)("Move Step","wp-marketing-automations")),O("showProModal",!0)),n()}},Object(r.createElement)(U.a,{justify:"space-between"},Object(r.createElement)(U.c,null,Object(l.__)("Move","wp-marketing-automations")),!Object(p.Sb)()&&Object(r.createElement)(U.c,null,p.e))),Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){var t,r;y({status:!0,onConfirm:(t=ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e).then((function(){return y({status:!1})}));case 2:case"end":return t.stop()}}),t)})),r=function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){te(o,r,a,i,c,"next",e)}function c(e){te(o,r,a,i,c,"throw",e)}i(void 0)}))},function(){return r.apply(this,arguments)})}),n()}},Object(r.createElement)(U.a,{justify:"flex-start"},Object(r.createElement)(U.c,null,Object(l.__)("Delete","wp-marketing-automations")))))}}))),Array.isArray(be)&&be.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-step-content"},Object(r.createElement)("div",{className:"bwf-step-content"},Object(r.createElement)(ae,{readables:be}))),Object(r.createElement)("div",{className:"bwf-node-status"},Object(r.createElement)("div",{className:"bwf-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Completed","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count"},R?Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(r.createElement)(r.Fragment,null,ce.hasOwnProperty("completed")?Object(p.ic)(parseInt(ce.completed)):0))))):Object(r.createElement)(r.Fragment,null,se?Object(r.createElement)("div",{className:"bwf-node-step-content"},Object(r.createElement)("div",{className:"bwf-step-brick"},Object(r.createElement)("div",{className:"bwf-step-content-content"},Object(r.createElement)("div",{className:"bwf-step-brick"},Object(r.createElement)("div",{className:"bwf-step-content-content"},Object(l.__)("Loading","wp-marketing-automations")))))):Object(r.createElement)("div",{className:"bwf-control-event-error"},Object(r.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer"},Object(l.__)("Not Configured","wp-marketing-automations"))))),K&&Object(r.createElement)("div",{className:"bwf-node-plus-paste-wrap bwf-pos-top"},$||J?Object(r.createElement)("div",{className:"bwf-drag-area",onClick:function(){return E(e,"before","")}},Object(r.createElement)("div",{className:"bwf-drag-node is-copy-paste"},Object(r.createElement)("div",{className:"bwf-node-add"})),Object(r.createElement)("div",{className:"bwf-paste-label"},Object(l.__)("Paste Here","wp-marketing-automations"))):Object(r.createElement)("div",{className:"bwf-node-add",onClick:function(t){j(e.id,{option:"",position:"before"}),_(!0),k(t.target)}}))),Object(r.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1}),Object(r.createElement)(h.a,{modalTitle:Object(l.__)("Delete Conditional Step","wp-marketing-automations"),deleteEntityName:Object(l.__)("conditional step","wp-marketing-automations"),confirmButtonText:Object(l.__)("Delete","wp-marketing-automations"),onConfirm:d.onConfirm,isLoading:!1,onRequestClose:function(){return y({status:!1})},isOpen:d.status,isDelete:!0}))},ie=n(1129),ce=n(140);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(){se=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==le(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function ue(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function me(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ue(o,r,a,i,c,"next",e)}function c(e){ue(o,r,a,i,c,"throw",e)}i(void 0)}))}}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var be=function(e){var t=e.data,n=void 0===t?{}:t,i=e.selected,c=void 0!==i&&i,u=e.id,b=fe(Object(r.useState)(!1),2),d=b[0],y=b[1],v=fe(Object(r.useState)({status:!1,loading:!0}),2),w=v[0],O=v[1],g=Object(m.a)(),j=g.deleteNode,E=g.setAutomationData,_=g.showSidebar,k=g.setNodeForAdd,N=g.copyNodeHere,S=g.setOpenStepModal,P=g.setModalAnchorNode,L=g.fetchSplitPathNodes,C=Object(f.a)(),A=C.getActionsList,I=C.getAutomationData,D=C.getNodeDataByID,T=C.getEnableCopy,M=C.getEnableMove,F=C.getLastAddedNode,B=C.getStatLoading,R=C.getStatData,Y=F(),H=A(),V=I(),$=B(),J=R(),W=V.ID,Q=T(),Z=M(),K=D(e.id),ee=K.hasMultiParents,te=void 0!==ee&&ee,ne=K.stepId,re=K.step_status,ae=void 0===re?1:re,oe=J.hasOwnProperty(ne)?J[ne]:{},le=n.sidebarValues,ue=void 0===le?{}:le,pe=n.desc_text,be=void 0===pe?"":pe;Object(r.useEffect)((function(){Y==u&&(y(!0),E("lastAddedNode",0))}),[Y]);var de,he,ye,ve=G({onNodeClick:!!n.selected&&function(){H.list.hasOwnProperty(n.selected)&&(E("sidebarNodeData",e),_(!0))},onNodeStatClick:function(){E("showContactModalId",ne),E("showContactModalType","completed")},onNodeFailedStatClick:function(){E("showContactModalId",ne),E("showContactModalType","failed")},onNodeSkippedStatClick:function(){E("showContactModalId",ne),E("showContactModalType","skipped")},onInfoToggleClick:function(){return E("analyticNodeId",ne)}}),we=!$&&oe.hasOwnProperty("failed")&&parseInt(oe.failed)>0&&oe.hasOwnProperty("skipped")&&parseInt(oe.skipped)>0;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper ".concat(we?"bwf-width-2":""),"data-stepid":ne},Object(r.createElement)(a.d,{type:"target",position:"top",isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-inner-wrapper "+(c?"bwf-selected-node":"")+(n.hasOwnProperty("selected")&&n.selected&&H.list.hasOwnProperty(n.selected)&&2===parseInt(ae)&&H.list[n.selected].hasOwnProperty("fields")&&!Object(o.isEmpty)(H.list[n.selected].fields)?" bwf-draft-node":""),onClick:ve},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon icon-action"},Object(r.createElement)(s.a,{size:22,icon:"charge"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(l.__)("Step","wp-marketing-automations")+" "+u),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Action","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"},n.hasOwnProperty("selected")&&!Object(o.isEmpty)(n.selected)&&Object(r.createElement)(X,{id:u,node:e}),Object(r.createElement)(q.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations"),classes:"bwf-event-action",isDisable:!(!Q&&!Z),renderContent:function(t){var a=t.onToggle,i=L();return Object(r.createElement)(r.Fragment,null,n.hasOwnProperty("selected")&&!Object(o.isEmpty)(n.selected)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){Object(p.Sb)()?(E("enableCopy",!0),E("copyData",{type:"action",data:e.data})):(E("proModalContent",{featureTitle:Object(l.__)("Copy Step","wp-marketing-automations"),proLink:Object(p.ab)("upgrade",{utm_medium:"Automation+Copy+step+Upgrade+Modal"})}),E("showProModal",!0)),a()}},Object(r.createElement)(U.a,{justify:"space-between"},Object(r.createElement)(U.c,null,Object(l.__)("Copy","wp-marketing-automations")),!Object(p.Sb)()&&Object(r.createElement)(U.c,null,p.e))),!i.includes(u)&&Object(r.createElement)(z.a,{isClickable:!0,onInvoke:me(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(p.Sb)()?(E("enableMove",!0),E("moveID",e.id),E("copyData",{type:"action",data:e.data})):(E("proModalContent",{featureTitle:Object(l.__)("Move Step","wp-marketing-automations"),proLink:Object(p.ab)("upgrade",{utm_medium:"Automation+Copy+step+Upgrade+Modal"})}),E("showProModal",!0)),a();case 2:case"end":return t.stop()}}),t)})))},Object(r.createElement)(U.a,{justify:"space-between"},Object(r.createElement)(U.c,null,Object(l.__)("Move","wp-marketing-automations")),!Object(p.Sb)()&&Object(r.createElement)(U.c,null,p.e)))),Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){var t;O({status:!0,onConfirm:(t=me(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(e).then((function(){return O({status:!1})}));case 2:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}),a()}},Object(r.createElement)(U.a,{justify:"flex-start"},Object(r.createElement)(U.c,null,Object(l.__)("Delete","wp-marketing-automations")))))}}))),n.hasOwnProperty("selected")&&!Object(o.isEmpty)(n.selected)?Object(r.createElement)("div",{className:"bwf-node-step-content"},Object(r.createElement)("div",{className:"bwf-step-content"},Object(r.createElement)("div",{className:"bwf-step-brick"},Object(r.createElement)("div",{className:"bwf-step-content-content"},!Object(o.isEmpty)(n)&&n.hasOwnProperty("selected")&&(ye=Object(r.createElement)(r.Fragment,null),"wp_sendemail"===n.selected?(de=ue.bwfan_email_data,he=void 0===de?{}:de,ye=Object(r.createElement)(r.Fragment,null,!Object(o.isEmpty)(he)&&Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf-mt-3 bwf-cursor-pointer bwf-info__toggle "},Object(r.createElement)(ie.a,{automationId:W,analyticsId:ne,mode:"email"})))):"twilio_send_sms"!==n.selected&&"bulkgate_send_transactional_sms"!==n.selected&&"linkmobility_send_sms"!==n.selected&&"unifonic_send_sms"!==n.selected||(ye=Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf-mt-3 bwf-cursor-pointer bwf-info__toggle"},Object(r.createElement)(ie.a,{automationId:W,analyticsId:ne,mode:"sms"}))),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-content-type"},H.list.hasOwnProperty(n.selected)&&H.list[n.selected].hasOwnProperty("integration_nicename")?H.list[n.selected].integration_nicename:""),Object(r.createElement)("div",{className:"bwf-node-content-label"},H.list.hasOwnProperty(n.selected)?H.list[n.selected].action_name:Object(l.__)("Action Not Found","wp-marketing-automations")),!Object(o.isEmpty)(be)&&Object(r.createElement)("div",{className:"bwf-node-content-label bwf-node-desc"+(Object(o.isArray)(be)?"":" bwf-two-line-ellipse-text")},function(e){if(Object(o.isEmpty)(e))return Object(r.createElement)(r.Fragment,null);if(Object(o.isArray)(e)){var t="",n=[];return e.map((function(e){Object(o.isEmpty)(t)&&(t=e),n.push(Object(r.createElement)("span",{key:e},e))})),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-table-v-center"},Object(r.createElement)("span",null,!Object(o.isEmpty)(t)&&t),!Object(o.isEmpty)(n)&&n.length>1&&Object(r.createElement)("div",{className:"bwf-display-inline",onClick:function(e){e.preventDefault(),e.stopPropagation()}},Object(r.createElement)(ce.a,{items:n}))))}return e}(be)),ye,H.list.hasOwnProperty(n.selected)&&H.list[n.selected].hasOwnProperty("analytics_mode")&&""!==H.list[n.selected].analytics_mode?Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf-mt-3 bwf-cursor-pointer bwf-info__toggle"},Object(r.createElement)(ie.a,{automationId:W,analyticsId:ne,mode:H.list[n.selected].analytics_mode})):null)))))):Object(r.createElement)("div",{className:"bwf-control-event-error"},Object(r.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer",onClick:function(){return y(!0)}},Object(l.__)("Not Configured","wp-marketing-automations"))),n.hasOwnProperty("selected")&&!Object(o.isEmpty)(n.selected)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-status"},Object(r.createElement)("div",{className:"bwf-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Completed","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count"},$?Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(r.createElement)(r.Fragment,null,oe.hasOwnProperty("completed")?Object(p.ic)(parseInt(oe.completed)):0))),!$&&oe.hasOwnProperty("skipped")&&parseInt(oe.skipped)>0&&Object(r.createElement)("div",{className:"bwf-skipped-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Skipped","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count bwf-skipped-status"},Object(p.ic)(parseInt(oe.skipped)))),!$&&oe.hasOwnProperty("failed")&&parseInt(oe.failed)>0&&Object(r.createElement)("div",{className:"bwf-failed-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Failed","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count bwf-failed-status"},Object(p.ic)(parseInt(oe.failed))))))),te&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-plus-paste-wrap bwf-pos-top"},Q||Z?Object(r.createElement)("div",{className:"bwf-drag-area",onClick:function(){return N(e,"before","")}},Object(r.createElement)("div",{className:"bwf-drag-node is-copy-paste"},Object(r.createElement)("div",{className:"bwf-node-add"})),Object(r.createElement)("div",{className:"bwf-paste-label"},Object(l.__)("Paste Here","wp-marketing-automations"))):Object(r.createElement)("div",{className:"bwf-node-add",onClick:function(t){k(e.id,{option:"",position:"before"}),S(!0),P(t.target)}})))),Object(r.createElement)(a.d,{type:"source",isConnectable:!1,position:"bottom"}),Object(r.createElement)(x,{isOpen:d,onRequestClose:function(){return y(!1)},node:e,isEvent:!1,automationID:W}),Object(r.createElement)(h.a,{modalTitle:Object(l.__)("Delete Action Step","wp-marketing-automations"),deleteEntityName:Object(l.__)("action step","wp-marketing-automations"),confirmButtonText:Object(l.__)("Delete","wp-marketing-automations"),onConfirm:w.onConfirm,isLoading:!1,onRequestClose:function(){return O({status:!1})},isOpen:w.status,isDelete:!0}))},de=function(e){var t=Object(f.a)(),n=t.getEnableCopy,o=t.getEnableMove,i=t.getNodeDataByID,c=n(),s=o(),u=Object(m.a)(),p=u.copyNodeHere,b=u.setNodeForAdd,d=u.setOpenStepModal,h=u.setModalAnchorNode,y=i(e.id).hasMultiParents,v=void 0!==y&&y;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper"},v?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-plus-paste-wrap bwf-pos-top"},c||s?Object(r.createElement)("div",{className:"bwf-drag-area",onClick:function(){return p(e,"before","")}},Object(r.createElement)("div",{className:"bwf-drag-node is-copy-paste"},Object(r.createElement)("div",{className:"bwf-node-add"})),Object(r.createElement)("div",{className:"bwf-paste-label"},Object(l.__)("Paste Here","wp-marketing-automations"))):Object(r.createElement)("div",{className:"bwf-node-add",onClick:function(t){b(e.id,{option:"",position:"before"}),d(!0),h(t.target)}})),Object(r.createElement)(a.d,{type:"source",position:"top",isConnectable:!1})):Object(r.createElement)(a.d,{type:"source",position:"top",isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-node-content bwf-end"},Object(r.createElement)("div",{className:"bwf-node-content-item"},Object(l.__)("End Automation","wp-marketing-automations")))))};function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(){ye=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==he(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function ve(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ge=function(e){var t=e.data,n=void 0===t?{}:t,i=e.selected,c=void 0!==i&&i,u=e.id,b=we(Object(r.useState)(!1),2),d=b[0],y=b[1],v=we(Object(r.useState)({status:!1,loading:!0}),2),w=v[0],O=v[1],g=Object(m.a)(),j=g.deleteNode,E=g.setAutomationData,_=g.showSidebar,k=g.setNodeForAdd,N=g.copyNodeHere,S=g.setOpenStepModal,x=g.setModalAnchorNode,P=Object(f.a)(),L=P.getGoals,C=P.getNodeDataByID,A=P.getEnableCopy,I=P.getEnableMove,D=P.getLastAddedNode,T=P.getAutomationData,M=P.getStatLoading,B=P.getStatData,R=L().list,Y=D(),H=A(),V=I(),$=M(),J=B();Object(r.useEffect)((function(){Y==u&&(y(!0),E("lastAddedNode",0))}),[Y]);var W=T(),Q=C(e.id),Z=Q.hasMultiParents,K=void 0!==Z&&Z,ee=Q.stepId,te=Q.step_status,ne=void 0===te?1:te,re=W.ID,ae=J.hasOwnProperty(ee)?J[ee]:{},oe=n.desc_text,ie=void 0===oe?"":oe,le=G({onNodeClick:!!n&&!!n.benchmark&&function(){E("sidebarNodeData",e),_(!0)},onNodeStatClick:function(){p.Qb?(E("proModalContent",Object(l.__)("Goal Step","wp-marketing-automations")),E("showProModal",!0)):(E("showContactModalId",ee),E("showContactModalType","completed"))},onNodeQueuedStatClick:function(){p.Qb?(E("proModalContent",Object(l.__)("Goal Step","wp-marketing-automations")),E("showProModal",!0)):(E("showContactModalId",ee),E("showContactModalType","queued"))}});return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper","data-stepid":ee},Object(r.createElement)(a.d,{type:"target",position:"top",isConnectable:!1}),p.Qb?Object(r.createElement)("div",{className:"bwf-inner-wrapper "+(c?"bwf-selected-node":"")+(2===parseInt(ne)?" bwf-draft-node":""),onClick:function(){E("proModalContent","Goal Step"),E("showProModal",!0)}},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon icon-goal"},Object(r.createElement)(s.a,{size:26,icon:"goal"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(l.__)("Step","wp-marketing-automations")+" "+u),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Goal","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"})),Object(r.createElement)("div",{className:"bwf-control-event-error"},Object(r.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer bwf-display-flex"},Object(r.createElement)(s.a,{icon:"king",size:16,color:"#E15334"}),Object(l.__)("Pro Feature","wp-marketing-automations")))):Object(r.createElement)("div",{className:"bwf-inner-wrapper "+(c?"bwf-selected-node":"")+(2===parseInt(ne)?" bwf-draft-node":""),onClick:le},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon icon-goal"},Object(r.createElement)(s.a,{size:26,icon:"goal"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(l.__)("Step","wp-marketing-automations")+" "+u),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Goal","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"},n.hasOwnProperty("benchmark")&&!Object(o.isEmpty)(n.benchmark)&&Object(r.createElement)(X,{node:e}),Object(r.createElement)(q.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations"),classes:"bwf-event-action",isDisable:!(!H&&!V),renderContent:function(t){var a=t.onToggle;return Object(r.createElement)(r.Fragment,null,n.hasOwnProperty("benchmark")&&!Object(o.isEmpty)(n.benchmark)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){Object(p.Sb)()?(E("enableCopy",!0),E("copyData",{type:"benchmark",data:e.data})):(E("proModalContent",Object(l.__)("Copy Step","wp-marketing-automations")),E("showProModal",!0)),a()}},Object(r.createElement)(U.a,{justify:"space-between"},Object(r.createElement)(U.c,null,Object(l.__)("Copy","wp-marketing-automations")),!Object(p.Sb)()&&Object(r.createElement)(U.c,null,p.e))),Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){E("enableMove",!0),E("moveID",e.id),E("copyData",{type:"benchmark",data:e.data}),a()}},Object(r.createElement)(U.a,{justify:"flex-start"},Object(r.createElement)(U.c,null,Object(l.__)("Move","wp-marketing-automations"))))),Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){var t,n;O({status:!0,onConfirm:(t=ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(e).then((function(){return O({status:!1})}));case 2:case"end":return t.stop()}}),t)})),n=function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){ve(o,r,a,i,c,"next",e)}function c(e){ve(o,r,a,i,c,"throw",e)}i(void 0)}))},function(){return n.apply(this,arguments)})}),a()}},Object(r.createElement)(U.a,{justify:"flex-start"},Object(r.createElement)(U.c,null,Object(l.__)("Delete","wp-marketing-automations")))))}}))),!n.hasOwnProperty("benchmark")||Object(o.isEmpty)(n.benchmark)?Object(r.createElement)("div",{className:"bwf-control-event-error"},Object(r.createElement)("div",{className:"bwf-control-error-msg",onClick:function(){return y(!0)}},Object(l.__)("Not Configured","wp-marketing-automations"))):Object(r.createElement)("div",{className:"bwf-node-step-content"},Object(r.createElement)("div",{className:"bwf-step-content"},Object(r.createElement)("div",{className:"bwf-step-brick"},Object(r.createElement)("div",{className:"bwf-step-content-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},R.hasOwnProperty(n.benchmark)&&R[n.benchmark].hasOwnProperty("source_label")?R[n.benchmark].source_label:""),Object(r.createElement)("div",{className:"bwf-node-content-label"},R.hasOwnProperty(n.benchmark)?R[n.benchmark].event_name:"Goal Not Found"),!Object(o.isEmpty)(ie)&&Object(r.createElement)("div",{className:"bwf-node-content-label bwf-node-desc"+(Object(o.isArray)(ie)?"":" bwf-two-line-ellipse-text")},function(e){if(Object(o.isEmpty)(e))return Object(r.createElement)(r.Fragment,null);if(Object(o.isArray)(e)){var t="",n=[];return e.map((function(e){Object(o.isEmpty)(t)&&(t=e),n.push(Object(r.createElement)("span",{key:e},e))})),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-table-v-center"},Object(r.createElement)("span",null,!Object(o.isEmpty)(t)&&t),!Object(o.isEmpty)(n)&&n.length>1&&Object(r.createElement)("div",{className:"bwf-display-inline",onClick:function(e){e.preventDefault(),e.stopPropagation()}},Object(r.createElement)(ce.a,{items:n}))))}return e}(ie)))))),n.hasOwnProperty("benchmark")&&!Object(o.isEmpty)(n.benchmark)&&Object(r.createElement)("div",{className:"bwf-node-status"},Object(r.createElement)("div",{className:"bwf-queued-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Queued","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count"},$?Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(r.createElement)(r.Fragment,null,ae.hasOwnProperty("queued")?Object(p.ic)(parseInt(ae.queued)):0))),Object(r.createElement)("div",{className:"bwf-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Completed","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count"},$?Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(r.createElement)(r.Fragment,null,ae.hasOwnProperty("completed")?Object(p.ic)(parseInt(ae.completed)):0))))),K&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-plus-paste-wrap bwf-pos-top"},H||V?Object(r.createElement)("div",{className:"bwf-drag-area",onClick:function(){return N(e,"before","")}},Object(r.createElement)("div",{className:"bwf-drag-node is-copy-paste"},Object(r.createElement)("div",{className:"bwf-node-add"})),Object(r.createElement)("div",{className:"bwf-paste-label"},"Paste Here")):Object(r.createElement)("div",{className:"bwf-node-add",onClick:function(t){k(e.id,{option:"",position:"before"}),S(!0),x(t.target)}})))),Object(r.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1}),Object(r.createElement)(F,{isOpen:d,onRequestClose:function(){return y(!1)},node:e,automationID:re}),Object(r.createElement)(h.a,{modalTitle:Object(l.__)("Delete Goal Step","wp-marketing-automations"),deleteEntityName:Object(l.__)("goal step","wp-marketing-automations"),confirmButtonText:Object(l.__)("Delete","wp-marketing-automations"),onConfirm:w.onConfirm,isLoading:!1,onRequestClose:function(){return O({status:!1})},isOpen:w.status,isDelete:!0,deleteDescriptionText:Object(l.__)("Once you delete this step, all the queued contacts will move to next step right away.","wp-marketing-automations")}))},je=n(89),Ee=n(10),_e=n.n(Ee);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(){Ne=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==ke(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Se(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Le={1:Object(l.__)("Delay for a specific period","wp-marketing-automations"),2:Object(l.__)("Delay until a specific date and time","wp-marketing-automations"),3:Object(l.__)("Delay until a custom field date","wp-marketing-automations"),4:Object(l.__)("Delay with variable","wp-marketing-automations")},Ce={1:Object(l.__)("Sun","wp-marketing-automations"),2:Object(l.__)("Mon","wp-marketing-automations"),3:Object(l.__)("Tue","wp-marketing-automations"),4:Object(l.__)("Wed","wp-marketing-automations"),5:Object(l.__)("Thu","wp-marketing-automations"),6:Object(l.__)("Fri","wp-marketing-automations"),7:Object(l.__)("Sat","wp-marketing-automations")},Ae=function(e){var t=e.data,n=e.selected,i=void 0!==n&&n,c=e.id,u=xe(Object(r.useState)({status:!1,loading:!0}),2),b=u[0],d=u[1],y=Object(m.a)(),v=y.deleteNode,w=y.setAutomationData,O=y.showSidebar,g=y.setNodeForAdd,j=y.copyNodeHere,E=y.setOpenStepModal,_=y.setModalAnchorNode,k=y.fetchSplitPathNodes,N=Object(f.a)(),S=N.getNodeDataByID,x=N.getEnableCopy,P=N.getEnableMove,L=N.getLastAddedNode,C=N.getStatLoading,A=N.getStatData,I=L(),D=!Object(o.isEmpty)(t)&&t.hasOwnProperty("sidebarValues")?t.sidebarValues:{},T=D.type,M=void 0===T?0:T,F=D.data,B=void 0===F?{}:F,R=C(),Y=A();Object(r.useEffect)((function(){I==c&&(w("sidebarNodeData",e),O(!0),w("lastAddedNode",0))}),[I]);var H=function(){switch(parseInt(M)){case 1:var e=B.day_delay,t=void 0===e?{}:e,n=B.enable_time_delay,a=void 0!==n&&n,i=B.enable_week_delay,c=void 0!==i&&i,s=B.time_delay,u=void 0===s?{time:""}:s,m=B.week_delay,f=void 0===m?[]:m;if(!Object(o.isEmpty)(t)){var p=t.text+" "+function(e,t){switch(e){case"min":return parseInt(t)>1?Object(l.__)("Minutes","wp-marketing-automations"):Object(l.__)("Minute","wp-marketing-automations");case"hours":return parseInt(t)>1?Object(l.__)("Hours","wp-marketing-automations"):Object(l.__)("Hour","wp-marketing-automations");case"days":return parseInt(t)>1?Object(l.__)("Days","wp-marketing-automations"):Object(l.__)("Day","wp-marketing-automations");case"weeks":return parseInt(t)>1?Object(l.__)("Weeks","wp-marketing-automations"):Object(l.__)("Week","wp-marketing-automations");case"months":return parseInt(t)>1?Object(l.__)("Months","wp-marketing-automations"):Object(l.__)("Month","wp-marketing-automations");default:return""}}(t.unit,t.text),b=[];return c&&!Object(o.isEmpty)(f)&&f.map((function(e){Ce.hasOwnProperty(e)&&b.push(Ce[e])})),a&&u.hasOwnProperty("time")&&!Object(o.isEmpty)(u.time)?(p+=" till "+Object(je.format)(bwfcrm_contacts_data.time_format,_e()(u.time,"HH:mm:ss")),Object(o.isEmpty)(b)||(p+=" "+b.join("/")),u.hasOwnProperty("in_contact_timezone")&&u.in_contact_timezone&&(p+=" ".concat(Object(l.__)("in Contact's Timezone","wp-marketing-automations")))):Object(o.isEmpty)(b)||(p+=" "+b.join("/")),p+"."}break;case 2:var d=B.date,h=void 0===d?"":d,y=B.time_delay,v=void 0===y?{time:"",in_contact_timezone:!1}:y,w=B.enable_step_skip,O=void 0!==w&&w,g=B.skip_to_step,j=void 0===g?{step:"",name:""}:g;if(!Object(o.isEmpty)(h)&&!Object(o.isEmpty)(v.time)){var E="",_="";return v.hasOwnProperty("in_contact_timezone")&&v.in_contact_timezone?E+=" ".concat(Object(l.__)("in Contact's Timezone.","wp-marketing-automations")):E+=".",O&&!Object(o.isEmpty)(j)&&j.hasOwnProperty("step")&&""!=j.step&&j.hasOwnProperty("name")&&""!=j.name&&(_=" ".concat(Object(l.__)("Jump to","wp-marketing-automations")," ").concat(j.name,".")),Object(l.__)("Delay till ","wp-marketing-automations")+" "+Object(je.format)(bwfcrm_contacts_data.date_format,_e()(h))+" "+Object(l.__)("at","wp-marketing-automations")+" "+Object(je.format)(bwfcrm_contacts_data.time_format,_e()(v.time,"HH:mm:ss"))+" "+E+_}break;case 3:var k=B.custom_field,N=B.enable_time_delay,S=void 0!==N&&N,x=B.time_delay,P=B.enable_step_skip,L=void 0!==P&&P,C=B.skip_to_step;if(k.hasOwnProperty("field")&&""!==k.field){var A=Object(l.__)("Delay","wp-marketing-automations");return S?x.hasOwnProperty("duration")&&(A+=" ".concat(Object(l.__)("of","wp-marketing-automations")," ").concat(x.duration," ").concat(x.type," ").concat(x.timing," ")):A+=" ".concat(Object(l.__)("till","wp-marketing-automations")),k.hasOwnProperty("custom_field_label")&&""!==k.custom_field_label?A+=" ".concat(Object(l.__)("Contacts","wp-marketing-automations")," '").concat(k.custom_field_label,"' ").concat(Object(l.__)("field value","wp-marketing-automations")):A+=" ".concat(Object(l.__)("Contacts","wp-marketing-automations")," ( ").concat(k.field," ) ").concat(Object(l.__)("field value","wp-marketing-automations")),k.hasOwnProperty("time")&&""!==k.time&&(A+=" till ".concat(Object(je.format)(bwfcrm_contacts_data.time_format,_e()(k.time,"HH:mm:ss")))),k.hasOwnProperty("in_contact_timezone")&&k.in_contact_timezone?A+=" ".concat(Object(l.__)("in Contact's Timezone.","wp-marketing-automations")):A+=".",L&&!Object(o.isEmpty)(C)&&C.hasOwnProperty("step")&&""!=C.step&&C.hasOwnProperty("name")&&""!=C.name&&(A+=" ".concat(Object(l.__)("Jump to","wp-marketing-automations")," ").concat(C.name,".")),A}break;case 4:var I=B.variable_field,D=B.enable_time_delay,T=void 0!==D&&D,F=B.time_delay,G=B.enable_step_skip,z=void 0!==G&&G,U=B.skip_to_step;if(I.hasOwnProperty("variable")&&""!==I.variable){var q=Object(l.__)("Delay","wp-marketing-automations");return T?F.hasOwnProperty("duration")&&(q+=" ".concat(Object(l.__)("of","wp-marketing-automations")," ").concat(F.duration," ").concat(F.type," ").concat(F.timing," ")):q+=" "+Object(l.__)("till","wp-marketing-automations"),I.hasOwnProperty("variable")&&""!==I.variable&&(q+=" ".concat(Object(l.__)("Orders meta key","wp-marketing-automations")," ").concat(I.variable," value")),I.hasOwnProperty("time")&&""!==I.time&&(q+=" till ".concat(Object(je.format)(bwfcrm_contacts_data.time_format,_e()(I.time,"HH:mm:ss")))),I.hasOwnProperty("in_contact_timezone")&&I.in_contact_timezone?q+=" ".concat(Object(l.__)("in Contact's Timezone.","wp-marketing-automations")):q+=".",z&&!Object(o.isEmpty)(U)&&U.hasOwnProperty("step")&&""!=U.step&&U.hasOwnProperty("name")&&""!=U.name&&(q+=" ".concat(Object(l.__)("Jump to","wp-marketing-automations")," ").concat(U.name,".")),q}break;default:return Object(r.createElement)(r.Fragment,null)}return Object(r.createElement)(r.Fragment,null)},V=x(),$=P(),J=S(e.id),W=J.hasMultiParents,Q=void 0!==W&&W,Z=J.stepId,K=J.step_status,ee=void 0===K?1:K,te=Y.hasOwnProperty(Z)?Y[Z]:{},ne=G({onNodeClick:function(){w("sidebarNodeData",e),O(!0)},onNodeStatClick:function(){w("showContactModalId",Z),w("showContactModalType","completed")},onNodeQueuedStatClick:function(){w("showContactModalId",Z),w("showContactModalType","queued")}});return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper","data-stepid":Z},Object(r.createElement)(a.d,{type:"target",position:"top",isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-inner-wrapper "+(i?"bwf-selected-node":"")+(2===parseInt(ee)?" bwf-draft-node":""),onClick:ne},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon icon-delay"},Object(r.createElement)(s.a,{size:28,icon:"time-left"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(l.__)("Step","wp-marketing-automations")+" "+c),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Delay","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"},Object(r.createElement)(X,{node:e}),Object(r.createElement)(q.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations"),classes:"bwf-event-action",isDisable:!(!V&&!$),renderContent:function(t){var n=t.onToggle,a=k();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){Object(p.Sb)()?(w("enableCopy",!0),w("copyData",{type:"wait",data:e.data})):(w("proModalContent",{featureTitle:Object(l.__)("Copy Step","wp-marketing-automations"),proLink:Object(p.ab)("upgrade",{utm_medium:"Automation+Copy+step+Upgrade+Modal"})}),w("showProModal",!0)),n()}},Object(r.createElement)(U.a,{justify:"space-between"},Object(r.createElement)(U.c,null,Object(l.__)("Copy","wp-marketing-automations")),!Object(p.Sb)()&&Object(r.createElement)(U.c,null,p.e))),!a.includes(c)&&Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){Object(p.Sb)()?(w("enableMove",!0),w("moveID",e.id),w("copyData",{type:"wait",data:e.data})):(w("proModalContent",{featureTitle:Object(l.__)("Move Step","wp-marketing-automations"),proLink:Object(p.ab)("upgrade",{utm_medium:"Automation+Copy+step+Upgrade+Modal"})}),w("showProModal",!0)),n()}},Object(r.createElement)(U.a,{justify:"space-between"},Object(r.createElement)(U.c,null,Object(l.__)("Move","wp-marketing-automations")),!Object(p.Sb)()&&Object(r.createElement)(U.c,null,p.e))),Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){var t,r;d({status:!0,onConfirm:(t=Ne().mark((function t(){return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e).then((function(){return d({status:!1})}));case 2:case"end":return t.stop()}}),t)})),r=function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){Se(o,r,a,i,c,"next",e)}function c(e){Se(o,r,a,i,c,"throw",e)}i(void 0)}))},function(){return r.apply(this,arguments)})}),n()}},Object(r.createElement)(U.a,{justify:"flex-start"},Object(r.createElement)(U.c,null,Object(l.__)("Delete","wp-marketing-automations")))))}}))),Object(o.isEmpty)(t)||!parseInt(M)>0?Object(r.createElement)("div",{className:"bwf-control-event-error"},Object(r.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer"},Object(l.__)("Not Configured","wp-marketing-automations"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-step-content"},Object(r.createElement)("div",{className:"bwf-step-content"},Object(r.createElement)("div",{className:"bwf-step-brick"},Object(r.createElement)("div",{className:"bwf-step-content-content"},Le.hasOwnProperty(M)&&Object(r.createElement)("div",{className:"bwf-node-content-type"},Le[M]),Object(r.createElement)("div",{className:"bwf-node-content-label bwf-two-line-ellipse-text",title:H()},H()))))),Object(r.createElement)("div",{className:"bwf-node-status"},Object(r.createElement)("div",{className:"bwf-queued-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Queued","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count"},R?Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(r.createElement)(r.Fragment,null,te.hasOwnProperty("queued")?Object(p.ic)(parseInt(te.queued)):0))),Object(r.createElement)("div",{className:"bwf-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Completed","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count"},R?Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(r.createElement)(r.Fragment,null,te.hasOwnProperty("completed")?Object(p.ic)(parseInt(te.completed)):0)))))),Q&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-plus-paste-wrap bwf-pos-top"},V||$?Object(r.createElement)("div",{className:"bwf-drag-area",onClick:function(){return j(e,"before","")}},Object(r.createElement)("div",{className:"bwf-drag-node is-copy-paste"},Object(r.createElement)("div",{className:"bwf-node-add"})),Object(r.createElement)("div",{className:"bwf-paste-label"},Object(l.__)("Paste Here","wp-marketing-automations"))):Object(r.createElement)("div",{className:"bwf-node-add",onClick:function(t){g(e.id,{option:"",position:"before"}),E(!0),_(t.target)}})))),Object(r.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1}),Object(r.createElement)(h.a,{modalTitle:Object(l.__)("Delete Delay Step","wp-marketing-automations"),deleteEntityName:Object(l.__)("delay step","wp-marketing-automations"),confirmButtonText:Object(l.__)("Delete","wp-marketing-automations"),onConfirm:b.onConfirm,isLoading:!1,onRequestClose:function(){return d({status:!1})},isOpen:b.status,isDelete:!0,deleteDescriptionText:Object(l.__)("Once you delete this step, all the queued contacts will move to next step right away.","wp-marketing-automations")}))},Ie=function(e){return Object(r.createElement)("div",{className:e&&e.data&&e.data.direction&&"no"===e.data.direction?"bwf-yes-no-node  bwf-no-node":"bwf-yes-no-node bwf-yes-node"},Object(r.createElement)(a.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("span",{className:"bwf-yes-no-wrap"},e&&e.data&&e.data.direction&&"no"===e.data.direction?Object(l.__)("No","wp-marketing-automations"):Object(l.__)("Yes","wp-marketing-automations")),Object(r.createElement)(a.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))};function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(){Te=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==De(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Me(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ge(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ze=function(e){var t=e.selected,n=void 0!==t&&t,o=e.id,i=Fe(Object(r.useState)({status:!1,loading:!0}),2),c=i[0],u=i[1],b=Object(m.a)(),d=b.deleteNode,y=b.setAutomationData,v=b.setNodeForAdd,w=b.copyNodeHere,O=b.setOpenStepModal,g=b.setModalAnchorNode,j=Object(f.a)(),E=j.getNodeDataByID,_=j.getEnableCopy,k=j.getEnableMove,N=j.getLastAddedNode,S=j.getStatLoading,x=j.getStatData,P=N(),L=_(),C=k(),A=S(),I=x();Object(r.useEffect)((function(){P==o&&y("lastAddedNode",0)}),[P]);var D=E(e.id),T=D.hasMultiParents,M=void 0!==T&&T,F=D.stepId,B=I.hasOwnProperty(F)?I[F]:{},R=G({onNodeStatClick:function(){y("showContactModalId",F),y("showContactModalType","completed")}});return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper","data-stepid":F},Object(r.createElement)(a.d,{type:"target",position:"top",isConnectable:!1}),p.Qb?Object(r.createElement)("div",{className:"bwf-inner-wrapper "+(n?"bwf-selected-node":""),onClick:function(){y("proModalContent","Exit Step"),y("showProModal",!0)}},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon icon-exit"},Object(r.createElement)(s.a,{size:26,icon:"exit"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(l.__)("Step","wp-marketing-automations")+" "+o),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Exit Automation","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"})),Object(r.createElement)("div",{className:"bwf-control-event-error"},Object(r.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer bwf-display-flex"},Object(r.createElement)(s.a,{icon:"king",size:16,color:"#E15334"}),Object(l.__)("Pro Feature","wp-marketing-automations")))):Object(r.createElement)("div",{className:"bwf-inner-wrapper "+(n?"bwf-selected-node":""),onClick:R},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon icon-exit"},Object(r.createElement)(s.a,{size:26,icon:"exit"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(l.__)("Step","wp-marketing-automations")+" "+o),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Exit Automation","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"},Object(r.createElement)(q.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations"),classes:"bwf-event-action",isDisable:!(!L&&!C),renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){var t,r;u({status:!0,onConfirm:(t=Te().mark((function t(){return Te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(e).then((function(){return u({status:!1})}));case 2:case"end":return t.stop()}}),t)})),r=function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){Me(o,r,a,i,c,"next",e)}function c(e){Me(o,r,a,i,c,"throw",e)}i(void 0)}))},function(){return r.apply(this,arguments)})}),n()}},Object(r.createElement)(U.a,{justify:"flex-start"},Object(r.createElement)(U.c,null,Object(l.__)("Delete","wp-marketing-automations")))))}}))),Object(r.createElement)("div",{className:"bwf-node-status"},Object(r.createElement)("div",{className:"bwf-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Completed","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count"},A?Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(r.createElement)(r.Fragment,null,B.hasOwnProperty("completed")?Object(p.ic)(parseInt(B.completed)):0))))),M&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-plus-paste-wrap bwf-pos-top"},L||C?Object(r.createElement)("div",{className:"bwf-drag-area",onClick:function(){return w(e,"before","")}},Object(r.createElement)("div",{className:"bwf-drag-node is-copy-paste"},Object(r.createElement)("div",{className:"bwf-node-add"}))):Object(r.createElement)("div",{className:"bwf-node-add",onClick:function(t){v(e.id,{option:"",position:"before"}),O(!0),g(t.target)}})))),Object(r.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1,style:{opacity:0}}),Object(r.createElement)(h.a,{modalTitle:Object(l.__)("Delete Exit Step","wp-marketing-automations"),deleteEntityName:Object(l.__)("exit step","wp-marketing-automations"),confirmButtonText:Object(l.__)("Delete","wp-marketing-automations"),onConfirm:c.onConfirm,isLoading:!1,onRequestClose:function(){return u({status:!1})},isOpen:c.status,isDelete:!0}))};function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(){qe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==Ue(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Be(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Re(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Be(o,r,a,i,c,"next",e)}function c(e){Be(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return He(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return He(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ve=function(e){var t=e.data,n=void 0===t?{}:t,i=e.selected,c=void 0!==i&&i,u=e.id,b=Ye(Object(r.useState)({status:!1,loading:!0}),2),d=b[0],y=b[1],v=Object(m.a)(),w=v.deleteNode,O=v.setAutomationData,g=v.setNodeForAdd,j=v.copyNodeHere,E=v.setOpenStepModal,_=v.setModalAnchorNode,k=v.showSidebar,N=Object(f.a)(),S=N.getNodeDataByID,x=N.getEnableCopy,P=N.getEnableMove,L=N.getLastAddedNode,C=N.getStatLoading,A=N.getStatData,I=L(),D=x(),T=P(),M=C(),F=A();Object(r.useEffect)((function(){I==u&&O("lastAddedNode",0)}),[I]);var B=(!Object(o.isEmpty)(n)&&n.hasOwnProperty("sidebarValues")?n.sidebarValues:{}).jump_to,R=void 0===B?{}:B,Y=R.name,H=void 0===Y?"":Y,V=R.step,$=void 0===V?"":V,J=S(e.id),W=J.hasMultiParents,Q=void 0!==W&&W,X=J.stepId,Z=F.hasOwnProperty(X)?F[X]:{},K=G({onNodeClick:function(){O("sidebarNodeData",e),k(!0)},onNodeStatClick:function(){Object(p.Sb)()?(O("showContactModalId",X),O("showContactModalType","completed")):(O("proModalContent","Jump Step"),O("showProModal",!0))}});return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper","data-stepid":X},Object(r.createElement)(a.d,{type:"target",position:"top",isConnectable:!1}),p.Qb?Object(r.createElement)("div",{className:"bwf-inner-wrapper "+(c?"bwf-selected-node":""),onClick:function(){O("proModalContent","Jump Step"),O("showProModal",!0)}},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon icon-exit"},Object(r.createElement)(s.a,{size:26,icon:"jump"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(l.__)("Step","wp-marketing-automations")+" "+u),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Jump","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"})),Object(r.createElement)("div",{className:"bwf-control-event-error"},Object(r.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer bwf-display-flex"},Object(r.createElement)(s.a,{icon:"king",size:16,color:"#E15334"}),Object(l.__)("Pro Feature","wp-marketing-automations")))):Object(r.createElement)("div",{className:"bwf-inner-wrapper "+(c?"bwf-selected-node":""),onClick:K},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon icon-exit"},Object(r.createElement)(s.a,{size:26,icon:"jump"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(l.__)("Step","wp-marketing-automations")+" "+u),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Jump","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"},Object(r.createElement)(q.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations"),classes:"bwf-event-action",isDisable:!(!D&&!T),renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,""!=$&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){Object(p.Sb)()?(O("enableCopy",!0),O("copyData",{type:"jump",data:e.data})):(O("proModalContent","Copy Step"),O("showProModal",!0)),n()}},Object(r.createElement)(U.a,{justify:"space-between"},Object(r.createElement)(U.c,null,Object(l.__)("Copy","wp-marketing-automations")),!Object(p.Sb)()&&Object(r.createElement)(U.c,null,p.e))),Object(r.createElement)(z.a,{isClickable:!0,onInvoke:Re(qe().mark((function t(){return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(p.Sb)()?(O("enableMove",!0),O("moveID",e.id),O("copyData",{type:"jump",data:e.data})):(O("proModalContent","Move Step"),O("showProModal",!0)),n();case 2:case"end":return t.stop()}}),t)})))},Object(r.createElement)(U.a,{justify:"space-between"},Object(r.createElement)(U.c,null,Object(l.__)("Move","wp-marketing-automations")),!Object(p.Sb)()&&Object(r.createElement)(U.c,null,p.e)))),Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){var t;y({status:!0,onConfirm:(t=Re(qe().mark((function t(){return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e).then((function(){return y({status:!1})}));case 2:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}),n()}},Object(r.createElement)(U.a,{justify:"flex-start"},Object(r.createElement)(U.c,null,Object(l.__)("Delete","wp-marketing-automations")))))}}))),Object(o.isEmpty)(n)||Object(o.isEmpty)(R)||""==$?Object(r.createElement)("div",{className:"bwf-control-event-error no-padding"},Object(r.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer"},Object(l.__)("Not Configured","wp-marketing-automations"))):Object(r.createElement)("div",{className:"bwf-node-step-content"},Object(r.createElement)("div",{className:"bwf-step-content"},Object(r.createElement)("div",{className:"bwf-step-brick"},Object(r.createElement)("div",{className:"bwf-step-content-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(l.__)("Jump to","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-node-content-label bwf-two-line-ellipse-text"},""!==H?H:"step #"+$))))),Object(r.createElement)("div",{className:"bwf-node-status"},Object(r.createElement)("div",{className:"bwf-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Completed","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count"},M?Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(r.createElement)(r.Fragment,null,Z.hasOwnProperty("completed")?Object(p.ic)(parseInt(Z.completed)):0))))),Q&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-plus-paste-wrap bwf-pos-top"},D||T?Object(r.createElement)("div",{className:"bwf-drag-area",onClick:function(){return j(e,"before","")}},Object(r.createElement)("div",{className:"bwf-drag-node is-copy-paste"},Object(r.createElement)("div",{className:"bwf-node-add"}))):Object(r.createElement)("div",{className:"bwf-node-add",onClick:function(t){g(e.id,{option:"",position:"before"}),E(!0),_(t.target)}})))),Object(r.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1,style:{opacity:0}}),Object(r.createElement)(h.a,{modalTitle:Object(l.__)("Delete Jump Step","wp-marketing-automations"),deleteEntityName:Object(l.__)("jump step","wp-marketing-automations"),confirmButtonText:Object(l.__)("Delete","wp-marketing-automations"),onConfirm:d.onConfirm,isLoading:!1,onRequestClose:function(){return y({status:!1})},isOpen:d.status,isDelete:!0}))};function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(){Je=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==$e(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function We(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ze=function(e){var t=e.selected,n=void 0!==t&&t,i=e.id,c=e.data,u=void 0===c?{}:c,b=Qe(Object(r.useState)({status:!1,loading:!0}),2),d=b[0],y=b[1],v=Object(m.a)(),w=v.deleteNode,O=v.setAutomationData,g=v.setNodeForAdd,j=v.copyNodeHere,E=v.setOpenStepModal,_=v.setModalAnchorNode,k=v.showSidebar,N=Object(f.a)(),S=N.getNodeDataByID,x=N.getEnableCopy,P=N.getEnableMove,L=N.getLastAddedNode,C=N.getStatLoading,A=N.getStatData,I=L(),D=x(),T=P(),M=C(),F=A();Object(r.useEffect)((function(){I==i&&O("lastAddedNode",0)}),[I]);var B=S(e.id),R=B.hasMultiParents,Y=void 0!==R&&R,H=B.stepId,V=F.hasOwnProperty(H)?F[H]:{},$=!Object(o.isEmpty)(u)&&u.hasOwnProperty("sidebarValues")?u.sidebarValues:{},J=$.split_path,W=void 0===J?"":J,Q=$.title,Z=void 0===Q?"":Q,K=$.desc,ee=void 0===K?"":K,te=G({onNodeClick:function(){O("sidebarNodeData",e),k(!0)},onNodeStatClick:function(){Object(p.Sb)()?(O("showContactModalId",H),O("showContactModalType","completed"),O("contactModalData",{split:!0,pathCount:W})):(O("proModalContent","Split Path Step"),O("showProModal",!0))},onAnalyticsClick:function(){}});return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper","data-stepid":H},Object(r.createElement)(a.d,{type:"target",position:"top",isConnectable:!1}),p.Qb?Object(r.createElement)("div",{className:"bwf-inner-wrapper "+(n?"bwf-selected-node":""),onClick:function(){O("proModalContent","Split Path Step"),O("showProModal",!0)}},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon icon-split-test"},Object(r.createElement)(s.a,{size:26,icon:"split-test"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(l.__)("Step","wp-marketing-automations")+" "+i),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Split Path","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"})),Object(r.createElement)("div",{className:"bwf-control-event-error"},Object(r.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer bwf-display-flex"},Object(r.createElement)(s.a,{icon:"king",size:16,color:"#E15334"}),Object(l.__)("Pro Feature","wp-marketing-automations")))):Object(r.createElement)("div",{className:"bwf-inner-wrapper "+(n?"bwf-selected-node":""),onClick:te},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon icon-split-test"},Object(r.createElement)(s.a,{size:26,icon:"split-test"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(l.__)("Step","wp-marketing-automations")+" "+i),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(l.__)("Split Path","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"},Object(r.createElement)(X,{node:e}),Object(r.createElement)(q.a,{label:Object(l.__)("Quick Actions","wp-marketing-automations"),classes:"bwf-event-action",isDisable:!(!D&&!T),renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){Object(p.Sb)()?(O("enableMove",!0),O("moveID",e.id),O("copyData",{type:"split",data:e.data,id:e.id})):(O("proModalContent",Object(l.__)("Move Step","wp-marketing-automations")),O("showProModal",!0)),n()}},Object(r.createElement)(U.a,{justify:"space-between"},Object(r.createElement)(U.c,null,Object(l.__)("Move","wp-marketing-automations")),!Object(p.Sb)()&&Object(r.createElement)(U.c,null,p.e))),Object(r.createElement)(z.a,{isClickable:!0,onInvoke:function(){var t,r;y({status:!0,onConfirm:(t=Je().mark((function t(){return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e).then((function(){return y({status:!1})}));case 2:case"end":return t.stop()}}),t)})),r=function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){We(o,r,a,i,c,"next",e)}function c(e){We(o,r,a,i,c,"throw",e)}i(void 0)}))},function(){return r.apply(this,arguments)})}),n()}},Object(r.createElement)(U.a,{justify:"flex-start"},Object(r.createElement)(U.c,null,Object(l.__)("Delete","wp-marketing-automations")))))}}))),Object(o.isEmpty)(u)||Object(o.isEmpty)(W)?Object(r.createElement)("div",{className:"bwf-control-event-error"},Object(r.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer"},Object(l.__)("Not Configured","wp-marketing-automations"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-step-content"},Object(r.createElement)("div",{className:"bwf-step-content"},Object(r.createElement)("div",{className:"bwf-step-brick bwf-split-wrap"},Object(r.createElement)("div",{className:"bwf-step-content-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},""!==Z?Z:"-"),""!==ee&&Object(r.createElement)("div",{className:"bwf-node-content-label bwf-node-desc bwf-two-line-ellipse-text"},ee)),Object(r.createElement)("div",{className:"bwf-node-analytics bwf-split-path-analytics"},Object(r.createElement)("div",{className:"bwf-analytics-btn",onClick:function(){Object(p.Sb)()?(O("declareWinner",{nodeId:i,stepID:H,title:Z}),O("showSplitWinner",!0)):(O("proModalContent",Object(l.__)("Split Step","wp-marketing-automations")),O("showProModal",!0))}},!Object(p.Sb)()&&Object(r.createElement)(s.a,{icon:"king",size:14,color:"#fff"}),Object(l.__)("View Results","wp-marketing-automations")))))),Object(r.createElement)("div",{className:"bwf-node-status bwf-node-mt-10"},Object(r.createElement)("div",{className:"bwf-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(l.__)("Completed","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count"},M?Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-10"}):Object(r.createElement)(r.Fragment,null,V.hasOwnProperty("completed")?Object(p.ic)(parseInt(V.completed)):0)))))),Y&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-plus-paste-wrap bwf-pos-top"},D||T?Object(r.createElement)("div",{className:"bwf-drag-area",onClick:function(){return j(e,"before","")}},Object(r.createElement)("div",{className:"bwf-drag-node is-copy-paste"},Object(r.createElement)("div",{className:"bwf-node-add"}))):Object(r.createElement)("div",{className:"bwf-node-add",onClick:function(t){g(e.id,{option:"",position:"before"}),E(!0),_(t.target)}})))),Object(r.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1}),Object(r.createElement)(h.a,{modalTitle:Object(l.__)("Delete Split Step","wp-marketing-automations"),deleteEntityName:Object(l.__)("split step","wp-marketing-automations"),confirmButtonText:Object(l.__)("Delete","wp-marketing-automations"),onConfirm:d.onConfirm,isLoading:!1,onRequestClose:function(){return y({status:!1})},isOpen:d.status,isDelete:!0}))},Ke=function(e){var t=e.data,n=void 0===t?{}:t,o=e.id,i=(0,Object(f.a)().getNodeDataByID)(o).stepId,c=Object(p.Ac)(),s=n.path,u=void 0===s?"1":s;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-splitpath-node-wrapper","data-stepid":i},Object(r.createElement)(a.d,{type:"target",position:"top",isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-split-node split-path-"+u},Object(l.__)("Path","wp-marketing-automations")+" "+c[u])),Object(r.createElement)(a.d,{type:"source",position:"bottom",isConnectable:!1,style:{opacity:0}}))},et=(n(1372),n(85)),tt=n(112),nt=n(348),rt=n(23);n(1373);function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){it(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function it(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var st=function(e){var t=Object(r.useRef)(null),n=e.mergetag,a=e.copyTagToClipBoard,i=e.automationId,s=ct(Object(r.useState)({}),2),m=s[0],f=s[1],p=ct(Object(r.useState)({}),2),b=p[0],d=p[1],h=ct(Object(r.useState)({}),2),y=h[0],v=h[1],w=n.schema,O=void 0===w?[]:w,g=n.tag_name,j=void 0===g?"":g,E=n.default_val,_=void 0===E?[]:E;Object(r.useEffect)((function(){var e={},t={};O.map((function(n){e[n.id]=n.type,t[n.id]=n})),d(e),v(t)}),[O]);var k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!1,r=t.fields,a=t.relation,o=void 0===a?"OR":a;o=o.toUpperCase();try{var i=null;if("OR"===o){if(r&&Array.isArray(r))for(var c=0;c<r.length;c++){i=e[r[c].id];var l=void 0===r[c].value||r[c].value;if(""!=l&&i==l||""==l&&""!=i&&null!=i)return!0}}else"AND"==o&&r&&Array.isArray(r)&&(n=r.every((function(t){i=e[t.id];var n=void 0===t.value||t.value;return(""===n||i==n)&&(""!=n||""!=i&&null!=i)})))}catch(e){console.log(e)}return n},N=Object(r.useMemo)((function(){var e=["{{"+j];if(!Object(o.isEmpty)(m))if("cart_recovery_link"===j){var t=m.coupon_type,n=void 0===t?"static":t,r=m.dynamic_coupon,a=void 0===r?"":r,i=m.static_coupon,c=void 0===i?"":i;"static"===n&&""!==c?e.push("coupon='"+c+"'"):"dynamic"===n&&""!==a&&e.push("coupon='"+a+"'")}else Object.entries(m).map((function(t){var n=ct(t,2),r=n[0],a=n[1];if(!y[r].hasOwnProperty("toggler")||Object(o.isEmpty)(y[r].toggler)||k(m,y[r].toggler,y[r]))if("search"!=b[r]||Object(o.isEmpty)(a))""!==a&&e.push(r+"='"+a+"'");else{var i=[];a.map((function(e){i.push(e.id)})),e.push(r+"='"+i.join(",")+"'")}}));return e.join(" ")+"}}"}),[m]);return Object(r.createElement)("div",{className:"bwf-merge-tag-wrap bwf_w_full"},Object(r.createElement)(et.a,{onChange:function(e){!function(e){var t=ot(ot({},_),m);t[e.name]=e.value,f(t)}(e)},initialValues:ot(ot({},_),m),validate:function(){return!1}},(function(e){var n=e.getInputProps,a=e.values;e.errors,e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"wr_content",ref:t},Object(r.createElement)("div",null,O.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:t},(Object(o.isEmpty)(e.toggler)||k(a,e.toggler,e))&&e.wrap_before&&Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_before}}),e.type?Object(r.createElement)(r.Fragment,null,!1!==e.show&&(Object(o.isEmpty)(e.toggler)||k(a,e.toggler,e))&&Object(r.createElement)(tt.a,{input:e,formProps:n(e.id),values:a,automationId:i})):e.hint?Object(r.createElement)(r.Fragment,{dangerouslySetInnerHTML:{__html:e.hint},className:c()(e.class)}):null,(Object(o.isEmpty)(e.toggler)||k(a,e.toggler,e))&&e.wrap_after&&Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_after}}))})))))})),Object(r.createElement)("div",{className:"bwf-merge-tag-config-view"},Object(r.createElement)("span",{className:"bwf-merge-tag"},N),Object(r.createElement)("div",{className:"bwf-display-flex bwf-j-end"},Object(r.createElement)(u.Button,{isPrimary:!0,onClick:function(){a(N)},disabled:(O.map((function(e){if(e.hasOwnProperty("required")&&e.required&&(!m.hasOwnProperty(e.id)||""===m[e.id]))return!1})),!(""!==N))},Object(l.__)("Copy","wp-marketing-automations")))))},ut=n(199);function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ht=function(e){var t=Object(r.useContext)(p.h),n=Object(r.useContext)(ut.a).setSelectedMergeTag,a=e.isOpen,i=e.onRequestClose,m=e.automationID,b=bt(Object(r.useState)(""),2),d=b[0],h=b[1],y=bt(Object(r.useState)(""),2),v=y[0],w=y[1],O=bt(Object(r.useState)({}),2),g=O[0],j=O[1],E=(0,Object(f.a)().getMergeTagList)();Object(r.useEffect)((function(){a||(j({}),h(""),Object(o.isEmpty)(E)||w(Object.keys(E)[0]))}),[a]);var _=function(){i&&i()},k=function(e){n(e);var r=document.createElement("textarea");r.value=e,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),t(Object(l.__)("Merge tag copied.","wp-marketing-automations")),Object(p.Eb)(t,3e3),_()},N=function(){var e,t=(e={},Object.entries(E).map((function(t){var n=bt(t,2),r=n[0],a=n[1];""!==v?v==r&&(e=a):""!==d?Object.entries(a).map((function(t){var n=bt(t,2),r=n[0],a=n[1];(r.includes(d)||a.hasOwnProperty("tag_name")&&a.tag_name.includes(d))&&(e[r]=a)})):e=ft(ft({},e),a)})),Object.values(e).sort((function(e,t){return e.priority-t.priority})));return Object(o.isEmpty)(t)?Object(r.createElement)("tr",null,Object(r.createElement)("td",{className:"bwf-no-merge-tag"},Object(l.__)("No Merge Tag Available","wp-marketing-automations"))):Object(r.createElement)(r.Fragment,null,Object.entries(t).map((function(e,t){var n=bt(e,2),a=(n[0],n[1]);return Object(r.createElement)("tr",{key:"row"+t},Object(r.createElement)("td",null,Object(r.createElement)("span",{className:"bwf-tag-label"},a.tag_description)),Object(r.createElement)("td",null,Object(r.createElement)("span",{className:"bwf-tag-slug"},"{{"+a.tag_name+"}}")),Object(r.createElement)("td",null,a.hasOwnProperty("schema")?Object(r.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){return j(a)},title:Object(l.__)("Configure","wp-marketing-automations")},Object(r.createElement)(s.a,{color:"#353030",icon:"settings"})):Object(r.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){return k("{{"+a.tag_name+"}}")},title:Object(l.__)("Copy","wp-marketing-automations")},Object(r.createElement)(s.a,{color:"#353030",icon:"duplicate"}))))})))};return a?Object(r.createElement)(u.Modal,{className:"bwf-admin-modal bwf-event-search-modal bwf-event-search-modal__merge-tag bwf-admin-modal-xl",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-modal-search-header"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(o.isEmpty)(g)?Object(l.__)("Merge Tags","wp-marketing-automations"):Object(r.createElement)("div",{className:"bwf-display-flex"},Object(r.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){j({})}},Object(r.createElement)(s.a,{icon:Object(l.isRTL)()?"arrow-right":"arrow-left"})),g.hasOwnProperty("tag_description")?g.tag_description:"")),Object(r.createElement)("div",{className:"bwf-modal-search-wrap"},Object(o.isEmpty)(g)&&Object(r.createElement)("div",{className:"bwf-component-search-control"},Object(r.createElement)(s.a,{icon:"search",size:15}),Object(r.createElement)(u.TextControl,{value:d,onChange:function(e){""===e?Object(o.isEmpty)(E)||w(Object.keys(E)[0]):w(""),h(e)},placeholder:Object(l.__)("Search by name","wp-marketing-automations")}))),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",onClick:_},Object(r.createElement)(s.a,{icon:"close",size:20}))),Object(r.createElement)("div",{className:"bwf-event-modal-main"},Object(r.createElement)("div",{className:"bwf-event-modal-body bwf-merge-modal-content"+(Object(o.isEmpty)(g)&&!Object(o.isEmpty)(E)?"":" gridfull")},Object(o.isEmpty)(g)?Object(o.isEmpty)(E)?Object(r.createElement)("div",{className:"bwf-modal-content-content"},Object(r.createElement)("div",{className:"bwf-modal-content-brick no-padding set-height"},Object(r.createElement)("div",{className:"modal-brick-wrap bwfan_pb20"},Object(r.createElement)("div",{className:"bwf-brick-content"},Object(r.createElement)("div",{className:"bwf-merge-tag-list"},Object(r.createElement)("div",{className:"bwf-no-merge-tag"},Object(l.__)("No Merge Tag Available","wp-marketing-automations"))))))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-sidebar"},Object(r.createElement)("div",{className:"bwf-modal-filter-wrap"},Object.keys(E).map((function(e){return Object(r.createElement)("div",{key:e,className:c()("bwf-modal-filter",{active:v===e}),onClick:function(){h(""),w(e)}},e)})))),Object(r.createElement)("div",{className:"bwf-modal-content-content"},Object(r.createElement)("div",{className:"bwf-modal-content-brick no-padding set-height"},Object(r.createElement)("div",{className:"modal-brick-wrap bwfan_pb20"},Object(r.createElement)("div",{className:"bwf-brick-content"},Object(r.createElement)("div",{className:"bwf-merge-tag-list"},Object(r.createElement)("table",null,Object(r.createElement)("tbody",null,N())))))))):Object(r.createElement)(st,{mergetag:g,copyTagToClipBoard:k,automationId:m})))):""},yt=n(28);function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(){wt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==vt(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach((function(t){jt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Et(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function _t(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Et(o,r,a,i,c,"next",e)}function c(e){Et(o,r,a,i,c,"throw",e)}i(void 0)}))}}function kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var St=function(){var e=Object(r.useContext)(p.h),t=Object(f.a)(),n=t.getSidebarNodeData,a=t.getSelectedSidebarData,i=t.getAutomationId,u=t.getNodeDataByID,b=t.getAutomationData,h=(0,t.getautomationMeta)(),v=Object(m.a)(),w=v.showSidebar,O=v.setNodeDatabyId,g=v.setAutomationData,j=b().event,E=void 0===j?"":j,_=i(),k=Object(r.useRef)(null),N=kt(Object(r.useState)(!1),2),S=N[0],x=N[1],P=kt(Object(r.useState)(""),2),L=P[0],C=P[1],A=kt(Object(r.useState)(!1),2),I=A[0],D=A[1],T=kt(Object(r.useState)(!1),2),M=T[0],F=T[1],G=kt(Object(r.useState)([]),2),z=G[0],U=G[1],q=kt(Object(r.useState)(!1),2),B=q[0],R=q[1],Y=kt(Object(r.useState)(!1),2),H=Y[0],V=Y[1],$=n(),J=kt(Object(r.useState)(!1),2),W=J[0],Q=J[1],X=!Object(o.isEmpty)($)&&$.hasOwnProperty("data")?$.data:{},Z=Object(o.isEmpty)($)?{}:a($),K=Z.side_header,ee=void 0===K?[]:K,te=!Object(o.isEmpty)(X)&&X.hasOwnProperty("sidebarValues")?X.sidebarValues:{},ne=Object(o.isEmpty)(Z)?{}:Z,re=ne.fields,ae=void 0===re?[]:re,oe=ne.default_values,ie=void 0===oe?{}:oe,ce=!Object(o.isEmpty)($)&&$.hasOwnProperty("id")?u($.id):{},le=ce.stepId,se=void 0===le?0:le,ue=ce.data;(void 0===ue?{}:ue).sidebarValues;Object(r.useEffect)((function(){U([]),x(!1)}),[]);var me=function(e,t,n){var r=!1,a=t.fields,o=t.relation,i=void 0===o?"OR":o;i=i.toUpperCase();try{var c=null;if("OR"===i){if(a&&Array.isArray(a))for(var l=0;l<a.length;l++){c=e[a[l].id];var s=void 0===a[l].value||a[l].value;if(Array.isArray(s)&&s.includes(c))return!0;if(""!=s&&c==s||""==s&&""!=c&&null!=c)return!0}}else"AND"==i&&a&&Array.isArray(a)&&(r=a.every((function(t){c=e[t.id];var n=void 0===t.value||t.value;return!(!Array.isArray(n)||!n.includes(c))||(""===n||c==n)&&(""!=n||""!=c&&null!=c)})))}catch(e){console.log(e)}return r},fe=[];Object(o.isEmpty)(ae)||ae.forEach((function(e){e.hasOwnProperty("required")&&e.required&&fe.push(e)}));var pe=function(e){var t=!1;return Object(o.isObject)(e)?Object.keys(e).map((function(n){["",void 0,null].includes(e[n])&&(t=!0)})):["",void 0,null].includes(e)&&(t=!0),t},be=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={};return fe.map((function(r){if(r.hasOwnProperty("toggler")&&!Object(o.isEmpty)(r.toggler)&&!me(e,r.toggler))return!1;if((Array.isArray(e[r.id])&&0===e[r.id].length||""===e[r.id]||void 0===e[r.id])&&(n[r.id]=r.hasOwnProperty("errorMsg")?r.errorMsg:Object(l.__)("This is required field.","wp-marketing-automations")),"custom_fields"===r.id&&e[r.id].map((function(e,t){!e.hasOwnProperty("field_value")||""===e.field_value||pe(e.field_value)?n["field_value_"+t]=r.hasOwnProperty("errorMsg")?r.errorMsg:Object(l.__)("This is required field.","wp-marketing-automations"):n.hasOwnProperty(r.id)&&delete n[r.id]})),"bwfan_email_data"===r.id)if(e.hasOwnProperty("bwfan_email_data")){e.bwfan_email_data.hasOwnProperty("subject")&&""===e.bwfan_email_data.subject&&(n[r.id]="error");var a=Object(p.C)(),i=[],c=e.bwfan_email_data,s=!(!c.hasOwnProperty("data")||Object(o.isEmpty)(c.data)||!c.data.hasOwnProperty("isTransactional"))&&c.data.isTransactional,u="";c.hasOwnProperty("template")&&(u=c.template),u.includes("{{mail_footer}}")||(s||a.includes("unsubscribe_link")||u.includes("unsubscribe_link"))&&(s||a.includes("business_name")||u.includes("business_name"))&&(s||a.includes("business_address")||u.includes("business_address"))||(s||a.includes("unsubscribe_link")||u.includes("unsubscribe_link")||i.push("{{unsubscribe_link}}"),s||a.includes("business_name")||u.includes("business_name")||i.push("{{business_name}}"),s||a.includes("business_address")||u.includes("business_address")||i.push("{{business_address}}")),Object(o.isEmpty)(i)?C(""):(n[r.id]="error",t&&C(Object(l.__)("The required merge tags","wp-marketing-automations")+" "+i.join(", ")+(i.length>1?" are ":" is ")+" "+Object(l.__)("missing in the email body.","wp-marketing-automations")))}else n[r.id]="error";if("coupon_data"===r.id)if(e.hasOwnProperty(r.id)){var m=e[r.id],f=m.type,b=void 0===f?"new":f,d=m.coupon_id,h=void 0===d?{}:d,y=m.general,v=void 0===y?{}:y;("existing"===b&&(Object(o.isEmpty)(h)||!h.hasOwnProperty("key")||""===h.key)||"new"===b&&(Object(o.isEmpty)(v)||!v.hasOwnProperty("amount")||parseFloat(v.amount)<=0))&&(n[r.id]="error")}else n[r.id]="error"})),t&&U(n),n},de=function(){var t=_t(wt().mark((function t(n){var r,a,i,c,s=arguments;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!(s.length>1&&void 0!==s[1])||s[1],a=[],a=r?be(n):[],!Object(o.isEmpty)(a)){t.next=21;break}return X.sidebarValues=n,R(!0),t.prev=6,i={data:{data:{sidebarData:n}}},r||Object(o.isEmpty)(Z)||!Z.hasOwnProperty("slug")||"wp_sendemail"!==Z.slug||(c=be(n,!1),Object(o.isEmpty)(c)||(i.updateStatus=2)),t.next=11,d()({path:Object(p.y)("/automation/".concat(_,"/step/").concat(se)),method:"POST",data:i}).then((function(t){if(200!==t.code)throw Error(Object(p.t)(null==t?void 0:t.message));var n="";t.hasOwnProperty("result")&&t.result.hasOwnProperty("desc_text")&&!Object(o.isEmpty)(t.result.desc_text)&&(n=t.result.desc_text),O($.id,gt(gt({},X),{},{desc_text:n}),{step_status:i.hasOwnProperty("updateStatus")&&2===i.updateStatus?2:1}),t.hasOwnProperty("result")&&t.result.hasOwnProperty("meta")&&g("meta",gt(gt({},h),t.result.meta)),r&&(e(t.message),H||setTimeout((function(){w(!1)}),100)),R(!1),F(!1)})).catch((function(e){throw Error(Object(p.t)(null==e?void 0:e.message))}));case 11:t.next=18;break;case 13:t.prev=13,t.t0=t.catch(6),g("modalData",{status:!0,modalTitle:Object(l.__)("Update Action","wp-marketing-automations"),error:null===t.t0||void 0===t.t0?void 0:t.t0.message}),R(!1),F(!1);case 18:Object(p.Eb)(e,3e3),t.next=24;break;case 21:e(Object(l.__)("Validation failed. Please check the fields for error.","wp-marketing-automations")),Object(p.Eb)(e,3e3),F(!1);case 24:case"end":return t.stop()}}),t,null,[[6,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(r.createElement)(p.f.Provider,{value:{errorList:z,setErrorList:U,stepId:se}},Object(r.createElement)(p.c.Provider,{value:{isOpenTags:S,setOpenTags:x}},Object(r.createElement)("div",{className:"wr_header"},Object(r.createElement)("div",{className:"bwf-node-icon icon-action"},Object(r.createElement)(s.a,{size:22,icon:"charge"})),Object(r.createElement)("div",{className:"wr_event_title"},Z.hasOwnProperty("action_name")?Z.action_name:""),Object(r.createElement)("div",{className:"wr_event_variant"},ee.includes("link-trigger")&&Object(r.createElement)(nt.a,{canCreate:!0,isLinkTriggerOpen:W,setLinkTriggerOpen:Q,hideButton:!1}),ee.includes("merge-tag")&&Object(r.createElement)("span",{onClick:function(){x(!0)},className:"bwf-cursor-pointer bwf-modal-icon-link-trigger",key:"merge-tag"},Object(r.createElement)(rt.a,{icon:"merge-tag",iconSize:24,size:"auto",toolTipText:Object(r.createElement)("span",{className:"bwfan_tooltip_text bwf-w-120","data-position":"top"},Object(l.__)("Merge tags","wp-marketing-automations"))}))),Object(r.createElement)("div",{className:"wr_close bwf-cursor-pointer",onClick:function(){return w(!1)}},Object(r.createElement)(s.a,{icon:"close"}))),Object(o.isEmpty)(ae)?Object(r.createElement)("div",{className:"wr_content"},Object(r.createElement)("div",{className:"bwf-single-automation-notice is-info"},Object(l.__)("No settings to configure.","wp-marketing-automations"))):Object(r.createElement)(et.a,{onSubmit:function(){var e=_t(wt().mark((function e(t){var n,r=arguments;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(r.length>1&&void 0!==r[1])||r[1],e.next=3,de(t,n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),initialValues:gt(gt({},ie),te),validate:function(){return!1}},(function(e){var t,n=e.getInputProps,a=e.values,i=e.errors,s=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:(t="wr_content",Z.hasOwnProperty("slug")&&(t=t+" wr_action_"+Z.slug),t),ref:k},Object(r.createElement)("div",null,!Object(o.isEmpty)(Z)&&Z.hasOwnProperty("slug")&&"wp_sendemail"===Z.slug&&""!==L&&Object(r.createElement)(yt.a,{className:"bwf-error-notice",status:"error"},L),ae.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:t},(Object(o.isEmpty)(e.toggler)||me(a,e.toggler))&&e.wrap_before&&Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_before}}),e.type?Object(r.createElement)(r.Fragment,null,!1!==e.show&&(Object(o.isEmpty)(e.toggler)||me(a,e.toggler))&&Object(r.createElement)(tt.a,{input:e,formProps:n(e.id),values:a,isOpenTemplate:I,setOpenTemplate:function(){Object(p.Sb)()?D(!I):g("showProModal",!0)},automationId:_,automationEvent:E,setMergeTagModal:x,saveNodeDataOnSubmit:s})):e.hint?Object(r.createElement)(r.Fragment,{dangerouslySetInnerHTML:{__html:e.hint},className:c()(e.class)}):null,(Object(o.isEmpty)(e.toggler)||me(a,e.toggler))&&e.wrap_after&&Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_after}}))})))),Object(r.createElement)("div",{className:"wr_footer"},Object(r.createElement)(y.a,{className:"bwf-cancel-btn",onClick:function(){return w(!1)}},Object(l.__)("Cancel","wp-marketing-automations")),!Object(o.isEmpty)(Z)&&Z.hasOwnProperty("slug")&&"wp_sendemail"===Z.slug&&Object(r.createElement)(y.a,{isSecondary:!0,onClick:function(){V(!1),F(!0),setTimeout((function(){return s()}),100)},isBusy:M,disabled:Object.keys(i).length},Object(l.__)("Save & Close","wp-marketing-automations")),Object(r.createElement)(y.a,{isPrimary:!0,className:"bwf-no-ripple",onClick:function(){!Object(o.isEmpty)(Z)&&Z.hasOwnProperty("slug")&&"wp_sendemail"===Z.slug&&V(!0),setTimeout((function(){return s()}),100)},isBusy:B&&!M},Object(l.__)("Save","wp-marketing-automations"))))})),Object(r.createElement)(ht,{isOpen:S,onRequestClose:x,automationID:_})))};n(1374);function xt(e){return function(e){if(Array.isArray(e))return Ct(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Lt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||Lt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(e,t){if(e){if("string"==typeof e)return Ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ct(e,t):void 0}}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var At=function(e){var t=e.options,n=e.selected,a=e.setSelected,i=e.selectedContent,c=void 0===i?"":i,l=e.liteDummyData,u=void 0===l?[]:l,m=Pt(Object(r.useState)([]),2),f=m[0],b=m[1];return Object(o.isEmpty)(t)?Object(r.createElement)(r.Fragment,null):Object(r.createElement)(r.Fragment,null,t.map((function(e,t){if(Object(o.isEmpty)(e)||!e.hasOwnProperty("value"))return!1;var i=e.value==n?"selected":"";return Object(r.createElement)("div",{className:"bwf-custom-radio-control",key:t},Object(r.createElement)("div",{className:"bwf-custom-radio-option",key:e.value,onClick:function(){return a(e.value)}},Object(r.createElement)("div",{className:"bwf-select-option-indicator "+i},e.hasOwnProperty("isProFeature")&&e.isProFeature&&!Object(p.Sb)()?Object(r.createElement)(s.a,{icon:"king"}):Object(r.createElement)("div",{className:"bwf-option-mark-outer"},Object(r.createElement)("div",{className:"bwf-option-mark-inner"}))),Object(r.createElement)("div",{className:"bwf-select-option-info"},Object(r.createElement)("div",{className:"bwf-bold"},e.hasOwnProperty("label")?e.label:""),Object(r.createElement)("div",{className:"bwf-desc"},e.hasOwnProperty("desc")?e.desc:"")),e.hasOwnProperty("isProFeature")&&e.isProFeature&&!Object(p.Sb)()&&Object(r.createElement)("a",{onClick:function(t){t.stopPropagation();var n=xt(f);n.includes(e.value)?n.pop(e.value):n.push(e.value),b(n)},className:"bwf-no-underline bwf-cursor-pointer"},"Explore")),f.includes(e.value)&&u.hasOwnProperty(e.value)&&Object(r.createElement)(r.Fragment,null,u[e.value]),i&&Object(r.createElement)("div",{className:"bwf-option-content"},c))})))},It=n(352),Dt=n(103);n(1375);function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(n),!0).forEach((function(t){Ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ut=function(e){var t=Object(r.useRef)(null),n=e.mergetag,a=e.copyTagToClipBoard,i=e.automationId,s=Gt(Object(r.useState)({}),2),m=s[0],f=s[1],p=Gt(Object(r.useState)({}),2),b=p[0],d=p[1],h=n.schema,y=void 0===h?[]:h,v=n.tag_name,w=void 0===v?"":v,O=n.default_val,g=void 0===O?[]:O;Object(r.useEffect)((function(){var e=[];y.map((function(t){e[t.id]=t.type})),d(e)}),[y]);var j,E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!1,r=t.fields,a=t.relation,o=void 0===a?"OR":a;o=o.toUpperCase();try{var i=null;if("OR"===o){if(r&&Array.isArray(r))for(var c=0;c<r.length;c++){i=e[r[c].id];var l=void 0===r[c].value||r[c].value;if(""!=l&&i==l||""==l&&""!=i&&null!=i)return!0}}else"AND"==o&&r&&Array.isArray(r)&&(n=r.every((function(t){i=e[t.id];var n=void 0===t.value||t.value;return(""===n||i==n)&&(""!=n||""!=i&&null!=i)})))}catch(e){console.log(e)}return n},_=function(){var e=["{{"+w];if(!Object(o.isEmpty)(m))if("cart_recovery_link"===w){var t=m.coupon_type,n=void 0===t?"":t,r=m.dynamic_coupon,a=void 0===r?"":r,i=m.static_coupon,c=void 0===i?"":i;"static"===n&&""!==c?e.push("coupon='"+c+"'"):"dynamic"===n&&""!==a&&e.push("coupon='"+a+"'")}else Object.entries(m).map((function(t){var n=Gt(t,2),r=n[0],a=n[1];if("search"!=b[r]||Object(o.isEmpty)(a))""!==a&&e.push(r+"='"+a+"'");else{var i=[];a.map((function(e){i.push(e.id)})),e.push(r+"='"+i.join(",")+"'")}}));return e.join(" ")+"}}"},k=function(){var e=_();return y.map((function(t){!t.hasOwnProperty("required")||!t.required||m.hasOwnProperty(t.id)&&""!==m[t.id]||(e="")})),""!==e};return Object(r.createElement)("div",{className:"bwf-merge-tag-wrap bwf_w_full"},Object(r.createElement)(et.a,{onChange:function(e){!function(e){var t=Mt({},m);t[e.name]=e.value,f(t)}(e)},initialValues:Mt(Mt({},g),m),validate:function(){return!1}},(function(e){var n=e.getInputProps,a=e.values;e.errors,e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"wr_content",ref:t},Object(r.createElement)("div",null,y.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:t},(Object(o.isEmpty)(e.toggler)||E(a,e.toggler,e))&&e.wrap_before&&Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_before}}),e.type?Object(r.createElement)(r.Fragment,null,!1!==e.show&&(Object(o.isEmpty)(e.toggler)||E(a,e.toggler,e))&&Object(r.createElement)(tt.a,{input:e,formProps:n(e.id),values:a,automationId:i})):e.hint?Object(r.createElement)(r.Fragment,{dangerouslySetInnerHTML:{__html:e.hint},className:c()(e.class)}):null,(Object(o.isEmpty)(e.toggler)||E(a,e.toggler,e))&&e.wrap_after&&Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_after}}))})))))})),(j=_(),Object(r.createElement)("div",{className:"bwf-merge-tag-config-view"},Object(r.createElement)("span",{className:"bwf-merge-tag"},j),Object(r.createElement)("div",{className:"bwf-display-flex bwf-j-end"},Object(r.createElement)(u.Button,{isPrimary:!0,onClick:function(){a(j)},disabled:!k()},Object(l.__)("Select","wp-marketing-automations"))))))};function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){Rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ht(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vt=function(e){var t=Object(r.useContext)(ut.a).setSelectedMergeTag,n=e.isOpen,a=e.onRequestClose,i=e.automationID,m=e.onSelect,p=Yt(Object(r.useState)(""),2),b=p[0],d=p[1],h=Yt(Object(r.useState)(""),2),y=h[0],v=h[1],w=Yt(Object(r.useState)({}),2),O=w[0],g=w[1],j=(0,Object(f.a)().getDelayTagList)();Object(r.useEffect)((function(){n||(g({}),d(""),Object(o.isEmpty)(j)||v(Object.keys(j)[0]))}),[n]);var E=function(){a&&a()},_=function(e){t(e),m(e),E()},k=function(){var e,t=(e={},Object.entries(j).map((function(t){var n=Yt(t,2),r=n[0],a=n[1];""!==y?y==r&&(e=a):""!==b?Object.entries(a).map((function(t){var n=Yt(t,2),r=n[0],a=n[1];(r.includes(b)||a.hasOwnProperty("tag_name")&&a.tag_name.includes(b))&&(e[r]=a)})):e=Bt(Bt({},e),a)})),e);return Object(o.isEmpty)(t)?Object(r.createElement)("tr",null,Object(r.createElement)("td",{className:"bwf-no-merge-tag"},Object(l.__)("No Delay Tag Available","wp-marketing-automations"))):Object(r.createElement)(r.Fragment,null,Object.entries(t).map((function(e,t){var n=Yt(e,2),a=(n[0],n[1]);return Object(r.createElement)("tr",{key:"row"+t},Object(r.createElement)("td",null,Object(r.createElement)("span",{className:"bwf-tag-label"},a.tag_description)),Object(r.createElement)("td",null,Object(r.createElement)("span",{className:"bwf-tag-slug"},"{{"+a.tag_name+"}}")),Object(r.createElement)("td",null,a.hasOwnProperty("schema")?Object(r.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){return g(a)},title:Object(l.__)("Configure","wp-marketing-automations")},Object(r.createElement)(s.a,{color:"#353030",icon:"settings"})):Object(r.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){return _("{{"+a.tag_name+"}}")},title:Object(l.__)("Copy","wp-marketing-automations")},Object(r.createElement)(s.a,{color:"#353030",icon:"duplicate"}))))})))};return n?Object(r.createElement)(u.Modal,{className:"bwf-admin-modal bwf-event-search-modal bwf-event-search-delay-tag bwf-admin-modal-xl bwf-overflow-remove",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-modal-search-header"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(o.isEmpty)(O)?Object(l.__)("Delay Tags","wp-marketing-automations"):Object(r.createElement)("div",{className:"bwf-display-flex"},Object(r.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){g({})}},Object(r.createElement)(s.a,{icon:Object(l.isRTL)()?"arrow-right":"arrow-left"})),O.hasOwnProperty("tag_description")?O.tag_description:"")),Object(r.createElement)("div",{className:"bwf-modal-search-wrap"},Object(o.isEmpty)(O)&&Object(r.createElement)("div",{className:"bwf-component-search-control"},Object(r.createElement)(s.a,{icon:"search",size:15}),Object(r.createElement)(u.TextControl,{value:b,onChange:function(e){""===e?Object(o.isEmpty)(j)||v(Object.keys(j)[0]):v(""),d(e)},placeholder:Object(l.__)("Search by name","wp-marketing-automations")}))),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",onClick:E},Object(r.createElement)(s.a,{icon:"close",size:20}))),Object(r.createElement)("div",{className:"bwf-event-modal-main"},Object(r.createElement)("div",{className:"bwf-event-modal-body bwf-merge-modal-content"+(Object(o.isEmpty)(O)&&!Object(o.isEmpty)(j)?"":" gridfull")},Object(o.isEmpty)(O)?Object(o.isEmpty)(j)?Object(r.createElement)("div",{className:"bwf-modal-content-content"},Object(r.createElement)("div",{className:"bwf-modal-content-brick no-padding set-height"},Object(r.createElement)("div",{className:"modal-brick-wrap bwfan_pb20"},Object(r.createElement)("div",{className:"bwf-brick-content"},Object(r.createElement)("div",{className:"bwf-merge-tag-list"},Object(r.createElement)("div",{className:"bwf-no-merge-tag"},Object(l.__)("No Delay Tag Available","wp-marketing-automations"))))))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-sidebar"},Object(r.createElement)("div",{className:"bwf-modal-filter-wrap"},Object.keys(j).map((function(e){return Object(r.createElement)("div",{key:e,className:c()("bwf-modal-filter",{active:y===e}),onClick:function(){d(""),v(e)}},e)})))),Object(r.createElement)("div",{className:"bwf-modal-content-content"},Object(r.createElement)("div",{className:"bwf-modal-content-brick no-padding set-height"},Object(r.createElement)("div",{className:"modal-brick-wrap bwfan_pb20"},Object(r.createElement)("div",{className:"bwf-brick-content"},Object(r.createElement)("div",{className:"bwf-merge-tag-list"},Object(r.createElement)("table",null,Object(r.createElement)("tbody",null,k())))))))):Object(r.createElement)(Ut,{mergetag:O,copyTagToClipBoard:_,automationId:i})))):""},$t=n(44);function Jt(e){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wt(e){return function(e){if(Array.isArray(e))return an(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(n),!0).forEach((function(t){Zt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(){Kt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==Jt(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function en(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function tn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){en(o,r,a,i,c,"next",e)}function c(e){en(o,r,a,i,c,"throw",e)}i(void 0)}))}}function nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||rn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(e,t){if(e){if("string"==typeof e)return an(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?an(e,t):void 0}}function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var on=function(){var e=nn(Object(r.useState)({}),2),t=e[0],n=e[1],a=nn(Object(r.useState)({}),2),i=a[0],c=a[1],b=nn(Object(r.useState)(!0),2),h=b[0],v=b[1],w=nn(Object(r.useState)(!1),2),O=w[0],g=w[1],j=nn(Object(r.useState)(!1),2),E=j[0],_=j[1],k=Object(r.useContext)(p.h),N=Object(m.a)(),S=N.showSidebar,x=N.setNodeDatabyId,P=N.setAutomationData,L=N.fetchSplitPathNodes,C=nn(Object(r.useState)(!1),2),A=C[0],I=C[1],D=Object(f.a)(),T=D.getSidebarNodeData,M=D.getNodeDataByID,F=D.getAutomationId,G=D.getAutomationLinks,z=D.getAutomationSteps,U=D.getCount,q=D.getActionsList,B=D.getGoals,R=D.getDelayTagList,Y=D.getautomationMeta,H=T(),V=F(),$=R(),J=z(),W=G(),Q=U(),X=q(),Z=B(),K=Y(),ee=L(),te=!Object(o.isEmpty)(H)&&H.hasOwnProperty("id")?M(H.id):{},ne=te.stepId,re=void 0===ne?0:ne,ae=te.data,oe=(void 0===ae?{}:ae).sidebarValues,ie=function(){var e=tn(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d()({path:Object(p.y)("/fields/?type=7&all=true"),method:"GET"}).then((function(e){200===e.code&&(Object(o.isEmpty)(e.result)||c(e.result),v(!1))}));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){Object(p.Sb)()&&ie(),n({})}),[]);var ce=!Object(o.isEmpty)(H)&&H.hasOwnProperty("data")?H.data:{},le=!Object(o.isEmpty)(ce)&&ce.hasOwnProperty("sidebarValues")?ce.sidebarValues:{},se=nn(Object(r.useState)(1),2),ue=se[0],me=se[1],fe=nn(Object(r.useState)({day_delay:{unit:"min",text:"0"}}),2),pe=fe[0],be=fe[1];Object(r.useEffect)((function(){le.hasOwnProperty("type")&&[1,2,3,4].includes(parseInt(le.type))&&me(parseInt(le.type)),le.hasOwnProperty("data")&&!Object(o.isEmpty)(le.data)&&be(le.data)}),[le]),Object(r.useEffect)((function(){if(!h){var e=Xt(Xt({},le),{},{type:ue,data:pe});Object(o.isEqual)(oe,e)||Object(o.isEmpty)(oe)?g(!1):g(!0)}}),[ue,pe]);var de=function(e){var t=e.type,r=void 0===t?0:t,a=e.data,i=void 0===a?{}:a,c={};switch(parseInt(r)){case 1:var s=i.day_delay,u=void 0===s?{}:s,m=i.enable_time_delay,f=void 0!==m&&m,p=i.time_delay,b=void 0===p?{}:p,d=i.enable_week_delay,h=void 0!==d&&d,y=i.week_delay,v=void 0===y?[]:y;(Object(o.isEmpty)(u)||u.hasOwnProperty("text")&&""==u.text)&&(c.day_delay=Object(l.__)("Select a specific period.","wp-marketing-automations")),f?(Object(o.isEmpty)(b)||b.hasOwnProperty("time")&&Object(o.isEmpty)(b.time))&&(c.time_delay=Object(l.__)("Select a specific time of day.","wp-marketing-automations")):i.time_delay={},h?Object(o.isEmpty)(v)&&(c.week_delay=Object(l.__)("Select a specific day of the week.","wp-marketing-automations")):i.week_delay=[];break;case 2:var w=i.date,O=void 0===w?"":w,g=i.time_delay,j=void 0===g?{time:"10:00"}:g,E=i.enable_step_skip,_=void 0!==E&&E,k=i.skip_to_step,N=void 0===k?{}:k;Object(o.isEmpty)(O)&&(c.specific_date=Object(l.__)("Select a specific date.","wp-marketing-automations")),Object(o.isEmpty)(j.time)&&(c.specific_time=Object(l.__)("Select a specific time.","wp-marketing-automations")),!_||N.hasOwnProperty("step")&&""!=N.step||(c.specific_date_time_step=Object(l.__)("Please choose the target step if time passes.","wp-marketing-automations"));break;case 3:var S=i.custom_field,x=void 0===S?{}:S,P=i.enable_step_skip,L=void 0!==P&&P,C=i.skip_to_step,A=void 0===C?{}:C;if(!x.hasOwnProperty("field")||0==parseInt(x.field)||isNaN(parseInt(x.field))){c.custom_field=Object(l.__)("Please select custom field.","wp-marketing-automations");break}!L||A.hasOwnProperty("step")&&""!=A.step||(c.custom_field=Object(l.__)("Please choose the target step if time passes.","wp-marketing-automations"));break;case 4:var I=i.variable_field,D=void 0===I?{}:I,T=i.enable_step_skip,M=void 0!==T&&T,F=i.skip_to_step,G=void 0===F?{}:F;if(!D.hasOwnProperty("variable")||""==D.variable){c.variable=Object(l.__)("Please select a delay variable.","wp-marketing-automations");break}!M||G.hasOwnProperty("step")&&""!=G.step||(c.variable=Object(l.__)("Please choose the target step if time passes.","wp-marketing-automations"))}return!!Object(o.isEmpty)(c)||(n(c),!1)},he=function(){var e=tn(Kt().mark((function e(){var t,n,r;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,n=Xt(Xt({},le),{},{type:ue,data:pe}),de(n)){e.next=4;break}return e.abrupt("return");case 4:if(!Object(o.isEqual)(oe,n)){e.next=7;break}return S(!1),e.abrupt("return");case 7:return Object(o.isEmpty)(oe)||(t=!0),I(!0),r={data:{data:{sidebarData:n}},steps:Object(o.cloneDeep)(J).map((function(e){return e.hasOwnProperty("data")&&e.data.hasOwnProperty("sidebarValues")&&(e.data.sidebarValues={}),e})),links:W,count:Q,optionUpdated:t,actionType:1},e.prev=10,e.next=13,d()({path:Object(p.y)("/automation/".concat(V,"/step/").concat(re)),method:"POST",data:r}).then((function(e){if(200!==e.code)throw Error(Object(p.t)(null==e?void 0:e.message));k(e.message),x(H.id,Xt(Xt({},ce),{},{sidebarValues:n}),{step_status:1}),e.hasOwnProperty("result")&&e.result.hasOwnProperty("meta")&&P("meta",Xt(Xt({},K),e.result.meta)),setTimeout((function(){S(!1)}),100),I(!1)})).catch((function(e){throw Error(Object(p.t)(null==e?void 0:e.message))}));case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(10),P("modalData",{status:!0,modalTitle:Object(l.__)("Update Delay","wp-marketing-automations"),error:null===e.t0||void 0===e.t0?void 0:e.t0.message}),I(!1);case 19:Object(p.Eb)(k,3e3);case 20:case"end":return e.stop()}}),e,null,[[10,15]])})));return function(){return e.apply(this,arguments)}}(),ye=[{value:1,label:Object(l.__)("Delay for a specific period","wp-marketing-automations"),desc:Object(l.__)("Wait for a specified number of hours, days, or week before continuing","wp-marketing-automations"),isProFeature:!1},{value:2,label:Object(l.__)("Delay until a specific date and time","wp-marketing-automations"),desc:Object(l.__)("Set a specific date and time","wp-marketing-automations"),isProFeature:!0},{value:3,label:Object(l.__)("Delay until a custom field date","wp-marketing-automations"),desc:Object(l.__)("Choose from contacts custom field","wp-marketing-automations"),isProFeature:!0}];Object(o.isEmpty)($)||ye.push({value:4,label:Object(l.__)("Delay with events variable","wp-marketing-automations"),desc:Object(l.__)("Choose from event field value","wp-marketing-automations"),isProFeature:!0});var ve=[{value:"1",label:Object(l.__)("S","wp-marketing-automations")},{value:"2",label:Object(l.__)("M","wp-marketing-automations")},{value:"3",label:Object(l.__)("T","wp-marketing-automations")},{value:"4",label:Object(l.__)("W","wp-marketing-automations")},{value:"5",label:Object(l.__)("TH","wp-marketing-automations")},{value:"6",label:Object(l.__)("F","wp-marketing-automations")},{value:"7",label:Object(l.__)("SA","wp-marketing-automations")}],we=function(e){return t.hasOwnProperty(e)},Oe={1:Object(l.__)("Sun","wp-marketing-automations"),2:Object(l.__)("Mon","wp-marketing-automations"),3:Object(l.__)("Tue","wp-marketing-automations"),4:Object(l.__)("Wed","wp-marketing-automations"),5:Object(l.__)("Thu","wp-marketing-automations"),6:Object(l.__)("Fri","wp-marketing-automations"),7:Object(l.__)("Sat","wp-marketing-automations")},ge=function(){var e=pe.day_delay,t=void 0===e?{}:e,n=pe.enable_time_delay,r=void 0!==n&&n,a=pe.enable_week_delay,i=void 0!==a&&a,c=pe.time_delay,s=void 0===c?{time:"10:00"}:c,u=pe.week_delay,m=void 0===u?[]:u;if(!Object(o.isEmpty)(t)&&t.hasOwnProperty("unit")&&t.hasOwnProperty("text")&&!Object(o.isEmpty)(t.unit)&&!Object(o.isEmpty)(t.text)){var f=t.text+" "+function(e,t){switch(e){case"min":return parseInt(t)>1?Object(l.__)("Minutes","wp-marketing-automations"):Object(l.__)("Minute","wp-marketing-automations");case"hours":return parseInt(t)>1?Object(l.__)("Hours","wp-marketing-automations"):Object(l.__)("Hour","wp-marketing-automations");case"days":return parseInt(t)>1?Object(l.__)("Days","wp-marketing-automations"):Object(l.__)("Day","wp-marketing-automations");case"weeks":return parseInt(t)>1?Object(l.__)("Weeks","wp-marketing-automations"):Object(l.__)("Week","wp-marketing-automations");case"months":return parseInt(t)>1?Object(l.__)("Months","wp-marketing-automations"):Object(l.__)("Month","wp-marketing-automations");default:return""}}(t.unit,t.text),p=[];return i&&!Object(o.isEmpty)(m)&&m.map((function(e){Oe.hasOwnProperty(e)&&p.push(Oe[e])})),r&&s.hasOwnProperty("time")&&!Object(o.isEmpty)(s.time)?(f+=" "+Object(l.__)("till","wp-marketing-automations")+" "+Object(je.format)(bwfcrm_contacts_data.time_format,_e()(s.time,"HH:mm:ss")),Object(o.isEmpty)(p)||(f+="  "+p.join("/")),s.hasOwnProperty("in_contact_timezone")&&s.in_contact_timezone&&(f+=" "+Object(l.__)("in Contact's Timezone","wp-marketing-automations"))):Object(o.isEmpty)(p)||(f+="  "+p.join("/")),Object(l.__)("Delay of","wp-marketing-automations")+" "+f+"."}return""},Ee=function(){var e=pe.custom_field,t=void 0===e?{field:"",time:"10:00",in_contact_timezone:!1,custom_field_label:""}:e,n=pe.enable_time_delay,r=void 0!==n&&n,a=pe.time_delay,i=void 0===a?{duration:0,type:"days",timing:"after"}:a,c=pe.enable_step_skip,s=void 0!==c&&c,u=pe.skip_to_step,m=void 0===u?{step:0,name:""}:u;if(t.hasOwnProperty("field")&&""!==t.field){var f=Object(l.__)("Delay","wp-marketing-automations")+" ";return r?i.hasOwnProperty("duration")&&(f+="".concat(Object(l.__)("of","wp-marketing-automations")," ").concat(i.duration," ").concat(i.type," ").concat(i.timing," ")):f+=Object(l.__)("till","wp-marketing-automations")+" ",t.hasOwnProperty("custom_field_label")&&""!==t.custom_field_label?f+="'".concat(t.custom_field_label,"' ").concat(Object(l.__)("field","wp-marketing-automations")," "):f+="".concat(Object(l.__)("Custom Field","wp-marketing-automations")," ( ").concat(t.field," )"),t.hasOwnProperty("time")&&""!==t.time&&(f+=" ".concat(Object(l.__)("till","wp-marketing-automations")," ").concat(Object(je.format)(bwfcrm_contacts_data.time_format,_e()(t.time,"HH:mm:ss")))),t.hasOwnProperty("in_contact_timezone")&&t.in_contact_timezone?f+=" ".concat(Object(l.__)("in Contact's Timezone","wp-marketing-automations"),". "):f+=". ",s&&!Object(o.isEmpty)(m)&&m.hasOwnProperty("step")&&""!=m.step&&m.hasOwnProperty("name")&&""!=m.name&&(f+=" ".concat(Object(l.__)("Jump to","wp-marketing-automations")," ").concat(m.name,".")),f}return""},ke=function(){var e=pe.date,t=void 0===e?"":e,n=pe.time_delay,r=void 0===n?{time:"10:00",in_contact_timezone:!1}:n,a=pe.enable_step_skip,i=void 0!==a&&a,c=pe.skip_to_step,s=void 0===c?{step:0,name:""}:c;if(!Object(o.isEmpty)(t)&&r.hasOwnProperty("time")&&!Object(o.isEmpty)(r.time)){var u=Object(l.__)("Delay till","wp-marketing-automations")+" ";return u+=Object(p.cb)(t,!0,!1)+" ",r.hasOwnProperty("time")&&""!==r.time&&(u+="".concat(Object(l.__)("at","wp-marketing-automations")," ").concat(Object(je.format)(bwfcrm_contacts_data.time_format,_e()(r.time,"HH:mm:ss"))," ")),r.hasOwnProperty("in_contact_timezone")&&r.in_contact_timezone?u+="".concat(Object(l.__)("in Contact's Timezone","wp-marketing-automations"),". "):u+=". ",i&&!Object(o.isEmpty)(s)&&s.hasOwnProperty("step")&&""!=s.step&&s.hasOwnProperty("name")&&""!=s.name&&(u+="".concat(Object(l.__)("Jump to","wp-marketing-automations")," ").concat(s.name)),u}return""},Ne={action:Object(l.__)("Action","wp-marketing-automations"),wait:Object(l.__)("Delay","wp-marketing-automations"),conditional:Object(l.__)("Conditional","wp-marketing-automations"),exit:Object(l.__)("Exit","wp-marketing-automations"),benchmark:Object(l.__)("Goal","wp-marketing-automations")},Se=Object(r.useMemo)((function(){var e={stepsOptArr:[],stepsOptions:[{value:"",label:Object(l.__)("Select Step","wp-marketing-automations")}]};return Object(o.isEmpty)(J)||(J.map((function(t){var n=t.stepId,r=void 0===n?0:n,a=t.id,o=void 0===a?0:a;if(!["yesNoNode","end","jump","start","exit","split","splitpath"].includes(t.type)&&!e.stepsOptArr.hasOwnProperty(o)&&r!=re&&!ee.includes(o)){var i=[Object(l.__)("Step","wp-marketing-automations")];i.push(o),Ne.hasOwnProperty(t.type)&&i.push(" : "+Ne[t.type]),"action"==t.type&&t.hasOwnProperty("data")&&X.list.hasOwnProperty(t.data.selected)&&X.list[t.data.selected].hasOwnProperty("action_name")&&(X.list[t.data.selected].hasOwnProperty("integration_nicename")?i.push(" - "+X.list[t.data.selected].integration_nicename+" : "):i.push(" - "),i.push(X.list[t.data.selected].action_name)),"benchmark"==t.type&&t.hasOwnProperty("data")&&Z.list.hasOwnProperty(t.data.benchmark)&&Z.list[t.data.benchmark].hasOwnProperty("event_name")&&(Z.list[t.data.benchmark].hasOwnProperty("source_label")&&i.push(Z.list[t.data.benchmark].source_label+" : "),i.push(Z.list[t.data.benchmark].event_name)),e.stepsOptArr[r]=i.join(" "),e.stepsOptions.push({value:r,label:i.join(" ")})}})),e.stepsOptArr.end=Object(l.__)("End Automation","wp-marketing-automations"),e.stepsOptions.push({value:"end",label:Object(l.__)("End Automation","wp-marketing-automations")})),e}),[J]),xe=nn(Object(r.useState)(!1),2),Pe=xe[0],Le=xe[1],Ce=nn(Object(r.useState)(!1),2),Ae=Ce[0],Ie=Ce[1],De=function(){var e=pe.day_delay,n=void 0===e?{unit:"min",text:"0"}:e,a=pe.enable_time_delay,i=void 0!==a&&a,c=pe.time_delay,m=void 0===c?{time:"10:00",in_contact_timezone:!1}:c,f=pe.enable_week_delay,b=void 0!==f&&f,d=pe.week_delay,h=void 0===d?["sunday"]:d;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-delay-field "+(we("day_delay")?"has-error":"")},Object(r.createElement)(It.a,{units:[{value:"min",label:Object(l.__)("Minutes","wp-marketing-automations")},{value:"hours",label:Object(l.__)("Hours","wp-marketing-automations")},{value:"days",label:Object(l.__)("Days","wp-marketing-automations")},{value:"weeks",label:Object(l.__)("Weeks","wp-marketing-automations")},{value:"months",label:Object(l.__)("Months","wp-marketing-automations")}],onChange:function(e){be(Xt(Xt({},pe),{},{day_delay:e}))},value:n}),we("day_delay")&&Object(r.createElement)("div",{className:"has-bwfan-error"},t.day_delay)),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(p.Sb)()?Object(r.createElement)(r.Fragment,null,Object(r.createElement)($t.a,{checked:i,label:Object(l.__)("Delay until a specific time of day","wp-marketing-automations"),onChange:function(e){return be(Xt(Xt({},pe),{},{enable_time_delay:e}))}}),i&&Object(r.createElement)("div",{className:"bwf-delay-field "+(we("time_delay")?"has-error":"")},Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-p-20 bwf-pt-0 bwf-pb-0"},Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full"},Object(r.createElement)("input",{type:"time",value:m.time,className:"bwf-w-150 bwf-h-36",onChange:function(e){be(Xt(Xt({},pe),{},{time_delay:Xt(Xt({},pe.time_delay),{},{time:e.target.value})}))}}),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-display-flex "+(Object(p.Sb)()?"":"bwf-delay-no-pro")},Object(p.Sb)()?Object(r.createElement)($t.a,{checked:m.in_contact_timezone,label:Object(l.__)("In Contact Timezone","wp-marketing-automations"),onChange:function(e){be(Xt(Xt({},pe),{},{time_delay:Xt(Xt({},pe.time_delay),{},{in_contact_timezone:e})}))}}):Object(r.createElement)("div",{className:"bwf-cursor-pointer no-color",onClick:function(){P("proModalContent",Object(l.__)("This","wp-marketing-automations")),P("showProModal",!0)}},Object(l.__)("In Contact Timezone","wp-marketing-automations")),!Object(p.Sb)()&&Object(r.createElement)(s.a,{icon:"king",size:16})))),we("time_delay")&&Object(r.createElement)("div",{className:"has-bwfan-error"},t.time_delay))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start"},Object(r.createElement)(s.a,{icon:"king",size:16}),Object(l.__)("Delay until a specific time of day","wp-marketing-automations"),Object(r.createElement)("a",{onClick:function(){return Le(!Pe)},className:"bwf-no-underline bwf-cursor-pointer"},Object(l.__)("Explore","wp-marketing-automations"))),Pe&&Object(r.createElement)("div",{className:"bwf-p-15 bwf-mtb-10 bwf-lite-restrict-section"},Object(r.createElement)($t.a,{checked:!1,disabled:!0,label:Object(l.__)("Delay until a specific time of day","wp-marketing-automations")}),Object(r.createElement)("div",{className:"bwf-delay-field "},Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-p-20 bwf-pt-0 bwf-pb-0"},Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full"},Object(r.createElement)("input",{type:"time",value:"",disabled:!0,className:"bwf-w-150 bwf-h-36",onChange:function(){}}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-display-flex "},Object(r.createElement)($t.a,{checked:!1,disabled:!0,label:Object(l.__)("In Contact Timezone","wp-marketing-automations"),onChange:function(){}}))))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-single-automation-notice is-info no-icon"},Object(r.createElement)("b",null,Object(l.__)("This feature is only for licensed Pro users.","wp-marketing-automations"))," ",Object(r.createElement)("a",{target:"__blank",className:"bwf-a-no-underline",href:Object(p.ab)("upgrade",{utm_medium:"Get+PRO+Delay+Step"})},Object(l.__)("Learn More","wp-marketing-automations"))))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(p.Sb)()?Object(r.createElement)(r.Fragment,null,Object(r.createElement)($t.a,{checked:b,label:Object(l.__)("Delay until a specific day(s) of the week","wp-marketing-automations"),onChange:function(e){return be(Xt(Xt({},pe),{},{enable_week_delay:e}))}}),b&&Object(r.createElement)("div",{className:"bwf-delay-field "+(we("week_delay")?"has-error":"")},Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)(u.ButtonGroup,null,ve.map((function(e,t){return Object(r.createElement)(u.Button,{key:t,isPrimary:h.includes(e.value),isSecondary:!h.includes(e.value),onClick:function(){var t=Wt(h);t.includes(e.value)?t=t.filter((function(t){return t!==e.value})):t.push(e.value),be(Xt(Xt({},pe),{},{week_delay:t}))}},e.label)}))),we("week_delay")&&Object(r.createElement)("div",{className:"has-bwfan-error"},t.week_delay))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start"},Object(r.createElement)(s.a,{icon:"king",size:16}),Object(l.__)("Delay until a specific day(s) of the week","wp-marketing-automations"),Object(r.createElement)("a",{onClick:function(){return Ie(!Ae)},className:"bwf-no-underline bwf-cursor-pointer"},Object(l.__)("Explore","wp-marketing-automations"))),Ae&&Object(r.createElement)("div",{className:"bwf-p-15 bwf-mtb-10 bwf-lite-restrict-section"},Object(r.createElement)($t.a,{checked:!1,disabled:!0,label:Object(l.__)("Delay until a specific day(s) of the week","wp-marketing-automations"),onChange:function(){}}),Object(r.createElement)("div",{className:"bwf-delay-field "},Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)(u.ButtonGroup,null,ve.map((function(e,t){return Object(r.createElement)(u.Button,{key:t,isPrimary:!1,isSecondary:!0,onClick:function(){},disabled:!0},e.label)})))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-single-automation-notice is-info no-icon"},Object(r.createElement)("b",null,Object(l.__)("This feature is only for licensed Pro users.","wp-marketing-automations"))," ",Object(r.createElement)("a",{target:"__blank",className:"bwf-a-no-underline",href:Object(p.ab)("upgrade",{utm_medium:"Get+PRO+Delay+Step"})},Object(l.__)("Learn More","wp-marketing-automations"))))),!Object(o.isEmpty)(ge())&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-single-automation-notice is-info"},ge())))},Te=function(e){var t=_e()().format("MM/DD/YYYY");return _e()(t).isSameOrBefore(_e()(e))},Me=function(){return Object(r.createElement)("div",{className:"bwf-custom-date-delay"},Object(r.createElement)("div",{className:"bwf-delay-field "},h?Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf_w_full bwf-h-15"}):function(){var e=pe.custom_field,t=void 0===e?{field:0,time:"10:00",in_contact_timezone:!1,custom_field_label:""}:e,n=pe.enable_time_delay,a=void 0!==n&&n,c=pe.time_delay,s=void 0===c?{duration:0,type:"days",timing:"after"}:c,m=pe.occurrence,f=void 0===m?"daymonth":m,b=pe.enable_step_skip,d=void 0!==b&&b,h=pe.skip_to_step,y=void 0===h?{step:0,name:""}:h,v=Se.stepsOptArr,w=Se.stepsOptions;if(Object(o.isEmpty)(i))return Object(r.createElement)(r.Fragment,null,Object(l.__)("No Custom Field with type Date found","wp-marketing-automations"));var O=[{value:"",label:Object(l.__)("Select Type","wp-marketing-automations")}];Object.keys(i).map((function(e){O.push({label:i[e].hasOwnProperty("name")?i[e].name:"",value:e})}));var g=Ee();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-delay-field bwf-delay-select-field-wrap"},Object(r.createElement)("div",{className:"bwf-pt-0 bwf-pb-0"},Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full align-start"},Object(r.createElement)("div",{className:"bwf-delay-field-select bwf-w-210 "+(we("custom_field")&&""==t.field?"has-error":"")},Object(r.createElement)(u.SelectControl,{value:t.field,className:"bwf_W_full",options:O,onChange:function(e){return be(Xt(Xt({},pe),{},{custom_field:Xt(Xt({},pe.custom_field),{},{field:e,custom_field_label:i[e].name})}))}}),we("custom_field")&&""==t.field&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"has-bwfan-error"},Object(l.__)("Please select a custom field.","wp-marketing-automations")))),Object(r.createElement)("div",{className:"bwf-delay-occurrence bwf-delay-field "+(we("custom_field")&&""==f?"has-error":"")},Object(r.createElement)(u.SelectControl,{value:f,className:"bwf_w_full",options:[{value:"daymonth",label:Object(l.__)("Use Day & Month","wp-marketing-automations")},{value:"daymonthyear",label:Object(l.__)("Use Full Date","wp-marketing-automations")}],onChange:function(e){return be(Xt(Xt({},pe),{},{occurrence:e}))}}))),Object(r.createElement)("div",{className:"bwf-sidebar-hint"},Object(l.__)("Note: Contact would not pass this step if the value of custom field is blank.","wp-marketing-automations"),"daymonth"===f&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("br",null),Object(l.__)("It will pick the day and month from the selected field value and if the time is older than the current time it will increase by one year.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full"},Object(r.createElement)("div",{className:"bwf-delay-select-field-time bwf-w-210"},Object(r.createElement)("input",{type:"time",value:t.time,className:"bwf-w-210 bwf-h-36",onChange:function(e){be(Xt(Xt({},pe),{},{custom_field:Xt(Xt({},pe.custom_field),{},{time:e.target.value})}))}})),Object(r.createElement)("div",{className:"bwf-delay-select-field-timezone bwf-w-210"},Object(r.createElement)($t.a,{checked:t.in_contact_timezone,label:Object(l.__)("In Contact Timezone","wp-marketing-automations"),onChange:function(e){be(Xt(Xt({},pe),{},{custom_field:Xt(Xt({},pe.custom_field),{},{in_contact_timezone:e})}))}}))))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-delay-field bwf-delay-sidebar-custom-field"},Object(r.createElement)("div",{className:"bwf-delay-skip-step bwf-specific-date"},Object(r.createElement)("div",{className:"bwf-specific-date "+(Object(p.Sb)()?"":"bwf-delay-no-pro")},Object(r.createElement)($t.a,{checked:a,label:Object(l.__)("Delay for certain days from field date","wp-marketing-automations"),onChange:function(e){Object(p.Sb)()?be(Xt(Xt({},pe),{},{enable_time_delay:e})):(P("proModalContent",Object(l.__)("This","wp-marketing-automations")),P("showProModal",!0))}}))),a&&Object(r.createElement)("div",{className:"bwf-pt-0 bwf-pb-0 bwf-delay-sidebar-custom-delay-wrap"},Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full"},Object(r.createElement)("div",{className:"bwf-delay-duration bwf-w-210 "+(we("custom_field")&&parseInt(s.duration)<0?"has-error":"")},Object(r.createElement)(u.TextControl,{className:"bwf-h-36",type:"number",value:s.duration,onChange:function(e){return be(Xt(Xt({},pe),{},{time_delay:Xt(Xt({},pe.time_delay),{},{duration:e})}))},min:1,placeholder:Object(l.__)("Enter","wp-marketing-automations")})),Object(r.createElement)("div",{className:"bwf-delay-type bwf-w-210"},Object(r.createElement)(u.SelectControl,{value:s.type,className:"bwf_w_full",options:[{value:"days",label:Object(l.__)("Days","wp-marketing-automations")},{value:"weeks",label:Object(l.__)("Weeks","wp-marketing-automations")}],onChange:function(e){return be(Xt(Xt({},pe),{},{time_delay:Xt(Xt({},pe.time_delay),{},{type:e})}))}})),Object(r.createElement)("div",{className:"bwf-delay-timing bwf-w-170"},Object(r.createElement)(u.SelectControl,{value:s.timing,className:"bwf_w_full",options:[{value:"before",label:Object(l.__)("Before","wp-marketing-automations")},{value:"after",label:Object(l.__)("After","wp-marketing-automations")}],onChange:function(e){return be(Xt(Xt({},pe),{},{time_delay:Xt(Xt({},pe.time_delay),{},{timing:e})}))}}))))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-delay-skip-step bwf-specific-date"},Object(r.createElement)("div",{className:"bwf-specific-date "+(Object(p.Sb)()?"":"bwf-delay-no-pro")},Object(r.createElement)($t.a,{checked:d,label:Object(l.__)("Jump to step if time has passed","wp-marketing-automations"),onChange:function(e){Object(p.Sb)()?be(Xt(Xt({},pe),{},{enable_step_skip:e})):(P("proModalContent",Object(l.__)("This","wp-marketing-automations")),P("showProModal",!0))}}))),d&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-delay-skip-step-select bwf-specific-date "+(we("custom_field")&&""==y.step?"has-error":"")},Object(r.createElement)(u.SelectControl,{value:y.step,className:"bwf_w_full",options:w,onChange:function(e){return be(Xt(Xt({},pe),{},{skip_to_step:Xt(Xt({},pe.skip_to_step),{},{step:e,name:v[e]})}))}}),we("custom_field")&&""==y.step&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"has-bwfan-error"},Object(l.__)("Please choose the target step if time passes.","wp-marketing-automations"))))),""!==g&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-single-automation-notice is-info"},g)))}()))};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"wr_header"},Object(r.createElement)("div",{className:"bwf-node-icon icon-delay"},Object(r.createElement)(s.a,{size:28,icon:"time-left"})),Object(r.createElement)("div",{className:"wr_event_title"},Object(r.createElement)("span",null,Object(l.__)("Delay","wp-marketing-automations"))),Object(r.createElement)("div",{className:"wr_event_variant"}),Object(r.createElement)("div",{className:"wr_close bwf-cursor-pointer",onClick:function(){S(!1)}},Object(r.createElement)(s.a,{icon:"close"}))),Object(r.createElement)("div",{className:"wr_content"},Object(r.createElement)("div",{className:"bwf-delay-wrap"},Object(r.createElement)(At,{selected:ue,setSelected:function(e){if(!Object(p.Sb)()&&[2,3].includes(parseInt(e)))return P("proModalContent",Object(l.__)("This Type","wp-marketing-automations")),void P("showProModal",!0);be(function(e){switch(e){case 1:return{day_delay:{unit:"min",text:""},enable_time_delay:!1,time_delay:{time:"10:00",in_contact_timezone:!1},enable_week_delay:!1,week_delay:[]};case 2:return{date:"",time_delay:{time:"10:00",in_contact_timezone:!1},enable_step_skip:!1,skip_to_step:{step:0,name:""}};case 3:return{custom_field:{field:"",time:"10:00",in_contact_timezone:!1,custom_field_label:""},time_delay:{duration:0,type:"days",timing:"before"},occurrence:"daymonth",enable_step_skip:!1,skip_to_step:{step:0,name:""}};case 4:return{variable_field:{variable:"",time:"10:00",in_contact_timezone:!1},time_delay:{duration:0,type:"days",timing:"before"},occurrence:"daymonthyear",enable_step_skip:!1,skip_to_step:{step:0,name:""}};default:return{}}}(parseInt(e))),me(e)},options:ye,selectedContent:function(){switch(parseInt(ue)){case 1:return Object(r.createElement)(r.Fragment,null,De());case 2:return Object(r.createElement)(r.Fragment,null,Object(p.Sb)()?(e=pe.date,n=void 0===e?"":e,a=pe.time_delay,i=void 0===a?{time:"10:00",in_contact_timezone:!1}:a,c=pe.enable_step_skip,m=void 0!==c&&c,f=pe.skip_to_step,b=void 0===f?{step:0,name:""}:f,d=Se.stepsOptArr,h=Se.stepsOptions,Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-specific-date-time-delay"},Object(r.createElement)("div",{className:"bwf-specific-date bwf_w_full bwf-h-36"},Object(r.createElement)("div",{className:"bwf-delay-field "+(we("specific_date")?"has-error":"")},Object(r.createElement)(Dt.a,{date:Object(o.isEmpty)(n)?null:_e()(n),dateFormat:"MM/DD/YYYY",isInvalidDate:function(e){return!Te(e)},onUpdate:function(e){Te(e.text)?be(Xt(Xt({},pe),{},{date:e.text})):(k(Object(l.__)("Invalid Date selected","wp-marketing-automations")),Object(p.Eb)(k,3e3))},text:n,iconRight:!0}),we("specific_date")&&Object(r.createElement)("div",{className:"has-bwfan-error"},t.specific_date))),Object(r.createElement)("div",{className:"bwf-specific-time bwf_w_full"},Object(r.createElement)("div",{className:"bwf-delay-field "+(we("specific_time")?"has-error":"")},Object(r.createElement)("input",{type:"time",value:i.time,onChange:function(e){be(Xt(Xt({},pe),{},{time_delay:Xt(Xt({},pe.time_delay),{},{time:e.target.value})}))},className:"bwf-h-36"}),we("specific_time")&&Object(r.createElement)("div",{className:"has-bwfan-error"},t.specific_time))),Object(r.createElement)("div",{className:"bwf-specific-date bwf-w-210 "+(Object(p.Sb)()?"":"bwf-delay-no-pro")},Object(p.Sb)()?Object(r.createElement)($t.a,{checked:i.in_contact_timezone,label:Object(l.__)("In Contact Timezone","wp-marketing-automations"),onChange:function(e){be(Xt(Xt({},pe),{},{time_delay:Xt(Xt({},pe.time_delay),{},{in_contact_timezone:e})}))}}):Object(r.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){P("proModalContent",Object(l.__)("This","wp-marketing-automations")),P("showProModal",!0)}},Object(l.__)("In Contact TimeZone","wp-marketing-automations")),!Object(p.Sb)()&&Object(r.createElement)(s.a,{icon:"king",size:16}))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-specific-date"},Object(r.createElement)("div",{className:"bwf-specific-date "+(Object(p.Sb)()?"":"bwf-delay-no-pro")},Object(r.createElement)($t.a,{checked:m,label:Object(l.__)("Jump to step if time has passed","wp-marketing-automations"),onChange:function(e){Object(p.Sb)()?be(Xt(Xt({},pe),{},{enable_step_skip:e})):(P("proModalContent",Object(l.__)("This","wp-marketing-automations")),P("showProModal",!0))}}))),m&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-specific-date "+(we("specific_date_time_step")?"has-error":"")},Object(r.createElement)(u.SelectControl,{value:b.step,className:"bwf_w_full",options:h,onChange:function(e){return be(Xt(Xt({},pe),{},{skip_to_step:Xt(Xt({},pe.skip_to_step),{},{step:e,name:d[e]})}))}}),we("specific_date_time_step")&&Object(r.createElement)("div",{className:"has-bwfan-error"},t.specific_date_time_step))),!Object(o.isEmpty)(ke())&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-single-automation-notice is-info"},ke())))):Object(r.createElement)(r.Fragment,null));case 3:return Object(r.createElement)(r.Fragment,null,Object(p.Sb)()?Me():Object(r.createElement)(r.Fragment,null));case 4:return Object(r.createElement)(r.Fragment,null,Object(p.Sb)()?function(){var e=pe.variable_field,t=void 0===e?{variable:"",time:"10:00",in_contact_timezone:!1}:e,n=pe.enable_time_delay,a=void 0!==n&&n,o=pe.time_delay,i=void 0===o?{duration:0,type:"days",timing:"after"}:o,c=pe.occurrence,s=void 0===c?"daymonthyear":c,m=pe.enable_step_skip,f=void 0!==m&&m,b=pe.skip_to_step,d=void 0===b?{step:0,name:""}:b,h=Se.stepsOptArr,y=Se.stepsOptions,v=Ee();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Vt,{isOpen:E,onRequestClose:_,automationID:V,onSelect:function(e){be(Xt(Xt({},pe),{},{variable_field:Xt(Xt({},pe.variable_field),{},{variable:e})}))}}),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-delay-field bwf-delay-select-field-wrap"},Object(r.createElement)("div",{className:"bwf-pt-0 bwf-pb-0"},Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full align-start"},Object(r.createElement)("div",{className:"bwf-delay-field-select bwf-w-300 "+(we("variable")&&""==t.variable?"has-error":""),onClick:function(){return _(!0)}},Object(r.createElement)(u.TextControl,{value:t.variable,disabled:!0}),we("variable")&&""==t.variable&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"has-bwfan-error"},Object(l.__)("Please select a variable.","wp-marketing-automations")))),Object(r.createElement)("div",{className:"bwf-delay-occurrence bwf-delay-field ",onClick:function(){return _(!0)}},Object(r.createElement)(u.Button,{isSecondary:!0},Object(l.__)("Select","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-delay-occurrence bwf-delay-field "},Object(r.createElement)("div",{className:"bwf-delay-occurrence bwf-delay-field "+(we("variable")&&""==s?"has-error":"")},Object(r.createElement)(u.SelectControl,{value:s,className:"bwf_w_full",options:[{value:"daymonth",label:Object(l.__)("Use Day & Month","wp-marketing-automations")},{value:"daymonthyear",label:Object(l.__)("Use Full Date","wp-marketing-automations")}],onChange:function(e){return be(Xt(Xt({},pe),{},{occurrence:e}))}})))),Object(r.createElement)("div",{className:"bwf-sidebar-hint"},Object(l.__)("Note: If key value is not present it will run immediately.","wp-marketing-automations"),"daymonth"===s&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("br",null),Object(l.__)("It will pick the day and month from the selected field value and if the time is older than the current time it will increase by one year.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full"},Object(r.createElement)("div",{className:"bwf-delay-select-field-time bwf-w-210"},Object(r.createElement)("input",{type:"time",value:t.time,className:"bwf-w-210 bwf-h-36",onChange:function(e){be(Xt(Xt({},pe),{},{variable_field:Xt(Xt({},pe.variable_field),{},{time:e.target.value})}))}})),Object(r.createElement)("div",{className:"bwf-delay-select-field-timezone bwf-w-210"},Object(r.createElement)($t.a,{checked:t.in_contact_timezone,label:Object(l.__)("In Contact Timezone","wp-marketing-automations"),onChange:function(e){be(Xt(Xt({},pe),{},{variable_field:Xt(Xt({},pe.variable_field),{},{in_contact_timezone:e})}))}}))))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-delay-field bwf-delay-sidebar-custom-field"},Object(r.createElement)("div",{className:"bwf-delay-skip-step bwf-specific-date"},Object(r.createElement)("div",{className:"bwf-specific-date "+(Object(p.Sb)()?"":"bwf-delay-no-pro")},Object(r.createElement)($t.a,{checked:a,label:Object(l.__)("Delay for certain days from field date","wp-marketing-automations"),onChange:function(e){Object(p.Sb)()?be(Xt(Xt({},pe),{},{enable_time_delay:e})):(P("proModalContent",Object(l.__)("This","wp-marketing-automations")),P("showProModal",!0))}}))),a&&Object(r.createElement)("div",{className:"bwf-pt-0 bwf-pb-0 bwf-delay-sidebar-custom-delay-wrap"},Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full"},Object(r.createElement)("div",{className:"bwf-delay-duration bwf-w-210 "+(we("custom_field")&&parseInt(i.duration)<0?"has-error":"")},Object(r.createElement)(u.TextControl,{className:"bwf-h-36",type:"number",value:i.duration,onChange:function(e){return be(Xt(Xt({},pe),{},{time_delay:Xt(Xt({},pe.time_delay),{},{duration:e})}))},min:1,placeholder:Object(l.__)("Enter","wp-marketing-automations")})),Object(r.createElement)("div",{className:"bwf-delay-type bwf-w-210"},Object(r.createElement)(u.SelectControl,{value:i.type,className:"bwf_w_full",options:[{value:"days",label:Object(l.__)("Days","wp-marketing-automations")},{value:"weeks",label:Object(l.__)("Weeks","wp-marketing-automations")}],onChange:function(e){return be(Xt(Xt({},pe),{},{time_delay:Xt(Xt({},pe.time_delay),{},{type:e})}))}})),Object(r.createElement)("div",{className:"bwf-delay-timing bwf-w-170"},Object(r.createElement)(u.SelectControl,{value:i.timing,className:"bwf_w_full",options:[{value:"before",label:Object(l.__)("Before","wp-marketing-automations")},{value:"after",label:Object(l.__)("After","wp-marketing-automations")}],onChange:function(e){return be(Xt(Xt({},pe),{},{time_delay:Xt(Xt({},pe.time_delay),{},{timing:e})}))}}))))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-delay-skip-step bwf-specific-date"},Object(r.createElement)("div",{className:"bwf-specific-date "+(Object(p.Sb)()?"":"bwf-delay-no-pro")},Object(r.createElement)($t.a,{checked:f,label:Object(l.__)("Jump to step if time has passed","wp-marketing-automations"),onChange:function(e){Object(p.Sb)()?be(Xt(Xt({},pe),{},{enable_step_skip:e})):(P("proModalContent",Object(l.__)("This","wp-marketing-automations")),P("showProModal",!0))}}))),f&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-delay-skip-step-select bwf-delay-field "+(we("variable")&&""==d.step?"has-error":"")},Object(r.createElement)(u.SelectControl,{value:d.step,className:"bwf_w_full",options:y,onChange:function(e){return be(Xt(Xt({},pe),{},{skip_to_step:Xt(Xt({},pe.skip_to_step),{},{step:e,name:h[e]})}))}}),we("variable")&&""==d.step&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"has-bwfan-error"},Object(l.__)("Please choose the target step if time passes.","wp-marketing-automations"))))),""!==v&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-single-automation-notice is-info"},v)))}():Object(r.createElement)(r.Fragment,null));default:return Object(r.createElement)(r.Fragment,null)}var e,n,a,i,c,m,f,b,d,h}(),liteDummyData:{2:Object(r.createElement)("div",{className:"bwf-pl-30 bwf-lite-restrict-section"},Object(r.createElement)("div",{className:"bwf-specific-date-time-delay"},Object(r.createElement)("div",{className:"bwf-specific-date bwf_w_full bwf-h-36"},Object(r.createElement)("div",{className:"bwf-delay-field ",style:{pointerEvents:"none"}},Object(r.createElement)(Dt.a,{date:null,dateFormat:"MM/DD/YYYY",onUpdate:function(){},text:"",iconRight:!0,disabled:!0}))),Object(r.createElement)("div",{className:"bwf-specific-time bwf_w_full"},Object(r.createElement)("div",{className:"bwf-delay-field "},Object(r.createElement)("input",{type:"time",value:"",disabled:!0,onChange:function(){},className:"bwf-h-36"}))),Object(r.createElement)("div",{className:"bwf-specific-date bwf-w-210 "},Object(r.createElement)($t.a,{checked:!1,disabled:!0,label:Object(l.__)("In Contact Timezone","wp-marketing-automations"),onChange:function(){}}))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-specific-date"},Object(r.createElement)("div",{className:"bwf-specific-date "},Object(r.createElement)($t.a,{checked:!1,disabled:!0,label:Object(l.__)("Jump to step if time has passed","wp-marketing-automations"),onChange:function(){}}))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-specific-date "},Object(r.createElement)(u.SelectControl,{value:"",disabled:!0,className:"bwf_w_full",options:[],onChange:function(){}})),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-single-automation-notice is-info no-icon"},Object(r.createElement)("b",null,Object(l.__)("This feature is only for licensed Pro users.","wp-marketing-automations"))," ",Object(r.createElement)("a",{target:"__blank",className:"bwf-a-no-underline",href:Object(p.ab)("upgrade",{utm_medium:"Get+PRO+Delay+Step"})},Object(l.__)("Learn More","wp-marketing-automations")))),3:Object(r.createElement)("div",{className:"bwf-pl-30 bwf-lite-restrict-section"},Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-delay-field bwf-delay-select-field-wrap"},Object(r.createElement)("div",{className:"bwf-pt-0 bwf-pb-0"},Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full align-start"},Object(r.createElement)("div",{className:"bwf-delay-field-select bwf-w-210 "},Object(r.createElement)(u.SelectControl,{value:"",className:"bwf_W_full",options:[{label:Object(l.__)("Select","wp-marketing-automations"),value:""}],onChange:function(){},disabled:!0})),Object(r.createElement)("div",{className:"bwf-delay-occurrence bwf-delay-field bwf-w-210 "},Object(r.createElement)(u.SelectControl,{value:"",className:"bwf_w_full",options:[{label:Object(l.__)("Select","wp-marketing-automations"),value:""}],onChange:function(){},disabled:!0}))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full"},Object(r.createElement)("div",{className:"bwf-delay-select-field-time bwf-w-210"},Object(r.createElement)("input",{type:"time",value:"",disabled:!0,className:"bwf-w-210 bwf-h-36",onChange:function(){}})),Object(r.createElement)("div",{className:"bwf-delay-select-field-timezone bwf-w-210"},Object(r.createElement)($t.a,{checked:!1,disabled:!0,label:Object(l.__)("In Contact Timezone","wp-marketing-automations"),onChange:function(){}}))))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-delay-field bwf-delay-sidebar-custom-field"},Object(r.createElement)("div",{className:"bwf-delay-skip-step bwf-specific-date"},Object(r.createElement)("div",{className:"bwf-specific-date "},Object(r.createElement)($t.a,{checked:!1,label:Object(l.__)("Delay for certain days from field date","wp-marketing-automations"),onChange:function(){},disabled:!0}))),Object(r.createElement)("div",{className:"bwf-pt-0 bwf-pb-0 bwf-delay-sidebar-custom-delay-wrap"},Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf_w_full"},Object(r.createElement)("div",{className:"bwf-delay-duration bwf-w-210 "},Object(r.createElement)(u.TextControl,{className:"bwf-h-36",type:"number",disabled:!0,value:"",onChange:function(){},min:1,placeholder:Object(l.__)("Enter","wp-marketing-automations")})),Object(r.createElement)("div",{className:"bwf-delay-type bwf-w-210"},Object(r.createElement)(u.SelectControl,{value:"",className:"bwf_w_full",options:[{label:Object(l.__)("Select","wp-marketing-automations"),value:""}],onChange:function(){},disabled:!0})),Object(r.createElement)("div",{className:"bwf-delay-timing bwf-w-170"},Object(r.createElement)(u.SelectControl,{value:"",disabled:!0,className:"bwf_w_full",options:[],onChange:function(){}}))))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-delay-skip-step bwf-specific-date"},Object(r.createElement)("div",{className:"bwf-specific-date "},Object(r.createElement)($t.a,{checked:!1,label:Object(l.__)("Jump to step if time has passed","wp-marketing-automations"),disabled:!0,onChange:function(){}}))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-single-automation-notice is-info no-icon"},Object(r.createElement)("b",null,Object(l.__)("This feature is only for licensed Pro users.","wp-marketing-automations"))," ",Object(r.createElement)("a",{target:"__blank",className:"bwf-a-no-underline",href:Object(p.ab)("upgrade",{utm_medium:"Get+PRO+Delay+Step"})},Object(l.__)("Learn More","wp-marketing-automations"))))}}),O&&Object(r.createElement)("div",{className:"bwf-single-automation-notice"},Object(l.__)("There can be contacts queued at this step, new settings will apply to all of them.","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_24"}))),Object(r.createElement)("div",{className:"wr_footer"},Object(r.createElement)(y.a,{className:"bwf-cancel-btn",onClick:function(){return S(!1)}},Object(l.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(y.a,{isPrimary:!0,onClick:he,isBusy:A,className:"bwf-no-ripple"},Object(l.__)("Save","wp-marketing-automations"))))},cn=n(515),ln=n(97);function sn(e){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function un(){un=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==sn(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){pn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bn(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function dn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yn=function(){var e=Object(r.useContext)(p.h),t=dn(Object(r.useState)(""),2),n=(t[0],t[1]),a=dn(Object(r.useState)(!1),2),i=a[0],c=a[1],u=dn(Object(r.useState)(!1),2),b=u[0],h=u[1],v=dn(Object(r.useState)(!1),2),w=v[0],O=v[1],g=dn(Object(r.useState)(""),2),j=g[0],E=g[1];Object(r.useEffect)((function(){c(!1)}),[]);var _,k,N=Object(m.a)(),S=N.showSidebar,x=N.setNodeDatabyId,P=N.setAutomationData,L=Object(f.a)(),C=L.getSidebarNodeData,A=L.getAutomationId,I=L.getNodeDataByID,D=L.getAutomationLinks,T=L.getAutomationSteps,M=L.getCount,F=L.getAutomationData,G=(0,L.getautomationMeta)(),z=T(),U=D(),q=M(),B=C(),R=A(),Y=F(),V=Y&&Y.event?Y.event:"",$=Object(Z.a)(V,parseInt(R)),J=($.isLoading,$.error,$.rules),W=!Object(o.isEmpty)(B)&&B.hasOwnProperty("data")?B.data:{},Q=!Object(o.isEmpty)(W)&&W.hasOwnProperty("sidebarValues")?(_=W.sidebarValues,k=[],Object(o.isEmpty)(_)?[]:(Object.keys(_).map((function(e){var t=_[e],n=[];t.map((function(e){J.hasOwnProperty(e.filter)&&n.push(e)})),Object(o.isEmpty)(n)||k.push(n)})),k)):[],X=!Object(o.isEmpty)(B)&&B.hasOwnProperty("id")?I(B.id):{},K=X.stepId,ee=void 0===K?0:K,te=X.data,ne=(void 0===te?{}:te).sidebarValues,re=function(){var t,r=(t=un().mark((function t(){var r,a,i,s;return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(p.Sb)()){t.next=4;break}return P("proModalContent",Object(l.__)("Conditional Step","wp-marketing-automations")),P("showProModal",!0),t.abrupt("return");case 4:if(r=Object(o.cloneDeep)(W.sidebarValues),a=[],i=!1,Object(o.isEmpty)(r)||r.map((function(e){Object(o.isEmpty)(e)||(a.push(e),e.map((function(e){var t;(t=e).hasOwnProperty("rule")&&["is_blank","is_not_blank"].includes(t.rule)||!(!t.hasOwnProperty("data")||""==t.data||null==t.data||Array.isArray(t.data)&&Object(o.isEmpty)(t.data)||J&&J.hasOwnProperty(t.filter)&&"key-value"==J[t.filter].input.component&&(""==t.data[0]||null==t.data[0]||Array.isArray(t.data[1])&&Object(o.isEmpty)(t.data[1])||""==t.data[1]||null==t.data[1]||Array.isArray(t.data[1])&&Object(o.isEmpty)(t.data[1]))||J&&J.hasOwnProperty(t.filter)&&["Date","Days","datetime"].includes(J[t.filter].input.component)&&"between"===t.rule&&(!t.data.hasOwnProperty("to")||!t.data.hasOwnProperty("from")||Object(o.isEmpty)(t.data.to)||Object(o.isEmpty)(t.data.from)))||(c(!0),i=!0,n(Object(l.__)("Some condition(s) are empty please remove them or fill them.","wp-marketing-automations")))})))})),Object(o.isEmpty)(a)||i){t.next=27;break}if(!Object(o.isEqual)(ne,a)){t.next=13;break}return S(!1),h(!1),t.abrupt("return");case 13:return h(!0),s={data:{data:{sidebarData:a}},steps:Object(o.cloneDeep)(z).map((function(e){return e.hasOwnProperty("data")&&e.data.hasOwnProperty("sidebarValues")&&(e.data.sidebarValues={}),e})),links:U,count:q},t.prev=15,t.next=18,d()({path:Object(p.y)("/automation/".concat(R,"/step/").concat(ee)),method:"POST",data:s}).then((function(t){if(200!==t.code)throw Error(Object(p.t)(null==t?void 0:t.message));e(t.message),W.sidebarValues=a,x(B.id,W,{step_status:1}),t.hasOwnProperty("result")&&t.result.hasOwnProperty("meta")&&P("meta",fn(fn({},G),t.result.meta)),setTimeout((function(){S(!1)}),100),h(!1)})).catch((function(e){throw Error(Object(p.t)(null==e?void 0:e.message))}));case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(15),P("modalData",{status:!0,modalTitle:Object(l.__)("Update Condition","wp-marketing-automations"),error:null===t.t0||void 0===t.t0?void 0:t.t0.message}),h(!1);case 24:Object(p.Eb)(e,3e3),t.next=28;break;case 27:!i&&n(Object(l.__)("Please select conditions to save.","wp-marketing-automations"));case 28:case"end":return t.stop()}}),t,null,[[15,20]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){bn(o,r,a,i,c,"next",e)}function c(e){bn(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}(),ae=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object.keys(Q).length,n=Object(o.cloneDeep)(Q);n[t]=[e];var r=fn(fn({},B),{},{data:fn(fn({},W),{},{sidebarValues:n})});P("sidebarNodeData",r),setTimeout((function(){E(""),O(!1)}),1)}),[Q]),oe=(Object(r.useCallback)((function(e){var t=fn({},Q);delete t[e];var n=fn(fn({},B),{},{data:fn(fn({},W),{},{sidebarValues:t})});P("sidebarNodeData",n)}),[Q]),function(){return Object(r.createElement)("ul",{className:"bwf-popover-container bwf-group"},Object(r.createElement)("li",{className:"list-label"},Object(l.__)("Select Group","wp-marketing-automations")),function(){var e=[],t=[];Object.entries(J).map((function(n){var r=dn(n,2),a=(r[0],r[1]);e.includes(a.group)||(e.push(a.group),t.push({priority:a.priority?a.priority:0,key:a.group,label:a.groupLabel}))}));return t.sort((function(e,t){return e.priority-t.priority})),t}().map((function(e,t){return Object(r.createElement)("li",{className:"list-values has-pointer",onClick:function(){return E(e.key)},key:t},e.label,Object(r.createElement)("span",{className:"bwf-svgtailf-arrow"},Object(r.createElement)(s.a,{icon:"tailless-arrow-forward",size:14,color:"#353030"})))})))}),ie=function(){return Object(r.createElement)("ul",{className:"bwf-popover-container bwf-filters"},Object(r.createElement)("li",{className:"list-label list-values has-pointer is-back-button",onClick:function(){return E("")}},Object(r.createElement)("span",{className:"bwf-svgtailb-arrow"},Object(r.createElement)(s.a,{icon:"tailless-arrow-forward",size:14,color:"#353030"})),Object(l.__)("Back","wp-marketing-automations")),(e=[],Object.entries(J).map((function(t){var n=dn(t,2),r=n[0],a=n[1];(Object(o.isEmpty)(j)||j===a.group)&&e.push({key:r,label:a.labels.add})})),e).map((function(e,t){return Object(r.createElement)("li",{className:"list-values has-pointer",onClick:function(){ae({filter:e.key,rule:"",data:""})},key:t},e.label)})));var e},ce=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?"bwf-sidebar-empty-placeholder ":"";return Object(r.createElement)("div",{className:t},e&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-main-icon"},Object(r.createElement)(s.a,{icon:"conditional-placeholder",size:90})),Object(r.createElement)("div",{className:"bwf-h2"},Object(l.__)("No Condition","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-h4 bwf-h4-grey bwf-mb-0"},Object(l.__)("Add a condition to segment and make contacts flow to different branches","wp-marketing-automations"))),e&&Object(r.createElement)("div",{className:"bwf_clear_24"}),!Object(o.isEmpty)(J)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(y.a,{isPrimary:!0,className:"bwf-no-ripple "+(e?"":"bwf-conditional-btn conditional-or"),onClick:function(){return O(!0)},style:e?{}:{margin:"-38px 0px 0px 62px",position:"absolute"}},e?Object(l.__)("Add New Condition","wp-marketing-automations"):Object(l.__)("OR","wp-marketing-automations"),w&&Object(r.createElement)(H.a,{className:"bwf-conditioal-group-popup "+(e?"":"bwf-conditional-or"),focusOnMount:!0,onFocusOutside:function(){return O(!1)},onClose:function(){return O(!1)}},Object(o.isEmpty)(j)?oe():ie())),e&&Object(r.createElement)("div",{className:"bwf_clear_48"})))};return Object(r.createElement)(p.f.Provider,{value:{errorList:i,setErrorList:c,stepId:ee}},Object(r.createElement)("div",{className:"wr_header"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(s.a,{size:26,icon:"condition"})),Object(r.createElement)("div",{className:"wr_event_title"},Object(l.__)("Condition","wp-marketing-automations"),!Object(p.Sb)()&&Object(r.createElement)(ln.a,null)),Object(r.createElement)("div",{className:"wr_event_variant"}),Object(r.createElement)("div",{className:"wr_close bwf-cursor-pointer",onClick:function(){S(!1)}},Object(r.createElement)(s.a,{icon:"close"}))),Object(r.createElement)("div",{className:"wr_content wr-conditioal-sidebar"},Object(o.isEmpty)(Q)||Object(o.isEmpty)(J)?Object(r.createElement)(r.Fragment,null,ce()):Object(r.createElement)(r.Fragment,null,Object.keys(Q).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-conditional-wrap",key:t},Object(r.createElement)(cn.a,{key:e,filters:J,groupingEnabled:!0,value:Q[e],setValue:function(t){var n=Object(o.cloneDeep)(Q);n[e]=t,n=n.filter((function(e){return 0!==Object.keys(e).length}));var r=fn(fn({},B),{},{data:fn(fn({},W),{},{sidebarValues:n})});P("sidebarNodeData",r)}}),t+1!==Object.keys(Q).length&&Object(r.createElement)("div",{className:"bwf-conditional-rules-label-or"},Object(r.createElement)("span",{className:"bwf-line"}),Object(r.createElement)("span",{className:"bwf-rule-text"},Object(l.__)("OR","wp-marketing-automations"))))})),ce(!1)),Object(r.createElement)("div",{className:"bwf_clear_24"})),Object(r.createElement)("div",{className:"wr_footer"},Object(r.createElement)(y.a,{className:"bwf-cancel-btn",onClick:function(){return S(!1)}},Object(l.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(y.a,{isPrimary:!0,className:"bwf-no-ripple",onClick:re,isBusy:b},!Object(p.Sb)()&&Object(r.createElement)(s.a,{icon:"king",size:16,color:"#fff"}),Object(l.__)("Save","wp-marketing-automations"))))};function vn(e){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wn(){wn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==vn(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function On(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(n),!0).forEach((function(t){En(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function En(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Nn=function(){var e=Object(r.useContext)(p.h),t=_n(Object(r.useState)(!1),2),n=t[0],a=t[1],i=_n(Object(r.useState)(!1),2),u=i[0],b=i[1],h=_n(Object(r.useState)(!1),2),v=h[0],w=h[1],O=Object(f.a)(),g=O.getSidebarNodeData,j=O.getNodeDataByID,E=O.getAutomationSteps,_=O.getAutomationLinks,k=O.getCount,N=O.getAutomationId,S=O.getGoals,x=O.getautomationMeta,P=Object(m.a)(),L=P.showSidebar,C=P.setNodeDatabyId,A=P.setAutomationData,I=Object(r.useRef)(null),D=_n(Object(r.useState)([]),2),T=D[0],M=D[1],F=g(),G=S().list,z=void 0===G?{}:G,U=x(),q=F.data,B=F&&F.data&&F.data.benchmark&&z.hasOwnProperty(F.data.benchmark)?z[F.data.benchmark]:{},R=F&&F.data&&F.data.benchmark?F.data.benchmark:"",Y=!Object(o.isEmpty)(F.data)&&F.data.hasOwnProperty("sidebarValues")?F.data.sidebarValues:{},H=B.fields,V=void 0===H?[]:H,$=B.default_values,J=void 0===$?{}:$,W=N(),Q=E(),X=_(),Z=k(),K=!Object(o.isEmpty)(F)&&F.hasOwnProperty("id")?j(F.id):{},ee=K.stepId,te=void 0===ee?0:ee,ne=K.data,re=(void 0===ne?{}:ne).sidebarValues;Object(r.useEffect)((function(){M([])}),[]);var ae=jn(jn({},J),Y),oe=function(e,t,n){var r=!1,a=t.fields,o=t.relation,i=void 0===o?"OR":o;i=i.toUpperCase();try{var c=null;if("OR"===i){if(a&&Array.isArray(a))for(var l=0;l<a.length;l++){c=e[a[l].id];var s=void 0===a[l].value||a[l].value;if(Array.isArray(s)&&s.includes(c))return!0;if(""!=s&&c==s||""==s&&""!=c&&null!=c)return!0}}else"AND"==i&&a&&Array.isArray(a)&&(r=a.every((function(t){c=e[t.id];var n=void 0===t.value||t.value;return!(!Array.isArray(n)||!n.includes(c))||(""===n||c==n)&&(""!=n||""!=c&&null!=c)})))}catch(e){console.log(e)}return r},ie=function(){var t,n=(t=wn().mark((function t(n){var r;return wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(p.Sb)()){t.next=4;break}return A("proModalContent",Object(l.__)("Goal Step","wp-marketing-automations")),A("showProModal",!0),t.abrupt("return");case 4:if(!Object(o.isEmpty)(le(n))){t.next=21;break}if(!Object(o.isEqual)(re,n)){t.next=8;break}return L(!1),t.abrupt("return");case 8:return q.sidebarValues=n,a(!0),r={data:{data:{sidebarData:n}},steps:Object(o.cloneDeep)(Q).map((function(e){return e.hasOwnProperty("data")&&e.data.hasOwnProperty("sidebarValues")&&(e.data.sidebarValues={}),e})),links:X,count:Z,optionUpdated:u,actionType:3},t.prev=11,t.next=14,d()({path:Object(p.y)("/automation/".concat(W,"/step/").concat(te)),method:"POST",data:r}).then((function(t){if(200!==t.code)throw Error(Object(p.t)(null==t?void 0:t.message));e(t.message);var n="";t.hasOwnProperty("result")&&t.result.hasOwnProperty("desc_text")&&!Object(o.isEmpty)(t.result.desc_text)&&(n=t.result.desc_text),t.hasOwnProperty("result")&&t.result.hasOwnProperty("meta")&&A("meta",jn(jn({},U),t.result.meta)),C(F.id,jn(jn({},q),{},{desc_text:n}),{step_status:1}),setTimeout((function(){L(!1)}),100),a(!1)})).catch((function(e){throw Error(Object(p.t)(null==e?void 0:e.message))}));case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(11),A("modalData",{status:!0,modalTitle:Object(l.__)("Update Goal","wp-marketing-automations"),error:null===t.t0||void 0===t.t0?void 0:t.t0.message}),a(!1);case 20:Object(p.Eb)(e,3e3);case 21:case"end":return t.stop()}}),t,null,[[11,16]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){On(o,r,a,i,c,"next",e)}function c(e){On(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),ce=[];Object(o.isEmpty)(V)||V.forEach((function(e){e.hasOwnProperty("required")&&e.required&&ce.push(e)}));var le=function(e){var t={};return ce.map((function(n){(!n.hasOwnProperty("toggler")||Object(o.isEmpty)(n.toggler)||oe(e,n.toggler))&&(Array.isArray(e[n.id])&&0===e[n.id].length||""===e[n.id]||void 0===e[n.id])&&(t[n.id]=n.hasOwnProperty("errorMsg")?n.errorMsg:Object(l.__)("This is required field.","wp-marketing-automations")),"bwfan_email_data"===n.id&&(!e.hasOwnProperty("bwfan_email_data")||e.bwfan_email_data.hasOwnProperty("subject")&&Object(o.isEmpty)(e.bwfan_email_data.subject))&&(t[n.id]="error")})),M(t),t};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"wr_header"},Object(r.createElement)("div",{className:"bwf-node-icon icon-goal"},Object(r.createElement)(s.a,{size:26,icon:"goal"})),Object(r.createElement)("div",{className:"wr_event_title"},B.event_name,!Object(p.Sb)()&&Object(r.createElement)(ln.a,null)),Object(r.createElement)("div",{className:"wr_event_variant"},Object(p.Sb)()&&!Object(o.isEmpty)(R)&&"crm_link_trigger"===R&&Object(r.createElement)(nt.a,{canCreate:!0,isLinkTriggerOpen:v,setLinkTriggerOpen:w,hideButton:!1})),Object(r.createElement)("div",{className:"wr_close bwf-cursor-pointer",onClick:function(){return L(!1)}},Object(r.createElement)(s.a,{icon:"close"}))),Object(r.createElement)(p.f.Provider,{value:{errorList:T,setErrorList:M,stepId:te}},Object(r.createElement)(et.a,{onSubmit:function(e){ie(e)},initialValues:ae,validate:function(e){return b(function(e){var t=q.sidebarValues,n=void 0===t?{}:t;if(Object(o.isEmpty)(n))return!1;var r=ae.bwfan_goal_run,a=void 0===r?"":r,i=e.bwfan_goal_run;return a!==(void 0===i?"":i)&&"wait"===a}(e)),!1}},(function(e){var t=e.getInputProps,a=e.values,i=e.errors,m=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"wr_content",ref:I},Object(r.createElement)("div",null,V.map((function(e,n){return Object(r.createElement)(r.Fragment,{key:n},(Object(o.isEmpty)(e.toggler)||oe(a,e.toggler))&&e.wrap_before&&Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_before}}),e.type?Object(r.createElement)(r.Fragment,null,!1!==e.show&&(Object(o.isEmpty)(e.toggler)||oe(a,e.toggler))&&Object(r.createElement)(tt.a,{input:e,formProps:t(e.id),values:a})):e.hint?Object(r.createElement)(r.Fragment,{dangerouslySetInnerHTML:{__html:e.hint},className:c()(e.class)}):null,(Object(o.isEmpty)(e.toggler)||oe(a,e.toggler))&&e.wrap_after&&Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_after}}))}))),u&&Object(r.createElement)("div",{className:"bwf-single-automation-notice"},Object(l.__)("There can be contacts queued at this step, new settings will apply to all of them.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"wr_footer"},Object(r.createElement)(y.a,{className:"bwf-cancel-btn",onClick:function(){return L(!1)}},Object(l.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(y.a,{isPrimary:!0,onClick:function(){m()},className:"bwf-no-ripple",isBusy:n,disabled:Object.keys(i).length},!Object(p.Sb)()&&Object(r.createElement)(s.a,{icon:"king",size:16,color:"#fff"}),Object(l.__)("Save","wp-marketing-automations"))))}))))},Sn=n(201);function xn(e){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pn(){Pn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==xn(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ln(Object(n),!0).forEach((function(t){An(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function In(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Dn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mn=function(){var e=Object(r.useContext)(p.h),t=Dn(Object(r.useState)(!1),2),n=t[0],a=t[1],i=Object(f.a)(),u=i.getSelectedEventData,b=i.getAutomationId,h=i.getautomationMeta,v=Object(m.a)(),w=v.showSidebar,O=v.setAutomationData,g=b(),j=Object(r.useRef)(null),E=Dn(Object(r.useState)(!1),2),_=E[0],k=E[1],N=Dn(Object(r.useState)([]),2),S=N[0],x=N[1],P=h(),L=u(),C=!Object(o.isEmpty)(P)&&P.hasOwnProperty("event_meta")?P.event_meta:{},A=Object(o.isEmpty)(L)?{}:L,I=A.fields,D=void 0===I?[]:I,T=A.default_values,M=void 0===T?{}:T,F=A.need_unique_key,G=void 0!==F&&F;Object(r.useEffect)((function(){x([]),k(!1)}),[]);var z=function(e,t,n){var r=!1,a=t.fields,o=t.relation,i=void 0===o?"OR":o;i=i.toUpperCase();try{var c=null;if("OR"===i){if(a&&Array.isArray(a))for(var l=0;l<a.length;l++){c=e[a[l].id];var s=void 0===a[l].value||a[l].value;if(Array.isArray(s)&&s.includes(c))return!0;if(""!=s&&c==s||""==s&&""!=c&&null!=c)return!0}}else"AND"==i&&a&&Array.isArray(a)&&(r=a.every((function(t){c=e[t.id];var n=void 0===t.value||t.value;return!(!Array.isArray(n)||!n.includes(c))||(""===n||c==n)&&(""!=n||""!=c&&null!=c)})))}catch(e){console.log(e)}return r},U=function(){var t,n=(t=Pn().mark((function t(n){return Pn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(o.isEmpty)(B(n))){t.next=15;break}if(!Object(o.isEqual)(C,n)){t.next=4;break}return w(!1),t.abrupt("return");case 4:return a(!0),t.prev=5,t.next=8,d()({path:Object(p.y)("/automation/".concat(g,"/")),method:"POST",data:{data:{meta:{event_meta:n},isWebhook:G}}}).then((function(t){if(200!==t.code)throw Error(Object(p.t)(null==t?void 0:t.message));e(t.message);var r=Cn({},n);G&&C.hasOwnProperty("webhook_data")&&(r.webhook_data=C.webhook_data),O("meta",Cn(Cn({},P),{},{event_meta:r})),setTimeout((function(){w(!1)}),100),a(!1)})).catch((function(e){throw Error(Object(p.t)(null==e?void 0:e.message))}));case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(5),O("modalData",{status:!0,modalTitle:Object(l.__)("Update Event","wp-marketing-automations"),error:null===t.t0||void 0===t.t0?void 0:t.t0.message}),a(!1);case 14:Object(p.Eb)(e,3e3);case 15:case"end":return t.stop()}}),t,null,[[5,10]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){In(o,r,a,i,c,"next",e)}function c(e){In(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),q=[];Object(o.isEmpty)(D)||D.forEach((function(e){e.hasOwnProperty("required")&&e.required&&q.push(e)}));var B=function(e){var t={};return q.map((function(n){(!n.hasOwnProperty("toggler")||Object(o.isEmpty)(n.toggler)||z(e,n.toggler))&&(Array.isArray(e[n.id])&&0===e[n.id].length||""===e[n.id]||void 0===e[n.id])&&(t[n.id]=n.hasOwnProperty("errorMsg")?n.errorMsg:Object(l.__)("This is required field.","wp-marketing-automations")),"bwfan_email_data"===n.id&&(!e.hasOwnProperty("bwfan_email_data")||e.bwfan_email_data.hasOwnProperty("subject")&&Object(o.isEmpty)(e.bwfan_email_data.subject))&&(t[n.id]="error"),"bwf_form_submit"===n.type&&(e.hasOwnProperty("bwfan-form-field-map")&&e["bwfan-form-field-map"].hasOwnProperty("bwfan_email_field_map")&&""!==e["bwfan-form-field-map"].bwfan_email_field_map||(t["bwfan-form-email-field-map"]="error"))})),x(t),t};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"wr_header"},Object(r.createElement)("div",{className:"bwf-node-icon icon-start"},Object(r.createElement)(s.a,{size:22,icon:"rocket"})),Object(r.createElement)("div",{className:"wr_event_title"},L.hasOwnProperty("event_name")?L.event_name:""),Object(r.createElement)("div",{className:"wr_event_variant"}),Object(r.createElement)("div",{className:"wr_close bwf-cursor-pointer",onClick:function(){return w(!1)}},Object(r.createElement)(s.a,{icon:"close"}))),Object(r.createElement)(p.f.Provider,{value:{errorList:S,setErrorList:x}},Object(r.createElement)(et.a,{onSubmit:function(e){U(e)},initialValues:Cn(Cn({},M),C),validate:function(){return!1}},(function(e){var t=e.getInputProps,a=e.values,i=e.errors,s=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"wr_content",ref:j},Object(r.createElement)("div",null,D.map((function(e,n){return Object(r.createElement)(r.Fragment,{key:n},(Object(o.isEmpty)(e.toggler)||z(a,e.toggler))&&e.wrap_before&&Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_before}}),e.type?Object(r.createElement)(r.Fragment,null,!1!==e.show&&(Object(o.isEmpty)(e.toggler)||z(a,e.toggler))&&Object(r.createElement)(tt.a,{input:e,formProps:t(e.id),values:a})):e.hint?Object(r.createElement)(r.Fragment,{dangerouslySetInnerHTML:{__html:e.hint},className:c()(e.class)}):null,(Object(o.isEmpty)(e.toggler)||z(a,e.toggler))&&e.wrap_after&&Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_after}}))})))),Object(r.createElement)("div",{className:"wr_footer"},Object(r.createElement)(y.a,{className:"bwf-cancel-btn",onClick:function(){return w(!1)}},Object(l.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(y.a,{isPrimary:!0,onClick:function(){s()},className:"bwf-no-ripple",isBusy:n,disabled:Object.keys(i).length},Object(l.__)("Save","wp-marketing-automations"))))}))),Object(p.Sb)()&&Object(r.createElement)(Sn.a,{isOpen:_,setOpenTags:k}))};function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gn(){Gn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==Fn(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(n),!0).forEach((function(t){qn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bn(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hn=function(){var e=Rn(Object(r.useState)(!1),2),t=e[0],n=e[1],a=Rn(Object(r.useState)(!1),2),i=a[0],c=a[1],b=Rn(Object(r.useState)({step:"",name:""}),2),h=b[0],v=b[1],w=Object(r.useContext)(p.h),O=Object(m.a)(),g=O.showSidebar,j=O.setNodeDatabyId,E=O.fetchSplitPathNodes,_=O.setAutomationData,k=Object(f.a)(),N=k.getSidebarNodeData,S=k.getNodeDataByID,x=k.getAutomationId,P=k.getAutomationLinks,L=k.getAutomationSteps,C=k.getCount,A=k.getActionsList,I=k.getGoals,D=k.getautomationMeta,T=N(),M=x(),F=L(),G=P(),z=C(),U=A(),q=I(),B=D(),R=E(),Y=!Object(o.isEmpty)(T)&&T.hasOwnProperty("id")?S(T.id):{},H=(Y.id,Y.stepId),V=void 0===H?0:H,$=Y.data,J=(void 0===$?{}:$).sidebarValues;Object(r.useEffect)((function(){n({}),n(!1)}),[]);var W=!Object(o.isEmpty)(T)&&T.hasOwnProperty("data")?T.data:{},Q=!Object(o.isEmpty)(W)&&W.hasOwnProperty("sidebarValues")?W.sidebarValues:{};Object(r.useEffect)((function(){Q.hasOwnProperty("jump_to")&&!Object(o.isEmpty)(Q.jump_to)&&v(Q.jump_to)}),[Q]);var X={action:Object(l.__)("Action","wp-marketing-automations"),wait:Object(l.__)("Delay","wp-marketing-automations"),conditional:Object(l.__)("Conditional","wp-marketing-automations"),exit:Object(l.__)("Exit","wp-marketing-automations"),benchmark:Object(l.__)("Goal","wp-marketing-automations")},Z=Object(r.useMemo)((function(){var e={stepsOptArr:[],stepsOptions:[{value:"",label:Object(l.__)("Select Step","wp-marketing-automations")}]};return Object(o.isEmpty)(F)||(F.map((function(t){var n=t.stepId,r=void 0===n?0:n,a=t.id,o=void 0===a?0:a;if(!["yesNoNode","start","end","exit","jump","split","splitpath"].includes(t.type)&&!e.stepsOptArr.hasOwnProperty(o)&&!R.includes(o)){var i=[Object(l.__)("Step","wp-marketing-automations")];i.push(o),X.hasOwnProperty(t.type)&&i.push(" : "+X[t.type]),"action"==t.type&&t.hasOwnProperty("data")&&U.list.hasOwnProperty(t.data.selected)&&U.list[t.data.selected].hasOwnProperty("action_name")&&(U.list[t.data.selected].hasOwnProperty("integration_nicename")?i.push(" - "+U.list[t.data.selected].integration_nicename+" : "):i.push(" - "),i.push(U.list[t.data.selected].action_name)),"benchmark"==t.type&&t.hasOwnProperty("data")&&q.list.hasOwnProperty(t.data.benchmark)&&q.list[t.data.benchmark].hasOwnProperty("event_name")&&(q.list[t.data.benchmark].hasOwnProperty("source_label")&&i.push(q.list[t.data.benchmark].source_label+" : "),i.push(q.list[t.data.benchmark].event_name)),e.stepsOptArr[r]=i.join(" "),e.stepsOptions.push({value:r,label:i.join(" ")})}})),e.stepsOptArr.end=Object(l.__)("End Automation","wp-marketing-automations"),e.stepsOptions.push({value:"end",label:Object(l.__)("End Automation","wp-marketing-automations")})),e}),[F]),K=Z.stepsOptArr,ee=Z.stepsOptions,te=function(){var e,t=(e=Gn().mark((function e(){var t,r;return Gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(p.Sb)()){e.next=4;break}return _("proModalContent",Object(l.__)("Jump Step","wp-marketing-automations")),_("showProModal",!0),e.abrupt("return");case 4:if(h.hasOwnProperty("step")&&""!=h.step&&h.hasOwnProperty("name")&&""!=h.name){e.next=7;break}return n(!0),e.abrupt("return");case 7:if(n(!1),t=Un(Un({},Q),{},{jump_to:h}),!Object(o.isEqual)(J,t)){e.next=12;break}return g(!1),e.abrupt("return");case 12:return e.prev=12,c(!0),r={data:{data:{sidebarData:t}},steps:Object(o.cloneDeep)(F).map((function(e){return e.hasOwnProperty("data")&&e.data.hasOwnProperty("sidebarValues")&&(e.data.sidebarValues={}),e})),links:G,count:z},e.next=17,d()({path:Object(p.y)("/automation/".concat(M,"/step/").concat(V)),method:"POST",data:r}).then((function(e){if(200!==e.code)throw Error(Object(p.t)(null==e?void 0:e.message));w(e.message),j(T.id,Un(Un({},W),{},{sidebarValues:t}),{step_status:1}),e.hasOwnProperty("result")&&e.result.hasOwnProperty("meta")&&_("meta",Un(Un({},B),e.result.meta)),setTimeout((function(){g(!1)}),100),c(!1)})).catch((function(e){throw Error(Object(p.t)(null==e?void 0:e.message))}));case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(12),_("modalData",{status:!0,modalTitle:Object(l.__)("Update Jump","wp-marketing-automations"),error:null===e.t0||void 0===e.t0?void 0:e.t0.message}),c(!1);case 23:Object(p.Eb)(w,3e3);case 24:case"end":return e.stop()}}),e,null,[[12,19]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Bn(o,r,a,i,c,"next",e)}function c(e){Bn(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"wr_header"},Object(r.createElement)("div",{className:"bwf-node-icon icon-jump"},Object(r.createElement)(s.a,{size:28,icon:"jump"})),Object(r.createElement)("div",{className:"wr_event_title"},Object(r.createElement)("span",null,Object(l.__)("Jump","wp-marketing-automations")),!Object(p.Sb)()&&Object(r.createElement)(ln.a,null)),Object(r.createElement)("div",{className:"wr_event_variant"}),Object(r.createElement)("div",{className:"wr_close bwf-cursor-pointer",onClick:function(){g(!1)}},Object(r.createElement)(s.a,{icon:"close"}))),Object(r.createElement)("div",{className:"wr_content"},Object(r.createElement)("div",{className:"bwf-jump-wrap"},Object(r.createElement)("div",{className:"bwf-jump-skip-step-select "+(t?"has-error":"")},Object(r.createElement)("div",{className:"bwf-w-120 bwf_bold bwf-mb-8"},Object(l.__)("Jump To","wp-marketing-automations")),Object(r.createElement)(u.SelectControl,{value:h.step,className:"bwf_w_full",options:ee,onChange:function(e){v({step:e,name:e?K[e]:""})}}),t&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"has-bwfan-error"},Object(l.__)("This is a required field.","wp-marketing-automations"))))),Object(r.createElement)("div",{className:"bwf_clear_24"})),Object(r.createElement)("div",{className:"wr_footer"},Object(r.createElement)(y.a,{className:"bwf-cancel-btn",onClick:function(){return g(!1)}},Object(l.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(y.a,{isPrimary:!0,onClick:te,isBusy:i,className:"bwf-no-ripple"},!Object(p.Sb)()&&Object(r.createElement)(s.a,{icon:"king",size:16,color:"#fff"}),Object(l.__)("Save","wp-marketing-automations"))))},Vn=n(49);function $n(e){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jn(){Jn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==$n(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){Xn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zn(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Kn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return er(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tr=function(){var e=Kn(Object(r.useState)(!1),2),t=e[0],n=e[1],a=Kn(Object(r.useState)(!1),2),i=a[0],c=a[1],b=Kn(Object(r.useState)(""),2),h=b[0],v=b[1],w=Kn(Object(r.useState)(""),2),O=w[0],g=w[1],j=Kn(Object(r.useState)(""),2),E=j[0],_=j[1],k=Object(r.useContext)(p.h),N=Object(m.a)(),S=N.showSidebar,x=N.setNodeDatabyId,P=N.setAutomationData,L=N.setSplitNodePath,C=N.fetchAutomationStat,A=Object(r.useRef)(new AbortController),I=Object(f.a)(),D=I.getSidebarNodeData,T=I.getNodeDataByID,M=I.getAutomationId,F=(0,I.getautomationMeta)(),G=D(),z=M(),U=!Object(o.isEmpty)(G)&&G.hasOwnProperty("id")?T(G.id):{},q=U.id,B=void 0===q?0:q,R=U.stepId,Y=void 0===R?0:R,H=[{key:"",label:Object(l.__)("Select","wp-marketing-automations")},{key:"2",label:"2"},{key:"3",label:"3"}];Object(r.useEffect)((function(){return n({}),n(!1),function(){A.current.abort()}}),[]);var V=!Object(o.isEmpty)(G)&&G.hasOwnProperty("data")?G.data:{},$=!Object(o.isEmpty)(V)&&V.hasOwnProperty("sidebarValues")?V.sidebarValues:{};Object(r.useEffect)((function(){$.hasOwnProperty("split_path")&&!Object(o.isEmpty)($.split_path)&&v($.split_path),$.hasOwnProperty("title")&&!Object(o.isEmpty)($.title)&&g($.title),$.hasOwnProperty("desc")&&!Object(o.isEmpty)($.desc)&&_($.desc)}),[$]);var J=function(){var e,t=(e=Jn().mark((function e(){var t,r,a,o,i,s,u;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(p.Sb)()){e.next=4;break}return P("proModalContent",Object(l.__)("Split Path Step","wp-marketing-automations")),P("showProModal",!0),e.abrupt("return");case 4:if(""!=h&&""!=O){e.next=7;break}return n(!0),e.abrupt("return");case 7:return c(!0),n(!1),t=Qn(Qn({},$),{},{split_path:h,title:O,desc:E}),r={data:{data:{sidebarData:t}}},a=[],$.hasOwnProperty("split_path")&&""!=$.split_path||(o=L(B,h),i=o.newStep,s=o.newLink,u=o.newCount,r=Qn(Qn({},r),{},{steps:i,links:s,count:u}),a=i,P("statLoading",!0)),e.prev=13,e.next=16,d()({path:Object(p.y)("/automation/".concat(z,"/step/").concat(Y)),method:"POST",data:r}).then((function(e){if(200!==e.code)throw Error(Object(p.t)(null==e?void 0:e.message));k(e.message),$.hasOwnProperty("split_path")&&""!=$.split_path?x(G.id,Qn(Qn({},V),{},{sidebarValues:t}),{step_status:1}):x(G.id,Qn(Qn({},V),{},{sidebarValues:t}),{step_status:1},a),C(),e.hasOwnProperty("result")&&e.result.hasOwnProperty("meta")&&P("meta",Qn(Qn({},F),e.result.meta)),setTimeout((function(){S(!1)}),100),c(!1)})).catch((function(e){throw Error(Object(p.t)(null==e?void 0:e.message))}));case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(13),P("modalData",{status:!0,modalTitle:Object(l.__)("Update Split","wp-marketing-automations"),error:null===e.t0||void 0===e.t0?void 0:e.t0.message}),c(!1);case 22:Object(p.Eb)(k,3e3);case 23:case"end":return e.stop()}}),e,null,[[13,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Zn(o,r,a,i,c,"next",e)}function c(e){Zn(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"wr_header"},Object(r.createElement)("div",{className:"bwf-node-icon icon-split-test"},Object(r.createElement)(s.a,{size:28,icon:"split-test"})),Object(r.createElement)("div",{className:"wr_event_title"},Object(r.createElement)("span",null,Object(l.__)("Split Path","wp-marketing-automations")),!Object(p.Sb)()&&Object(r.createElement)(ln.a,null)),Object(r.createElement)("div",{className:"wr_event_variant"}),Object(r.createElement)("div",{className:"wr_close bwf-cursor-pointer",onClick:function(){S(!1)}},Object(r.createElement)(s.a,{icon:"close"}))),Object(r.createElement)("div",{className:"wr_content "+($.hasOwnProperty("split_path")&&""!=$.split_path?"":"split-full")},Object(r.createElement)("div",{className:"bwf-split-wrap"},Object(r.createElement)("div",{className:"bwf-split-title-text "+(t&&""===O?"has-error":"")},Object(r.createElement)("div",{className:"bwf-w-120 bwf_bold bwf-mb-8"},Object(l.__)("Name","wp-marketing-automations")),Object(r.createElement)(u.TextControl,{className:"bwf-h-36",value:O,onChange:function(e){return g(e)},placeholder:Object(l.__)("Enter Name","wp-marketing-automations")}),t&&""===O&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"has-bwfan-error"},Object(l.__)("This is a required field.","wp-marketing-automations")))),(!$.hasOwnProperty("split_path")||""==$.split_path)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-split-path-select "+(t&&""===h?"has-error":"")},Object(r.createElement)("div",{className:"bwf-w-120 bwf_bold bwf-mb-8"},Object(l.__)("No of Paths","wp-marketing-automations")),Object(r.createElement)(Vn.b,{selected:h,className:"bwf_w_full",options:H,onChange:function(e){v(e)}}),t&&""===h&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"has-bwfan-error"},Object(l.__)("This is a required field.","wp-marketing-automations"))))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-split-title-desc "},Object(r.createElement)("div",{className:"bwf-w-120 bwf_bold bwf-mb-8"},Object(l.__)("Description","wp-marketing-automations")),Object(r.createElement)(u.TextareaControl,{placeholder:Object(l.__)("Type here …","wp-marketing-automations"),value:E,onChange:function(e){return _(e)},rows:4})),Object(r.createElement)("div",{className:"bwf_clear_24"}))),Object(r.createElement)("div",{className:"wr_footer"},Object(r.createElement)(y.a,{className:"bwf-cancel-btn",onClick:function(){return S(!1)},disabled:i},Object(l.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(y.a,{isPrimary:!0,className:"bwf-no-ripple",onClick:J,isBusy:i,disabled:i},!Object(p.Sb)()&&Object(r.createElement)(s.a,{icon:"king",size:16,color:"#fff"}),$.hasOwnProperty("split_path")&&""!=$.split_path?Object(l.__)("Save","wp-marketing-automations"):Object(l.__)("Add","wp-marketing-automations"))))},nr=function(){var e=Object(f.a)(),t=e.openSidebar,n=e.getSidebarNodeData,a=t(),o=n(),i=o.type,c=void 0===i?"":i,s=o.data,u=(void 0===s?{}:s).selected,m=void 0===u?"":u;return a?Object(r.createElement)("div",{className:"bwf-wl-wrap"},Object(r.createElement)("div",{className:"wl-sidebar-overlay step-"+c+"-wrap ",onClick:function(e){return e.preventDefault()}}),Object(r.createElement)("div",{className:"wr wr-expanded step-"+c+"-wrap-content "+("wp_sendemail"==m?"bwf-mail-action":"")},function(){switch(c){case"start":return Object(r.createElement)(Mn,null);case"action":return Object(r.createElement)(St,null);case"conditional":return Object(r.createElement)(yn,null);case"wait":return Object(r.createElement)(on,null);case"benchmark":return Object(r.createElement)(Nn,null);case"jump":return Object(r.createElement)(Hn,null);case"split":return Object(r.createElement)(tr,null);default:return Object(r.createElement)(r.Fragment,null,Object(l.__)("Node Type not registered","wp-marketing-automations"))}}())):Object(r.createElement)(r.Fragment,null)},rr=n(74),ar=n(108),or=n(1049),ir=n(1109);n(1101),n(1376);function cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sr=function(e){var t=e.id,n=e.sourceX,o=e.sourceY,i=e.targetX,c=e.targetY,s=e.sourcePosition,u=e.targetPosition,p=e.style,b=void 0===p?{}:p,d=(e.data,e.arrowHeadType),h=e.markerEndId,y=e.source,v=e.sourceHandleId,w=Object(a.g)({sourceX:n,sourceY:o,sourcePosition:s,targetX:i,targetY:c,targetPosition:u}),O=Object(a.i)(d,h),g=cr(Object(a.h)({sourceX:n,sourceY:o,targetX:i,targetY:c}),2),j=g[0],E=g[1],_=Object(m.a)(),k=_.setNodeForAdd,N=_.copyNodeHere,S=_.setOpenStepModal,x=_.setModalAnchorNode,P=Object(f.a)(),L=P.getEnableCopy,C=P.getEnableMove,A=P.getNodeDataByID,I=L(),D=C(),T=A(y);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("path",{id:t,style:b,className:"react-flow__edge-path",d:w,markerEnd:O}),Object(r.createElement)("foreignObject",{width:23,height:23,x:j-11.5,y:E-11.5,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml"},Object(r.createElement)("div",{className:"bwf-edge-body"},I||D?Object(r.createElement)("div",{className:"bwf-drag-area",onClick:function(){return N(T,"after",v||"")}},Object(r.createElement)("div",{className:"bwf-drag-node is-edge"},Object(r.createElement)("div",{className:"bwf-node-add"})),Object(r.createElement)("div",{className:"bwf-paste-label"},Object(l.__)("Paste Here","wp-marketing-automations"))):Object(r.createElement)("div",{className:"bwf-node-add",onClick:function(e){k(y,{option:v}),S(!0),x(e.target)}}))))},ur=n(137),mr=n(19),fr=(n(1377),n(31));function pr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return br(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var dr=function(){var e=Object(f.a)(),t=e.getShowContactModalId,n=e.getAutomationData,a=e.getShowContactModalType,i=e.getContactModalExtraData,b=t(),h=a(),y=n().ID,w=i(),O=Object(o.isEmpty)(w)||Object(o.isNull)(w)?{}:w,g=O.split,j=void 0!==g&&g,E=O.path,_=void 0===E?"":E,k=O.pathCount,N=void 0===k?2:k,S=Object(m.a)().setAutomationData,x=pr(Object(r.useState)(!0),2),P=x[0],L=x[1],C=pr(Object(r.useState)({}),2),A=C[0],I=C[1],D=pr(Object(r.useState)(10),2),T=D[0],M=D[1],F=pr(Object(r.useState)(0),2),G=F[0],z=F[1],U=pr(Object(r.useState)(!1),2),q=U[0],B=U[1],R=pr(Object(r.useState)(_),2),Y=R[0],H=R[1],V=Object(r.useRef)(new AbortController);Object(r.useEffect)((function(){return function(){S("contactModalData",{}),V.current.abort()}}),[]),Object(r.useEffect)((function(){L(!0),I({}),function(){try{var e={limit:T,offset:G,type:h};""!==Y&&(e.path=Y);var t=Object(mr.stringify)(e),n="string"!=typeof b?parseInt(b):0;d()({path:Object(p.y)("/automation/".concat(y,"/step/").concat(n,"/contacts?").concat(t)),method:"GET",signal:V.current.signal}).then((function(e){200===e.code&&(Object(o.isEmpty)(e.result)||I(e.result)),L(!1)}))}catch(e){L(!1)}}()}),[b,G,T,Y]);var $=c()("bwfcrm-contacts-list",{"has-search":!1}),J=[{key:"name",label:Object(l.__)("Name","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-210 bwf-word-break"},{key:"email",label:Object(l.__)("Email","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-word-break bwf-w-150"},{key:"date",label:function(){if(j)return Object(l.__)("Date","wp-marketing-automations");switch(h){case"completed":return Object(l.__)("Completed On","wp-marketing-automations");case"queued":return Object(l.__)("Queued On","wp-marketing-automations");case"failed":return Object(l.__)("Failed On","wp-marketing-automations");case"active":return Object(l.__)("Started On","wp-marketing-automations");case"skipped":return Object(l.__)("Skipped On","wp-marketing-automations");default:return Object(l.__)("Date","wp-marketing-automations")}}(),isLeftAligned:!0,cellClassName:"bwf-w-150 bwf-word-break"}];!j||""!=_&&"all"!=_||J.push({key:"path",label:Object(l.__)("Path","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-90"}),J.push({key:"traillink",label:"",isLeftAligned:!0,cellClassName:"bwf-w-100"});var W,Q,X,Z,K,ee,te=function(e){return Object(r.createElement)(fr.a,{href:"admin.php?page=autonami&path=/contact/"+e.id,type:"bwf-crm",className:"bwf-cursor-pointer bwf-a-no-underline",style:{color:"#0073aa"},key:e.id},e.hasOwnProperty("name")&&""!==e.name?e.name:"-")},ne=function(e){var t=[];return Object(o.isEmpty)(e)||e.map((function(e){var n=[{display:te(e),value:""},{display:e.email,value:""},{display:e.hasOwnProperty("time")&&""!==e.time?Object(p.cb)(_e.a.unix(e.time).format("MM/DD/YYYY HH:mm:ss")):"-",value:""}];!j||""!=_&&"all"!=_||n.push({display:e.hasOwnProperty("path")&&le.hasOwnProperty(e.path)?Object(r.createElement)("div",{className:"bwf-splitpath bwfpathid-".concat(e.path)},Object(l.sprintf)(Object(l.__)("Path %s","wp-marketing-automations"),le[e.path])):"-",value:""}),n.push({display:e.hasOwnProperty("trail")&&""!==e.trail?Object(r.createElement)("div",{onClick:function(){Object(p.Sb)()?(S("customerSelected",e),S("showContactModalId",0),S("showContactModalType","")):B(!0)},className:"bwf-cursor-pointer bwf-display-flex bwf-flex-start gap-8",style:{color:"#0073aa"}},!Object(p.Sb)()&&Object(r.createElement)(s.a,{icon:"king",size:16}),Object(l.__)("View Journey","wp-marketing-automations")):"-",value:""}),t.push(n)})),t},re=function(e){z((e-1)*T)},ae=function(e){return"per_page"!==e?function(){}:oe},oe=function(e){e!==T&&M(e)},ie=Object(r.createElement)("div",{className:"bwf-contact-zero-state"},Object(r.createElement)(s.a,{icon:"contact-zero"}),Object(r.createElement)("div",{className:"bwf-heading"},Object(l.__)("No Contacts","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-desc"},Object(l.__)("Once your customer start purchase or interact with the product. The contacts will appear here","wp-marketing-automations"))),ce=function(){var e=A.total,t=void 0===e?0:e,n=A.path_total,r=void 0===n?0:n;return""==Y?parseInt(t):parseInt(r)},le=Object(p.Ac)();return Object(r.createElement)(u.Modal,{className:"bwf-admin-modal bwf-admin-modal-large bwf-single-automation-contact-modal bwf-h--core-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},function(){var e="",t=ce();if(j)e=""==_||"all"==_?Object(l.__)("Split Path Contacts","wp-marketing-automations"):Object(l.sprintf)(Object(l.__)("Path %s Contacts","wp-marketing-automations"),le[_]);else switch(h){case"completed":e=Object(l.__)("Completed Contacts","wp-marketing-automations");break;case"queued":e=Object(l.__)("Queued Contacts","wp-marketing-automations");break;case"failed":e=Object(l.__)("Failed Contacts","wp-marketing-automations");break;case"skipped":e=Object(l.__)("Skipped Contacts","wp-marketing-automations");break;case"active":e=Object(l.__)("Active Contacts","wp-marketing-automations");break;default:e=Object(l.__)("Contacts","wp-marketing-automations")}return e+" "+(t>0?"("+t+")":"")}()),Object(r.createElement)("span",{onClick:function(){S("showContactModalId",0),S("showContactModalType","")},className:"bwf-modal-close"},Object(r.createElement)(s.a,{icon:"close",color:"#353030"}))),(Q=A.data,X=void 0===Q?[]:Q,Z=A.total,K=void 0===Z?0:Z,A.path_total,ee=parseInt(G)/parseInt(T)+1,P||0!==parseInt(K)?Object(r.createElement)(r.Fragment,null,j&&(""===_||"all"===_)&&Object(r.createElement)("div",{className:"bwf-path-selector"},Object(r.createElement)(u.SelectControl,{value:Y,className:"bwf_w_full",options:(W=[{label:Object(l.__)("Path: All","wp-marketing-automations"),value:""},{label:Object(l.__)("Path A","wp-marketing-automations"),value:"1"},{label:Object(l.__)("Path B","wp-marketing-automations"),value:"2"}],3===parseInt(N)&&W.push({label:Object(l.__)("Path C","wp-marketing-automations"),value:"3"}),W),onChange:function(e){H(e)}})),Object(r.createElement)(ur.a,{className:$,title:"",rows:P?[]:ne(X),headers:J,query:{paged:ee},rowsPerPage:T,totalRows:ce(),isLoading:P,onPageChange:re,onQueryChange:ae,showMenu:!1,emptyMessage:Object(l.__)("No contacts found","wp-marketing-automations")}),!Object(p.Sb)()&&Object(r.createElement)(v.b,{isOpen:q,onRequestClose:function(){return B(!1)},modalContent:{isFeature:!0,featureTitle:Object(l.__)("Contact Journey","wp-marketing-automations"),proLink:Object(p.ab)("upgrade",{utm_medium:"Automation+Step+Contact+Journey+Upgrade+Modal"})}})):Object(r.createElement)(r.Fragment,null,ie)))},hr=n(55);function yr(e){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vr(){vr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==yr(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(n),!0).forEach((function(t){gr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jr(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Er(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kr=function(e){var t=e.isProActive,n=void 0!==t&&t,a=Object(r.useContext)(p.h),i=Er(Object(r.useState)(!1),2),c=i[0],b=i[1],d=Er(Object(r.useState)(!1),2),h=d[0],y=d[1],v=Er(Object(r.useState)(!1),2),w=v[0],O=v[1],g=Object(m.a)(),j=g.addNewStep,E=g.unsetCurrentNode,_=g.setOpenStepModal,k=g.setAutomationData,N=g.fetchSplitPathNodes,S=g.showSidebar,x=g.isInsideConditional,P=Object(f.a)(),L=P.getCurrentNode,C=P.getCurrentNodeAction,A=P.getOpenStepModal,I=P.getModalAnchorNode,D=A(),T=L(),M=C(),F=I();Object(r.useEffect)((function(){if(!Object(o.isEmpty)(T)&&T.hasOwnProperty("id")){var e=x(T.id);O(e),N().includes(T.id)?y(!0):y(!1)}}),[T]);var G=function(){var e,t=(e=vr().mark((function e(){var t,n,r,o,i=arguments;return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"action",b(!0),n=M.data&&M.data.option?M.data.option:"",r=M.data&&M.data.position?M.data.position:"after",o=Or(Or({},T),{},{xPos:T.position.x,yPos:T.position.y}),e.next=7,j(t,o,n,r,{}).then((function(e){Object(p.Eb)(a,3e3),E(),b(!1),_(!1),"split"==t&&(k("sidebarNodeData",e),S(!0))}));case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){jr(o,r,a,i,c,"next",e)}function c(e){jr(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return D&&Object(r.createElement)(H.a,{onFocusOutside:function(){E(),_(!1)},position:"center",className:"bwf-type-select-modal",onClick:function(e){return e.stopPropagation()},anchorRef:F},!c&&Object(r.createElement)("div",{className:"bwf-title-wrap"},Object(r.createElement)("div",{className:"bwf-title bwf_w_full"},Object(l.__)("Add Step","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-cross bwf-cursor-pointer",onClick:function(){return _(!1)}},Object(r.createElement)(s.a,{icon:"cross",size:20})," ")),Object(r.createElement)("div",{className:"bwf-type-select-wrapper "+(c?"is-loading":"")},c?Object(r.createElement)("div",{className:"bwf-display-flex-column set-center is-loading"},Object(r.createElement)(hr.a,{spaceClass:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-h3"},Object(l.__)("Please Wait…","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-p"},Object(l.__)("We are adding step in the flow","wp-marketing-automations"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(u.Button,{isSecondary:!0,onClick:function(){G("action")}},Object(r.createElement)("span",{className:"bwf-type-select-icons"},Object(r.createElement)(s.a,{icon:"charge"})),Object(l.__)("Action","wp-marketing-automations")),Object(r.createElement)(u.Button,{isSecondary:!0,onClick:function(){G("wait")}},Object(r.createElement)("span",{className:"bwf-type-select-icons"},Object(r.createElement)(s.a,{icon:"time-left"})),Object(l.__)("Delay","wp-marketing-automations")),Object(r.createElement)(u.Button,{isSecondary:!0,onClick:function(){n?G("conditional"):(k("proModalContent",{featureTitle:Object(l.__)("Conditional Step","wp-marketing-automations"),proLink:Object(p.ab)("upgrade",{utm_medium:"Automation+Add+Step+Condition+Upgrade+Modal"}),image:Object(p.lb)("conditional-step.png"),benefit:Object(l.__)("Use hundreds of conditions and advanced branching to create a highly tailored contact journey. Unlock this and other awesome features.","wp-marketing-automations")}),k("showProModal",!0))},style:{width:"100%"}},Object(r.createElement)("span",{className:"bwf-type-select-icons"},Object(r.createElement)(s.a,{icon:"condition"})),Object(l.__)("Condition","wp-marketing-automations"),!n&&Object(r.createElement)("span",{className:"bwf-flex",style:{marginLeft:"auto"}},Object(r.createElement)(s.a,{icon:"king",size:16}))),!h&&Object(r.createElement)(r.Fragment,null,!w&&Object(r.createElement)(u.Button,{isSecondary:!0,onClick:function(){n?G("split"):(k("proModalContent",{featureTitle:Object(l.__)("Split Path","wp-marketing-automations"),proLink:Object(p.ab)("upgrade",{utm_medium:"Automation+Add+Step+Split+Path+Upgrade+Modal"}),image:Object(p.lb)("split-path.png"),benefit:Object(l.__)("Test the subject lines, frequency or different automation paths to uncover hidden profits.Unlock this and other awesome features.","wp-marketing-automations")}),k("showProModal",!0))},style:{width:"100%"}},Object(r.createElement)("span",{className:"bwf-type-select-icons"},Object(r.createElement)(s.a,{icon:"split-test"})),Object(l.__)("Split Path","wp-marketing-automations"),!n&&Object(r.createElement)("span",{className:"bwf-flex",style:{marginLeft:"auto"}},Object(r.createElement)(s.a,{icon:"king",size:16}))),Object(r.createElement)(u.Button,{isSecondary:!0,style:{width:"100%"},onClick:function(){n?G("benchmark"):(k("proModalContent",{featureTitle:Object(l.__)("Goal Step","wp-marketing-automations"),proLink:Object(p.ab)("upgrade",{utm_medium:"Automation+Add+Step+Goal+Upgrade+Modal"}),image:Object(p.lb)("goal-step.png"),benefit:Object(l.__)("Never send unnecessary messages to users. Pull users to a specific step when a goal is achieved. Unlock this and other awesome features.","wp-marketing-automations")}),k("showProModal",!0))}},Object(r.createElement)("span",{className:"bwf-type-select-icons"},Object(r.createElement)(s.a,{icon:"goal"})),Object(l.__)("Goal","wp-marketing-automations"),!n&&Object(r.createElement)("span",{className:"bwf-flex",style:{marginLeft:"auto"}},Object(r.createElement)(s.a,{icon:"king",size:16}))),Object(r.createElement)(u.Button,{isSecondary:!0,style:{width:"100%"},onClick:function(){n?G("jump"):(k("proModalContent",{featureTitle:Object(l.__)("Jump Step","wp-marketing-automations"),proLink:Object(p.ab)("upgrade",{utm_medium:"Automation+Add+Step+Jump+Upgrade+Modal"}),image:Object(p.lb)("jump-step.png"),benefit:Object(l.__)("Create advanced automations by letting contacts jump to any step in the journey.Unlock this and other awesome features.","wp-marketing-automations")}),k("showProModal",!0))}},Object(r.createElement)("span",{className:"bwf-type-select-icons"},Object(r.createElement)(s.a,{icon:"jump"})),Object(l.__)("Jump","wp-marketing-automations"),!n&&Object(r.createElement)("span",{className:"bwf-flex",style:{marginLeft:"auto"}},Object(r.createElement)(s.a,{icon:"king",size:16}))),Object(r.createElement)(u.Button,{isSecondary:!0,style:{width:"100%"},onClick:function(){n?G("exit"):(k("proModalContent",{featureTitle:Object(l.__)("Exit Automation","wp-marketing-automations"),proLink:Object(p.ab)("upgrade",{utm_medium:"Automation+Add+Step+Exit+Upgrade+Modal"}),image:Object(p.lb)("exit-step.png"),benefit:Object(l.__)("Use this to make strategic decisions to end automation based on certain conditions.Unlock this and other awesome features.","wp-marketing-automations")}),k("showProModal",!0))}},Object(r.createElement)("span",{className:"bwf-type-select-icons"},Object(r.createElement)(s.a,{icon:"exit"})),Object(l.__)("Exit","wp-marketing-automations"),!n&&Object(r.createElement)("span",{className:"bwf-flex",style:{marginLeft:"auto"}},Object(r.createElement)(s.a,{icon:"king",size:16})))))))},Nr=n(65),Sr=(n(1127),n(25)),xr=n(34),Pr=n.n(xr),Lr=n(36),Cr=n.n(Lr),Ar=n(53);function Ir(e){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mr(){Mr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==Ir(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(n),!0).forEach((function(t){zr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ur(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}var qr=function(e){return{name:"contact-journey",className:"bwf-search-bwf-tags-result",options:function(t){return(n=Mr().mark((function t(n){var r,a,o;return Mr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={search:n,limit:10,offset:0},t.next=3,d()({path:Object(p.y)("/automation/".concat(e,"/contacts/journey?")+Object(mr.stringify)(r)),method:"GET"});case 3:return a=t.sent,o=[],Pr()(a,"result")&&!Cr()(a.result)&&(o=a.result.map((function(e){return Gr(Gr({},e),{},{key:String(e.trail),label:Cr()(e.f_name)&&Cr()(e.l_name)?e.email:e.f_name+" "+e.l_name})}))),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})),r=function(){var e=this,t=arguments;return new Promise((function(r,a){var o=n.apply(e,t);function i(e){Ur(o,r,a,i,c,"next",e)}function c(e){Ur(o,r,a,i,c,"throw",e)}i(void 0)}))},function(e){return r.apply(this,arguments)})(t);var n,r},isDebounced:!0,getOptionIdentifier:function(e){return e.key},getOptionKeywords:function(e){return[e.label]},getOptionLabel:function(e,t){return Object(r.createElement)("span",{key:"name",className:"bwf-customer-journey-search-result-name","aria-label":e.label},Object(r.createElement)("div",{className:"bwf-search-wrap"},Object(r.createElement)("div",{className:"bwf-search-label"},e.label),Object(r.createElement)("div",{className:"bwf-search-date"},"On:"," ",e.hasOwnProperty("c_date")?Object(p.cb)(e.c_date):"")))},getOptionCompletion:function(e){return e}}},Br=function(e){var t=Dr(Object(r.useState)(!1),2),n=t[0],a=t[1],i=e.automationId,c=Object(r.useRef)(),u=Object(m.a)().setAutomationData,b=Object(f.a)().getCustomerSelected;Object(p.Bc)(c,(function(){return a(!1)}));var d=b(),h=function(e){if(Object(o.isArray)(e)&&!Cr()(e)){if(!Cr()(e)){var t=e[e.length-1];(e=[])[0]=t}var n=e.find((function(e){return Pr()(e,"key")}));u("customerSelected",n),a(!1)}else u("customerSelected",{})};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>body{overflow-y: hidden !important;}</style>"}}),Object(r.createElement)("div",{className:"bwf-automation-customer-journey-wrap"},Object(r.createElement)("div",{className:"bwf-automation-customer-journey"},Object(r.createElement)("div",{className:"bwf-customer-journey-header"},Object(r.createElement)("div",{className:"bwf-section-header",onClick:function(){Object(p.Sb)()?!n&&Cr()(d)&&a(!0):(u("proModalContent",{featureTitle:Object(l.__)("Contact Journey","wp-marketing-automations"),proLink:Object(p.ab)("upgrade",{utm_medium:"Automation+Workflow+Contact+Journey+Upgrade+Modal"})}),u("showProModal",!0))}},Object(r.createElement)(s.a,{icon:Object(p.Sb)()?"split-path":"king",width:16,height:18}),Object(r.createElement)("span",null,Object(l.__)("View Contact Journey","wp-marketing-automations")))),Object(p.Sb)()&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-customer-journey-popover-wrap"},n&&Object(r.createElement)(H.a,{ref:c,onFocusOutside:function(){return a(!1)},className:"bwf-customer-journey-popover",focusOnMount:!1,placement:"bottom"},Object(r.createElement)("div",{className:"bwf-customer-journey-popover-content"},Object(r.createElement)(Sr.a,{autocompleter:qr(i),className:"bwf-customer-journey-search",placeholder:Object(l.__)("Search by Name, Email and Phone","wp-marketing-automations"),multiple:!1,inlineTags:!1,selected:[],onChange:h,bwfEnableEmptySearch:!0})))))),!Cr()(d)&&Object(r.createElement)("div",{className:"bwf-customer-selected"},Object(r.createElement)(Ar.a,{id:d.trail,label:d.hasOwnProperty("label")&&!Cr()(d.label.trim())?d.label:d.email,remove:function(){return u("customerSelected",{})}}))))},Rr=n(1091);function Yr(e){return(Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hr(){Hr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==Yr(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(n),!0).forEach((function(t){Jr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wr(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Qr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Wr(o,r,a,i,c,"next",e)}function c(e){Wr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kr=function(){var e=Object(m.a)(),t=e.setAutomationData,n=e.declareWinnerPath,a=Object(f.a)(),i=a.selectedWinner,c=a.getAutomationId,b=a.getautomationMeta,h=Xr(Object(r.useState)(!1),2),v=h[0],w=h[1],O=Xr(Object(r.useState)(!1),2),g=O[0],j=O[1],E=Xr(Object(r.useState)(!1),2),_=E[0],k=E[1],N=Xr(Object(r.useState)(!1),2),S=N[0],x=N[1],P=Xr(Object(r.useState)(!0),2),L=P[0],C=P[1],A=Xr(Object(r.useState)(""),2),I=A[0],D=A[1],T=Xr(Object(r.useState)(!1),2),M=T[0],F=T[1],G=Object(p.Ac)(),z=i(),U=z.nodeId,q=void 0===U?"":U,B=z.stepID,R=void 0===B?"":B,Y=z.title,H=void 0===Y?"":Y,V=Object(r.useRef)(new AbortController),$=b(),J=c(),W=function(){t("declareWinner",{}),t("showSplitWinner",!1)};Object(r.useEffect)((function(){!function(){try{x(!0),d()({path:Object(p.y)("/automation/".concat(J,"/analytics/").concat(R,"?mode=split")),method:"GET"}).then((function(e){200===e.code&&e.result.hasOwnProperty("data")&&!Object(o.isEmpty)(e.result.data)&&C(e.result.data),x(!1)}))}catch(e){x(!1)}}()}),[]);var Q=function(){var e=Qr(Hr().mark((function e(r,a,o){return Hr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,d()({path:Object(p.y)("/automation/".concat(J,"/step/").concat(a,"/declare-winner")),method:"POST",signal:V.current.signal,data:{node_id:r,path_num:o}}).then(function(){var e=Qr(Hr().mark((function e(i){return Hr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.result){e.next=4;break}return F(!0),e.next=4,n(r,o).then((function(e){k(!0);var n=e.targetElemt,r=e.newStep,o=e.newLink,i=e.newCount;try{d()({path:Object(p.y)("/automation/".concat(J,"/step/").concat(a,"/")),method:"POST",signal:V.current.signal,data:{steps:r,links:o,count:i}}).then((function(e){200===e.code&&(e.hasOwnProperty("result")&&e.result.hasOwnProperty("meta")&&t("meta",$r($r({},$),e.result.meta)),t("targetNode",n),t("flowCenter",!0)),k(!1)}))}catch(e){k(!1)}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),w(!1);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n,r){return e.apply(this,arguments)}}(),X=function(){var e,t,n=(e=L.paths,t=[],(void 0===e?[]:e).map((function(e){var n=e.path,r=void 0===n?"":n,a=e.stats,o=void 0===a?[]:a;parseInt(r)===parseInt(I)&&(t=o)})),t);return Object(r.createElement)("div",{className:"bwf-declare-winner-confirm-wrap"},Object(r.createElement)(s.a,{icon:"declare-winner"}),Object(r.createElement)("div",{className:"bwf-declare-winner-confirm-content"},Object(r.createElement)("div",{className:"bwf-declare-winner-confirm-header"},Object(l.sprintf)(Object(l.__)("Congratulations! You have declared Path %s as winner","wp-marketing-automations"),G[I])),Object(r.createElement)("div",{className:"bwf-declare-winner-confirm-stat-wrap"},n.map((function(e,t){return Object(r.createElement)("div",{className:"bwf-declare-winner-confirm-stat",key:t},Object(r.createElement)("div",{className:"bwf-split-node-value"},e.v),Object(r.createElement)("div",{className:"bwf-split-node-label"},e.l))}))),Object(r.createElement)("div",{className:"bwf-declare-winner-confirm-footer"},Object(r.createElement)(y.a,{isPrimary:!0,isBusy:_,disabled:_,onClick:W},_?Object(l.__)("Updating Automation","wp-marketing-automations"):Object(l.__)("Close","wp-marketing-automations")))))};return Object(r.createElement)(u.Modal,{className:"bwf-admin-modal bwf-admin-modal-no-header bwf-declare-winner-modal "+(!g||M?"bwf-admin-modal-1024":"bwf-admin-modal-480"),shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-declare-winner-header-wrap"},Object(r.createElement)("div",{className:"bwf-declare-winner-header"},function(){if(S)return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-20"}),Object(r.createElement)("div",{className:"bwf_clear_5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-15"}));var e=L.started_at,t=void 0===e?"":e;return g?Object(r.createElement)(r.Fragment,null,M?"":Object(l.sprintf)(Object(l.__)("Declare Path %s as Winner","wp-marketing-automations"),G[I])):Object(r.createElement)("div",{className:"bwf-declarewinner-step-title"},Object(r.createElement)("div",{className:"bwf-title-wrap"},Object(r.createElement)("div",{className:"bwf-split-title"},Object(l.sprintf)(Object(l.__)("Result of %s","wp-marketing-automations"),H))),Object(r.createElement)("div",{className:"bwf-split-date"},Object(r.createElement)("span",null,Object(l.__)("Started On ","wp-marketing-automations")+" : "),Object(p.db)(t)))}()),Object(r.createElement)("div",{className:"bwf-close-modal",onClick:W},Object(r.createElement)(s.a,{icon:"close",size:20}))),Object(r.createElement)("div",{className:"bwf-declare-winner-content"},function(){if(S)return Object(r.createElement)("div",{className:"bwf-declare-winner-analytics-wrap"},[1,2].map((function(e){return Object(r.createElement)("div",{className:"bwf-declare-winner-analytics-row",key:e},Object(r.createElement)("div",{className:"bwf-declare-winner-analytics-col"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-60"})),[1,2,3,4,5,6,7,8].map((function(e){return Object(r.createElement)("div",{className:"bwf-declare-winner-analytics-col",key:e},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-30"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-70"}))})),Object(r.createElement)("div",{className:"bwf-declare-winner-analytics-col"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-30 bwf-w-120"})))})));var e=L.paths,t=void 0===e?[]:e;return g?Object(r.createElement)(r.Fragment,null,M?X():Object(l.sprintf)(Object(l.__)("You are about to declare Path %s as winner. All other paths will be removed from the automation. This action cannot be undone.","wp-marketing-automations"),G[I])):Object(r.createElement)("div",{className:"bwf-declare-winner-analytics-wrap"},t.map((function(e,t){var n=e.path,a=void 0===n?1:n,o=e.stats,i=void 0===o?[]:o;return Object(r.createElement)("div",{className:"bwf-declare-winner-analytics-row",key:t},Object(r.createElement)("div",{className:"bwf-declare-winner-analytics-col"},Object(r.createElement)("span",{className:"bwf-split-path-title splitpath-".concat(a)},Object(l.__)("Path","wp-marketing-automations")+" "+G[a])),i.map((function(e,t){return Object(r.createElement)("div",{className:"bwf-declare-winner-analytics-col",key:t},Object(r.createElement)("span",{className:"bwf-split-test-value"},e.v),Object(r.createElement)("span",{className:"bwf-split-test-label"},e.l))})),Object(r.createElement)("div",{className:"bwf-declare-winner-analytics-col"},Object(r.createElement)("div",{className:"bwf-declare-winner-btn",onClick:function(){j(!0),D(a)}},Object(l.__)("Declare Winner","wp-marketing-automations"))))})))}()),g&&!M&&Object(r.createElement)("div",{className:"bwf-declare-winner-footer",key:"footer"},Object(r.createElement)(y.a,{className:"bwf-cancel-btn",onClick:W,disabled:!1},Object(l.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(y.a,{isPrimary:!0,onClick:function(){Q(q,R,I)},isBusy:v,disabled:v},Object(l.__)("Declare Winner","wp-marketing-automations"))))};function ea(e){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ta(){ta=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return k()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var b={};c(b,a,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==t&&n.call(h,a)&&(b=h);var y=p.prototype=m.prototype=Object.create(b);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==ea(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function na(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function ra(e){return function(e){if(Array.isArray(e))return ia(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,t)||oa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oa(e,t){if(e){if("string"==typeof e)return ia(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ia(e,t):void 0}}function ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function la(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ca(Object(n),!0).forEach((function(t){sa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ua=function(e){var t=e.id,n=Object(rr.a)(),i=n.setL2Title,b=n.setPageCountData,y=Object(ar.a)().getPageCountData,w=Object(r.useContext)(p.h),O=Object(a.n)().setCenter,g=Object(a.l)(),j=Object(a.m)((function(e){return e.setSelectedElements})),E=Object(ut.b)(),_=E.mergeTag,k=E.setMergeTag,N=E.reset,S=E.identifier,x=E.setIdentifier,P=Object(f.a)(),L=y(),C=P.getLoading,A=P.getAutomationSteps,I=P.getAutomationLinks,D=P.getEnableCopy,T=P.getEnableMove,M=P.getAutomationData,F=P.getError,G=P.getShowContactModalId,z=P.getOpenStartSidebar,U=P.getCustomerSelected,q=P.isProModal,B=P.getautomationMeta,R=(P.getListData,P.getModalData),H=P.getFlowCenter,V=P.getTargetNode,$=P.showSplitWinnerModal,J=P.getProModalContent,W=P.getSingleAutomationFailedCount,Q=R(),X=Object(m.a)(),Z=X.setAutomationData,K=X.fetchAutomationStat,ee=I(),te=A(),ne=D(),re=T(),ae=C(),ie=F(),ce=M(),le=G(),se=ce.title,ue=void 0===se?"":se,me=z(),fe=U(),pe=q(),he=J(),ye=B(),ve=ye.tips,we=void 0===ve?[]:ve,Oe=H(),je=V(),Ee=$(),_e=W();Object(r.useEffect)((function(){ae||b(la(la({},L),{},{single_a_contacts:_e}))}),[_e]),Object(or.a)("workflow",ue,"admin.php?page=autonami&path=/automations",!1,null,t,!1,!0,!1),Object(r.useEffect)((function(){Z("isNewAutomation",0)}),[ce]);var ke=Object(r.useRef)();Object(r.useEffect)((function(){return window.addEventListener("keyup",(function(e){"Escape"!==e.key&&"27"!==e.keyCode||null!==document.querySelector(".bwf-escape-note")&&(Z("enableCopy",!1),Z("enableMove",!1),Z("isProcessingCopyPaste",!1),Z("copyData",{}),Z("moveID",0),Object(p.Eb)(w,100))})),Z("enableCopy",!1),Z("enableMove",!1),Z("copyData",{}),function(){document.body.style.overflow="",i(""),Z("statLoading",!0),Z("statData",[]),Z("isLoading",!0)}}),[]),Object(r.useEffect)((function(){Object(o.isNull)(document.querySelector("#bwf-single-automation-wrap"))||(ke.current=document.querySelector("#bwf-single-automation-wrap").getBoundingClientRect()),ae||K()}),[ae]);var Ne={start:Y,action:be,conditional:oe,end:de,benchmark:ge,wait:Ae,yesNoNode:Ie,exit:ze,jump:Ve,split:Ze,splitpath:Ke},Se={"bwf-default":sr},xe=ee.map((function(e){return e.id&&(e.id.includes("yesedge")||e.id.includes("noedge")||e.hasOwnProperty("sourceHandle")&&"split-edge"===e.sourceHandle)?e:la(la({},e),{},{type:"bwf-default"})})),Pe=aa(Object(r.useState)([]),2),Le=Pe[0],Ce=Pe[1],De=aa(Object(r.useState)(!1),2),Te=De[0],Me=De[1],Fe=aa(Object(r.useState)("bwf-automation-wrap"),2),Ge=Fe[0],Ue=Fe[1],qe=aa(Object(r.useState)(!1),2),Be=qe[0],Re=qe[1],Ye=aa(Object(r.useState)(!0),2),He=Ye[0],$e=Ye[1];if(Object(r.useEffect)((function(){if(!Te||Oe){var e=0,t=0,n=g.getState(),r=n.nodes,a=n.selectedElements;if(Object(o.isEmpty)(a)||me||Oe)if(Z("openStartSidebar",!1),Oe&&!Object(o.isEmpty)(a)){var i=r.filter((function(e){return e.id===je}));(Object(o.isEmpty)(i)||Object(o.isNull)(i)||""===i||Object(o.isUndefined)(i))&&(i=a[0]),i.hasOwnProperty("__rf")?(e=i.__rf.position.x,t=i.__rf.position.y):(e=i.position.x,t=i.position.y),t=parseFloat(t)+parseFloat(ke.current.height)*(Be?.5:.4),Me(!0),O(e,t,1),Z("flowCenter",!1)}else if(r.length&&ke.current){var c=r[0];c.hasOwnProperty("__rf")?(e=c.__rf.position.x+140,t=c.__rf.position.y):(e=c.position.x+140,t=c.position.y),t=parseFloat(t)+parseFloat(ke.current.height)*(Be?.5:.4),Me(!0),O(e,t,1),Z("flowCenter",!1)}}}),[Le,Te,Oe]),Object(r.useEffect)((function(){Me(!1),te.length>1?Ce(Object(ir.a)([].concat(ra(te),ra(xe)),!0,ne||re?20:0)):Ce(te)}),[te,ae,Be,fe]),Object(r.useEffect)((function(){j([])}),[fe]),ae)return Object(r.createElement)(hr.a,null);var Je=function(){var e,n=(e=ta().mark((function e(){return ta().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d()({path:Object(p.y)("/automation/".concat(t,"/delete_meta")),method:"DELETE",data:{meta_key:"tips"}}).then((function(e){200===e.code&&Z("meta",la(la({},ye),{},{tips:[]}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){na(o,r,a,i,c,"next",e)}function c(e){na(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(r.createElement)(ut.a.Provider,{value:{selectedMergeTag:_,setSelectedMergeTag:k,resetSelection:N,selectedIdentifier:S,setSelectedIdentifier:x}},Object(o.isEmpty)(ie)?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Nr.a,null),Object(r.createElement)("div",{className:c()(Ge,{"full-screen":Be}),id:"bwf-single-automation-wrap"},Object(r.createElement)("div",{className:"automation-title"}," ",ue," "),Object(r.createElement)(Br,{automationId:t}),(ne||re)&&Object(r.createElement)("div",{className:"bwf-escape-note"},Object(l.__)("Press ESC to skip paste step","wp-marketing-automations")),Object(o.isEmpty)(fe)?Object(r.createElement)(a.f,{defaultZoom:1,minZoom:.5,maxZoom:4,nodeTypes:Ne,nodesConnectable:!1,nodesDraggable:!1,zoomOnScroll:!1,zoomOnDoubleClick:!1,paneMoveable:!0,panOnScroll:!0,elements:Le,edgeTypes:Se,onSelectionChange:function(e){if(!Object(o.isNull)(e)&&e.length>0){var t=e[0];if(Object(a.k)(t))return void Ue("bwf-automation-wrap bwf-node-selected");if(Object(a.j)(t))return void Ue("bwf-automation-wrap bwf-edge-selected");Ue("bwf-automation-wrap")}}},Object(r.createElement)(kr,{isProActive:Object(p.Sb)()}),Object(r.createElement)(a.c,{showInteractive:!1},Object(r.createElement)(a.b,{onClick:function(){Re(!Be),document.body.style.overflow=Be?"":"hidden",j([])}},Be?Object(r.createElement)("span",{className:"dashicons dashicons-fullscreen-exit-alt custom-control-icon"}):Object(r.createElement)("span",{className:"dashicons dashicons-fullscreen-alt custom-control-icon"}))),Object(r.createElement)(a.a,null)):Object(r.createElement)(Rr.a,{inAutomation:!0,setFullScreen:Re,fullScreen:Be}),!Object(o.isEmpty)(we)&&Object(r.createElement)("div",{className:"bwfan-automation-tips"},Object(r.createElement)("span",{className:"bwf-close-tip",onClick:Je},Object(r.createElement)(s.a,{icon:"close",size:12})),we.map((function(e,t){return Object(r.createElement)("div",{className:"bwfan-automation-tip",key:t},Object(r.createElement)("div",null,Object(r.createElement)(s.a,{icon:"tip"}),Object(r.createElement)("strong",null,"Tip")),Object(r.createElement)("div",null,e))})))),Object(r.createElement)(nr,null),""!==le&&0!==le&&Object(r.createElement)(dr,null)):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(r.Fragment,null,He&&Object(r.createElement)(u.Modal,{title:Object(l.__)("Failed","wp-marketing-automations"),onRequestClose:function(){return $e(!1)},className:"bwf-admin-modal bwf-admin-modal-small bwf-single-automation-error-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-error-content"},Object(r.createElement)(r.Fragment,null,Object(r.createElement)("p",null,Object(l.__)("There has been a critical error on this website.","wp-marketing-automations")),Object(r.createElement)("p",null,Object(l.__)("For quick help, contact FunnelKit","wp-marketing-automations")," ",Object(r.createElement)("a",{href:"https://funnelkit.com/support/?utm_source=WordPress&utm_medium=Automation+Error&utm_campaign=FKA+Lite+Plugin",target:"_blank",rel:"noopener noreferrer"},Object(l.__)("support ","wp-marketing-automations"))))),Object(r.createElement)("div",{className:"bwf-footer"},Object(r.createElement)(u.Button,{isPrimary:!0,onClick:function(){return $e(!1)}},Object(l.__)("Close","wp-marketing-automations")))))),!Object(p.Sb)()&&Object(r.createElement)(v.b,{isOpen:pe,onRequestClose:function(){return Z("showProModal",!1)},modalContent:la({isFeature:!0,proLink:Object(p.ab)("upgrade")},he)}),Object(r.createElement)(h.a,{modalTitle:Q.modalTitle,deleteEntityName:Q.deleteEntityName,confirmText:Q.confirmText,confirmButtonText:Q.buttonConfirm,cancelButtonText:Q.buttonCancel,onConfirm:Q.onConfirm,isLoading:Q.loading,successMessage:Q.success,errorMessage:Q.error,content:Q.content,onRequestClose:function(){Z("modalData",{loading:!1,status:!1})},confirmDescription:Q.hasOwnProperty("confirmDescription")?Q.confirmDescription:"",isOpen:Q.status,isDelete:Q.isDelete}),Ee&&Object(r.createElement)(Kr,null))};t.default=function(e){var t=e.match.params.id;Object(p.l)("Automation #"+t);var n=Object(m.a)(),o=n.fetchAutomation,i=n.setAutomationData,c=n.clearAutomationError;return Object(r.useEffect)((function(){i("statLoading",!0),i("statData",[]),i("isLoading",!0),c(),o(t)}),[t]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-single-automation-body-header",style:{paddingBottom:"8px"}},Object(r.createElement)("div",{className:"bwf-content-header-left"},Object(r.createElement)("div",{className:"bwf-content-header-title2"},Object(l.__)("Workflow","wp-marketing-automations")))),Object(r.createElement)(a.e,null,Object(r.createElement)(ua,{id:t})))}}}]);