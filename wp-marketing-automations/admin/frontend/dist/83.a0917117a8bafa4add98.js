(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{1294:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(5),c=a(1),i=a(1104),l=a(1108),o=a(3),m=a(68),s=a(348),b=a(60),f=a(61),u=a(19),d=a(2),p=a(47),O=a(7),j=a(9),w=a.n(j),_=a(26);function v(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function c(a,n,r,c){var o=n&&n.prototype instanceof l?n:l,m=Object.create(o.prototype);return g(m,"_invoke",function(a,n,r){var c,l,o,m=0,s=r||[],b=!1,f={p:0,n:0,v:e,a:u,f:u.bind(e,4),d:function(t,a){return c=t,l=0,o=e,f.n=a,i}};function u(a,n){for(l=a,o=n,t=0;!b&&m&&!r&&t<s.length;t++){var r,c=s[t],u=f.p,d=c[2];a>3?(r=d===n)&&(o=c[(l=c[4])?5:(l=3,3)],c[4]=c[5]=e):c[0]<=u&&((r=a<2&&u<c[1])?(l=0,f.v=n,f.n=c[1]):u<d&&(r=a<3||c[0]>n||n>d)&&(c[4]=a,c[5]=n,f.n=d,l=0))}if(r||a>1)return i;throw b=!0,n}return function(r,s,d){if(m>1)throw TypeError("Generator is already running");for(b&&1===s&&u(s,d),l=s,o=d;(t=l<2?e:o)||!b;){c||(l?l<3?(l>1&&(f.n=-1),u(l,o)):f.n=o:f.v=o);try{if(m=2,c){if(l||(r="next"),t=c[r]){if(!(t=t.call(c,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,l<2&&(l=0)}else 1===l&&(t=c.return)&&t.call(c),l<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),l=1);c=e}else if((t=(b=f.n<0)?o:a.call(n,f))!==i)break}catch(t){c=e,l=1,o=t}finally{m=1}}return{value:t,done:b}}}(a,r,c),!0),m}var i={};function l(){}function o(){}function m(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(g(t={},n,(function(){return this})),t),b=m.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,g(e,r,"GeneratorFunction")),e.prototype=Object.create(b),e}return o.prototype=m,g(b,"constructor",m),g(m,"constructor",o),o.displayName="GeneratorFunction",g(m,r,"GeneratorFunction"),g(b),g(b,r,"Generator"),g(b,n,(function(){return this})),g(b,"toString",(function(){return"[object Generator]"})),(v=function(){return{w:c,m:f}})()}function g(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}(g=function(e,t,a,n){function c(t,a){g(e,t,(function(e){return this._invoke(t,a,e)}))}t?r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a:(c("next",0),c("throw",1),c("return",2))})(e,t,a,n)}function E(e,t,a,n,r,c,i){try{var l=e[c](i),o=l.value}catch(e){return void a(e)}l.done?t(o):Promise.resolve(o).then(n,r)}function y(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var c=e.apply(t,a);function i(e){E(c,n,r,i,l,"next",e)}function l(e){E(c,n,r,i,l,"throw",e)}i(void 0)}))}}function k(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,c,i,l=[],o=!0,m=!1;try{if(c=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(n=c.call(a)).done)&&(l.push(n.value),l.length!==t);o=!0);}catch(e){m=!0,r=e}finally{try{if(!o&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(m)throw r}}return l}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return S(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var C=function(e){var t=e.mappedFields,a=e.formHeaders;if(!t)return Object(n.createElement)(_.a,{status:"error",isDismissible:!1,className:"bwf-c-mapping-notice"},Object(n.createElement)("b",null,Object(c.__)("Error: ","wp-marketing-automations")),Object(c.__)("No email mapping found. Email mapping is must. Click edit to map email.","wp-marketing-automations"));var r,i=function(e){return"email"!==t[e]?0:a.find((function(t){return t.index.toString()===e}))?{v:null}:{v:Object(n.createElement)(_.a,{status:"error",isDismissible:!1,className:"bwf-c-mapping-notice"},Object(n.createElement)("b",null,Object(c.__)("Error: ","wp-marketing-automations")),Object(c.__)("Invalid email mapping found. Email mapping is must. Click edit to map email.","wp-marketing-automations"))}};for(var l in t)if(0!==(r=i(l))&&r)return r.v;return Object(n.createElement)(_.a,{status:"error",isDismissible:!1,className:"bwf-c-mapping-notice"},Object(n.createElement)("b",null,Object(c.__)("Error: ","wp-marketing-automations")),Object(c.__)("No email mapping found. Email mapping is must. Click edit to map email.","wp-marketing-automations"))},x=function(e){var t=e.mappedFields,a=e.formHeaders;if(!t)return Object(n.createElement)(_.a,{status:"warning",isDismissible:!1,className:"bwf-c-mapping-notice"},Object(n.createElement)("b",null,Object(c.__)("Warning: ","wp-marketing-automations")),Object(c.__)("Invalid / Empty Mapping Data. Click edit to map fields.","wp-marketing-automations"));var r,i=function(e){if(!a.find((function(t){return t.index.toString()===e})))return{v:Object(n.createElement)(_.a,{status:"warning",isDismissible:!1,className:"bwf-c-mapping-notice"},Object(n.createElement)("b",null,Object(c.__)("Warning: ","wp-marketing-automations")),Object(c.__)("Detected some invalid field mappings. Maybe your form fields have been changed. Click edit to map fields.","wp-marketing-automations"))}};for(var l in t)if(r=i(l))return r.v;return null};t.default=function(){var e=Object(i.a)(),t=e.getFeed,a=e.getFormFields,j=e.getFormHeaders,g=e.getLoading,E=e.getUpdateStatusStatus,h=Object(l.a)(),S=h.fetchMappingData,F=h.setEditMapMode,P=h.setStep,A=h.updateStatus,T=h.resetUpdateStatusStatus,D=t(),I=D.id,H=D.data,M=D.valid,U=N(Object(n.useState)(!M),2),G=U[0],L=U[1],Y=N(Object(n.useState)(!0),2),B=Y[0],R=Y[1],Q=N(Object(n.useState)(!1),2),J=Q[0],V=Q[1],W=a(),q=Array.isArray(W)?W.map((function(e){return e.fields})).reduce((function(e,t){return[].concat(k(e),k(t))}),[]):[],z=j(),$=H.mapped_fields,K=g(),X=N(Object(n.useState)(!1),2),Z=X[0],ee=X[1];Object(n.useEffect)((function(){M&&S(I)}),[I]);var te=E(),ae=Object(n.useContext)(o.h);Object(n.useEffect)((function(){te&&(1===te&&ae(Object(c.__)("Loadingâ€¦","wp-marketing-automations")),2===te&&ae(Object(c.__)("Status Changed Successfully!","wp-marketing-automations")),3===te&&ae(Object(c.__)("Unable to change status","wp-marketing-automations")),3!==te&&2!==te||setTimeout((function(){ae(""),T()}),2e3))}),[te]);var ne=Object(o.jb)(),re=!!D&&!!D.data&&!!D.data.incentivize_email,ce=function(){var e=y(v().m((function e(t){return v().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,R(!0),e.n=1,w()({path:Object(o.C)("/broadcast/email-preview"),method:"POST",data:t}).then((function(e){V(e.result.body.replace(/\\/g,"")),R(!1)}));case 1:e.n=3;break;case 2:return e.p=2,e.v,e.a(2,Object(n.createElement)(n.Fragment,null));case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(m.a,null),Object(n.createElement)("div",{className:"bwfcrm-overview-wrap"},Object(n.createElement)(r.Card,{className:"bwf-crm-form-feed-report-detail-wrap"},Object(n.createElement)(r.CardHeader,{className:"bwf-crm-form-feed-report-header"},Object(n.createElement)("span",{className:"bwf-form-title"},Object(c.__)("Overview","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex bwf-form-status-header"},Object(o.fc)()&&M&&Object(n.createElement)(b.a,{label:Object(c.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var t=e.onToggle;return Object(n.createElement)(f.a,{isClickable:!0,onInvoke:function(){var e=2===D.status?3:2;A(I,e),t()}},Object(n.createElement)(u.a,{justify:"flex-start"},Object(n.createElement)(u.c,null,2===D.status?Object(c.__)("Deactivate","wp-marketing-automations"):Object(c.__)("Activate","wp-marketing-automations"))))}}))),Object(n.createElement)(r.CardBody,null,G&&Object(n.createElement)(_.a,{className:"bwf-error-notice",isDismissible:!1,status:"error",onRemove:function(){return L(!1)}},Object(c.__)("Saved form does not exist.","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Title","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},D.title)),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Source","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},ne&&ne[D.source]?ne[D.source]:D.source,M&&!!D.form_link&&D.data.hasOwnProperty("form_id")&&Object(n.createElement)(n.Fragment,null," ( ",Object(n.createElement)("a",{href:D.form_link,target:"_blank",className:"bwf-a-no-underline",rel:"noreferrer"},"#"+D.data.form_id)," )"))),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Status","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},1===D.status?Object(n.createElement)("span",{className:"bwf-tags bwf-tag-draft"},Object(c.__)("Draft","wp-marketing-automations")):2===D.status?Object(n.createElement)("span",{className:"bwf-tags bwf-tag-active"},Object(c.__)("Active","wp-marketing-automations")):Object(n.createElement)("span",{className:"bwf-tags bwf-tag-inactive"},Object(c.__)("Inactive","wp-marketing-automations")))),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Submissions","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},D.contacts_created)))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(r.Card,{className:"bwf-crm-form-feed-report-detail-wrap"},Object(n.createElement)(r.CardHeader,{className:"bwf-crm-form-feed-report-header"},Object(n.createElement)("span",{className:"bwf-form-title"},Object(c.__)("Mapping","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex bwf-form-status-header"},Object(o.fc)()&&M&&Object(n.createElement)(b.a,{label:Object(c.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var t=e.onToggle;return Object(n.createElement)(f.a,{isClickable:!0,onInvoke:function(){F(!0),P("mapping"),t()}},Object(n.createElement)(u.a,{justify:"flex-start"},Object(n.createElement)(u.c,null,Object(c.__)("Edit","wp-marketing-automations"))))}}))),Object(n.createElement)(r.CardBody,{className:"bwf-crm-overview-full"},!!M&&Object(n.createElement)(n.Fragment,null,!K&&z.length>0&&q.length>0?Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Fields","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},Object(n.createElement)(x,{mappedFields:$,formHeaders:z}),Object(n.createElement)(C,{mappedFields:$,formHeaders:z}),Object(n.createElement)("table",{className:"bwf-overview-table"},Object(n.createElement)("thead",null,Object(n.createElement)("tr",null,Object(n.createElement)("th",null,Object(c.__)("Form Field","wp-marketing-automations")),Object(n.createElement)("th",null,Object(c.__)("Contact Field","wp-marketing-automations")))),Object(n.createElement)("tbody",null,Object.keys($).map((function(e,t){var a=$[e],r=z.find((function(t){return t.index.toString()===e.toString()})),c=q.find((function(e){return e.id.toString()===a.toString()}));return Object(n.createElement)("tr",{key:t},Object(n.createElement)("td",null,Object(n.createElement)("div",{className:"bwf-c-field-label-wrapper"},!r&&Object(n.createElement)("span",{className:"bwf-mr-10"},Object(n.createElement)(O.a,{icon:"info",color:"#e15334"})),r&&r.header?r.header:e)),Object(n.createElement)("td",null,c&&c.name?c.name:a))})))))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Fields","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex",style:{justifyContent:"flex-start",gap:"20px",padding:"12px 0"}},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-300 bwf-h-15"})),Object(n.createElement)("div",{className:"bwf-display-flex",style:{justifyContent:"flex-start",gap:"20px",padding:"12px 0"}},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-300 bwf-h-15"})),Object(n.createElement)("div",{className:"bwf-display-flex",style:{justifyContent:"flex-start",gap:"20px",padding:"12px 0"}},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-300 bwf-h-15"})))),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},Object(n.createElement)("table",{className:"bwf-overview-table"},Object(n.createElement)("tbody",null,D.data.hasOwnProperty("tags")&&!Object(d.isEmpty)(D.data.tags)&&Object(n.createElement)("tr",null,Object(n.createElement)("td",null,Object(c.__)("Tags","wp-marketing-automations")),Object(n.createElement)("td",null,D.data.tags.map((function(e,t){return Object(n.createElement)(p.a,{label:e.value,key:t})})))),D.data.hasOwnProperty("lists")&&!Object(d.isEmpty)(D.data.lists)&&Object(n.createElement)("tr",null,Object(n.createElement)("td",null,Object(c.__)("Lists","wp-marketing-automations")),Object(n.createElement)("td",null,D.data.lists.map((function(e,t){return Object(n.createElement)(p.a,{label:e.value,key:t})})))),Object(n.createElement)("tr",null,Object(n.createElement)("td",null,Object(c.__)("Update Existing Contacts","wp-marketing-automations")),Object(n.createElement)("td",null,D.data.hasOwnProperty("update_existing")&&D.data.update_existing?Object(c.__)("Yes","wp-marketing-automations"):Object(c.__)("No","wp-marketing-automations"))),Object(n.createElement)("tr",null,Object(n.createElement)("td",null,Object(c.__)("Don't Update Blank Values","wp-marketing-automations")),Object(n.createElement)("td",null,D.data.hasOwnProperty("update_blank")&&D.data.update_blank?Object(c.__)("Yes","wp-marketing-automations"):Object(c.__)("No","wp-marketing-automations"))),Object(n.createElement)("tr",null,Object(n.createElement)("td",null,Object(c.__)("Trigger Automations","wp-marketing-automations")),Object(n.createElement)("td",null,D.data.hasOwnProperty("trigger_events")&&D.data.trigger_events?Object(c.__)("Yes","wp-marketing-automations"):Object(c.__)("No","wp-marketing-automations"))))))))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(r.Card,{className:"bwf-crm-form-feed-report-detail-wrap"},Object(n.createElement)(r.CardHeader,{className:"bwf-crm-form-feed-report-header"},Object(n.createElement)("span",{className:"bwf-form-title"},Object(c.__)("Email Notification","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex bwf-form-status-header"},Object(o.fc)()&&M&&Object(n.createElement)(b.a,{label:Object(c.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var t=e.onToggle;return Object(n.createElement)(f.a,{isClickable:!0,onInvoke:function(){F(!0),P("double_optin"),t()}},Object(n.createElement)(u.a,{justify:"flex-start"},Object(n.createElement)(u.c,null,Object(c.__)("Edit","wp-marketing-automations"))))}}))),Object(n.createElement)(r.CardBody,null,Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Enabled","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},re?Object(c.__)("Yes","wp-marketing-automations"):Object(c.__)("No","wp-marketing-automations"))),!!re&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Email","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},Object(n.createElement)(r.Button,{isSecondary:!0,className:"bwf-mr-5",onClick:y(v().m((function e(){return v().w((function(e){for(;;)switch(e.n){case 0:return ee(!0),e.n=1,ce({content:"editor"===D.data.incentive_email.content[0].type?D.data.incentive_email.content[0].editor.body:D.data.incentive_email.content[0].body,type:D.data.incentive_email.content[0].type});case 1:return e.a(2)}}),e)})))},Object(c.__)("View Details","wp-marketing-automations")),Z&&Object(n.createElement)(s.a,{isOpen:Z,isLoading:B,onRequestClose:function(){return ee(!1)},subject:D.data.incentive_email.content[0].subject,preHeader:D.data.incentive_email.content[0].preheader,body:J,type:D.data.incentive_email.content[0].type,sourceType:2,mode:1,utm:D.data.incentive_email.content[0].utmEnabled?D.data.incentive_email.content[0].utm:{}}))),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Don't Send Email to Subscribed Contacts","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},D.data.not_send_to_subscribed?Object(c.__)("Yes","wp-marketing-automations"):Object(c.__)("No","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Confirmation Redirect URL","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},!!D.data.redirect_url&&D.data.redirect_url)),D.data.hasOwnProperty("add_tag_enable")&&D.data.add_tag_enable&&D.data.hasOwnProperty("tag_to_add")&&!Object(d.isEmpty)(D.data.tag_to_add)&&Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Confirmation Tags","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},D.data.tag_to_add.map((function(e){return Object(n.createElement)(p.a,{key:e.id,label:e.value,id:e.id,screenReaderLabel:e.value})}))))),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Auto-Confirm Contacts","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},D.data.marketing_status?Object(c.__)("Yes","wp-marketing-automations"):Object(c.__)("No","wp-marketing-automations")))))))}}}]);