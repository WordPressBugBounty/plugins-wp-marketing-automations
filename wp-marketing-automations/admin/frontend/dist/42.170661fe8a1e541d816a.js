(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{1103:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n(0);var r=function(t,e){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=t}),[t]),Object(a.useEffect)((function(){if(null!==e){var t=setInterval((function(){n.current()}),e);return function(){return clearInterval(t)}}}),[e])}},1121:function(t,e,n){"use strict";var a=n(0),r=n(1103),o=(n(1130),n(7)),i=n(1),c=n(9),u=n.n(c),s=n(3),l=n(5),m=n(2),f=n(54);function b(){var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,a,r,o){var u=a&&a.prototype instanceof c?a:c,s=Object.create(u.prototype);return p(s,"_invoke",function(n,a,r){var o,c,u,s=0,l=r||[],m=!1,f={p:0,n:0,v:t,a:b,f:b.bind(t,4),d:function(e,n){return o=e,c=0,u=t,f.n=n,i}};function b(n,a){for(c=n,u=a,e=0;!m&&s&&!r&&e<l.length;e++){var r,o=l[e],b=f.p,p=o[2];n>3?(r=p===a)&&(u=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=t):o[0]<=b&&((r=n<2&&b<o[1])?(c=0,f.v=a,f.n=o[1]):b<p&&(r=n<3||o[0]>a||a>p)&&(o[4]=n,o[5]=a,f.n=p,c=0))}if(r||n>1)return i;throw m=!0,a}return function(r,l,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===l&&b(l,p),c=l,u=p;(e=c<2?t:u)||!m;){o||(c?c<3?(c>1&&(f.n=-1),b(c,u)):f.n=u:f.v=u);try{if(s=2,o){if(c||(r="next"),e=o[r]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=o.return)&&e.call(o),c<2&&(u=TypeError("The iterator does not provide a '"+r+"' method"),c=1);o=t}else if((e=(m=f.n<0)?u:n.call(a,f))!==i)break}catch(e){o=t,c=1,u=e}finally{s=1}}return{value:e,done:m}}}(n,r,o),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][a]?e(e([][a]())):(p(e={},a,(function(){return this})),e),m=s.prototype=c.prototype=Object.create(l);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,p(t,r,"GeneratorFunction")),t.prototype=Object.create(m),t}return u.prototype=s,p(m,"constructor",s),p(s,"constructor",u),u.displayName="GeneratorFunction",p(s,r,"GeneratorFunction"),p(m),p(m,r,"Generator"),p(m,a,(function(){return this})),p(m,"toString",(function(){return"[object Generator]"})),(b=function(){return{w:o,m:f}})()}function p(t,e,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}(p=function(t,e,n,a){function o(e,n){p(t,e,(function(t){return this._invoke(e,n,t)}))}e?r?r(t,e,{value:n,enumerable:!a,configurable:!a,writable:!a}):t[e]=n:(o("next",0),o("throw",1),o("return",2))})(t,e,n,a)}function O(t,e,n,a,r,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(a,r)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){O(o,a,r,i,c,"next",t)}function c(t){O(o,a,r,i,c,"throw",t)}i(void 0)}))}}function j(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,o,i,c=[],u=!0,s=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=o.call(n)).done)&&(c.push(a.value),c.length!==e);u=!0);}catch(t){s=!0,r=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw r}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}var y={automation:Object(i.__)("Automation","wp-marketing-automations"),templates:Object(i.__)("Template","wp-marketing-automations"),recovered_carts:Object(i.__)("Recovered Cart","wp-marketing-automations"),lost_carts:Object(i.__)("Lost Cart","wp-marketing-automations"),recoverable_carts:Object(i.__)("Recoverable Cart","wp-marketing-automations")};e.a=function(t){var e=t.type,n=void 0===e?"":e,c=t.localData,p=void 0===c?{}:c,O=t.onDismiss,g=void 0===O?function(){}:O,w=Object(a.useContext)(s.h),v=j(Object(a.useState)(1),2),h=v[0],_=v[1],E=j(Object(a.useState)(!1),2),k=E[0],P=E[1],C=j(Object(a.useState)(!1),2),S=C[0],A=C[1],x=j(Object(a.useState)(!1),2),N=x[0],T=x[1],D=j(Object(a.useState)({status:!1}),2),I=D[0],M=D[1],F=j(Object(a.useState)({}),2),G=F[0],L=F[1],z=function(){var t=d(b().m((function t(){var e;return b().w((function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,u()({path:Object(s.C)("/export/status?type=".concat(n)),method:"GET"}).then((function(t){if(200!==t.code||!t.hasOwnProperty("result"))throw Error(Object(s.w)(null==t?void 0:t.message));var e=t.result,n=e.status,a=void 0===n?1:n,r=e.msg,o=void 0===r?[]:r,i=e.url,c=void 0===i?"":i;_(a),L({msg:o,url:c})}));case 1:t.n=3;break;case 2:t.p=2,e=t.v,w(e.hasOwnProperty("message")&&""!==e.message?e.message:Object(i.__)("Unable to export.","wp-marketing-automations")),Object(s.Pb)(w,3e3);case 3:return t.a(2)}}),t,null,[[0,2]])})));return function(){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){if(Object(m.isEmpty)(p))""!==n&&z();else{var t=p.status,e=void 0===t?1:t,a=p.msg,r=void 0===a?[]:a,o=p.url,i=void 0===o?"":o;_(e),L({msg:r,url:i})}}),[]);var B=function(){var t=d(b().m((function t(){var e;return b().w((function(t){for(;;)switch(t.p=t.n){case 0:return T(!0),t.p=1,t.n=2,u()({path:Object(s.C)("/export/action?type=".concat(n,"&action=cancel")),method:"POST"}).then((function(t){if(200!==t.code||!t.hasOwnProperty("result"))throw Error(Object(s.w)(null==t?void 0:t.message));var e=t.result.status;(void 0===e?1:e)&&(bwfcrm_contacts_data.export_data.hasOwnProperty(n)&&delete bwfcrm_contacts_data.export_data[n],P(!0),g()),T(!1)}));case 2:t.n=4;break;case 3:t.p=3,e=t.v,T(!1),M({status:!0,error:e.hasOwnProperty("message")&&""!==e.message?e.message:Object(i.__)("Unable to cancel export.","wp-marketing-automations")}),Object(s.Pb)(w,3e3);case 4:return t.a(2)}}),t,null,[[1,3]])})));return function(){return t.apply(this,arguments)}}(),R=function(){var t=d(b().m((function t(){return b().w((function(t){for(;;)switch(t.n){case 0:window.open(Object(s.zb)()+"/wp-json"+Object(s.C)("/export/download?type=".concat(n,"&bwf-nonce=").concat(Object(s.H)(),"&user_id=").concat(Object(s.Q)())),"_blank");case 1:return t.a(2)}}),t)})));return function(){return t.apply(this,arguments)}}();if(Object(r.a)((function(){1==h&&""!==n&&z()}),5e3),""===n||k)return Object(a.createElement)(a.Fragment,null);var q=G.url,U=void 0===q?"":q,H=G.msg,V=void 0===H?[]:H,Y={1:Object(i.__)("Export In Progress…","wp-marketing-automations"),2:Object(i.__)("File Is Ready","wp-marketing-automations"),3:Object(i.__)("Export Failed","wp-marketing-automations")},$={1:Object(i.__)("Cancel","wp-marketing-automations"),2:Object(i.__)("Download","wp-marketing-automations"),3:Object(i.__)("View Details","wp-marketing-automations")};return Object(a.createElement)("div",{className:"bwf-export-info-wrap bwf-status-".concat(h)},Object(a.createElement)("div",{className:"bwf-export-info-left"},Object(a.createElement)("div",{className:"bwf-export-status-icon"},Object(a.createElement)(o.a,{icon:"export-info",size:20})),Object(a.createElement)("div",{className:"bwf-export-status-message"},Y[h])),Object(a.createElement)("div",{className:"bwf-export-info-right"},(2!==parseInt(h)||!(2===parseInt(h)&&""===U))&&Object(a.createElement)("div",{className:"bwf-export-status-button",onClick:function(){switch(parseInt(h)){case 1:M({status:!0});break;case 2:R();break;case 3:A(!0)}}},$[h]),1!==parseInt(h)&&Object(a.createElement)("div",{className:"bwf-export-status-dismiss",onClick:B},Object(a.createElement)(o.a,{icon:"close",size:16,color:"#FFF"}))),S&&Object(a.createElement)(l.Modal,{onRequestClose:function(){return A(!1)},className:"bwf-admin-modal bwf-admin-modal-480 bwf-admin-modal-no-header bwf-export-info-modal"},Object(a.createElement)("div",{className:"bwf-admin-m-header-new"},Object(a.createElement)("div",{className:"bwf-admin-m-title"},Object(i.sprintf)(Object(i.__)("Error! Export %s","wp-marketing-automations"),y.hasOwnProperty(n)?y[n]:n)),Object(a.createElement)("div",{className:"bwf-admin-m-close",onClick:function(){return A(!1)}},Object(a.createElement)(o.a,{icon:"close",size:20}))),Object(a.createElement)("div",{className:"bwf-export-info-content"},Object(a.createElement)("div",{className:"bwf-export-info-content-bold"},Object(i.__)("Following reasons while creating file for export","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-export-info-content-error-list"},Object(m.isEmpty)(V)?Object(a.createElement)("li",null,Object(i.__)("Unable to create export","wp-marketing-automations")):V.map((function(t,e){return Object(a.createElement)("li",{key:e},t)}))))),Object(a.createElement)(f.a,{modalTitle:Object(i.__)("Cancel Exporting","wp-marketing-automations"),deleteDescriptionText:Object(i.__)("Once you cancel the export, all progress will be lost, and the action cannot be reversed. Please confirm if you still wish to cancel.","wp-marketing-automations"),confirmButtonText:Object(i.__)("Proceed","wp-marketing-automations"),cancelButtonText:Object(i.__)("Cancel","wp-marketing-automations"),onConfirm:B,isLoading:N,successMessage:I.success,errorMessage:I.error,onRequestClose:function(){return M({status:!1})},isOpen:I.status,isDelete:!0}))}},1130:function(t,e,n){},1163:function(t,e,n){"use strict";var a=n(0),r=n(1),o=n(3),i=(n(563),n(5)),c=n(7);e.a=function(t){var e=t.onFileSelected,n=t.filetypeArray,u=t.type,s=void 0===u?"automation":u,l=t.importText,m=void 0===l?"":l,f=t.importInfo,b=void 0===f?"":f,p=Object(a.useContext)(o.h),O=function(t){t&&t[0]&&"type"in t[0]?n.includes(t[0].type)?(e(t[0]),Object(o.Pb)(p,3e3)):p(Object(r.__)("Uploaded file is not valid.","wp-marketing-automations")):p(Object(r.__)("Uploaded file not found","wp-marketing-automations"))};return Object(a.createElement)("div",{className:"bwf-component-import-wrapper"},Object(a.createElement)("div",{className:"bwf-import-area-wrapper"},Object(a.createElement)(i.FormFileUpload,{isSecondary:!0,accept:"application/json",onChange:function(t){return O(t.target.files)},render:function(t){var e=t.openFileDialog;return Object(a.createElement)("div",{className:"bwf-import-area",onClick:e},Object(a.createElement)(c.a,{icon:"json-upload",size:72}),Object(a.createElement)("div",{className:"bwf-drop-import-heading"},""!==m?m:Object(r.__)("Click or Drag & Drop your JSON file","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-drop-import-content"},""!==b?b:Object(r.sprintf)(Object(r.__)("This tool allows you to import the %s from the JSON file.","wp-marketing-automations"),s)))}}),Object(a.createElement)(i.DropZone,{onFilesDrop:O,onHTMLDrop:O,onDrop:O})))}},1222:function(t,e,n){},1223:function(t,e,n){},1224:function(t,e,n){},1304:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n(68),o=n(1),i=n(147),c=n(52),u=n(151);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var l=["getStateProp"];function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=s(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(){var t=Object(c.a)("automationv1List"),e=t.getStateProp,n=function(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(-1!==e.indexOf(a))continue;n[a]=t[a]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(t,l),a=Object(c.a)(u.a.recipient).getStateProp,r=Object(c.a)(u.a.conversion).getStateProp,o=Object(c.a)(u.a.contacts).getStateProp,i=Object(c.a)(u.a.analytics).getStateProp;return f(f({},n),{},{getAutomations:function(){return e("automations")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getLoadingStatus:function(){return e("isLoading")},getRecipientData:function(){return a("data")},getRecipientLoading:function(){return a("isLoading")},getRecipientOffset:function(){return a("offset")},getRecipientAutomationId:function(){return a("automationId")},getRecipientTotal:function(){return a("total")},getRecipientAutomation:function(){return a("automation")},getRecipientPage:function(){return parseInt(a("offset"))/parseInt(a("limit"))+1},getRecipientLimit:function(){return a("limit")},getConversionData:function(){return r("data")},getConversionLoading:function(){return r("isLoading")},getConversionOffset:function(){return r("offset")},getConversionAutomationId:function(){return r("automationId")},getConversionTotal:function(){return r("total")},getConversionAutomation:function(){return r("automation")},getConversionPage:function(){return parseInt(r("offset"))/parseInt(r("limit"))+1},getConversionLimit:function(){return r("limit")},getCountData:function(){return e("countData")},getContactData:function(){return o("data")},getContactLoading:function(){return o("isLoading")},getContactOffset:function(){return o("offset")},getContactAutomationId:function(){return o("automationId")},getContactTotal:function(){return o("total")},getContactAutomation:function(){return o("automation")},getContactPage:function(){return parseInt(o("offset"))/parseInt(o("limit"))+1},getContactLimit:function(){return o("limit")},getContactCountData:function(){return o("contactCount")},getAnalyticsData:function(){return i("analytics")},getAnalyticsTileData:function(){return i("tiles")},getAnalyticsTableData:function(){return i("tableData")},getAnalyticsLoading:function(){return i("isLoading")},getAnalyticsType:function(){return i("type")},getAnalyticsAutomationData:function(){return i("automation")}})},O=n(51),d=n(3),j=n(17);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var y=["fetch","setStateProp"],w=["s","page","filter","path"];function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=g(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==g(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(-1!==e.indexOf(a))continue;n[a]=t[a]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var k=function(){var t=Object(O.a)("automationv1List"),e=t.fetch,n=t.setStateProp,a=E(t,y),r=Object(O.a)(u.a.recipient),o=r.fetch,i=r.setStateProp,c=Object(O.a)(u.a.conversion),s=c.fetch,l=c.setStateProp,m=Object(O.a)(u.a.contacts),f=m.fetch,b=m.setStateProp,p=Object(O.a)(u.a.analytics),g=p.fetch,v=p.setStateProp;return h(h({},a),{},{fetch:function(t,a,r,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n("automation",{}),n("isLoading",!0);var c=a.s,u=(a.page,a.filter,a.path,E(a,w)),s={offset:r,limit:o,status:t,search:c,filters:u,version:i?2:1};e("GET",Object(d.C)("/automations"),s)},setAutomationListValues:function(t,e){n(t,e)},fetchRecipient:function(t,e,n){o("GET",Object(d.C)("/automation/".concat(t,"/recipients?limit=").concat(e,"&offset=").concat(n)))},setRecipientsValues:function(t,e){i(t,e)},fetchConversion:function(t,e,n){l("automation",{}),s("GET",Object(d.C)("/automation/".concat(t,"/conversions?limit=").concat(e,"&offset=").concat(n)))},setConversionValues:function(t,e){l(t,e)},fetchContacts:function(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";b("automation",{}),f("GET",Object(d.C)("/automation/".concat(t,"/contacts?limit=").concat(e,"&offset=").concat(n,"&type=").concat(a,"&search=").concat(r)))},setContactValues:function(t,e){b(t,e)},fetchAnalytics:function(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=0;4===parseInt(o)&&(i=1),g("GET",Object(d.C)("/analytics/emails/chart/")+"?"+Object(j.stringify)({after:e,before:n,interval:a,oid:t,type:r,mode:o,contact:i}))},setAnalyticsValues:function(t,e){v(t,e)}})},P=n(2),C=n(60),S=n(61),A=n(19),x=n(5),N=n(54),T=n(9),D=n.n(T),I=n(6),M=n.n(I),F=n(12),G=n(1098),L=n(355),z=n(357),B=n(49),R=n(7),q=n(26),U=n(344),H=n(11);function V(){var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,a,r,o){var u=a&&a.prototype instanceof c?a:c,s=Object.create(u.prototype);return Y(s,"_invoke",function(n,a,r){var o,c,u,s=0,l=r||[],m=!1,f={p:0,n:0,v:t,a:b,f:b.bind(t,4),d:function(e,n){return o=e,c=0,u=t,f.n=n,i}};function b(n,a){for(c=n,u=a,e=0;!m&&s&&!r&&e<l.length;e++){var r,o=l[e],b=f.p,p=o[2];n>3?(r=p===a)&&(u=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=t):o[0]<=b&&((r=n<2&&b<o[1])?(c=0,f.v=a,f.n=o[1]):b<p&&(r=n<3||o[0]>a||a>p)&&(o[4]=n,o[5]=a,f.n=p,c=0))}if(r||n>1)return i;throw m=!0,a}return function(r,l,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===l&&b(l,p),c=l,u=p;(e=c<2?t:u)||!m;){o||(c?c<3?(c>1&&(f.n=-1),b(c,u)):f.n=u:f.v=u);try{if(s=2,o){if(c||(r="next"),e=o[r]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=o.return)&&e.call(o),c<2&&(u=TypeError("The iterator does not provide a '"+r+"' method"),c=1);o=t}else if((e=(m=f.n<0)?u:n.call(a,f))!==i)break}catch(e){o=t,c=1,u=e}finally{s=1}}return{value:e,done:m}}}(n,r,o),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][a]?e(e([][a]())):(Y(e={},a,(function(){return this})),e),m=s.prototype=c.prototype=Object.create(l);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Y(t,r,"GeneratorFunction")),t.prototype=Object.create(m),t}return u.prototype=s,Y(m,"constructor",s),Y(s,"constructor",u),u.displayName="GeneratorFunction",Y(s,r,"GeneratorFunction"),Y(m),Y(m,r,"Generator"),Y(m,a,(function(){return this})),Y(m,"toString",(function(){return"[object Generator]"})),(V=function(){return{w:o,m:f}})()}function Y(t,e,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}(Y=function(t,e,n,a){function o(e,n){Y(t,e,(function(t){return this._invoke(e,n,t)}))}e?r?r(t,e,{value:n,enumerable:!a,configurable:!a,writable:!a}):t[e]=n:(o("next",0),o("throw",1),o("return",2))})(t,e,n,a)}function $(t,e,n,a,r,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(a,r)}function Q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,o,i,c=[],u=!0,s=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=o.call(n)).done)&&(c.push(a.value),c.length!==e);u=!0);}catch(t){s=!0,r=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw r}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return J(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}var W=function(t){var e=Q(Object(a.useState)(!1),2),n=e[0],r=e[1],i=Q(Object(a.useState)(""),2),c=i[0],u=i[1],s=Q(Object(a.useState)({}),2),l=s[0],m=s[1],f=Q(Object(a.useState)(""),2),b=f[0],p=f[1],O=Object(U.a)().setAutomationData,j=t.onCloseModal,g=t.query,y=t.isV2,w=void 0!==y&&y;Object(a.useEffect)((function(){r(!1),m({}),p("")}),[]);var v=function(){var t,e=(t=V().m((function t(){var e,n;return V().w((function(t){for(;;)switch(t.p=t.n){case 0:if(b){t.n=1;break}return u(Object(o.__)("Automation name is required field","wp-marketing-automations")),t.a(2);case 1:return u(""),r(!0),t.p=2,t.n=3,D()({path:Object(d.C)("/automations/create/"),method:"POST",data:{title:b,version:w}});case 3:if(!((e=t.v)&&e.result&&e.result.automation_id)){t.n=5;break}if(!w){t.n=4;break}O("isNewAutomation",e.result.automation_id),bwfcrm_contacts_data.first_automation_id=e.result.automation_id,setTimeout((function(){return Object(F.l)({path:"/automation/"+e.result.automation_id},"/",g)}),500),t.n=5;break;case 4:return window.location.href="admin.php?page=autonami-automations&edit="+e.result.automation_id,t.a(2);case 5:t.n=7;break;case 6:t.p=6,n=t.v,r(!1),m({error:!0,message:n.message});case 7:return t.a(2)}}),t,null,[[2,6]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){$(o,a,r,i,c,"next",t)}function c(t){$(o,a,r,i,c,"throw",t)}i(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(a.createElement)(x.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-h--core-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(a.createElement)("div",{className:"bwf-modal-header"},Object(a.createElement)("div",{className:"bwf-modal-heading"},Object(o.__)("Add Automation","wp-marketing-automations")),Object(a.createElement)("span",{onClick:j,className:"bwf-modal-close"},Object(a.createElement)(R.a,{icon:"close",color:"#353030"}))),c&&Object(a.createElement)(q.a,{status:"error",onRemove:function(){return u("")}},c),l&&l.error||l&&l.success?l&&l.success&&l.message?Object(a.createElement)("div",{className:"bwf-t-center"},Object(a.createElement)(L.a,null),Object(a.createElement)("div",{className:"bwf-h1"},l.message)):l&&l.error&&l.message?Object(a.createElement)("div",{className:"bwf-t-center"},Object(a.createElement)(z.a,null),Object(a.createElement)("div",{className:"bwf-h1"},l.message)):Object(a.createElement)(B.a,null):Object(a.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(t){"Enter"==t.key&&v()}},Object(a.createElement)(x.TextControl,{placeholder:Object(o.__)("Enter automation name","wp-marketing-automations"),autoFocus:!0,label:Object(o.__)("Name","wp-marketing-automations"),value:b,onChange:function(t){return p(t)},disabled:n}),Object(a.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(a.createElement)(H.a,{onClick:function(){return j()},className:"bwf-cancel-btn"},Object(o.__)("Cancel","wp-marketing-automations")),Object(a.createElement)(H.a,{isPrimary:!0,disabled:n,onClick:v,isBusy:n},Object(o.__)("Add","wp-marketing-automations")))))},K=n(150),Z=n(48),X=n(110),tt=n(77),et=n(345),nt=n(97);function at(){var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,a,r,o){var u=a&&a.prototype instanceof c?a:c,s=Object.create(u.prototype);return rt(s,"_invoke",function(n,a,r){var o,c,u,s=0,l=r||[],m=!1,f={p:0,n:0,v:t,a:b,f:b.bind(t,4),d:function(e,n){return o=e,c=0,u=t,f.n=n,i}};function b(n,a){for(c=n,u=a,e=0;!m&&s&&!r&&e<l.length;e++){var r,o=l[e],b=f.p,p=o[2];n>3?(r=p===a)&&(u=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=t):o[0]<=b&&((r=n<2&&b<o[1])?(c=0,f.v=a,f.n=o[1]):b<p&&(r=n<3||o[0]>a||a>p)&&(o[4]=n,o[5]=a,f.n=p,c=0))}if(r||n>1)return i;throw m=!0,a}return function(r,l,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===l&&b(l,p),c=l,u=p;(e=c<2?t:u)||!m;){o||(c?c<3?(c>1&&(f.n=-1),b(c,u)):f.n=u:f.v=u);try{if(s=2,o){if(c||(r="next"),e=o[r]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=o.return)&&e.call(o),c<2&&(u=TypeError("The iterator does not provide a '"+r+"' method"),c=1);o=t}else if((e=(m=f.n<0)?u:n.call(a,f))!==i)break}catch(e){o=t,c=1,u=e}finally{s=1}}return{value:e,done:m}}}(n,r,o),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][a]?e(e([][a]())):(rt(e={},a,(function(){return this})),e),m=s.prototype=c.prototype=Object.create(l);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,rt(t,r,"GeneratorFunction")),t.prototype=Object.create(m),t}return u.prototype=s,rt(m,"constructor",s),rt(s,"constructor",u),u.displayName="GeneratorFunction",rt(s,r,"GeneratorFunction"),rt(m),rt(m,r,"Generator"),rt(m,a,(function(){return this})),rt(m,"toString",(function(){return"[object Generator]"})),(at=function(){return{w:o,m:f}})()}function rt(t,e,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}(rt=function(t,e,n,a){function o(e,n){rt(t,e,(function(t){return this._invoke(e,n,t)}))}e?r?r(t,e,{value:n,enumerable:!a,configurable:!a,writable:!a}):t[e]=n:(o("next",0),o("throw",1),o("return",2))})(t,e,n,a)}function ot(t,e,n,a,r,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(a,r)}function it(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){ot(o,a,r,i,c,"next",t)}function c(t){ot(o,a,r,i,c,"throw",t)}i(void 0)}))}}var ct=function(t){var e=t.isOpen,n=t.tasks,r=t.onSuccess,i=t.onError,c=t.onRequestClose,u=t.actionType,s=n?n.length:0,l=Object(nt.useMutation)(function(){var t=it(at().m((function t(e){return at().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,D()({path:Object(d.C)("/bulk-action/automation_v1"),method:"DELETE",data:{ids:e}});case 1:return t.a(2,t.v)}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){setTimeout((function(){return l.reset()}),2500),r&&r()},onError:function(){i&&i()}}),m=function(){var t=it(at().m((function t(){return at().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,l.mutate(n.map((function(t){return t.id})));case 1:return t.a(2)}}),t)})));return function(){return t.apply(this,arguments)}}(),f={delete:{title:Object(o._n)("Delete Automation","Delete Automations",s,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(o.__)("You are about to delete ","wp-marketing-automations"),Object(o._n)("automation","automations",s,"wp-marketing-automations"),Object(o.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")),confirmBtn:Object(o.__)("Delete","wp-marketing-automations"),cancelBtn:Object(o.__)("Cancel","wp-marketing-automations"),successMsg:Object(o.__)("Bulk action executed successfully","wp-marketing-automations"),errorMsg:Object(o.__)("Unable to delete automation","wp-marketing-automations"),confirmDescription:Object(o.__)("This action is irreversible","wp-marketing-automations")}};return Object(a.createElement)(N.a,{modalTitle:f.hasOwnProperty(u)&&f[u].hasOwnProperty("title")?f[u].title:Object(o._n)("Perform Actions","Perform Actions",s,"wp-marketing-automations"),deleteDescriptionText:f.hasOwnProperty(u)&&f[u].hasOwnProperty("description")?f[u].description:"",confirmButtonText:f.hasOwnProperty(u)&&f[u].hasOwnProperty("confirmBtn")?f[u].confirmBtn:Object(o.__)("Confirm","wp-marketing-automations"),cancelButtonText:f.hasOwnProperty(u)&&f[u].hasOwnProperty("cancelBtn")?f[u].cancelBtn:Object(o.__)("Cancel","wp-marketing-automations"),onConfirm:m,isLoading:l.isLoading,successMessage:l.isSuccess&&(f.hasOwnProperty(u)&&f[u].hasOwnProperty("successMsg")?f[u].successMsg:Object(o.__)("Actions Done!","wp-marketing-automations")),errorMessage:l.isError&&(l.error&&l.error.message?l.error.message:f.hasOwnProperty(u)&&f[u].hasOwnProperty("errorMsg")?f[u].errorMsg:Object(o.__)("Unable to perform action","wp-marketing-automations")),onRequestClose:function(){return!!c&&c()},isOpen:e,confirmDescription:f.hasOwnProperty(u)&&f[u].hasOwnProperty("confirmDescription")?f[u].confirmDescription:"",isDelete:!0})},ut=n(149),st=n(1163);function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(){var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,a,r,o){var u=a&&a.prototype instanceof c?a:c,s=Object.create(u.prototype);return ft(s,"_invoke",function(n,a,r){var o,c,u,s=0,l=r||[],m=!1,f={p:0,n:0,v:t,a:b,f:b.bind(t,4),d:function(e,n){return o=e,c=0,u=t,f.n=n,i}};function b(n,a){for(c=n,u=a,e=0;!m&&s&&!r&&e<l.length;e++){var r,o=l[e],b=f.p,p=o[2];n>3?(r=p===a)&&(u=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=t):o[0]<=b&&((r=n<2&&b<o[1])?(c=0,f.v=a,f.n=o[1]):b<p&&(r=n<3||o[0]>a||a>p)&&(o[4]=n,o[5]=a,f.n=p,c=0))}if(r||n>1)return i;throw m=!0,a}return function(r,l,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===l&&b(l,p),c=l,u=p;(e=c<2?t:u)||!m;){o||(c?c<3?(c>1&&(f.n=-1),b(c,u)):f.n=u:f.v=u);try{if(s=2,o){if(c||(r="next"),e=o[r]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=o.return)&&e.call(o),c<2&&(u=TypeError("The iterator does not provide a '"+r+"' method"),c=1);o=t}else if((e=(m=f.n<0)?u:n.call(a,f))!==i)break}catch(e){o=t,c=1,u=e}finally{s=1}}return{value:e,done:m}}}(n,r,o),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][a]?e(e([][a]())):(ft(e={},a,(function(){return this})),e),m=s.prototype=c.prototype=Object.create(l);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,ft(t,r,"GeneratorFunction")),t.prototype=Object.create(m),t}return u.prototype=s,ft(m,"constructor",s),ft(s,"constructor",u),u.displayName="GeneratorFunction",ft(s,r,"GeneratorFunction"),ft(m),ft(m,r,"Generator"),ft(m,a,(function(){return this})),ft(m,"toString",(function(){return"[object Generator]"})),(mt=function(){return{w:o,m:f}})()}function ft(t,e,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}(ft=function(t,e,n,a){function o(e,n){ft(t,e,(function(t){return this._invoke(e,n,t)}))}e?r?r(t,e,{value:n,enumerable:!a,configurable:!a,writable:!a}):t[e]=n:(o("next",0),o("throw",1),o("return",2))})(t,e,n,a)}function bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function pt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(n),!0).forEach((function(e){Ot(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ot(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=lt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=lt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dt(t,e,n,a,r,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(a,r)}function jt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,o,i,c=[],u=!0,s=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=o.call(n)).done)&&(c.push(a.value),c.length!==e);u=!0);}catch(t){s=!0,r=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw r}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return gt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}var yt,wt,vt,ht,_t,Et,kt,Pt,Ct,St,At,xt,Nt,Tt,Dt,It,Mt,Ft,Gt,Lt,zt,Bt,Rt,qt,Ut,Ht,Vt,Yt,$t,Qt,Jt,Wt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(a.createElement)(a.Fragment,null,"".concat(""!==t?t:Object(o.__)("It seems there was an issue during the import","wp-marketing-automations"),". ").concat(Object(o.__)("For further help, contact","wp-marketing-automations")," "),Object(a.createElement)("a",{href:Object(d.ib)("support",{utm_medium:"Automation+Import+Failed"}),target:"_blank",rel:"noopener noreferrer"},Object(o.__)(" support. ","wp-marketing-automations")))},Kt=function(t){var e=t.onRequestClose,n=t.isV2,r=void 0!==n&&n,i=Object(F.i)(),c=jt(Object(a.useState)({status:!1,modalTitle:Object(o.__)("Import Automation","wp-marketing-automations")}),2),u=c[0],s=c[1],l=jt(Object(a.useState)(null),2),m=l[0],f=l[1],b=function(){var t,n=(t=mt().m((function t(){var n,c;return mt().w((function(t){for(;;)switch(t.p=t.n){case 0:return s(pt(pt({},u),{},{loading:!0,title:Object(o.__)("Please wait…","wp-marketing-automations"),message:Object(a.createElement)(a.Fragment,null,Object(o.sprintf)(Object(o.__)("Please wait! We are importing %s data","wp-marketing-automations"),null==m?void 0:m.name))})),t.p=1,(n=new FormData).append("files",m),n.append("version",r?2:1),t.n=2,D()({method:"POST",body:n,path:Object(d.C)("/automations/import")}).then((function(t){200==t.code?t.result.hasOwnProperty("automation_id")?r?(s(pt(pt({},u),{},{status:!0,loading:!1,title:Object(o.__)("Importing Done","wp-marketing-automations"),message:Object(o.__)("Successfully Imported and added in your Automation","wp-marketing-automations")})),setTimeout((function(){Object(F.l)({page:"autonami",path:"/automation/".concat(t.result.automation_id)},"/",{})}),1e3)):window.location.href="admin.php?page=autonami-automations&edit="+t.result.automation_id:(Object(F.l)({path:"/automations/"},"/",i),e()):(f(null),s(pt(pt({},u),{},{status:!1,loading:!1,title:Object(o.__)("Importing Failed","wp-marketing-automations"),message:Wt(t.message)})))}));case 2:t.n=4;break;case 3:t.p=3,c=t.v,f(null),s(pt(pt({},u),{},{status:!1,loading:!1,title:Object(o.__)("Importing Failed","wp-marketing-automations"),message:Wt(c.message)}));case 4:return t.a(2)}}),t,null,[[1,3]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){dt(o,a,r,i,c,"next",t)}function c(t){dt(o,a,r,i,c,"throw",t)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(a.useEffect)((function(){m&&b()}),[m]),Object(a.createElement)(a.Fragment,null,Object(a.createElement)(x.Modal,{className:"bwf-admin-modal bwf-admin-modal-480 bwf-admin-modal-no-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(a.createElement)("div",{className:"bwf-admin-m-header-new"},Object(a.createElement)("div",{className:"bwf-admin-m-title"},Object(o.__)("Import Automation","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-admin-m-close",onClick:e},Object(a.createElement)(R.a,{icon:"close",size:20}))),u.title&&Object(a.createElement)("div",{className:"bwf-import-modal-content bwf-t-center"},u.loading?Object(a.createElement)(R.a,{icon:"import-loading"}):Object(a.createElement)(R.a,{icon:u.status?"success-loader":"circle-close",size:48}),Object(a.createElement)("div",{className:"bwf-drop-import-content"},u.message)),!u.title&&Object(a.createElement)(st.a,{onFileSelected:function(t){return f(t)},filetypeArray:["application/json"],importText:Object(o.__)("Drag or Browse a json file to import automation","wp-marketing-automations"),importInfo:"( "+Object(o.__)("File size 10 MB max","wp-marketing-automations")+" )"})))},Zt=n(8);function Xt(){return(Xt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)({}).hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(null,arguments)}var te=function(t){return Zt.createElement("svg",Xt({width:166,height:139,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),yt||(yt=Zt.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M92.288 99.751c13.301-.656 27.057-1.253 39.407.396 14.214 1.898 31.561 4.641 33.579 9.35 2.065 4.817-20.179 7.415-24.385 12.101-4.582 5.103 11.567 11.667-.383 15.491-11.393 3.645-32.131 1.151-48.218.06-13.179-.894-23.004-3.715-34.857-5.693-14.297-2.386-35.486-2.466-41.67-7.079-6.138-4.581 4.583-9.768 13.58-13.881 7.4-3.383 20.187-4.884 31.8-6.867 10.035-1.713 19.805-3.318 31.147-3.878z",fill:"#ADD3E4",opacity:.3})),wt||(wt=Zt.createElement("path",{d:"M13.017 105.034c4.122-7.56-8.892-11.114-12.03-8.115-3.137 2.998 7.264 16.853 12.03 8.115z",fill:"#E28CB5"})),vt||(vt=Zt.createElement("path",{d:"M18.488 102.727c8.09 0 4.429-14.492.97-14.492-4.337 0-10.317 14.492-.97 14.492z",fill:"#E28CB5"})),ht||(ht=Zt.createElement("path",{d:"M24.724 107.984c6.67 5.438 12.532-6.729 10.16-10.366-2.371-3.636-17.87 4.081-10.16 10.366z",fill:"#E28CB5"})),_t||(_t=Zt.createElement("path",{d:"M16.219 111.582c-1.126-2.609-2.774-5.04-4.898-7.224-3.613-3.717-7.414-5.46-7.452-5.477a.225.225 0 00-.185.41c.037.017 3.772 1.732 7.326 5.392 2.083 2.145 3.698 4.529 4.8 7.087.124.29.24.583.353.878h.48a21.684 21.684 0 00-.424-1.066zM19.256 91.207a.224.224 0 10-.446-.053c-.015.122-1.15 9.834-1.092 21.494h.45c-.058-11.63 1.073-21.319 1.088-21.441zM32.64 99.246a.224.224 0 00-.313-.062c-.032.022-3.277 2.208-6.615 5.803-1.819 1.958-3.886 4.584-5.4 7.661h.503c1.48-2.942 3.466-5.458 5.219-7.347 3.303-3.559 6.511-5.721 6.543-5.743a.226.226 0 00.062-.312z",fill:"#CC6697"})),Et||(Et=Zt.createElement("path",{d:"M18.169 112.648H9.887a.356.356 0 00-.338.466l.396 1.217.2.616 2.868 8.812a.58.58 0 00.552.401h10.337a.58.58 0 00.551-.401l2.868-8.812.2-.616.397-1.217a.355.355 0 00-.338-.466H18.17z",fill:"#D1E5ED"})),kt||(kt=Zt.createElement("path",{d:"M27.522 114.331l-.2.616H10.144l-.2-.616h17.577z",fill:"#A6BFCA"})),Pt||(Pt=Zt.createElement("path",{d:"M72.472 80.123H6.358a3.372 3.372 0 01-3.368-3.377v-63.1a3.372 3.372 0 013.368-3.377h66.114a3.372 3.372 0 013.368 3.376v63.101a3.372 3.372 0 01-3.368 3.377z",fill:"#ADD3E4"})),Ct||(Ct=Zt.createElement("path",{d:"M58.75 33.574h-5.266l-.92 2.985H48.46l5.846-15.978h3.612l5.89 15.978H59.68l-.93-2.985zM54.402 30.6h3.427l-1.719-5.542-1.708 5.542zM44.238 20.38h-31.37a1.012 1.012 0 01-1.01-1.014c0-.56.452-1.014 1.01-1.014h31.37c.559 0 1.011.454 1.011 1.014s-.453 1.013-1.01 1.013zM34.154 25.436H12.869a1.012 1.012 0 01-1.011-1.013c0-.56.452-1.014 1.01-1.014h21.286c.558 0 1.01.454 1.01 1.014s-.452 1.013-1.01 1.013z",fill:"#fff"})),St||(St=Zt.createElement("path",{d:"M18.186 33.72H12.58a.723.723 0 010-1.448h5.606a.723.723 0 010 1.448z",fill:"#0073AA"})),At||(At=Zt.createElement("path",{d:"M59.316 58.577H41.99a.723.723 0 01-.722-.724V54.93c0-.4.323-.724.722-.724h17.325c.398 0 .722.324.722.724v2.924c0 .4-.324.724-.722.724zM66.296 66.525H41.991a.723.723 0 01-.722-.724v-2.924c0-.4.323-.724.722-.724h24.305c.399 0 .722.324.722.724V65.8c0 .4-.323.724-.722.724zM22.65 71.244c0-.746.603-1.35 1.347-1.35-5.241 0-9.505-4.275-9.505-9.528 0-5.254 4.264-9.529 9.505-9.529 5.24 0 9.504 4.275 9.504 9.529 0-.746.603-1.35 1.347-1.35s1.347.604 1.347 1.35c0-6.743-5.472-12.228-12.198-12.228S11.8 53.623 11.8 60.366c0 6.742 5.472 12.227 12.198 12.227a1.348 1.348 0 01-1.347-1.35z",fill:"#fff"})),xt||(xt=Zt.createElement("path",{d:"M34.841 59.016c-.743 0-1.347.604-1.347 1.35 0 5.254-4.263 9.528-9.504 9.528-.744 0-1.347.605-1.347 1.35 0 .746.603 1.35 1.347 1.35 6.726 0 12.198-5.486 12.198-12.228 0-.746-.603-1.35-1.347-1.35z",fill:"#0073AA"})),Nt||(Nt=Zt.createElement("path",{d:"M3.047 14.269a4 4 0 014-4H71.8a4 4 0 014 4v1.088H3.047v-1.088z",fill:"#005D89"})),Tt||(Tt=Zt.createElement("ellipse",{cx:9.396,cy:12.813,rx:1.269,ry:1.272,fill:"#fff"})),Dt||(Dt=Zt.createElement("ellipse",{cx:13.624,cy:12.813,rx:1.269,ry:1.272,fill:"#fff"})),It||(It=Zt.createElement("ellipse",{cx:17.854,cy:12.813,rx:1.269,ry:1.272,fill:"#fff"})),Mt||(Mt=Zt.createElement("path",{d:"M96.251 9.667c.462 5.607 4.529 9.122 6.916 9.122.358 0 .748-.064 1.155-.176v2.797h6.054V14.3c.056-.148.11-.31.164-.485 2.684-.257 2.572-4.7.978-4.7-.291 0-.484.275-.607.552l-.395.396V8.056s-.891.084-2.645-2.592c-.757 1.15-6.792 2.955-11.635 2.147 0 0-.013.998.015 2.056z",fill:"#FCBEB7"})),Ft||(Ft=Zt.createElement("path",{d:"M103.585 0c4.176 0 5.011 2.23 5.011 2.23 1.781 0 4.509 3.262 2.867 6.886l-.009.008-.938.94V8.057s-.891.083-2.644-2.593c-.757 1.15-6.792 2.955-11.636 2.147 0 0-.012.998.016 2.056v.003C94.443 4.43 98.074 0 103.585 0z",fill:"#311643"})),Gt||(Gt=Zt.createElement("path",{d:"M105.38 10.277c.185 0 .334-.15.334-.334v-.625a.334.334 0 10-.668 0v.625c0 .185.15.334.334.334zM99.186 10.277c.185 0 .334-.15.334-.334v-.625a.334.334 0 10-.668 0v.625c0 .185.15.334.334.334zM102.924 15.103c.596 0 1.002-.225 1.248-.43.31-.257.438-.539.444-.55a.153.153 0 00-.279-.127c-.017.038-.441.927-1.671.785a.154.154 0 00-.035.304c.102.012.2.018.293.018z",fill:"#311643"})),Lt||(Lt=Zt.createElement("path",{d:"M107.597 13.972c.912 0 1.651-.741 1.651-1.655a1.652 1.652 0 10-3.303 0c0 .914.739 1.655 1.652 1.655zM96.422 10.944c.21 1.11.56 2.123 1.004 3.025a1.652 1.652 0 001.568-1.652 1.652 1.652 0 00-2.572-1.373z",fill:"#F49795"})),zt||(zt=Zt.createElement("path",{d:"M96.847 9.63a2.345 2.345 0 002.34 2.345 2.345 2.345 0 002.339-2.256 1.524 1.524 0 011.516-.002 2.345 2.345 0 002.338 2.258 2.345 2.345 0 000-4.688c-1.205 0-2.2.918-2.326 2.092a1.797 1.797 0 00-1.54.001 2.345 2.345 0 00-2.327-2.093c-1.29 0-2.34 1.051-2.34 2.344zm6.5 0c0-1.123.912-2.037 2.034-2.037a2.038 2.038 0 010 4.075 2.038 2.038 0 01-2.034-2.037zm-6.194 0c0-1.123.913-2.037 2.034-2.037a2.038 2.038 0 010 4.075 2.038 2.038 0 01-2.034-2.037z",fill:"#fff"})),Bt||(Bt=Zt.createElement("path",{d:"M104.322 21.41v-2.797c1.369-.377 2.928-1.3 4.099-2.18l-4.099 4.977z",fill:"#F9AFAB"})),Rt||(Rt=Zt.createElement("path",{d:"M89.85 111.672h6.412l6.219-33.125 4.563-14.356 11.044 47.481h6.412l-5.974-53.27H94.838l-4.988 53.27z",fill:"#0073AA"})),qt||(qt=Zt.createElement("path",{d:"M95.752 114.254v4.538c0 .53-.428.958-.957.958H81.943a.221.221 0 01-.221-.221v-.874c0-.382.218-.73.561-.896l7.247-3.505h6.222zM118.783 114.254v4.538c0 .53.429.958.957.958h12.852a.221.221 0 00.221-.221v-.874a.995.995 0 00-.561-.896l-7.247-3.505h-6.222z",fill:"#2F3D6C"})),Ut||(Ut=Zt.createElement("path",{d:"M96.26 111.672l-.484 2.582h-6.248l.32-2.582h6.411zM124.499 111.672l.507 2.582h-6.222l-.697-2.582h6.412z",fill:"#FCBEB7"})),Ht||(Ht=Zt.createElement("path",{d:"M118.654 59.545l-24.051 1.361.234-2.503h23.689",fill:"#005D89"})),Vt||(Vt=Zt.createElement("path",{d:"M104.332 19.024l-9.165 3.983a3.764 3.764 0 00-1.648 1.379l-3.669 5.537 5.174 4.573 1.383-1.183-1.57 25.09h23.689l-1.452-16.36.322-8.73 1.23 1.227 5.466-4.208-2.937-4.794a7.285 7.285 0 00-3.026-2.746l-7.753-3.769s-3.517 2.311-6.044 0z",fill:"#7EB9D6"})),Yt||(Yt=Zt.createElement("path",{d:"M102.382 19.87a7.093 7.093 0 004.586 1.665c1.786 0 3.471-.65 4.787-1.84l-.239-.116a6.849 6.849 0 01-4.548 1.71 6.852 6.852 0 01-4.334-1.529l-.252.11z",fill:"#fff"})),$t||($t=Zt.createElement("path",{d:"M118.42 23.575a2.038 2.038 0 002.709 1.925 7.296 7.296 0 00-2.624-2.51 2.046 2.046 0 00-.085.585zM92.972 25.206a2.038 2.038 0 002.851-2.485l-.66.286a3.765 3.765 0 00-1.647 1.378l-.544.82zM117.191 82.664a3.072 3.072 0 003.07-3.074 3.072 3.072 0 00-3.07-3.074 3.071 3.071 0 00-3.069 3.074 3.071 3.071 0 003.069 3.074zM96.716 82.664a3.071 3.071 0 003.07-3.074 3.072 3.072 0 00-3.07-3.074 3.072 3.072 0 00-3.069 3.074 3.072 3.072 0 003.07 3.074z",fill:"#005D89"})),Qt||(Qt=Zt.createElement("path",{d:"M63.675 23.922l.258-.043.04-.157a.708.708 0 01.638-.532l3.605-.244 2.509-1.022-1.4-1.75a.706.706 0 01.074-.961l2.954 2.28c.29.223.53.505.707.826l.924 1.687-.005.006 13.508 9.455 2.363-3.544 5.174 4.572-6.477 5.736a1.006 1.006 0 01-1.332-.014L72.01 26.516l-2.91.277a5.071 5.071 0 01-1.95-.195l-1.545-.467a.465.465 0 01-.295-.622l-1.1-.212a.475.475 0 01-.383-.418l-.02-.178h-.066a.392.392 0 01-.066-.779zM113.259 56.488l2.409-1.077a.673.673 0 00.359-.386l.349-.963-1.217.3-.388.834a.573.573 0 01-.746.285l.507-1.533c.095-.244.278-.444.512-.559l2.544-1.253 4.389-14.255-3.353-3.34 5.466-4.21 3.196 5.571c.44.766.493 1.695.145 2.506l-8.871 20.316-1.76.082a.574.574 0 01-.52-.28l-.192-.32-.927.075a.576.576 0 01-.51-.231l-.217-.295-.13.035a.792.792 0 01-.901-.393l-.643.215a.92.92 0 01.499-1.124z",fill:"#FCBEB7"})),Jt||(Jt=Zt.createElement("path",{d:"M125.42 37.19c0 1.005.716 1.841 1.665 2.025l.347-.808a2.808 2.808 0 00-.145-2.505l-.396-.69a2.063 2.063 0 00-1.471 1.979zM85.752 38.9l1.461 1.318c.377.34.948.346 1.332.014l1.432-1.238a2.434 2.434 0 00-4.225-.094z",fill:"#F9AFAB"})))},ee=(n(1222),n(44));function ne(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,o,i,c=[],u=!0,s=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=o.call(n)).done)&&(c.push(a.value),c.length!==e);u=!0);}catch(t){s=!0,r=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw r}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ae(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}var re=function(t){var e=t.onRequestClose,n=t.onAction,r=ne(Object(a.useState)(!1),2),i=r[0],c=r[1],u=ne(Object(a.useState)(!1),2),s=u[0],l=u[1],m=ne(Object(a.useState)(!1),2),f=m[0],b=m[1],p=ne(Object(a.useState)(!1),2),O=p[0],j=p[1],g=ne(Object(a.useState)(!1),2),y=g[0],w=g[1];return Object(a.createElement)("div",{className:"bwf-custom-experiment-modal"},Object(a.createElement)("div",{className:"bwf_clear_10"}),Object(a.createElement)("div",{className:"bwf-hero-svg"},Object(a.createElement)("div",null,te())),Object(a.createElement)("div",{className:"bwf-h1"},Object(o.__)("Note: You would need to manually create an equivalent Automation in Next-Gen Builder.","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-modal-content-list"},Object(a.createElement)("div",{className:"modal-content-list-heading"},Object(o.__)("Please confirm","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-modal-list-wrap"},Object(a.createElement)("div",{className:"bwf-modal-list-item"},Object(a.createElement)(ee.a,{checked:s,className:"bwf-export-toggler",onChange:function(t){l(t)}}),Object(o.__)("Yes, I have manually created this automation in the Automation Next-Gen Builder (new version) and no longer need this automation to work in older version.","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-modal-list-item"},Object(a.createElement)(ee.a,{checked:f,className:"bwf-export-toggler",onChange:function(t){b(t)}}),Object(o.__)("Yes, I understand that this automation will not trigger for new contacts after I confirm migration.","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-modal-list-item"},Object(a.createElement)(ee.a,{checked:O,className:"bwf-export-toggler",onChange:function(t){j(t)}}),Object(o.__)("Yes, I  understand that all the Scheduled Tasks for older contacts will still run.","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-modal-list-item"},Object(a.createElement)(ee.a,{checked:y,className:"bwf-export-toggler",onChange:function(t){w(t)}}),Object(o.__)("Yes, I understand that I would not be able to edit the Automation after the migration is confirmed.","wp-marketing-automations")))),Object(a.createElement)("div",{className:"bwf-modal-note"},Object(a.createElement)("strong",null,Object(o.__)("Note: ","wp-marketing-automations")),Object(o.__)("If you are unsure about migration, click here to read our step-by-step guide to migrating the automation. You can also contact our support for any further questions.","wp-marketing-automations")," ",Object(a.createElement)("a",{href:Object(d.ib)("migratefromv1",{utm_medium:"Migrate+New+Automation"}),target:"_blank",className:"bwf-a-no-underline",rel:"noreferrer"},Object(o.__)("Learn More","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-modal-action",style:{marginBottom:0}},Object(a.createElement)(x.Button,{isSecondary:!0,onClick:e,style:{marginRight:"20px"}},Object(o.__)("Cancel","wp-marketing-automations")),Object(a.createElement)(x.Button,{isPrimary:!0,onClick:function(){s&&f&&O&&y&&(c(!0),n())},isBusy:i,disabled:i||!(s&&f&&O&&y)},Object(o.__)("Yes, I Confirm Migration","wp-marketing-automations"))))},oe=n(203),ie=(n(1223),function(){return Object(a.createElement)("div",{className:"bwf-automation-v1-notice-wrap"},Object(a.createElement)("div",{className:"bwf-notifications-message"},Object(a.createElement)(A.a,{className:"bwf-notification-header"},Object(a.createElement)(x.FlexItem,null,Object(a.createElement)(A.a,{gap:3},Object(a.createElement)(x.FlexItem,null,Object(a.createElement)(R.a,{icon:"notification-dot",width:"18",height:"21"})),Object(a.createElement)(x.FlexItem,{className:"bwf-notification-heading"},Object(o.__)("Notifications","wp-marketing-automations"))))),Object(a.createElement)("h3",{className:"bwf-notifications-title"},"Migrate your automations to FunnelKit Automations Next Generation Builder"),Object(a.createElement)("p",{className:"bwf-notifications-content"},"Next-Generation Automation Builder is now available. Go to Automations (NextGen) to experience a new way of building powerful workflows. If you have any questions please"," ",Object(a.createElement)("a",{className:"bwf-a-no-underline",href:Object(d.ib)("support",{utm_medium:"Automation+NextGen+Migrate"}),target:"_blank",style:{color:"#135e96"},rel:"noreferrer"},Object(o.__)("contact support","wp-marketing-automations")),"."),Object(a.createElement)("div",{className:"bwf-notifications-button-wrap"},Object(a.createElement)("div",{className:"bwf-notifications-buttons"},Object(a.createElement)("a",{target:"_blank",href:Object(d.ib)("nxtgenbuilder",{utm_medium:"Automation+NextGen+Migrate"}),className:"components-button is-secondary",rel:"noreferrer"},Object(o.__)("Know more about Next Gen","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-notifications-buttons"},Object(a.createElement)("a",{target:"_blank",href:Object(d.ib)("migratefromv1",{utm_medium:"Automation+NextGen"}),className:"components-button is-primary",rel:"noreferrer"},Object(o.__)("Learn how to Migrate","wp-marketing-automations"))))))}),ce=n(347),ue=n(22);function se(t){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function le(){var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,a,r,o){var u=a&&a.prototype instanceof c?a:c,s=Object.create(u.prototype);return me(s,"_invoke",function(n,a,r){var o,c,u,s=0,l=r||[],m=!1,f={p:0,n:0,v:t,a:b,f:b.bind(t,4),d:function(e,n){return o=e,c=0,u=t,f.n=n,i}};function b(n,a){for(c=n,u=a,e=0;!m&&s&&!r&&e<l.length;e++){var r,o=l[e],b=f.p,p=o[2];n>3?(r=p===a)&&(u=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=t):o[0]<=b&&((r=n<2&&b<o[1])?(c=0,f.v=a,f.n=o[1]):b<p&&(r=n<3||o[0]>a||a>p)&&(o[4]=n,o[5]=a,f.n=p,c=0))}if(r||n>1)return i;throw m=!0,a}return function(r,l,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===l&&b(l,p),c=l,u=p;(e=c<2?t:u)||!m;){o||(c?c<3?(c>1&&(f.n=-1),b(c,u)):f.n=u:f.v=u);try{if(s=2,o){if(c||(r="next"),e=o[r]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=o.return)&&e.call(o),c<2&&(u=TypeError("The iterator does not provide a '"+r+"' method"),c=1);o=t}else if((e=(m=f.n<0)?u:n.call(a,f))!==i)break}catch(e){o=t,c=1,u=e}finally{s=1}}return{value:e,done:m}}}(n,r,o),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][a]?e(e([][a]())):(me(e={},a,(function(){return this})),e),m=s.prototype=c.prototype=Object.create(l);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,me(t,r,"GeneratorFunction")),t.prototype=Object.create(m),t}return u.prototype=s,me(m,"constructor",s),me(s,"constructor",u),u.displayName="GeneratorFunction",me(s,r,"GeneratorFunction"),me(m),me(m,r,"Generator"),me(m,a,(function(){return this})),me(m,"toString",(function(){return"[object Generator]"})),(le=function(){return{w:o,m:f}})()}function me(t,e,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}(me=function(t,e,n,a){function o(e,n){me(t,e,(function(t){return this._invoke(e,n,t)}))}e?r?r(t,e,{value:n,enumerable:!a,configurable:!a,writable:!a}):t[e]=n:(o("next",0),o("throw",1),o("return",2))})(t,e,n,a)}function fe(t,e,n,a,r,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(a,r)}function be(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){fe(o,a,r,i,c,"next",t)}function c(t){fe(o,a,r,i,c,"throw",t)}i(void 0)}))}}function pe(t){return function(t){if(Array.isArray(t))return ve(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||we(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(){return(Oe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)({}).hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(null,arguments)}function de(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function je(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?de(Object(n),!0).forEach((function(e){ge(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ge(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=se(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=se(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==se(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ye(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,o,i,c=[],u=!0,s=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=o.call(n)).done)&&(c.push(a.value),c.length!==e);u=!0);}catch(t){s=!0,r=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw r}}return c}}(t,e)||we(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(t,e){if(t){if("string"==typeof t)return ve(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ve(t,e):void 0}}function ve(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}var he=function(t){var e=Object(a.useContext)(d.h),n=t.type,r=void 0===n?"all":n,c=t.query,u=c.s,s=void 0===u?"":u,l=k(),m=p(),f=l.fetch,b=l.setAutomationListValues,O=m.getAutomations,g=m.getPageNumber,y=m.getPerPageCount,w=m.getTotalCount,v=m.getOffset,h=m.getLoadingStatus,_=m.getCountData,E=Object(a.useRef)(new AbortController),x=ye(Object(a.useState)({loading:!1,status:!1}),2),T=x[0],I=x[1],L=ye(Object(a.useState)(!1),2),z=L[0],B=L[1],q=ye(Object(a.useState)(!1),2),U=q[0],V=q[1],Y=ye(Object(a.useState)(!1),2),$=Y[0],Q=Y[1],J=ye(Object(a.useState)({}),2),nt=J[0],at=J[1],rt=ye(Object(a.useState)(!1),2),ot=rt[0],it=rt[1],st=ye(Object(a.useState)(!1),2),lt=st[0],mt=st[1],ft=ye(Object(a.useState)([]),2),bt=ft[0],pt=ft[1],Ot=ye(Object(a.useState)(!1),2),dt=Ot[0],jt=Ot[1],gt=ye(Object(a.useState)(""),2),yt=gt[0],wt=gt[1],vt=O(),ht=v(),_t=y(),Et=h(),kt=w(),Pt=g(),Ct=_(),St="all";Object(P.isEmpty)(r)||("active"===r?St=1:"inactive"===r&&(St=2));var At=Object(X.a)().getPageCountData,xt=Object(tt.a)(),Nt=xt.setPageCountData,Tt=xt.setPageData,Dt=Object(Z.a)(Object(d.Cb)()).formatAmount;Object(a.useEffect)((function(){Q(!1),b("isLoading",!0),f(St,c,ht,_t)}),[ht,_t,r,s]),Object(a.useEffect)((function(){if(!Et&&!$&&!Object(P.isEmpty)(vt)||lt)try{var t={automation_ids:[],version:1,force:lt};vt.map((function(e){t.automation_ids.push(e.id)})),D()({method:"GET",path:Object(d.C)("/automations-stats?"+Object(j.stringify)(t)),signal:E.current.signal}).then((function(t){200==t.code&&(at(t.result),Q(!0),lt&&(e(Object(o.__)("Data Updated","wp-marketing-automations")),Object(d.Pb)(e,3e3),mt(!1)))})).catch((function(t){console.log(t)}))}catch(t){Q(!0),mt(!1),console.log(t)}Tt("automation-v1-list")}),[vt,lt]);var It=function(){qt&&qt(),pt([])},Mt=Object(a.useCallback)((function(t,e){pt(e),wt(t),jt(!0)}),[]);Object(a.useEffect)((function(){return Q(!1),at({}),It(),function(){E.current.abort()}}),[]);var Ft=At();Object(a.useEffect)((function(){Et||B(!1)}),[Et]),Object(a.useEffect)((function(){var t={};Ct.hasOwnProperty("automations")&&(t["automations-v1_automations"]=parseInt(Ct.automations),t["automations-v1_all"]=parseInt(Ct.automations)),Ct.hasOwnProperty("task_history")&&(t["automations-v1_task-history"]=parseInt(Ct.task_history)),Ct.hasOwnProperty("contact_activity")&&(t["contact-activity"]=parseInt(Ct.contact_activity)),Ct.hasOwnProperty("status_count")&&Object.keys(Ct.status_count).map((function(e){t["automations-v1_".concat(e)]=parseInt(Ct.status_count[e])})),Nt(je(je({},Ft),t))}),[Ct]),Object(G.a)("automations-v1","","",!1,"",0,!1,!1);var Gt=Object(a.useMemo)((function(){var t={};if(Array.isArray(vt)){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=we(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(vt);try{for(n.s();!(e=n.n()).done;){var a=e.value;t[a.id]=a}}catch(t){n.e(t)}finally{n.f()}}return t}),[vt]),Lt=Object(ut.b)(Gt),zt=Lt.singleSelectProps,Bt=Lt.selectAllProps,Rt=Lt.floatingBarProps,qt=Lt.resetSelection,Ut=Lt.selected,Ht=Object.keys(Ut).filter((function(t){return Ut[t]})).length,Vt=[{key:"select_template",label:Object(a.createElement)(ee.a,Oe({type:"checkbox",checked:!1,onChange:function(){}},Bt)),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"action",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"title",label:Object(o.__)("Name","wp-marketing-automations"),isLeftAligned:!0,required:!0},{key:"event",label:Object(o.__)("Event","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"},{key:"actions",label:Object(o.__)("Actions","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"},{key:"tasks",label:Object(o.__)("Tasks","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-300"},{key:"total_run",label:Object(o.__)("Total Runs","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-120"},Object(d.uc)()&&{key:"revenue",label:Object(o.__)("Revenue","wp-marketing-automations"),cellClassName:"bwf-w-120"},{key:"status",label:Object(o.__)("Status","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-60"}],Yt=function(t){t!==_t&&b("limit",t)},$t=function(t){var e=[],n="";return Object(P.isEmpty)(t.automation_actions)||Object.entries(t.automation_actions).map((function(t){var a=ye(t,2),r=(a[0],a[1]);Object(P.isEmpty)(n)&&(n=r[0]),e=[].concat(pe(e),pe(r))})),Object(a.createElement)(a.Fragment,null,Object(P.isEmpty)(n)?"-":Object(a.createElement)(a.Fragment,null,!Object(P.isEmpty)(n)&&n,!Object(P.isEmpty)(e)&&e.length>1&&Object(a.createElement)(K.a,{items:e})))},Qt=function(){var t=be(le().m((function t(n,a){var r;return le().w((function(t){for(;;)switch(t.p=t.n){case 0:return I(je(je({},a),{},{status:!0})),t.p=1,t.n=2,D()({path:Object(d.C)("/automations"),method:"DELETE",data:{automation_ids:[n]}}).then((function(t){if(200!==t.code)throw Error(Object(d.w)(null==t?void 0:t.message));I({status:!1}),e(t.message),f(St,c,0,_t),Object(d.Pb)(e,3e3)}));case 2:t.n=4;break;case 3:t.p=3,r=t.v,I(je(je({},a),{},{error:r.message}));case 4:return t.a(2)}}),t,null,[[1,3]])})));return function(e,n){return t.apply(this,arguments)}}(),Jt=function(){var t=be(le().m((function t(n){var a;return le().w((function(t){for(;;)switch(t.p=t.n){case 0:return e(Object(o.__)("Duplicating…","wp-marketing-automations")),t.p=1,t.n=2,D()({path:Object(d.C)("/automations/".concat(n,"/duplicate")),method:"POST"}).then((function(t){if(200!==t.code)throw Error(Object(d.w)(null==t?void 0:t.message));e(Object(o.__)("Automation Duplicated","wp-marketing-automations")),f(St,c,0,_t),Object(d.Pb)(e,3e3)}));case 2:t.n=4;break;case 3:t.p=3,a=t.v,Object(d.Pb)(e,3e3),setTimeout((function(){I({status:!0,modalTitle:Object(o.__)("Duplicate Automation","wp-marketing-automations"),error:a.message})}),[1500]);case 4:return t.a(2)}}),t,null,[[1,3]])})));return function(e){return t.apply(this,arguments)}}(),Wt=function(t,e){var n="data:text/json;charset=utf-8,"+encodeURIComponent(t),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",e+".json"),document.body.appendChild(a),a.click(),a.remove()},Zt=function(){var t=be(le().m((function t(){var n,a,r,i,c=arguments;return le().w((function(t){for(;;)switch(t.p=t.n){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:0,a=c.length>1&&void 0!==c[1]?c[1]:"automation",e(Object(o.__)("Exporting…","wp-marketing-automations")),r="",r=parseInt(n)>0?Object(d.C)("/automations/".concat(n,"/export?version=1")):Object(d.C)("/automations/export/?version=1"),t.p=1,t.n=2,D()({path:r,method:"GET"}).then((function(t){if(200!==t.code)throw Error(Object(d.w)(null==t?void 0:t.message));Wt(t.result,a),e(Object(o.__)("Automation exported","wp-marketing-automations")),Object(d.Pb)(e,3e3)}));case 2:t.n=4;break;case 3:t.p=3,i=t.v,Object(d.Pb)(e,3e3),setTimeout((function(){I({status:!0,modalTitle:Object(o.__)("Export Automation","wp-marketing-automations"),error:i.message})}),[1500]);case 4:return t.a(2)}}),t,null,[[1,3]])})));return function(){return t.apply(this,arguments)}}(),Xt=function(){var t=be(le().m((function t(n,a){var r,i,c=arguments;return le().w((function(t){for(;;)switch(t.p=t.n){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:{},e(4===n?Object(o.__)("Updating Automation…","wp-marketing-automations"):n?Object(o.__)("Activating Automation…","wp-marketing-automations"):Object(o.__)("Deactivating Automation…","wp-marketing-automations")),t.p=1,t.n=2,D()({path:Object(d.C)("/automations/toggle-state"),method:"POST",data:{state:n,automation_id:a}}).then((function(t){if(200!==t.code)throw Error(Object(d.w)(null==t?void 0:t.message));e(4===n?Object(o.__)("Automation migrated","wp-marketing-automations"):n?Object(o.__)("Automation activated","wp-marketing-automations"):Object(o.__)("Automation deactivated","wp-marketing-automations"));var r;r=vt.map((function(t){return t.id==a&&(1==n?t.status="1":4==n?t.migrated=!0:t.status="0"),t})),4==n&&I({status:!1}),b("automations",r),Object(d.Pb)(e,3e3)}));case 2:t.n=4;break;case 3:t.p=3,i=t.v,4==n&&I(je(je({},r),{},{error:i.message})),Object(d.Pb)(e,3e3),setTimeout((function(){I({status:!0,modalTitle:Object(o.__)("Automation Status Update","wp-marketing-automations"),error:i.message})}),[1500]);case 4:return t.a(2)}}),t,null,[[1,3]])})));return function(e,n){return t.apply(this,arguments)}}(),te=function(t){if(t.hasOwnProperty("migrated")&&t.migrated)return Object(a.createElement)("span",{className:"bwf-tags bwf-tag-blue"},Object(o.__)("Migrated","wp-marketing-automations"));switch(parseInt(t.status)){case 1:return Object(a.createElement)("span",{className:"bwf-tags bwf-tag-green"},Object(o.__)("Active","wp-marketing-automations"));default:return Object(a.createElement)("span",{className:"bwf-tags bwf-tag-red"},Object(o.__)("Inactive","wp-marketing-automations"))}},ne=function(t){return Object(a.createElement)("a",{href:"admin.php?page=autonami-automations&edit="+t.id,className:"bwf-a-no-underline"},Object(a.createElement)("b",null,t.name))},ae=function(t){return Object(a.createElement)(a.Fragment,null,t.event?t.event:Object(o.__)("Not Found","wp-marketing-automations"))},se=function(t){if(!$)return Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15",title:"Loading"});var e=nt.hasOwnProperty(t.id)?nt[t.id]:{};return Object(a.createElement)(A.a,{gap:2,justify:"flex-start"},Object(a.createElement)(A.c,null,Object(a.createElement)(ue.a,{toolTipText:Object(o.__)("Active","wp-marketing-automations"),position:"top"},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(F.l)({path:"/automations-v1/task-history/scheduled",automation:t.id},"/",c)},style:{display:"inline-flex"}},Object(a.createElement)(R.a,{icon:"status-scheduled",width:16,height:16}),Object(a.createElement)("span",null,e.hasOwnProperty("scheduled")?Object(d.xc)(parseInt(e.scheduled)):0))))),Object(a.createElement)(A.c,null,Object(a.createElement)(ue.a,{toolTipText:Object(o.__)("Paused","wp-marketing-automations"),position:"top"},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(F.l)({path:"/automations-v1/task-history/paused",automation:t.id},"/",c)},style:{display:"inline-flex"}},Object(a.createElement)(R.a,{icon:"status-paused",width:16,height:16}),Object(a.createElement)("span",null,e.hasOwnProperty("paused")?Object(d.xc)(parseInt(e.paused)):0))))),Object(a.createElement)(A.c,null,Object(a.createElement)(ue.a,{toolTipText:Object(o.__)("Completed","wp-marketing-automations"),position:"top"},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(F.l)({path:"/automations-v1/task-history/completed",automation:t.id},"/",c)},style:{display:"inline-flex"}},Object(a.createElement)(R.a,{icon:"status-completed",width:16,height:16}),Object(a.createElement)("span",null,e.hasOwnProperty("completed")?Object(d.xc)(parseInt(e.completed)):0))))),Object(a.createElement)(A.c,null,Object(a.createElement)(ue.a,{toolTipText:Object(o.__)("Failed","wp-marketing-automations"),position:"top"},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(F.l)({path:"/automations-v1/task-history/failed",automation:t.id},"/",c)},style:{display:"inline-flex"}},Object(a.createElement)(R.a,{icon:"status-failed",width:16,height:16}),Object(a.createElement)("span",null,e.hasOwnProperty("failed")?Object(d.xc)(parseInt(e.failed)):0))))))},me=Array.isArray(vt)?vt.map((function(t){return[{display:zt.hasOwnProperty(t.id)?Object(a.createElement)(ee.a,Oe({type:"checkbox",checked:!1,onChange:function(){}},zt[t.id])):Object(a.createElement)(a.Fragment,null),value:null},{display:(e=t,Object(a.createElement)(C.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(S.a,null,Object(a.createElement)("a",{href:"admin.php?page=autonami-automations&edit="+e.id,className:"bwf-a-no-underline"},Object(a.createElement)(A.a,{justify:"flex-start"},Object(a.createElement)(A.c,null,Object(o.__)("Edit","wp-marketing-automations"))))),!(e.hasOwnProperty("migrated")&&e.migrated)&&Object(a.createElement)(a.Fragment,null,Object(a.createElement)(S.a,{isClickable:!0,onInvoke:function(){Xt(1!==parseInt(e.status),e.id),n()}},Object(a.createElement)(A.a,{justify:"flex-start"},Object(a.createElement)(A.c,null,1===parseInt(e.status)?Object(o.__)("Deactivate","wp-marketing-automations"):Object(o.__)("Activate","wp-marketing-automations")))),Object(a.createElement)(S.a,{isClickable:!0,onInvoke:function(){Jt(e.id),n()}},Object(a.createElement)(A.a,{justify:"flex-start"},Object(a.createElement)(A.c,null,Object(o.__)("Duplicate","wp-marketing-automations")))),Object(a.createElement)(S.a,{isClickable:!0,onInvoke:function(){var t={status:!0,modalTitle:"",content:Object(a.createElement)(re,{onRequestClose:function(){return I({})},onAction:function(){return Xt(4,e.id,t)}}),isDelete:!1,closeIcon:!0,modalClass:"bwf-admin-modal-medium"};I(je({},t)),n()}},Object(a.createElement)(A.a,{justify:"flex-start"},Object(a.createElement)(A.c,null,Object(o.__)("Confirm Migration","wp-marketing-automations")))),Object(a.createElement)(S.a,{isClickable:!0,onInvoke:function(){Zt(e.id,e.name),n()}},Object(a.createElement)(A.a,{justify:"flex-start"},Object(a.createElement)(A.c,null,Object(o.__)("Export","wp-marketing-automations"))))),Object(a.createElement)(S.a,{isClickable:!0,onInvoke:function(){var t={status:!0,modalTitle:Object(o.__)("Delete Automation","wp-marketing-automations"),deleteEntityName:e.name,isDelete:!0,buttonConfirm:Object(o.__)("Delete","wp-marketing-automations"),buttonCancel:Object(o.__)("Cancel","wp-marketing-automations"),closeIcon:!1};I(je(je({},t),{},{onConfirm:function(){return Qt(e.id,t)}})),n()}},Object(a.createElement)(A.a,{justify:"flex-start"},Object(a.createElement)(A.c,null,Object(o.__)("Delete","wp-marketing-automations")))))}})),value:""},{display:ne(t),value:t.name},{display:ae(t),value:t.event},{display:$t(t),value:""},{display:se(t),value:""},{display:parseInt(t.run_count)>0?parseInt(t.run_count):"0",value:t.run_count},Object(d.uc)()&&{display:t.revenue&&parseFloat(t.revenue)>0?Object(a.createElement)("span",{className:"bwf-tags bwf-tag-revenue"},Dt(t.revenue)):"-",value:""},{display:te(t),value:""}];var e})):[],fe=M()("bwfcrm-campaign-list-table",{"has-search":!0}),de=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(a.createElement)(R.a,{icon:"zero-automation",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(o.__)("Grow your business with marketing automation","wp-marketing-automations")}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(o.__)("Create Automations for abandoned cart, post-purchase, win-back, and more. Build automated workflows that generate profits while you sleep. Connect your site to Zapier, Slack, Twilio, Google Sheets and explore limitless automation possibilities.","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(o.__)("Create Automation","wp-marketing-automations"),proCheck:!1,onClick:function(){V(!0)}},{text:Object(o.__)("Import Automation","wp-marketing-automations"),isSecondary:!0,proCheck:!1,onClick:function(){return it(!0)}}]}}],ge=Object(a.createElement)("div",{className:"bwf-display-flex gap-12"},Object(a.createElement)(H.a,{isGray:!0,className:"bwf-btn-small bwf-btn-gray is-light",title:Object(o.__)("Refresh Stats","wp-marketing-automations"),onClick:function(){return Q(!1),void mt(!0)},disabled:!$,isBusy:!$&&lt},Object(a.createElement)(R.a,{icon:"retry",size:16}),Object(o.__)("Refresh","wp-marketing-automations")),Object(a.createElement)(H.a,{isGray:!0,className:"bwf-btn-small bwf-btn-gray is-light",title:Object(o.__)("Export","wp-marketing-automations"),onClick:function(){return Zt()}},Object(a.createElement)(R.a,{icon:"export",size:16}),Object(o.__)("Export","wp-marketing-automations")),Object(a.createElement)(H.a,{isGray:!0,className:"bwf-btn-small bwf-btn-gray is-light",title:Object(o.__)("Import","wp-marketing-automations"),onClick:function(){return it(!0)}},Object(a.createElement)(R.a,{icon:"import",size:16}),Object(o.__)("Import","wp-marketing-automations"))),ve=[{slug:"automations-v1_all",name:Object(o.__)("All","wp-marketing-automations"),path:"/automations-v1/"},{slug:"automations-v1_active",name:Object(o.__)("Active","wp-marketing-automations"),path:"/automations-v1/list/active"},{slug:"automations-v1_inactive",name:Object(o.__)("Inactive","wp-marketing-automations"),path:"/automations-v1/list/inactive"}],he=Et||!["","all"].includes(r)||0!==kt||""!==s||z;return Object(a.createElement)(a.Fragment,null,he?Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-automation-header"},Object(a.createElement)("div",{className:"bwf-automation-h-left"},Object(a.createElement)("div",{className:"bwf-automation-h-title"},Object(o.__)("Automations","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-automation-h-tag"},Object(o.__)("Legacy","wp-marketing-automations")),parseInt(kt)>0&&Object(a.createElement)("div",{className:"bwf-automation-h-count"},Object(o.sprintf)(Object(o.__)("(%s Results)","wp-marketing-automations"),kt))),Object(a.createElement)("div",{className:"bwf-automation-h-right"},Object(a.createElement)(H.a,{isSecondary:!0,onClick:function(){return Object(F.l)({page:"autonami",path:"/automations-v1/task-history/"},"/",{})}},Object(o.__)("Task History","wp-marketing-automations")),Object(a.createElement)(H.a,{isPrimary:!0,onClick:function(){return V(!0)}},Object(o.__)("Create Automation","wp-marketing-automations")))),Object(a.createElement)(ie,null),Object(a.createElement)(ce.a,{tabs:ve,selected:r?"automations-v1_".concat(r):"automations-v1_all",count:Ft,disableUrlUpdate:!0,onChange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b("offset",0),B(!0),Object(F.l)({page:"autonami",path:e},"/",{})}}),Object(a.createElement)("div",{className:"bwf_clear_16"}),Object(a.createElement)(i.a,{className:fe,rows:me,headers:Vt,query:{paged:Pt},rowsPerPage:_t,totalRows:kt,isLoading:Et,onPageChange:function(t,e){b("offset",(t-1)*_t)},onQueryChange:function(t){return"per_page"!==t?function(){}:Yt},rowHeader:!0,showMenu:!1,actions:Ht>0?[Object(a.createElement)(ut.a,Oe({key:"automation-contact-bulk-action",actions:[{id:"delete",icon:"trash",hint:Object(o.__)("Delete","wp-marketing-automations")}],onAction:Mt,inLine:!0,reset:It},Rt))]:[Object(a.createElement)(oe.a,{key:"search",isLoading:Et,searchTerm:null==c?void 0:c.s,showResultCount:!1,setSearchData:function(t){if(Object(P.size)(t))Object(F.l)({s:t},"/",c);else{var e=Object(P.cloneDeep)(c);e.hasOwnProperty("s")&&(null==e||delete e.s),B(!0),Object(F.l)(e,"/",{})}}})],emptyMessage:Object(o.__)("No automations found","wp-marketing-automations"),extraSectionBeforefilterCol:ge}),Object(a.createElement)(N.a,{modalTitle:T.modalTitle,deleteEntityName:T.deleteEntityName,confirmText:T.confirmText,confirmButtonText:T.buttonConfirm,cancelButtonText:T.buttonCancel,onConfirm:T.onConfirm,isLoading:T.loading,successMessage:T.success,errorMessage:T.error,content:T.content,onRequestClose:function(){return I({status:!1})},confirmDescription:T.hasOwnProperty("confirmDescription")?T.confirmDescription:"",isOpen:T.status,isDelete:T.isDelete,closeIcon:!T.hasOwnProperty("closeIcon")||T.closeIcon,modalClass:T.modalClass}),Object(a.createElement)(ct,{tasks:bt,isOpen:dt,onSuccess:function(){f(St,c,ht,_t),It()},onError:It,onRequestClose:function(){return jt(!1)},screenType:"automation-v1",screenTypeId:r,actionType:yt})):Object(a.createElement)(et.a,{data:de}),U&&Object(a.createElement)(W,{onCloseModal:function(){return V(!1)},query:c}),ot&&Object(a.createElement)(Kt,{onRequestClose:function(){return it(!1)}}))},_e=n(1102),Ee=n(1115),ke=n(205),Pe=n(1121);function Ce(){var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,a,r,o){var u=a&&a.prototype instanceof c?a:c,s=Object.create(u.prototype);return Se(s,"_invoke",function(n,a,r){var o,c,u,s=0,l=r||[],m=!1,f={p:0,n:0,v:t,a:b,f:b.bind(t,4),d:function(e,n){return o=e,c=0,u=t,f.n=n,i}};function b(n,a){for(c=n,u=a,e=0;!m&&s&&!r&&e<l.length;e++){var r,o=l[e],b=f.p,p=o[2];n>3?(r=p===a)&&(u=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=t):o[0]<=b&&((r=n<2&&b<o[1])?(c=0,f.v=a,f.n=o[1]):b<p&&(r=n<3||o[0]>a||a>p)&&(o[4]=n,o[5]=a,f.n=p,c=0))}if(r||n>1)return i;throw m=!0,a}return function(r,l,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===l&&b(l,p),c=l,u=p;(e=c<2?t:u)||!m;){o||(c?c<3?(c>1&&(f.n=-1),b(c,u)):f.n=u:f.v=u);try{if(s=2,o){if(c||(r="next"),e=o[r]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=o.return)&&e.call(o),c<2&&(u=TypeError("The iterator does not provide a '"+r+"' method"),c=1);o=t}else if((e=(m=f.n<0)?u:n.call(a,f))!==i)break}catch(e){o=t,c=1,u=e}finally{s=1}}return{value:e,done:m}}}(n,r,o),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][a]?e(e([][a]())):(Se(e={},a,(function(){return this})),e),m=s.prototype=c.prototype=Object.create(l);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Se(t,r,"GeneratorFunction")),t.prototype=Object.create(m),t}return u.prototype=s,Se(m,"constructor",s),Se(s,"constructor",u),u.displayName="GeneratorFunction",Se(s,r,"GeneratorFunction"),Se(m),Se(m,r,"Generator"),Se(m,a,(function(){return this})),Se(m,"toString",(function(){return"[object Generator]"})),(Ce=function(){return{w:o,m:f}})()}function Se(t,e,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}(Se=function(t,e,n,a){function o(e,n){Se(t,e,(function(t){return this._invoke(e,n,t)}))}e?r?r(t,e,{value:n,enumerable:!a,configurable:!a,writable:!a}):t[e]=n:(o("next",0),o("throw",1),o("return",2))})(t,e,n,a)}function Ae(t,e,n,a,r,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(a,r)}function xe(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){Ae(o,a,r,i,c,"next",t)}function c(t){Ae(o,a,r,i,c,"throw",t)}i(void 0)}))}}var Ne=function(t){var e=t.isOpen,n=t.tasks,r=t.onSuccess,i=t.onError,c=t.onRequestClose,u=t.actionType,s=n?n.length:0,l=Object(nt.useMutation)(function(){var t=xe(Ce().m((function t(e){return Ce().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,D()({path:Object(d.C)("/bulk-action/automation_v2"),method:"DELETE",data:{ids:e}});case 1:return t.a(2,t.v)}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){setTimeout((function(){return l.reset()}),2500),r&&r()},onError:function(){i&&i()}}),m=function(){var t=xe(Ce().m((function t(){return Ce().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,l.mutate(n.map((function(t){return t.id})));case 1:return t.a(2)}}),t)})));return function(){return t.apply(this,arguments)}}(),f={delete:{title:Object(o._n)("Delete Automation","Delete Automations",s,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(o.__)("You are about to delete ","wp-marketing-automations"),Object(o._n)("automation","automations",s,"wp-marketing-automations"),Object(o.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")),confirmBtn:Object(o.__)("Delete","wp-marketing-automations"),cancelBtn:Object(o.__)("Cancel","wp-marketing-automations"),successMsg:Object(o.__)("Bulk action executed successfully","wp-marketing-automations"),errorMsg:Object(o.__)("Unable to delete automation","wp-marketing-automations"),confirmDescription:Object(o.__)("This action is irreversible","wp-marketing-automations")}};return Object(a.createElement)(N.a,{modalTitle:f.hasOwnProperty(u)&&f[u].hasOwnProperty("title")?f[u].title:Object(o._n)("Perform Actions","Perform Actions",s,"wp-marketing-automations"),deleteDescriptionText:f.hasOwnProperty(u)&&f[u].hasOwnProperty("description")?f[u].description:"",confirmButtonText:f.hasOwnProperty(u)&&f[u].hasOwnProperty("confirmBtn")?f[u].confirmBtn:Object(o.__)("Confirm","wp-marketing-automations"),cancelButtonText:f.hasOwnProperty(u)&&f[u].hasOwnProperty("cancelBtn")?f[u].cancelBtn:Object(o.__)("Cancel","wp-marketing-automations"),onConfirm:m,isLoading:l.isLoading,successMessage:l.isSuccess&&(f.hasOwnProperty(u)&&f[u].hasOwnProperty("successMsg")?f[u].successMsg:Object(o.__)("Actions Done!","wp-marketing-automations")),errorMessage:l.isError&&(l.error&&l.error.message?l.error.message:f.hasOwnProperty(u)&&f[u].hasOwnProperty("errorMsg")?f[u].errorMsg:Object(o.__)("Unable to perform action","wp-marketing-automations")),onRequestClose:function(){return!!c&&c()},isOpen:e,confirmDescription:f.hasOwnProperty(u)&&f[u].hasOwnProperty("confirmDescription")?f[u].confirmDescription:"",isDelete:!0})},Te=n(40),De=n(1135);function Ie(t){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Me(){var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,a,r,o){var u=a&&a.prototype instanceof c?a:c,s=Object.create(u.prototype);return Fe(s,"_invoke",function(n,a,r){var o,c,u,s=0,l=r||[],m=!1,f={p:0,n:0,v:t,a:b,f:b.bind(t,4),d:function(e,n){return o=e,c=0,u=t,f.n=n,i}};function b(n,a){for(c=n,u=a,e=0;!m&&s&&!r&&e<l.length;e++){var r,o=l[e],b=f.p,p=o[2];n>3?(r=p===a)&&(u=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=t):o[0]<=b&&((r=n<2&&b<o[1])?(c=0,f.v=a,f.n=o[1]):b<p&&(r=n<3||o[0]>a||a>p)&&(o[4]=n,o[5]=a,f.n=p,c=0))}if(r||n>1)return i;throw m=!0,a}return function(r,l,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===l&&b(l,p),c=l,u=p;(e=c<2?t:u)||!m;){o||(c?c<3?(c>1&&(f.n=-1),b(c,u)):f.n=u:f.v=u);try{if(s=2,o){if(c||(r="next"),e=o[r]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=o.return)&&e.call(o),c<2&&(u=TypeError("The iterator does not provide a '"+r+"' method"),c=1);o=t}else if((e=(m=f.n<0)?u:n.call(a,f))!==i)break}catch(e){o=t,c=1,u=e}finally{s=1}}return{value:e,done:m}}}(n,r,o),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][a]?e(e([][a]())):(Fe(e={},a,(function(){return this})),e),m=s.prototype=c.prototype=Object.create(l);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Fe(t,r,"GeneratorFunction")),t.prototype=Object.create(m),t}return u.prototype=s,Fe(m,"constructor",s),Fe(s,"constructor",u),u.displayName="GeneratorFunction",Fe(s,r,"GeneratorFunction"),Fe(m),Fe(m,r,"Generator"),Fe(m,a,(function(){return this})),Fe(m,"toString",(function(){return"[object Generator]"})),(Me=function(){return{w:o,m:f}})()}function Fe(t,e,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}(Fe=function(t,e,n,a){function o(e,n){Fe(t,e,(function(t){return this._invoke(e,n,t)}))}e?r?r(t,e,{value:n,enumerable:!a,configurable:!a,writable:!a}):t[e]=n:(o("next",0),o("throw",1),o("return",2))})(t,e,n,a)}function Ge(t,e,n,a,r,o,i){try{var c=t[o](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(a,r)}function Le(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){Ge(o,a,r,i,c,"next",t)}function c(t){Ge(o,a,r,i,c,"throw",t)}i(void 0)}))}}function ze(){return(ze=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)({}).hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(null,arguments)}function Be(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Re(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Be(Object(n),!0).forEach((function(e){qe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qe(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=Ie(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=Ie(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ie(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ue(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,o,i,c=[],u=!0,s=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=o.call(n)).done)&&(c.push(a.value),c.length!==e);u=!0);}catch(t){s=!0,r=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw r}}return c}}(t,e)||Ve(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(t){return function(t){if(Array.isArray(t))return Ye(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ve(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(t,e){if(t){if("string"==typeof t)return Ye(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(t,e):void 0}}function Ye(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}var $e=function(t){var e=Object(a.useContext)(d.h),n=t.type,r=t.query,c=t.automationV2,u=r.s,s=void 0===u?"":u,l=Object(Ee.a)(),m=Object(_e.a)(),f=l.fetch,b=l.setAutomationListValues,p=m.getAutomations,O=m.getPageNumber,g=m.getPerPageCount,y=m.getTotalCount,w=m.getOffset,v=m.getLoadingStatus,h=m.getCountData,_=m.getError,E=m.getWorkerDelay,k=m.getWorkerResponseCode,x=_(),T=Object(U.a)().setAutomationData,I=Ue(Object(a.useState)({loading:!1,status:!1}),2),L=I[0],z=I[1],B=Ue(Object(a.useState)({status:!1}),2),V=B[0],Y=B[1],$=Ue(Object(a.useState)(!1),2),Q=$[0],J=$[1],W=Ue(Object(a.useState)(!1),2),K=W[0],nt=W[1],at=Ue(Object(a.useState)(!1),2),rt=at[0],ot=at[1],it=Ue(Object(a.useState)(!1),2),ct=it[0],st=it[1],lt=Ue(Object(a.useState)({}),2),mt=lt[0],ft=lt[1],bt=Ue(Object(a.useState)(!1),2),pt=bt[0],Ot=bt[1],dt=Ue(Object(a.useState)([]),2),jt=dt[0],gt=dt[1],yt=Ue(Object(a.useState)(!1),2),wt=yt[0],vt=yt[1],ht=Ue(Object(a.useState)(""),2),_t=ht[0],Et=ht[1],kt=Object(De.a)({type:4,fetch:function(t){return f($t,r,zt,Bt,c,t)}}),Pt=kt.setAssignCategoryItems,Ct=kt.renderCategoryColumn,St=kt.renderCategorySelector,At=kt.renderAssignCategoryModal,xt=kt.renderCategoryTags,Nt=kt.selectedCategories,Tt=kt.refreshCategory,Dt=kt.setShowProModal,It=kt.renderProModal,Mt=kt.renderAssignCategoryButton,Ft=function(){Oe&&Oe(),gt([])};Object(a.useEffect)((function(){Ft()}),[]);var Gt=function(t,e){switch(t){case"export":var n=[];e.map((function(t){return n.push(t.id)})),Ce(n);break;case"assign_category":if(Object(d.fc)()){var a=e.map((function(t){return t.id}));Pt(a.length>1?a:a[0])}else Dt(!0);break;default:gt(e),Et(t),vt(!0)}},Lt=p(),zt=w(),Bt=g(),Rt=v(),qt=y(),Ut=O(),Ht=h(),Vt=E(),Yt=k(),$t="all";Object(P.isEmpty)(n)||("active"===n?$t=1:"inactive"===n&&($t=2));var Qt=Object(d.Ib)(),Jt=Object(a.useRef)(new AbortController),Wt=Object(Z.a)(Object(d.Cb)()).formatAmount;Object(a.useEffect)((function(){ot(!1),f($t,r,zt,Bt,c,Nt)}),[zt,Bt,n,s,c]),Object(a.useEffect)((function(){Rt||nt(!1)}),[Rt]),Object(a.useEffect)((function(){if(!Rt&&!rt&&!Object(P.isEmpty)(Lt)||ct)try{var t={automation_ids:[],version:2,force:ct};Lt.map((function(e){t.automation_ids.push(e.id)})),D()({method:"GET",path:Object(d.C)("/automations-stats?"+Object(j.stringify)(t)),signal:Jt.current.signal}).then((function(t){200==t.code&&(ft(t.result),ot(!0),ct&&(e(Object(o.__)("Data Updated","wp-marketing-automations")),Object(d.Pb)(e,3e3),st(!1)))})).catch((function(t){console.log(t)}))}catch(t){ot(!0),st(!1),console.log(t)}}),[Lt,ct]);var Zt=Object(a.createElement)(H.a,{isPrimary:!0,onClick:function(){return Object(F.l)({path:"/automations/create"},"/",r)},className:"bwf-display-flex"},Object(o.__)("Create Automation","wp-marketing-automations")),Xt=Object(X.a)().getPageCountData,te=Object(tt.a)(),ne=te.setPageCountData,ae=te.setWorkerStatus,re=te.resetHeaderMenu,ie=Xt();Object(a.useEffect)((function(){if(!Rt){var t="";parseInt(Yt)?t="restricted":parseInt(Vt)>0&&(t="cached"),ae(t)}}),[Vt,Yt,Rt]),Object(a.useEffect)((function(){var t=0,e=0,n=0;Ht.hasOwnProperty("status_count")&&(Ht.status_count.hasOwnProperty("active")&&(e=parseInt(Ht.status_count.active)),Ht.status_count.hasOwnProperty("inactive")&&(t=parseInt(Ht.status_count.inactive))),Ht.hasOwnProperty("contact_activity")&&(n=parseInt(Ht.contact_activity)),ne(Re(Re({},ie),{"automations-v2_all":parseInt(t)+parseInt(e),"automations-v2_active":e,"automations-v2_inactive":t,"contact-activity":n}))}),[Ht]),Object(a.useEffect)((function(){return function(){b("automations",[]),b("offset",0),Jt.current.abort(),re()}}),[]),Object(G.a)("automations-v2","","",!1,Zt,0,!1,c);var se,le=Object(a.useMemo)((function(){var t={};if(Array.isArray(Lt)){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Ve(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(Lt);try{for(n.s();!(e=n.n()).done;){var a=e.value;t[a.id]=a}}catch(t){n.e(t)}finally{n.f()}}return t}),[Lt]),me=Object(ut.b)(le),fe=me.singleSelectProps,be=me.selectAllProps,pe=me.floatingBarProps,Oe=me.resetSelection,de=me.selected,je=Object.keys(de).filter((function(t){return de[t]})).length,ge=[{key:"select_template",label:Object(a.createElement)(ee.a,ze({type:"checkbox",checked:!1,onChange:function(){}},be)),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"action",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"title",label:Object(o.__)("Name","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-table-col-sticky bwf-sticky-left bwf-max-w-360"},{key:"event",label:Object(o.__)("Event","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-word-break bwf-w-210"}].concat(He(null===Mt()||d.dc?[]:[{key:"category",label:Object(o.__)("Category","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-max-w-360"}]),[{key:"contacts",label:Object(o.__)("Contact Activity","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-240"}],He(Object(d.uc)()?[{key:"revenue",label:Object(o.__)("Revenue","wp-marketing-automations"),cellClassName:"bwf-w-120"}]:[]),[{key:"status",label:Object(o.__)("Status","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-90"}]),ye=function(t){t!==Bt&&b("limit",t)},we=function(){var t=Le(Me().m((function t(n,a){var o;return Me().w((function(t){for(;;)switch(t.p=t.n){case 0:return z(Re(Re({},a),{},{status:!0})),t.p=1,t.n=2,D()({path:Object(d.C)("/automations"),method:"DELETE",data:{automation_ids:[n]}}).then((function(t){if(200!==t.code)throw Error(Object(d.w)(null==t?void 0:t.message));z({status:!1}),e(t.message),f($t,r,0,Bt,c,Nt),Tt(!0),Object(d.Pb)(e,3e3)}));case 2:t.n=4;break;case 3:t.p=3,o=t.v,z(Re(Re({},a),{},{error:o.message}));case 4:return t.a(2)}}),t,null,[[1,3]])})));return function(e,n){return t.apply(this,arguments)}}(),ve=function(){var t=Le(Me().m((function t(n){var a;return Me().w((function(t){for(;;)switch(t.p=t.n){case 0:return e(Object(o.__)("Duplicating…","wp-marketing-automations")),t.p=1,t.n=2,D()({path:Object(d.C)("/automations/".concat(n,"/duplicate?version=2")),method:"POST"}).then((function(t){if(200!==t.code)throw Error(Object(d.w)(null==t?void 0:t.message));e(Object(o.__)("Automation Duplicated","wp-marketing-automations")),f($t,r,0,Bt,c,Nt),Tt(!0),Object(d.Pb)(e,3e3)}));case 2:t.n=4;break;case 3:t.p=3,a=t.v,Object(d.Pb)(e,3e3),setTimeout((function(){z({status:!0,modalTitle:Object(o.__)("Duplicate Automation","wp-marketing-automations"),error:a.message})}),[1500]);case 4:return t.a(2)}}),t,null,[[1,3]])})));return function(e){return t.apply(this,arguments)}}(),he=function(t,e){var n="data:text/json;charset=utf-8,"+encodeURIComponent(t),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",e+".json"),document.body.appendChild(a),a.click(),a.remove()},Ce=function(){var t=Le(Me().m((function t(){var n,a,r,i,c=arguments;return Me().w((function(t){for(;;)switch(t.p=t.n){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:0,a=c.length>1&&void 0!==c[1]?c[1]:"automation",e(Object(o.__)("Exporting…","wp-marketing-automations")),r="",!Object(P.isArray)(n)&&parseInt(n)>0?r=Object(d.C)("/automations/".concat(n,"/export?version=2")):(r=Object(d.C)("/automations/export/?version=2"),Object(P.isEmpty)(n)||(r+="&ids=".concat(n.join(",")))),t.p=1,t.n=2,D()({path:r,method:"GET"}).then((function(t){if(200!==t.code)throw Error(Object(d.w)(null==t?void 0:t.message));he(t.result,a),e(Object(o.__)("Automation exported","wp-marketing-automations")),Object(P.isArray)(n)&&Ft(),Object(d.Pb)(e,3e3)}));case 2:t.n=4;break;case 3:t.p=3,i=t.v,Object(d.Pb)(e,3e3),setTimeout((function(){z({status:!0,modalTitle:Object(o.__)("Export Automation","wp-marketing-automations"),error:i.message})}),[1500]);case 4:return t.a(2)}}),t,null,[[1,3]])})));return function(){return t.apply(this,arguments)}}(),Se=function(){var t=Le(Me().m((function t(){return Me().w((function(t){for(;;)switch(t.p=t.n){case 0:return e(Object(o.__)("Exporting…","wp-marketing-automations")),t.p=1,t.n=2,D()({path:Object(d.C)("/export/action"),method:"POST",data:{type:"automation",action:"start",extra_data:{status:$t,search:s}}}).then((function(t){if(200!==t.code)throw Error(Object(d.w)(null==t?void 0:t.message));t.hasOwnProperty("result")&&t.result.hasOwnProperty("data")&&!Object(P.isEmpty)(t.result.data)&&(bwfcrm_contacts_data.export_data=t.result.data,e(Object(o.__)("Automation export has started","wp-marketing-automations"))),Object(d.Pb)(e,3e3)}));case 2:t.n=4;break;case 3:t.p=3,t.v,Object(d.Pb)(e,3e3);case 4:return t.a(2)}}),t,null,[[1,3]])})));return function(){return t.apply(this,arguments)}}(),Ae=function(){var t=Le(Me().m((function t(n,a){var r;return Me().w((function(t){for(;;)switch(t.p=t.n){case 0:return e(n?Object(o.__)("Activating Automation…","wp-marketing-automations"):Object(o.__)("Deactivating Automation…","wp-marketing-automations")),t.p=1,t.n=2,D()({path:Object(d.C)("/automations/toggle-state"),method:"POST",data:{state:n,automation_id:a}}).then((function(t){if(200!==t.code)throw Error(Object(d.w)(null==t?void 0:t.message));e(n?Object(o.__)("Automation activated","wp-marketing-automations"):Object(o.__)("Automation deactivated","wp-marketing-automations"));var r;r=Lt.map((function(t){return t.id==a&&(t.status=n?"1":"0"),t})),b("automations",r),Object(d.Pb)(e,3e3)}));case 2:t.n=4;break;case 3:t.p=3,r=t.v,Object(d.Pb)(e,3e3),setTimeout((function(){z({status:!0,modalTitle:Object(o.__)("Automation Status Update","wp-marketing-automations"),error:r.message})}),[1500]);case 4:return t.a(2)}}),t,null,[[1,3]])})));return function(e,n){return t.apply(this,arguments)}}(),xe=function(t){switch(parseInt(t.status)){case 1:return Object(a.createElement)("span",{className:"bwf-tags bwf-tag-green"},Object(o.__)("Active","wp-marketing-automations"));default:return Object(a.createElement)("span",{className:"bwf-tags bwf-tag-red"},Object(o.__)("Inactive","wp-marketing-automations"))}},Ie=function(t){return Object(a.createElement)("a",{href:"admin.php?page=autonami&path=/automation/"+t.id,onClick:function(e){e.preventDefault(),T("listData",t.hasOwnProperty("name")?t.name:""),Object(F.l)({path:"/automation/".concat(t.id)},"/",r)},className:"bwf-a-no-underline"},Object(a.createElement)("b",null,t.name))},Fe=function(t){return Object(a.createElement)(a.Fragment,null,t.event?t.event:Object(o.__)("Not Found","wp-marketing-automations"))},Ge=function(t){if(!rt||Object(P.isEmpty)(mt))return Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15",title:Object(o.__)("Loading","wp-marketing-automations")});var e=mt.hasOwnProperty(t.id)?mt[t.id]:{};return Object(a.createElement)(A.a,{gap:2,justify:"center"},Object(a.createElement)(A.c,null,Object(a.createElement)(ue.a,{toolTipText:Object(o.__)("Active","wp-marketing-automations")},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(F.l)({path:"/automation/".concat(t.id,"/contacts/active")},"/",r)},style:{display:"inline-flex"}},Object(a.createElement)(R.a,{icon:"status-scheduled",width:16,height:16}),Object(a.createElement)("span",null,e.hasOwnProperty("active")?Object(d.xc)(parseInt(e.active)):0))))),Object(a.createElement)(A.c,null,Object(a.createElement)(ue.a,{toolTipText:Object(o.__)("Paused","wp-marketing-automations")},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(F.l)({path:"/automation/".concat(t.id,"/contacts/paused")},"/",r)},style:{display:"inline-flex"}},Object(a.createElement)(R.a,{icon:"status-paused",width:16,height:16}),Object(a.createElement)("span",null,e.hasOwnProperty("paused")?Object(d.xc)(parseInt(e.paused)):0))))),Object(a.createElement)(A.c,null,Object(a.createElement)(ue.a,{toolTipText:Object(o.__)("Completed","wp-marketing-automations")},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(F.l)({path:"/automation/".concat(t.id,"/contacts/completed")},"/",r)},style:{display:"inline-flex"}},Object(a.createElement)(R.a,{icon:"status-completed",width:16,height:16}),Object(a.createElement)("span",null,e.hasOwnProperty("complete")?Object(d.xc)(parseInt(e.complete)):0))))),Object(a.createElement)(A.c,null,Object(a.createElement)(ue.a,{toolTipText:Object(o.__)("Failed","wp-marketing-automations")},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(F.l)({path:"/automation/".concat(t.id,"/contacts/failed")},"/",r)},style:{display:"inline-flex"}},Object(a.createElement)(R.a,{icon:"status-failed",width:16,height:16}),Object(a.createElement)("span",null,e.hasOwnProperty("failed")?Object(d.xc)(parseInt(e.failed)):0))))))},Be=Array.isArray(Lt)?Lt.map((function(t){return[{display:fe.hasOwnProperty(t.id)?Object(a.createElement)(ee.a,ze({type:"checkbox",checked:!1,onChange:function(){}},fe[t.id])):Object(a.createElement)(a.Fragment,null),value:null},{display:(e=t,Object(a.createElement)(C.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(S.a,null,Object(a.createElement)(ke.a,{to:"wp-admin/admin.php?page=autonami&path=/automation/"+e.id,onClick:function(t){t.preventDefault(),T("listData",e.hasOwnProperty("name")?e.name:""),Object(F.l)({path:"/automation/".concat(e.id)},"/",r)},className:"bwf-a-no-underline"},Object(a.createElement)(A.a,{justify:"flex-start"},Object(a.createElement)(A.c,null,Object(o.__)("Edit","wp-marketing-automations"))))),Object(a.createElement)(S.a,{isClickable:!0,onInvoke:function(){Ae(1!==parseInt(e.status),e.id),n()}},Object(a.createElement)(A.a,{justify:"flex-start"},Object(a.createElement)(A.c,null,1===parseInt(e.status)?Object(o.__)("Deactivate","wp-marketing-automations"):Object(o.__)("Activate","wp-marketing-automations")))),Object(a.createElement)(S.a,{isClickable:!0,onInvoke:function(){Object(d.fc)()?ve(e.id):Y({status:!0,featureTitle:Object(o.__)("Duplicate Automation","wp-marketing-automations"),isFeature:!0,proLink:Object(d.ib)("upgrade",{utm_medium:"Dupicate+Automation+Upgrade+Modal"})}),n()}},Object(a.createElement)(A.a,{justify:"space-between"},Object(a.createElement)(A.c,null,Object(o.__)("Duplicate","wp-marketing-automations")),!Object(d.fc)()&&Object(a.createElement)(A.c,null,d.e))),Mt({children:Object(a.createElement)(S.a,{isClickable:!0,onInvoke:function(){Object(d.fc)()?Pt(e.id):Dt(!0),n()}},Object(a.createElement)(A.a,{justify:"space-between"},Object(a.createElement)(A.c,null,Object(o.__)("Assign Category","wp-marketing-automations")),!Object(d.fc)()&&Object(a.createElement)(A.c,null,d.e)))}),Object(a.createElement)(S.a,{isClickable:!0,onInvoke:function(){Object(d.fc)()?Ce(e.id,e.name):Y({status:!0,featureTitle:Object(o.__)("Export Automation","wp-marketing-automations"),isFeature:!0,proLink:Object(d.ib)("upgrade",{utm_medium:"Export+Automation+Upgrade+Modal"})}),n()}},Object(a.createElement)(A.a,{justify:"space-between"},Object(a.createElement)(A.c,null,Object(o.__)("Export","wp-marketing-automations")),!Object(d.fc)()&&Object(a.createElement)(A.c,null,d.e))),Object(a.createElement)(S.a,{isClickable:!0,onInvoke:function(){var t={status:!0,modalTitle:Object(o.__)("Delete Automation"),deleteEntityName:e.name,isDelete:!0,buttonConfirm:Object(o.__)("Delete","wp-marketing-automations"),buttonCancel:Object(o.__)("Cancel","wp-marketing-automations")};z(Re(Re({},t),{},{onConfirm:function(){return we(e.id,t)}})),n()}},Object(a.createElement)(A.a,{justify:"flex-start"},Object(a.createElement)(A.c,null,Object(o.__)("Delete","wp-marketing-automations")))))}})),value:""},{display:Ie(t),value:t.name},{display:Fe(t),value:t.event}].concat(He(null===Mt()||d.dc?[]:[{display:Ct(t.category||[]),value:""}]),[{display:Ge(t),value:""}],He(Object(d.uc)()?[{display:t.revenue&&parseFloat(t.revenue)>0?Object(a.createElement)("span",{className:"bwf-tags bwf-tag-revenue"},Wt(t.revenue)):"-",value:""}]:[]),[{display:xe(t),value:""}]);var e})):[],qe=M()("bwfcrm-campaign-list-table",{"has-search":!0}),Ye=[{type:"heading",data:{title:Object(o.__)("Explore easy automation to simply task","wp-marketing-automations"),desc:Object(o.__)("Initiate your automation journey for smoother workflows – Create your first automation for streamlined success","wp-marketing-automations")}},{type:"image-desc",data:[{img:Object(d.u)()+"automation/automation1.png",title:Object(o.__)("Pre-built recipes to get you quick started","wp-marketing-automations"),desc:Object(o.__)("Save time by importing and editing our ever-growing library of practical automation recipes to fit your needs","wp-marketing-automations")},{img:Object(d.u)()+"automation/automation2.png",title:Object(o.__)("Create any automation that you can imagine","wp-marketing-automations"),desc:Object(o.__)("Create personalized journeys with conditional branching, delays, and split paths","wp-marketing-automations")}]},{type:"buttons",data:{buttons:[{text:Object(o.__)("Create Automation","wp-marketing-automations"),onClick:function(){Object(F.l)({path:"/automations/create"},"/",r)}},{text:Object(o.__)("Import Automation","wp-marketing-automations"),isSecondary:!0,onClick:function(){Ot(!0)}}]}}],$e=Object(a.createElement)("div",{className:"bwf-display-flex bwf-flex-wrap bwf-flex-start gap-8"},Object(d.fc)()&&Qt.hasOwnProperty("automation")&&Object(a.createElement)(Pe.a,{type:"automation",localData:Qt.automation,onDismiss:function(){return J(!0)}}),Object(a.createElement)(H.a,{className:"bwf-btn-small is-light",isGray:!0,title:Object(o.__)("Refresh Stats","wp-marketing-automations"),onClick:function(){return ot(!1),void st(!0)},disabled:!rt,isBusy:!rt&&ct},Object(a.createElement)(R.a,{icon:"retry",size:14}),Object(a.createElement)("span",{className:"bwf-ml-4"},Object(o.__)("Refresh","wp-marketing-automations"))),Object(a.createElement)(H.a,{className:"bwf-btn-small is-light",title:Object(o.__)("Export All","wp-marketing-automations"),onClick:function(){Object(d.fc)()?Se():Y({status:!0,featureTitle:Object(o.__)("Export Automations","wp-marketing-automations"),isFeature:!0,proLink:Object(d.ib)("upgrade",{utm_medium:"Export+Automation+Upgrade+Modal"})})},disabled:Qt.hasOwnProperty("automation")&&!Q},Object(d.fc)()?Object(a.createElement)(R.a,{icon:"export",size:14}):Object(a.createElement)(R.a,{icon:"king",size:16}),Object(a.createElement)("span",{className:"bwf-ml-4"},Object(o.__)("Export All","wp-marketing-automations"))),Object(a.createElement)(H.a,{className:"bwf-btn-small is-light",title:Object(o.__)("Import","wp-marketing-automations"),onClick:function(){return Ot(!0)}},Object(a.createElement)(R.a,{icon:"import",size:14}),Object(a.createElement)("span",{className:"bwf-ml-4"},Object(o.__)("Import","wp-marketing-automations")))),Qe=Rt||x||!["","all"].includes(n)||0!==qt||""!==s||K||!Object(P.isEmpty)(Nt),Je=[{slug:"automations-v2_all",name:Object(o.__)("All","wp-marketing-automations"),path:"/automations/"},{slug:"automations-v2_active",name:Object(o.__)("Active","wp-marketing-automations"),path:"/automations/active"},{slug:"automations-v2_inactive",name:Object(o.__)("Inactive","wp-marketing-automations"),path:"/automations/inactive"}];return Object(a.createElement)(a.Fragment,null,Object(d.ab)()&&Qe?Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-content-header-new"},Object(a.createElement)("div",{className:"bwf-content-header-left"},Object(a.createElement)("div",{className:"bwf-content-header-title"},Object(o.__)("Automations","wp-marketing-automations")),parseInt(qt)>0&&Object(a.createElement)("div",{className:"bwf-content-header-count"},Object(o.sprintf)(Object(o.__)("(%s Results)","wp-marketing-automations"),qt))),Object(a.createElement)("div",{className:"bwf-content-header-right"},Object(a.createElement)(H.a,{isPrimary:!0,onClick:function(){return Object(F.l)({page:"autonami",path:"/automations/create"},"/",{})}},Object(o.__)("Create Automation","wp-marketing-automations")))),Object(a.createElement)(ce.a,{tabs:Je,selected:n?"automations-v2_".concat(n):"automations-v2_all",count:ie,disableUrlUpdate:!0,onChange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b("offset",0),nt(!0),Object(F.l)({page:"autonami",path:e},"/",{})}}),Object(a.createElement)("div",{className:"bwf_clear_16"}),x&&Object(a.createElement)(q.a,{status:"error"},x.message),Object(a.createElement)(i.a,{className:qe,rows:Be,headers:ge,query:{paged:Ut},rowsPerPage:Bt,totalRows:qt,isLoading:Rt,onPageChange:function(t,e){b("offset",(t-1)*Bt)},onQueryChange:function(t){return"per_page"!==t?function(){}:ye},rowHeader:!0,showMenu:!1,actions:je>0?[Object(a.createElement)(ut.a,ze({key:"automation-bulk-action",actions:(se=null!==Mt(),[].concat(He(se?[{id:"assign_category",icon:"add-circle",isPro:!0,hint:Object(o.__)("Assign Category","wp-marketing-automations")}]:[]),[{id:"export",icon:"export",hint:Object(o.__)("Export","wp-marketing-automations"),isPro:!0,proLink:Object(d.ib)("upgrade",{utm_medium:"Automation+Bulk+Action+Export+Upgrade+Modal"}),featureTitle:Object(o.__)("Export Automations","wp-marketing-automations")},{id:"delete",icon:"delete",hint:Object(o.__)("Delete","wp-marketing-automations")}])),onAction:Gt,inLine:!0,reset:Ft},pe))]:[Object(a.createElement)("div",{key:"table-actions",className:"bwf-w-100p bwf-display-flex-column gap-16"},Object(a.createElement)("div",{className:"bwf-w-100p bwf-display-flex bwf-flex-wrap bwf-space-between"},Object(a.createElement)("div",{className:"bwf-display-flex"},Object(a.createElement)(oe.a,{isLoading:Rt,searchTerm:null==r?void 0:r.s,showResultCount:!1,setSearchData:function(t){if(Object(P.size)(t))Object(F.l)({s:t},"/",r);else{var e=Object(P.cloneDeep)(r);e.hasOwnProperty("s")&&(null==e||delete e.s),nt(!0),Object(F.l)(e,"/",{})}}}),St({disabled:Rt})),$e),xt())],emptyMessage:Object(o.__)("No automations found","wp-marketing-automations")}),Object(a.createElement)(N.a,{modalTitle:L.modalTitle,deleteEntityName:L.deleteEntityName,confirmText:L.confirmText,confirmButtonText:L.buttonConfirm,cancelButtonText:L.buttonCancel,onConfirm:L.onConfirm,isLoading:L.loading,successMessage:L.success,errorMessage:L.error,content:L.content,confirmDescription:L.hasOwnProperty("confirmDescription")?L.confirmDescription:"",onRequestClose:function(){return z({status:!1})},isOpen:L.status,isDelete:L.isDelete}),Object(a.createElement)(Ne,{tasks:jt,isOpen:wt,onSuccess:function(){f($t,r,zt,Bt,c,Nt),Tt(!0),Ft()},onError:Ft,onRequestClose:function(){return vt(!1)},screenType:"automations",actionType:_t})):Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-content-header-new"},Object(a.createElement)("div",{className:"bwf-content-header-left"},Object(a.createElement)("div",{className:"bwf-content-header-title"},Object(o.__)("Automations","wp-marketing-automations")))),Object(a.createElement)(et.a,{data:Ye})),pt&&Object(a.createElement)(Kt,{onRequestClose:function(){return Ot(!1)},isV2:!0}),!Object(d.fc)()&&Object(a.createElement)(Te.b,{isOpen:V.status,onRequestClose:function(){return Y({status:!1})},modalContent:V}),At({items:Lt}),It({proLink:Object(d.ib)("upgrade",{utm_medium:"Automation+Categories+Upgrade+Modal"})}))};n(1224),e.default=function(t){var e=t.match.params.type,n=void 0===e?"all":e,o=t.automationV2,i=void 0!==o&&o,c=Object(F.i)();return Object(d.m)("Automations"),Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.a,null),Object(a.createElement)("div",{className:"bwfcrm-automations-list"},i?Object(a.createElement)($e,{query:c,type:n,automationV2:i}):Object(a.createElement)(he,{query:c,type:n,automationV2:i})))}}}]);