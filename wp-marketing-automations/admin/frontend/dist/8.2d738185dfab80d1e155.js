(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1063:function(t,e,n){"use strict";var r=n(74),a=n(0),c=n(1),o=n(3),i=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={workflow:{name:Object(c.__)("Workflow","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t):"admin.php?page=autonami-automations&edit=".concat(t),redirect:!e}};return e&&(n.single_a_contacts={name:Object(c.__)("Contacts","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(t,"/contacts"),showOnClick:!0},n.analytics={name:Object(c.__)("Analytics","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/analytics"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/analytics"),isPro:!0,showOnClick:!0}),n.engagement={name:Object(c.__)("Engagements","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/engagements"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/engagements"),isPro:!0,showOnClick:!0},Object(o.pc)()&&(n.orders={name:Object(c.__)("Orders","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/orders"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/orders"),isPro:!0,showOnClick:!0}),n};e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],f=arguments.length>7&&void 0!==arguments[7]&&arguments[7],m=arguments.length>8&&void 0!==arguments[8]&&arguments[8],b=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},p=(b.automation_nav,b.automationv2_nav),d=Object(r.a)(),v=d.setActiveMultiple,g=d.resetHeaderMenu,O=d.setL2NavType,y=d.setL2Nav,j=d.setBackLink,h=d.setL2Title,w=d.setL2Content,E=d.setBackLinkLabel,_=d.setL2NavAlign,N=d.setPageHeader,k=d.setTabHeader;return Object(a.useEffect)((function(){g(!0),!o&&O("menu");var r=i(u,f);m||y(u?r:p),t&&r.hasOwnProperty(t)&&r[t].hasOwnProperty("name")&&k(r[t].name),v({leftNav:"automations-v2",rightNav:t}),n&&j(n),u&&j(n&&!f?"admin.php?page=autonami&path=/automations-v1":"admin.php?page=autonami&path=/automations"),o||f&&u&&E(Object(c.__)("All Automations","wp-marketing-automations")),!f&&u&&E(Object(c.__)("All Automations","wp-marketing-automations")),u&&_("left"),e&&""!==e&&h(e),!n&&s&&w(s),N(Object(c.__)("Automations","wp-marketing-automations")),l&&y({})}),[t,f,m]),!0}},1064:function(t,e){t.exports=function(t,e,n,r){for(var a=t.length,c=n+(r?1:-1);r?c--:++c<a;)if(e(t[c],c,t))return c;return-1}},1067:function(t,e){t.exports=function(t){return t!=t}},1068:function(t,e){t.exports=function(t,e,n){for(var r=n-1,a=t.length;++r<a;)if(t[r]===e)return r;return-1}},1070:function(t,e,n){"use strict";var r=n(50),a=n(146);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=["getStateProp"];function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=function(){var t=Object(r.a)("automationList"),e=t.getStateProp,n=function(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)n=c[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}(t,o),c=Object(r.a)(a.a.recipient).getStateProp,i=Object(r.a)(a.a.conversion).getStateProp,u=Object(r.a)(a.a.contacts).getStateProp,l=Object(r.a)(a.a.analytics).getStateProp;return s(s({},n),{},{getAutomations:function(){return e("automations")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getLoadingStatus:function(){return e("isLoading")},getWorkerResponseCode:function(){return e("response_code")},getWorkerDelay:function(){return e("worker_delayed")},getRecipientData:function(){return c("data")},getRecipientLoading:function(){return c("isLoading")},getRecipientOffset:function(){return c("offset")},getRecipientAutomationId:function(){return c("automationId")},getRecipientTotal:function(){return c("total")},getRecipientAutomation:function(){return c("automation")},getRecipientPage:function(){return parseInt(c("offset"))/parseInt(c("limit"))+1},getRecipientLimit:function(){return c("limit")},getRecipientSingleAutomationFailedCount:function(){return c("failedCount")},getConversionData:function(){return i("data")},getConversionLoading:function(){return i("isLoading")},getConversionOffset:function(){return i("offset")},getConversionAutomationId:function(){return i("automationId")},getConversionTotal:function(){return i("total")},getConversionAutomation:function(){return i("automation")},getConversionPage:function(){return parseInt(i("offset"))/parseInt(i("limit"))+1},getConversionLimit:function(){return i("limit")},getCountData:function(){return e("countData")},getConversionSingleAutomationFailedCount:function(){return i("failedCount")},getContactData:function(){return u("data")},getContactLoading:function(){return u("isLoading")},getContactOffset:function(){return u("offset")},getContactAutomationId:function(){return u("automationId")},getContactTotal:function(){return u("total")},getContactAutomation:function(){return u("automation")},getContactPage:function(){return parseInt(u("offset"))/parseInt(u("limit"))+1},getContactLimit:function(){return u("limit")},getContactCountData:function(){return u("contactCount")},getContactSingleAutomationFailedCount:function(){return u("failedCount")},getAnalyticsData:function(){return l("analytics")},getAnalyticsTileData:function(){return l("tiles")},getAnalyticsTableData:function(){return l("tableData")},getAnalyticsLoading:function(){return l("isLoading")},getAnalyticsType:function(){return l("type")},getAnalyticsAutomationData:function(){return l("automation")},getAnalyticsSingleAutomationFailedCount:function(){return l("failedCount")}})}},1078:function(t,e,n){var r=n(1064),a=n(1067),c=n(1068);t.exports=function(t,e,n){return e==e?c(t,e,n):r(t,a,n)}},1085:function(t,e){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return n.test(t)}},1089:function(t,e,n){"use strict";var r=n(49),a=n(3),c=n(146),o=n(19);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=["fetch","setStateProp"],u=["s","page","filter","path"];function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)n=c[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}e.a=function(){var t=Object(r.a)("automationList"),e=t.fetch,n=t.setStateProp,i=b(t,s),l=Object(r.a)(c.a.recipient),m=l.fetch,p=l.setStateProp,d=Object(r.a)(c.a.conversion),v=d.fetch,g=d.setStateProp,O=Object(r.a)(c.a.contacts),y=O.fetch,j=O.setStateProp,h=Object(r.a)(c.a.analytics),w=h.fetch,E=h.setStateProp;return f(f({},i),{},{fetch:function(t,r,c,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n("automation",{});var s=r.s,l=void 0===s?"":s,f=(r.page,r.filter,r.path,b(r,u)),m={offset:c,limit:o,status:t,search:l,filters:f,version:i?2:1};e("GET",Object(a.A)("/automations"),m)},setAutomationListValues:function(t,e){n(t,e)},fetchRecipient:function(t,e,n){m("GET",Object(a.A)("/v3/automation/".concat(t,"/recipients?limit=").concat(e,"&offset=").concat(n)))},setRecipientsValues:function(t,e){p(t,e)},fetchConversion:function(t,e,n){g("automation",{}),v("GET",Object(a.A)("/v3/automation/".concat(t,"/conversions?limit=").concat(e,"&offset=").concat(n)))},setConversionValues:function(t,e){g(t,e)},fetchContacts:function(t,e,n,r){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";j("automation",{}),y("GET",Object(a.A)("/automation/".concat(t,"/contacts?limit=").concat(e,"&offset=").concat(n,"&type=").concat(r,"&search=").concat(c)))},setContactValues:function(t,e){j(t,e)},fetchAnalytics:function(t,e,n,r){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=0;4===parseInt(i)&&(s=1),w("GET",Object(a.A)("/analytics/emails/chart/")+"?"+Object(o.stringify)({after:e,before:n,interval:r,oid:t,type:c,mode:i,contact:s}))},setAnalyticsValues:function(t,e){E(t,e)}})}},1121:function(t,e,n){var r=n(557),a=n(560),c=n(1144),o=n(1146),i=n(1147),s=n(1148),u=n(549);t.exports=function(t,e,n){if((t=u(t))&&(n||void 0===e))return a(t);if(!t||!(e=r(e)))return t;var l=s(t),f=s(e),m=i(l,f),b=o(l,f)+1;return c(l,m,b).join("")}},1144:function(t,e,n){var r=n(1145);t.exports=function(t,e,n){var a=t.length;return n=void 0===n?a:n,!e&&n>=a?t:r(t,e,n)}},1145:function(t,e){t.exports=function(t,e,n){var r=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(n=n>a?a:n)<0&&(n+=a),a=e>n?0:n-e>>>0,e>>>=0;for(var c=Array(a);++r<a;)c[r]=t[r+e];return c}},1146:function(t,e,n){var r=n(1078);t.exports=function(t,e){for(var n=t.length;n--&&r(e,t[n],0)>-1;);return n}},1147:function(t,e,n){var r=n(1078);t.exports=function(t,e){for(var n=-1,a=t.length;++n<a&&r(e,t[n],0)>-1;);return n}},1148:function(t,e,n){var r=n(1149),a=n(1085),c=n(1150);t.exports=function(t){return a(t)?c(t):r(t)}},1149:function(t,e){t.exports=function(t){return t.split("")}},1150:function(t,e){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",c="[^\\ud800-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+r+"|"+a+")"+"?",u="[\\ufe0e\\ufe0f]?"+s+("(?:\\u200d(?:"+[c,o,i].join("|")+")[\\ufe0e\\ufe0f]?"+s+")*"),l="(?:"+[c+r+"?",r,o,i,n].join("|")+")",f=RegExp(a+"(?="+a+")|"+l+u,"g");t.exports=function(t){return t.match(f)||[]}},1379:function(t,e,n){},1380:function(t,e,n){},1439:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(1),c=n(142),o=n(356),i=function(){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("section",{className:"bwf-crm-card"},Object(r.createElement)("div",{className:"bwf-crm-card-l"},Object(r.createElement)("div",{className:"bwf-crm-card-title"},Object(r.createElement)("span",{className:"bwf-crm-status is-preview"})," ",Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("div",{className:"bwf-crm-card-subtitle"},Object(r.createElement)("span",{className:"is-placeholder long"})))),Object(r.createElement)("section",{className:"bwf-crm-card"},Object(r.createElement)("div",{className:"bwf-crm-card-l"},Object(r.createElement)("div",{className:"bwf-crm-card-title"},Object(r.createElement)("span",{className:"bwf-crm-status is-preview"})," ",Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("div",{className:"bwf-crm-card-subtitle"},Object(r.createElement)("span",{className:"is-placeholder long"})))))},s=n(3),u=n(5),l=n(46),f=n(10),m=n.n(f),b=n(2);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(){d=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},c="function"==typeof Symbol?Symbol:{},o=c.iterator||"@@iterator",i=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var c=e&&e.prototype instanceof O?e:O,o=Object.create(c.prototype),i=new L(r||[]);return a(o,"_invoke",{value:S(t,n,i)}),o}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var m="suspendedStart",b="executing",v="completed",g={};function O(){}function y(){}function j(){}var h={};u(h,o,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(I([])));E&&E!==n&&r.call(E,o)&&(h=E);var _=j.prototype=O.prototype=Object.create(h);function N(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(a,c,o,i){var s=f(t[a],t,c);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==p(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,o,i)}),(function(t){n("throw",t,o,i)})):e.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,i)}))}i(s.arg)}var c;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return c=c?c.then(a,a):a()}})}function S(e,n,r){var a=m;return function(c,o){if(a===b)throw Error("Generator is already running");if(a===v){if("throw"===c)throw o;return{value:t,done:!0}}for(r.method=c,r.arg=o;;){var i=r.delegate;if(i){var s=P(i,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=b;var u=f(e,n,r);if("normal"===u.type){if(a=r.done?v:"suspendedYield",u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=v,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var c=f(a,e.iterator,n.arg);if("throw"===c.type)return n.method="throw",n.arg=c.arg,n.delegate=null,g;var o=c.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,c=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return c.next=c}}throw new TypeError(p(e)+" is not iterable")}return y.prototype=j,a(_,"constructor",{value:j,configurable:!0}),a(j,"constructor",{value:y,configurable:!0}),y.displayName=u(j,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,j):(t.__proto__=j,u(t,s,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},N(k.prototype),u(k.prototype,i,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,a,c){void 0===c&&(c=Promise);var o=new k(l(t,n,r,a),c);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},N(_),u(_,s,"Generator"),u(_,o,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return i.type="throw",i.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var c=this.tryEntries.length-1;c>=0;--c){var o=this.tryEntries[c],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var c=a;break}}c&&("break"===t||"continue"===t)&&c.tryLoc<=e&&e<=c.finallyLoc&&(c=null);var o=c?c.completion:{};return o.type=t,o.arg=e,c?(this.method="next",this.next=c.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;A(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function v(t,e,n,r,a,c,o){try{var i=t[c](o),s=i.value}catch(t){return void n(t)}i.done?e(s):Promise.resolve(s).then(r,a)}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,c,o,i=[],s=!0,u=!1;try{if(c=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=c.call(n)).done)&&(i.push(r.value),i.length!==e);s=!0);}catch(t){u=!0,a=t}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return O(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var y=function(t){var e=t.contact,n=t.automationId,c=g(Object(r.useState)(!0),2),o=c[0],u=c[1],f=g(Object(r.useState)([]),2),p=f[0],O=f[1],y=function(){var t,r=(t=d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m()({method:"GET",path:Object(s.A)("/v3/automation/".concat(n,"/recipients/").concat(e.cid,"/timeline?mode=").concat(e.mode))}).then((function(t){200===t.code&&t.hasOwnProperty("result")&&!Object(b.isEmpty)(t.result)?O(t.result):O([]),u(!1)}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),u(!1);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var c=t.apply(e,n);function o(t){v(c,r,a,o,i,"next",t)}function i(t){v(c,r,a,o,i,"throw",t)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();Object(r.useEffect)((function(){u(!0),Object(b.isEmpty)(e.cid)||y()}),[e]);return o?Object(r.createElement)(i,null):Object(r.createElement)(r.Fragment,null,Object(b.isEmpty)(p)?Object(r.createElement)("p",null,Object(a.__)("No timeline found","wp-marketing-automations")):p.map((function(t,e){var n="";switch(t.type){case"conversion":n=function(t){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-card-l"},Object(r.createElement)("div",{className:"bwf-crm-card-title"},Object(r.createElement)("span",{className:"bwf-crm-status bwf-crm-status-success"}),Object(r.createElement)("span",null,Object(a.__)("Conversion Recorded","wp-marketing-automations"),Object(r.createElement)("a",{href:"post.php?post="+t.order_id+"&action=edit",className:"bwf-a-no-underline"}," (#".concat(t.order_id,")")))),Object(r.createElement)("div",{className:"bwf-crm-card-subtitle",title:Object(s.hb)(t.date,!0)},Object(s.ob)(t.date).fromNow())),Object(r.createElement)("div",{className:"bwf-crm-card-r"},parseFloat(t.revenue)>0&&Object(r.createElement)("span",{className:"bwf-tags bwf-tag-revenue"},Object(l.a)(t.hasOwnProperty("currency")&&!Object(b.isEmpty)(t.currency)?t.currency:Object(s.yb)()).formatAmount(parseFloat(t.revenue)))))}(t);break;case"open":n=function(t){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-card-l"},Object(r.createElement)("div",{className:"bwf-crm-card-title"},Object(r.createElement)("span",{className:"bwf-crm-status bwf-crm-status-success"}),Object(r.createElement)("span",null,Object(a.__)("Email Opened","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-card-subtitle",title:Object(s.hb)(t.date,!0)},Object(s.ob)(t.date).fromNow())))}(t);break;case"click":n=function(t){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-card-l"},Object(r.createElement)("div",{className:"bwf-crm-card-title"},Object(r.createElement)("span",{className:"bwf-crm-status bwf-crm-status-success"}),Object(r.createElement)("span",null,1===parseInt(t.mode)?Object(a.__)("Email Clicked","wp-marketing-automations"):Object(a.__)("SMS Clicked","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-card-subtitle",title:Object(s.hb)(t.date,!0)},Object(s.ob)(t.date).fromNow())))}(t);break;case"sent":n=function(t){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-card-l"},Object(r.createElement)("div",{className:"bwf-crm-card-title"},Object(r.createElement)("span",{className:"bwf-crm-status bwf-crm-status-success"}),Object(r.createElement)("span",null,1===parseInt(t.mode)?Object(a.__)("Email Sent","wp-marketing-automations"):Object(a.__)("SMS Sent","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-card-subtitle",title:Object(s.hb)(t.date,!0)},Object(s.ob)(t.date).fromNow())))}(t);break;case"failed":n=function(t){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-card-l"},Object(r.createElement)("div",{className:"bwf-crm-card-title"},Object(r.createElement)("span",{className:"bwf-crm-status bwf-crm-status-failed"}),Object(r.createElement)("span",null,1===parseInt(t.mode)?Object(a.__)("Sent Failed","wp-marketing-automations"):Object(a.__)("SMS Sent Failed","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-card-subtitle",title:Object(s.hb)(t.date,!0)},Object(s.ob)(t.date).fromNow())))}(t)}return Object(r.createElement)("section",{className:"bwf-crm-card",key:e},n)})))},j=(n(1379),n(164)),h=n(1121),w=n.n(h),E=n(12),_=(n(28),Object(l.a)(Object(s.yb)()).formatAmount),N=function(t){var e=t.isOpen,n=t.automationId,c=t.onRequestClose,i=t.contact;return e?Object(r.createElement)(o.a,{size:400,isOpen:e,onRequestClose:c},e?Object(r.createElement)("div",{className:"bwf-crm-body"},Object(r.createElement)("div",{className:"bwf-crm-details"},Object(r.createElement)("div",{className:"bwf-crm-d-head bwf-crm-gap-border"},Object(r.createElement)("div",{className:"bwf-gravatar-wrapper"},i.send_to&&Object(r.createElement)(j.a,{user:i.send_to,size:60}),Object(r.createElement)("div",{className:"bwf-crm-gravatar"},Object(r.createElement)("span",null,Object(b.isEmpty)(w()(i.f_name+" "+i.l_name))?"-":Object(s.pb)(i.f_name,i.l_name)))),Object(r.createElement)("div",{className:"bwf-crm-name"},i&&i.f_name&&i.l_name&&i.f_name.charAt(0).toUpperCase()+i.f_name.slice(1)+" "+(i.l_name.charAt(0).toUpperCase()+i.l_name.slice(1))),Object(r.createElement)("div",{className:"bwf-crm-email"},i.send_to),Object(r.createElement)("div",{className:"bwf-display-flex bwf-pt-15"},Object(r.createElement)(u.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray is-light",onClick:function(){Object(E.k)({page:"autonami",path:"/contact/".concat(i.cid)},"/",{})}},Object(a.__)("View Contact","wp-marketing-automations")))),Object(r.createElement)("div",{className:"bwf-crm-d-data bwf-crm-gap-border"},Object(r.createElement)("div",{className:"bwf-crm-head"},Object(a.__)("Details","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-crm-col2",key:1},i.is_unsubscribe&&!Object(b.isEmpty)(i.unsubscribe)&&Object(r.createElement)("div",{className:"bwf-crm-list",key:11},Object(r.createElement)("div",{className:"bwf-crm-label"},Object(a.__)("Unsubscribe","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-crm-value"},Object(s.gb)(i.unsubscribe)))),Object(r.createElement)("div",{className:"bwf-crm-col2",key:2},Object(r.createElement)("div",{className:"bwf-crm-list",key:22},Object(r.createElement)("div",{className:"bwf-crm-label"},Object(a.__)("Total Click","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-crm-value"},parseInt(i.click)>0?parseInt(i.click):0)),Object(r.createElement)("div",{className:"bwf-crm-list",key:23},Object(r.createElement)("div",{className:"bwf-crm-label"},Object(a.__)("Total Open","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-crm-value"},parseInt(i.open)>0?parseInt(i.open):0))),Object(r.createElement)("div",{className:"bwf-crm-col2",key:3},Object(r.createElement)("div",{className:"bwf-crm-list",key:31},Object(r.createElement)("div",{className:"bwf-crm-label"},Object(a.__)("Is Converted","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-crm-value"},parseInt(i.conversions)>0?Object(a.__)("Yes","wp-marketing-automations"):Object(a.__)("No","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-list",key:32},Object(r.createElement)("div",{className:"bwf-crm-label"},Object(a.__)("Total Revenue","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-crm-value"},parseInt(i.revenue)?_(parseInt(i.revenue)):"-"))))),Object(r.createElement)("div",{className:"bwf-crm-timeline"},Object(r.createElement)("div",{className:"bwf-crm-head"},Object(a.__)("Timeline","wp-marketing-automations")),Object(r.createElement)(y,{key:n,contact:i,automationId:n}))):Object(r.createElement)(r.Fragment,null)):Object(r.createElement)(o.a,{size:0,isOpen:e,onRequestClose:c})},k=n(331),S=n(18),P=n(32),C=n(1089),A=n(1070),L=n(143),I=n(329),x=(n(1380),n(69)),T=n(1063),R=n(74),D=n(105),F=n(6),G=n.n(F);function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){H(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function H(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=M(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==M(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,c,o,i=[],s=!0,u=!1;try{if(c=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=c.call(n)).done)&&(i.push(r.value),i.length!==e);s=!0);}catch(t){u=!0,a=t}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return z(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}e.default=function(t){var e=t.match.params.automationId,n=t.isV2,o=void 0===n||n;Object(s.m)("Automation #"+e);var i=U(Object(r.useState)(!1),2),u=i[0],f=i[1],m=U(Object(r.useState)({}),2),p=m[0],d=m[1],v=Object(A.a)(),g=v.getRecipientData(),O=v.getRecipientLoading(),y=v.getRecipientLimit(),j=v.getRecipientOffset(),h=v.getRecipientTotal(),w=v.getRecipientSingleAutomationFailedCount(),E=Object(C.a)(),_=E.fetchRecipient,F=E.setRecipientsValues;Object(r.useEffect)((function(){_(e,y,j)}),[y,j]);var M=v.getRecipientAutomation(),V=(M.v,M.title),H=void 0===V?"":V,z=Object(I.a)().setAutomationData;Object(r.useEffect)((function(){Object(b.isEmpty)(M)||z("data",M)}),[M]),Object(r.useEffect)((function(){return function(){F("automation",{})}}),[]);var B=Object(R.a)(),W=B.setL2NavAlign,Y=B.setL2Title,J=B.setPageCountData,$=(0,Object(D.a)().getPageCountData)(),Q=Object(L.a)(),K=Q.getAutomationData,X=Q.getAutomationId,Z=K().title,tt=void 0===Z?"":Z,et=X();Object(T.a)("engagement","",!0,!1,null,e,!1,o),Object(r.useEffect)((function(){O||J(q(q({},$),{},{single_a_contacts:w}))}),[w]),Object(r.useEffect)((function(){Y(parseInt(e)===parseInt(et)&&""!==tt&&""===H?tt:""!==H?H:Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}))}),[tt,H,e]),Object(r.useEffect)((function(){W("left"),Object(s.m)("Automation #"+e)}),[]);var nt=Object(l.a)(Object(s.yb)()).formatAmount,rt=G()("bwf-crm-campaign-report-recipients"),at=[{key:"contact",label:Object(a.__)("Contact","wp-marketing-automations"),required:!0,cellClassName:"bwf-crm-col-contact bwf-w-210"},{key:"contact_details",label:Object(a.__)("Details","wp-marketing-automations"),cellClassName:"bwf-crm-col-contact-details"},{key:"sent",label:Object(a.__)("Sent","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-t-center bwf-w-90"},{key:"open",label:Object(a.__)("Open","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-t-center bwf-w-90"},{key:"click",label:Object(a.__)("Click","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-t-center bwf-w-90"},{key:"unsubscribe",label:Object(a.__)("Unsubscribe","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-t-center bwf-w-90"},Object(s.pc)()?{key:"converted",label:Object(a.__)("Converted","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-t-center bwf-w-90"}:{},Object(s.pc)()?{key:"revenue",label:Object(a.__)("Revenue","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-w-90"}:{}],ct=v.getRecipientPage(),ot=function(t){t!==y&&(F("limit",t),F("offset",0))},it=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="";switch(t){case"null":case null:n="";break;case!0:case"yes":n=e?" bwf-crm-status-failed":" bwf-crm-status-success";break;case!1:case"no":n=e?" bwf-crm-status-success":""}return Object(r.createElement)("div",{className:"bwf-crm-status bwf-crm-status-s"+n})},st=function(t){var e=t;return e.email=t.send_to,Object(r.createElement)("div",{onClick:function(){return function(t){d(t),f(!0)}(t)}},Object(r.createElement)(k.a,{contact:e,dateText:Object(a.__)("Sent","wp-marketing-automations"),date:t.sent_time}))},ut=function(t){return Object(r.createElement)("div",{className:"bwf-crm-contact-details-cell"},t.send_to&&Object(r.createElement)(S.a,{justify:"start"},Object(r.createElement)(S.c,null,0!==t.cid?Object(r.createElement)(P.a,{className:"bwf-a-no-underline",href:"mailto:"+t.send_to,type:"external"},t.send_to):t.send_to)))};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>#bwfcrm-page{ overflow: auto !important; }</style>"}}),Object(r.createElement)(x.a,null),Object(r.createElement)("div",{className:"bwf-single-automation-body-header bwf-conversion-recipient"},Object(r.createElement)("div",{className:"bwf-content-header-left"},Object(r.createElement)("div",{className:"bwf-content-header-title2"},Object(a.__)("Engagements","wp-marketing-automations")),parseInt(h)>0&&Object(r.createElement)("div",{className:"bwf-content-header-count"},Object(a.sprintf)(Object(a.__)("(%s Results)","wp-marketing-automations"),h)))),Object(r.createElement)("div",{className:"bwf-position-relative"},Object(r.createElement)(c.a,{className:rt,rows:g.map((function(t){return[{display:st(t),value:t.f_name+" "+t.l_name},{display:ut(t),value:t.email},{display:it(parseInt(t.sent)>0),value:t.open},{display:it(parseInt(t.open)>0),value:t.open},{display:it(parseInt(t.click)>0),value:t.click},{display:it(0!=parseInt(t.unsubscribed)||null,!0),value:t.unsubscribe},Object(s.pc)()?{display:it(parseInt(t.conversions)>0),value:t.is_converted}:{},Object(s.pc)()?{display:Object(r.createElement)(r.Fragment,null,parseFloat(t.revenue)>0?Object(r.createElement)("span",{className:"bwf-tags bwf-tag-green"},nt(parseFloat(t.revenue))):"-"),value:t.revenue}:{}]})),headers:at,query:{paged:ct},rowsPerPage:y,totalRows:h,isLoading:O,onPageChange:function(t){F("offset",(t-1)*y)},onQueryChange:function(t){return"per_page"!==t?function(){}:ot},emptyMessage:Object(a.__)("No engagements found","wp-marketing-automations"),rowHeader:!0,showMenu:!1,hideHeader:"yes"}),Object(r.createElement)(N,{contact:p,size:400,automationId:e,isOpen:u,onRequestClose:function(){return f(!1)}})))}}}]);