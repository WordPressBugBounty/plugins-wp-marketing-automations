(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1291:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n(2),o=n(9),i=n.n(o),l=n(1111),u=n(68),s=n(1122),b=n(363),m=n(11),f=n(3),p=n(1110),O=n(7),j=n(40);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,u=Object.create(l.prototype);return d(u,"_invoke",function(n,r,a){var c,i,l,u=0,s=a||[],b=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,m.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!b&&u&&!a&&t<s.length;t++){var a,c=s[t],f=m.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,m.v=r,m.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,m.n=p,i=0))}if(a||n>1)return o;throw b=!0,r}return function(a,s,p){if(u>1)throw TypeError("Generator is already running");for(b&&1===s&&f(s,p),i=s,l=p;(t=i<2?e:l)||!b;){c||(i?i<3?(i>1&&(m.n=-1),f(i,l)):m.n=l:m.v=l);try{if(u=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(b=m.n<0)?l:n.call(r,m))!==o)break}catch(t){c=e,i=1,l=t}finally{u=1}}return{value:t,done:b}}}(n,a,c),!0),u}var o={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(d(t={},r,(function(){return this})),t),b=u.prototype=i.prototype=Object.create(s);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,d(e,a,"GeneratorFunction")),e.prototype=Object.create(b),e}return l.prototype=u,d(b,"constructor",u),d(u,"constructor",l),l.displayName="GeneratorFunction",d(u,a,"GeneratorFunction"),d(b),d(b,a,"Generator"),d(b,r,(function(){return this})),d(b,"toString",(function(){return"[object Generator]"})),(y=function(){return{w:c,m:m}})()}function d(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(d=function(e,t,n,r){function c(t,n){d(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=e.bulkActionId,n=e.setStep,o=e.setPending,v=e.isPending,d=k(Object(r.useState)(!1),2),w=d[0],g=d[1],_=Object(l.a)(),N=_.getSingleBulkActionData,S=_.getActionList,P=_.getActionSchemaList,A=Object(p.a)().setSingleBulkActionValue,T=N(),C=P(),x=S(),D=T.count,F=void 0===D?0:D,I=T.actions,G=T.contactFilters,V=T.include_ids,B=void 0===V?[]:V,L=T.enable_automation_run,M=void 0!==L&&L,R=function(){var e,r=(e=y().m((function e(){return y().w((function(e){for(;;)switch(e.p=e.n){case 0:if(Object(f.fc)()){e.n=1;break}return g(!0),e.a(2);case 1:return e.p=1,o(!0),e.n=2,i()({path:Object(f.C)("/bulk-action/".concat(t)),method:"POST",data:E(E({},T),{},{start_bulk_action:!0})}).then((function(e){200===e.code?e.hasOwnProperty("result")&&!Object(c.isEmpty)(e.result)&&(A("data",e.result),setTimeout((function(){n(4),o(!1)}),1e3)):o(!1)}));case 2:e.n=4;break;case 3:e.p=3,e.v,o(!1);case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){h(c,r,a,o,i,"next",e)}function i(e){h(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(u.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header"},Object(a.__)("Review","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-bulk-overview-wrapper"},Object(r.createElement)("div",{className:"bwf-bulk-overview-section"},Object(r.createElement)("div",{className:"bwf-bulk-header"},Object(a.__)("Contacts","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-bulk-data-wrap"},Object(r.createElement)("div",{className:"bwf-bulk-data-item"},Object(r.createElement)("div",{className:"bwf-bulk-data-item-label"},Object(a.__)("Total Contacts","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-bulk-data-item-value"},parseInt(F))),Object(r.createElement)("div",{className:"bwf-bulk-data-item"},Object(r.createElement)("div",{className:"bwf-bulk-data-item-label"},Object(a.__)("Segment","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-bulk-data-item-value"},Object(c.isEmpty)(G)?Object(c.isEmpty)(B)?"-":Object(a.sprintf)(Object(a.__)("Selected %s contacts","wp-marketing-automations"),F):Object(s.b)(G))))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-bulk-overview-section"},Object(r.createElement)("div",{className:"bwf-bulk-header"},Object(a.__)("Actions","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-bulk-data-wrap"},Object(r.createElement)("div",{className:"bwf-bulk-data-item"},Object(r.createElement)("div",{className:"bwf-bulk-data-item-value"},Object(r.createElement)(b.a,{actions:x,actionSchema:C,value:I}))))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-bulk-overview-section"},Object(r.createElement)("div",{className:"bwf-bulk-header"},Object(a.__)("Automation","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-bulk-data-wrap"},Object(r.createElement)("div",{className:"bwf-bulk-data-item"},Object(r.createElement)("div",{className:"bwf-bulk-data-item-label"},Object(a.__)("Trigger automations","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-bulk-data-item-value"},M?Object(a.__)("Enable","wp-marketing-automations"):Object(a.__)("Disable","wp-marketing-automations")))))),Object(r.createElement)("div",{className:"bwf-bulk-action-footer"},Object(r.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(r.createElement)(m.a,{className:"bwf-display-flex",isSecondary:!0,onClick:function(){n(2)}},Object(a.__)("Previous","wp-marketing-automations")),Object(r.createElement)(m.a,{isPrimary:!0,className:"bwf-display-flex",onClick:R,isBusy:v},!Object(f.fc)()&&Object(r.createElement)(O.a,{icon:"king",size:"16",color:"#fff"}),Object(a.__)("Start","wp-marketing-automations")))),!Object(f.fc)()&&Object(r.createElement)(j.b,{isOpen:w,onRequestClose:function(){return g(!1)},modalContent:{isFeature:!0,featureTitle:Object(a.__)("Bulk Actions","wp-marketing-automations")}}))}},1332:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n(5),o=n(11),i=n(2),l=n(1111),u=n(1110),s=n(279),b=n(7);n(565);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var y=function(e){var t=e.index,n=e.actionInputType,o=e.group,l=e.actionData,u=e.setActionData,m=e.actionValue,f=e.customField,O=e.actions,v=e.setEdit,y=e.isOverview,d=j(Object(r.useState)("autonami"),2),w=(d[0],d[1]),E=j(Object(r.useState)({}),2),g=E[0],h=E[1];Object(r.useEffect)((function(){if(!Object(i.isEmpty)(o)){var e={};Object.keys(o).map((function(t){o[t].hasOwnProperty("actions")&&!Object(i.isEmpty)(o[t].actions)&&o[t].actions.map((function(n){e[n]=t}))})),h(e)}}),[o]),Object(r.useEffect)((function(){Object(i.isEmpty)(t)||w(g[t])}),[g,t,y]);var k=function(e){var t=[{label:Object(a.__)("Select Action","wp-marketing-automations"),value:""}];return O.map((function(n){var r=!1;"autonami"!=g[n.value]&&(r=!0),l.hasOwnProperty(n.value)&&e!==n.value||r||(t.push({label:n.label,value:n.value}))})),t},_=function(e){var t="-";return Object(i.isEmpty)(O)||O.map((function(n){n.value==e&&(t=n.label)})),t};return y?Object(r.createElement)("div",{className:"bwf-group-select-overview"},Object(r.createElement)("div",{className:"bwf-group-select-overview-header"},Object(r.createElement)("div",{className:"bwf-group-select-action-name"},_(t)),Object(r.createElement)("div",{className:"bwf-group-select-action-events"},Object(r.createElement)("div",{onClick:function(){return v(t)}},Object(r.createElement)(b.a,{icon:"edit"})),Object(r.createElement)("div",{onClick:function(){var e=p({},l);delete e[t],u(e)}},Object(r.createElement)(b.a,{icon:"trash"})))),Object(r.createElement)("div",{className:"bwf-group-select-action-wrap"},Object(r.createElement)("div",{className:"bwf-group-select-action-style"},Object(r.createElement)("div",{className:"circle"}),t&&n.hasOwnProperty(t)&&!Object(i.isEmpty)(n[t])&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"line"}),Object(r.createElement)("div",{className:"circle from-bottom"}))),Object(r.createElement)("div",{className:"bwf-group-data-wrap"},Object(r.createElement)("div",{className:"bwf-group-select-action-data"},Object(r.createElement)("div",{className:"bwf-action-group"},Object(r.createElement)("div",{className:"bwf-bold-label"},Object(a.__)("Action","wp-marketing-automations")),Object(r.createElement)("div",null,o.hasOwnProperty(g[t])&&o[g[t]].hasOwnProperty("label")?o[g[t]].label:"-")),Object(r.createElement)("div",{className:"bwf-action-map-icon"},Object(r.createElement)(b.a,{icon:"mapper",size:24})),Object(r.createElement)("div",{className:"bwf-action-action-selected"},Object(r.createElement)("div",{className:"bwf-bold-label"},Object(a.__)("Type","wp-marketing-automations")),Object(r.createElement)("div",null,_(t)))),Object(r.createElement)("div",{className:"bwf-group-data-values"},!f&&t&&n.hasOwnProperty(t)&&!Object(i.isEmpty)(n[t])&&Object(r.createElement)("div",{className:"bwf-bold-label"},Object(a.__)("Values","wp-marketing-automations")),Object(r.createElement)("div",null,n.hasOwnProperty(t)&&!Object(i.isEmpty)(n[t])&&Object(r.createElement)(s.a,{selectorValue:m,data:t&&n.hasOwnProperty(t)?n[t]:{}})))))):Object(r.createElement)("div",{className:"bwf-group-select-edit"},Object(r.createElement)("div",{key:t,className:"bwf-action-selector-wrap"},Object(r.createElement)("div",{className:"bwf-action-select-wrp bwf-action-select"},Object(r.createElement)(c.SelectControl,{value:t,options:k(t),onChange:function(e){if(!Object(i.isEmpty)(e)){var n={};Object.entries(l).map((function(r){var a=j(r,2),c=a[0],o=a[1];c==t?n[e]={}:n[c]=o})),v(e),u(n)}},disabled:!(k(t).length>1)})),Object(r.createElement)("div",null)),!Object(i.isEmpty)(t)&&Object(r.createElement)("div",{className:f?"bwf-custom-field-wrapper":""},f&&Object(r.createElement)("div",{className:"bwf-custom-fields-row bwf-display-flex",style:{justifyContent:"flex-start"}},Object(r.createElement)("b",{className:"bwf-w-210"},Object(a.__)("Field","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-w-30"}),Object(r.createElement)("b",null,Object(a.__)("Value","wp-marketing-automations"))),Object(r.createElement)(s.b,{selectorValue:m,escapeArrowIcon:!0,data:t&&n.hasOwnProperty(t)?n[t]:{},setActionSelectorValue:function(e){var n=p({},l);n[t]=e,u(n)}}),!f&&Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-mt-10",style:{justifyContent:"flex-start"}},"new"!=t&&Object(r.createElement)(c.Button,{isPrimary:!0,onClick:function(){v("")},className:"bwf-mr-10",disabled:Object(i.isEmpty)(m)&&!Object(i.isEmpty)(n[t])},Object(a.__)("Save","wp-marketing-automations")),Object(r.createElement)(c.Button,{isSecondary:!0,onClick:function(){if("new"==t||Object(i.isEmpty)(m)){var e=p({},l);delete e[t],u(e)}v("")}},Object(a.__)("Cancel","wp-marketing-automations")))))},d=function(e){var t=e.actions,n=e.actionSchema,o=e.value,l=void 0===o?{}:o,u=e.group,s=void 0===u?{}:u,b=e.setActionValue,m=j(Object(r.useState)(l),2),f=m[0],O=m[1],v=j(Object(r.useState)(""),2),d=v[0],w=v[1];Object(r.useEffect)((function(){var e=Object(i.cloneDeep)(f);e.hasOwnProperty("new")&&delete e.new,Object(i.isEmpty)(e)&&w("new")}),[]),Object(r.useEffect)((function(){Object(i.isEmpty)(f)?(O({new:{}}),w("new")):b(f)}),[f]);var E;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(r.Fragment,null,Object.entries(f).map((function(e,a){var c=j(e,2),o=c[0],i=c[1],l=!1;return"new"!==o&&n.hasOwnProperty(o)&&n[o].hasOwnProperty("type")&&"bwfupdatefield"===n[o].type&&(l=!0),Object(r.createElement)(y,{index:o,actionInputType:n,actionData:f,setActionData:O,actionValue:i,customField:l,group:s,actions:t,isOverview:d!==o,setEdit:w,key:a})}))),(E=!1,t.map((function(e){f.hasOwnProperty(e.value)||(E=!0)})),E&&Object(i.isEmpty)(d)&&Object(r.createElement)("div",{onClick:function(){var e=p(p({},f),{},{new:{}});O(e),w("new")}},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(c.Button,{className:"bwf-cursor-pointer",isPrimary:!0},Object(a.__)("Add","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}))))},w=n(9),E=n.n(w),g=n(3),h=n(12),k=n(68),_=n(26);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,u=Object.create(l.prototype);return P(u,"_invoke",function(n,r,a){var c,i,l,u=0,s=a||[],b=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,m.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!b&&u&&!a&&t<s.length;t++){var a,c=s[t],f=m.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,m.v=r,m.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,m.n=p,i=0))}if(a||n>1)return o;throw b=!0,r}return function(a,s,p){if(u>1)throw TypeError("Generator is already running");for(b&&1===s&&f(s,p),i=s,l=p;(t=i<2?e:l)||!b;){c||(i?i<3?(i>1&&(m.n=-1),f(i,l)):m.n=l:m.v=l);try{if(u=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(b=m.n<0)?l:n.call(r,m))!==o)break}catch(t){c=e,i=1,l=t}finally{u=1}}return{value:t,done:b}}}(n,a,c),!0),u}var o={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(P(t={},r,(function(){return this})),t),b=u.prototype=i.prototype=Object.create(s);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,P(e,a,"GeneratorFunction")),e.prototype=Object.create(b),e}return l.prototype=u,P(b,"constructor",u),P(u,"constructor",l),l.displayName="GeneratorFunction",P(u,a,"GeneratorFunction"),P(b),P(b,a,"Generator"),P(b,r,(function(){return this})),P(b,"toString",(function(){return"[object Generator]"})),(S=function(){return{w:c,m:m}})()}function P(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(P=function(e,t,n,r){function c(t,n){P(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=Object(h.i)(),n=D(Object(r.useState)(""),2),s=n[0],b=n[1],m=e.bulkActionId,f=e.setStep,p=e.setPending,O=e.isPending,j=Object(u.a)().setSingleBulkActionValue,v=Object(l.a)(),y=v.getSingleBulkActionData,w=v.getActionGroup,N=v.getActionList,P=v.getActionSchemaList,A=y(),C=P(),F=N(),I=w(),G=A.actions,V=void 0===G?{}:G,B=A.contactFilters,L=void 0===B?{}:B,M=A.enable_automation_run,R=void 0!==M&&M,U=function(e){var t={};return Object.keys(e).map((function(e){if("new"!==e){if(Object(i.isEmpty)(V[e])||(t[e]=V[e]),Object(i.isObject)(t[e])){var n={};Object.keys(t[e]).map((function(r){Object(i.isEmpty)(t[e][r])||(n[r]=t[e][r])})),t[e]=n}Object(i.isEmpty)(t[e]&&Object(i.isEmpty)(C[e]))&&(t[e]=V[e])}})),t},$=function(){var e,t=(e=S().m((function e(){var t,n;return S().w((function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,p(!0),t=U(V),!Object(i.isEmpty)(t)){e.n=1;break}return b(Object(a.__)("No actions selected","wp-marketing-automations")),e.a(2);case 1:return e.n=2,E()({path:Object(g.C)("/bulk-action/".concat(m)),method:"POST",data:T(T({},A),{},{actions:t})}).then((function(e){200===e.code?e.hasOwnProperty("result")&&!Object(i.isEmpty)(e.result)&&(j("data",e.result),setTimeout((function(){f(3),p(!1)}),1e3)):(b(e.message),p(!1))}));case 2:e.n=4;break;case 3:e.p=3,n=e.v,b(n.message),p(!1);case 4:return e.a(2)}}),e,null,[[0,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){x(c,r,a,o,i,"next",e)}function i(e){x(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(k.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header"},Object(a.__)("Actions","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-bulk-action-wrapper"},s&&Object(r.createElement)(_.a,{status:"error",onRemove:function(){return b("")}},s),Object(r.createElement)("div",{className:"bwf-bulk-action-action-selector"},Object(r.createElement)("div",{className:"bwf-h4"},Object(a.__)("Add actions for selected contacts","wp-marketing-automations")),Object(r.createElement)(d,{actions:F,actionSchema:C,group:I,value:Object(i.isEmpty)(V)?{new:{}}:V,setActionValue:function(e){j("data",T(T({},A),{},{actions:e}))}})),Object(r.createElement)("div",{className:"bwf_clear_30 bwf-bulk-action-line"}),Object(r.createElement)("div",{className:"bwf-bulk-action-action-selector"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("Automation","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(c.ToggleControl,{label:Object(a.__)("Trigger automations (for tag, list and status change related events)","wp-marketing-automations"),checked:R,className:"bwf-tooglecontrol-advance",onChange:function(e){j("data",T(T({},A),{},{enable_automation_run:e}))}})),Object(r.createElement)("div",{className:"bwf_clear_20"})),Object(r.createElement)("div",{className:"bwf-bulk-action-footer"},Object(r.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(r.createElement)(o.a,{className:"bwf-display-flex",isSecondary:!0,onClick:function(){Object(i.isEmpty)(L)||Object(h.l)(L,"/",t),f(1)}},Object(a.__)("Previous","wp-marketing-automations")),Object(r.createElement)(o.a,{className:"bwf-display-flex",isPrimary:!0,onClick:function(){!function(){if(Object(i.isEmpty)(V)||1===Object.keys(V).length&&V.hasOwnProperty("new"))return!1;var e=[];return Object.keys(V).map((function(t){(""===t||Object(i.isEmpty)(V[t])&&!Object(i.isEmpty)(C[t]))&&e.push(t)})),!!Object(i.isEmpty)(e)}()?b(Object(a.__)("Please select some actions to perform on contacts.","wp-marketing-automations")):$()},isBusy:O},Object(a.__)("Next","wp-marketing-automations")))))}}}]);