(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1126:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(362),a={"am-AM":/^(\+?374|0)(33|4[134]|55|77|88|9[13-689])\d{6}$/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)([569]\d{7}|41\d{6})$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?(9[1-9])\d{6}$/,"ar-PS":/^(\+?970|0)5[6|9](\d{7})$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SD":/^((\+?249)|0)?(9[012369]|1[012])\d{7}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(10|5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^((\+49|0)1)(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"dv-MV":/^(\+?960)?(7[2-9]|9[1-9])\d{5}$/,"el-GR":/^(\+?30|0)?6(8[5-9]|9(?![26])[0-9])\d{7}$/,"el-CY":/^(\+?357?)?(9(9|6)\d{6})$/,"en-AI":/^(\+?1|0)264(?:2(35|92)|4(?:6[1-2]|76|97)|5(?:3[6-9]|8[1-4])|7(?:2(4|9)|72))\d{4}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-AG":/^(?:\+1|1)268(?:464|7(?:1[3-9]|[28]\d|3[0246]|64|7[0-689]))\d{4}$/,"en-BM":/^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}$))/,"en-BS":/^(\+?1[-\s]?|0)?\(?242\)?[-\s]?\d{3}[-\s]?\d{4}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|28|55|59)\d{7}$/,"en-GY":/^(\+592|0)6\d{6}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-JM":/^(\+?876)?\d{7}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"fr-CF":/^(\+?236| ?)(70|75|77|72|21|22)\d{6}$/,"en-SS":/^(\+?211|0)(9[1257])\d{7}$/,"en-KI":/^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,"en-KN":/^(?:\+1|1)869(?:46\d|48[89]|55[6-8]|66\d|76[02-7])\d{4}$/,"en-LS":/^(\+?266)(22|28|57|58|59|27|52)\d{6}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-MW":/^(\+?265|0)(((77|88|31|99|98|21)\d{7})|(((111)|1)\d{6})|(32000\d{4}))$/,"en-NA":/^(\+?264|0)(6|8)\d{7}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PG":/^(\+?675|0)?(7\d|8[18])\d{6}$/,"en-PK":/^((00|\+)?92|0)3[0-6]\d{8}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"en-BW":/^(\+?267)?(7[1-8]{1})\d{6}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-CU":/^(\+53|0053)?5\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8|3|2]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-NI":/^(\+?505)\d{7,8}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-SV":/^(\+?503)?[67]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"es-VE":/^(\+?58)?(2|4)\d{9}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4[0-6]|50)\s?(\d\s?){4,8}$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-BF":/^(\+226|0)[67]\d{7}$/,"fr-BJ":/^(\+229)\d{8}$/,"fr-CD":/^(\+?243|0)?(8|9)\d{8}$/,"fr-CM":/^(\+?237)6[0-9]{8}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-PF":/^(\+?689)?8[789]\d{6}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"fr-WF":/^(\+681)?\d{6}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36|06)(20|30|31|50|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"ir-IR":/^(\+98|0)?9\d{9}$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(79\d{7}|5\d{8})$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"ky-KG":/^(\+?7\s?\+?7|0)\s?\d{2}\s?\d{3}\s?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"mg-MG":/^((\+?261|0)(2|3)\d)?\d{7}$/,"mn-MN":/^(\+|00|011)?976(77|81|88|91|94|95|96|99)\d{6}$/,"my-MM":/^(\+?959|09|9)(2[5-7]|3[1-2]|4[0-5]|6[6-9]|7[5-9]|9[6-9])[0-9]{7}$/,"ms-MY":/^(\+?60|0)1(([0145](-|\s)?\d{7,8})|([236-9](-|\s)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nl-AW":/^(\+)?297(56|59|64|73|74|99)\d{5}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?([5-8]\d|45) ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[1-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+244)\d{9}$/,"ro-MD":/^(\+?373|0)((6(0|1|2|6|7|8|9))|(7(6|7|8|9)))\d{6}$/,"ro-RO":/^(\+?40|0)\s?7\d{2}(\/|\s|\.|-)?\d{3}(\s|\.|-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"so-SO":/^(\+?252|0)((6[0-9])\d{7}|(7[1-9])\d{7})$/,"sq-AL":/^(\+355|0)6[789]\d{6}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"tg-TJ":/^(\+?992)?[5][5]\d{7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"tk-TM":/^(\+993|993|8)\d{8}$/,"uk-UA":/^(\+?38|8)?0\d{9}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"dz-BT":/^(\+?975|0)?(17|16|77|02)\d{6}$/,"ar-YE":/^(((\+|00)9677|0?7)[0137]\d{7}|((\+|00)967|0)[1-7]\d{6})$/,"ar-EH":/^(\+?212|0)[\s\-]?(5288|5289)[\s\-]?\d{5}$/,"fa-AF":/^(\+93|0)?(2{1}[0-8]{1}|[3-5]{1}[0-4]{1})(\d{7})$/};function o(t,e,r){if(Object(n.a)(t),r&&r.strictMode&&!t.startsWith("+"))return!1;if(Array.isArray(e))return e.some((function(e){if(a.hasOwnProperty(e)&&a[e].test(t))return!0;return!1}));if(e in a)return a[e].test(t);if(!e||"any"===e){for(var o in a){if(a.hasOwnProperty(o))if(a[o].test(t))return!0}return!1}throw new Error("Invalid locale '".concat(e,"'"))}a["en-CA"]=a["en-US"],a["fr-CA"]=a["en-CA"],a["fr-BE"]=a["nl-BE"],a["zh-HK"]=a["en-HK"],a["zh-MO"]=a["en-MO"],a["ga-IE"]=a["en-IE"],a["fr-CH"]=a["de-CH"],a["it-CH"]=a["fr-CH"];Object.keys(a)},1422:function(t,e,r){},1432:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r(5),o=r(14),i=r(1),c=r(1059),u=r(1069),l=r(10),s=r.n(l),f=r(12),d=r(3),m=r(2),p=r(195),b=r(154),h=r(49),y=r(50),g=r(344);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var w=["getStateProp"];function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function j(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach((function(e){_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=v(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var E=function(t){if(!t||!t.editor||!t.editor.design)return!1;var e=JSON.parse(t.editor.design);return!!e&&!!e.body&&Array.isArray(e.body.rows)&&e.body.rows.length>0},S=function(){var t=Object(y.a)(g.a.campaignContent),e=t.getStateProp,r=function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(t,w),n=c.a.getCampaignData(),a=parseInt(n.type);return j(j({},r),{},{getEmailContent:function(){var t=parseInt(e("currentEmail")),r=e("data");return r&&t in r?r[t]:{}},getCurrentEmail:function(){return parseInt(e("currentEmail"))},getDisableSaveValue:function(){return e("disableSave")},getIsMigrating:function(){return e("isMigrating")},getEmails:function(){return e("emails")},getAllEmailContent:function(){return e("data")},getShowValidationFlag:function(){return e("showValidation")},emailsValidToSubmit:function(){var t=e("data");return!!e("emails").map((function(e){var r=t[e];if(!r)return!1;var n=!!r.utmEnabled,o=r.utm?r.utm:{},i={subject:1!==a||r.subject&&r.subject.length>0,content:"editor"!==r.type?r.body&&r.body.length>0:E(r),type:1!==a||r.type&&r.type.length>0,utmSource:!n||o.source&&o.source.length>0,utmMedium:!n||o.medium&&o.medium.length>0};return!!Object.keys(i).map((function(t){return i[t]})).reduce((function(t,e){return t&&e}),!0)})).reduce((function(t,e){return t&&e}),!0)&&t},getValidEmails:function(){var t=e("data"),r=e("emails"),n={};return r.map((function(e){var r=t[e];if(r){var o=!!r.utmEnabled,i=r.utm?r.utm:{},c={subject:1!==a||r.subject&&r.subject.length>0,content:"editor"!==r.type?r.body&&r.body.length>0:E(r),type:1!==a||r.type&&r.type.length>0,utmSource:!o||i.source&&i.source.length>0,utmMedium:!o||i.medium&&i.medium.length>0};n[e]=!!Object.keys(c).map((function(t){return c[t]})).reduce((function(t,e){return t&&e}),!0)}})),n},getEmailsToSubmit:function(){var t=e("data");return e("emails").map((function(e){var r=t[e];return r||!1})).filter(Boolean)},getCurrentEmailIndex:function(){var t=parseInt(e("currentEmail")),r=e("emails");return Array.isArray(r)&&r.includes(t)?r.indexOf(t):1},validateCurrentEmail:function(){var t=e("data"),r=parseInt(e("currentEmail"));if(!t||!t[r])return!1;var n=t[r];if(n){var o=!!n.utmEnabled,i=n.utm?n.utm:{};return{subject:1!==a||n.subject&&n.subject.length>0,content:"editor"!==n.type?n.body&&n.body.length>0:E(n),type:1!==a||n.type&&n.type.length>0,utmSource:!o||i.source&&i.source.length>0,utmMedium:!o||i.medium&&i.medium.length>0}}},getSmartSendSettings:function(){return e("smartSend")},getSaveContentStatus:function(){return e("saveContentStatus")},getSendTestEmailStatus:function(){return e("sendTestEmailStatus")},getUploadImageStatus:function(){return e("uploadImageStatus")},getUploadImageURL:function(){return e("uploadImageURL")},getLastUpdatedTime:function(){return e("lastUpdatedTime")}})},k=r(9),L=r.n(k);function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var C=["fetch","setStateProp"],P=["reply_to","senders_email","senders_name"],T=["reply_to","senders_email","senders_name"],N=["template"];function A(){A=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:S(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",m="executing",p="completed",b={};function h(){}function y(){}function g(){}var v={};l(v,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,i)&&(v=O);var j=g.prototype=h.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(a,o,i,c){var u=f(t[a],t,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==x(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function S(e,r,n){var a=d;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=f(e,r,n);if("normal"===l.type){if(a=n.done?p:"suspendedYield",l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,b;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(x(e)+" is not iterable")}return y.prototype=g,a(j,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:y,configurable:!0}),y.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},_(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new E(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;C(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function I(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function $(t){return function(t){if(Array.isArray(t))return M(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return M(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach((function(e){B(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function B(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=x(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==x(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}var U=function(){var t=Object(h.a)(g.a.campaignContent),e=t.fetch,r=t.setStateProp,a=D(t,C),o=Object(h.a)(g.a.campaign).setStateProp,i=S(),u=i.getAllEmailContent,l=i.getCurrentEmail,f=i.getEmails,p=i.getSmartSendSettings,b=i.getCurrentEmailIndex,y=i.getEmailsToSubmit,v=i.getEmailContent,w=i.getDisableSaveValue,O=u(),j=l(),_=b(),E=f(),k=p(),x=v(),M=y(),F=w(),U=c.a.getCampaignId(),R=c.a.getCampaignData(),V=R.type,Y=Object(n.useRef)(null);Object(n.useEffect)((function(){Y.current=F}),[F]);var W,Z,z=function(t){return"type"in t?t:G(G({},t),{},{type:"block"})};return G(G({},a),{},{setEmailContentByKey:function(t,e){var n=z(j in O?G(G({},O[j]),{},B({},t,e)):B({},t,e));"type"!=t||"editor"!=e||n.hasOwnProperty("editor")||(n.editor={body:Object(d.Gb)(),design:Object(d.Fb)()});var a=G(G({},O),{},B({},j,n));r("data",a)},setEmailUtmByKey:function(t,e){var n=z(j in O?G({},O[j]):{}),a="utm"in n?G(G({},n.utm),{},B({},t,e)):B({},t,e),o=G(G({},O),{},B({},j,G(G({},n),{},{utm:G(G({},a),{},B({},t,e))})));r("data",o)},setEmailContentForBlock:function(t){var e=z(j in O?G(G({},O[j]),{},{block:t,type:"block"}):{block:t,type:"block"}),n=G(G({},O),{},B({},j,e));r("data",n),r("disableSave",1),r("isMigrating",1),setTimeout((function(){r({saveContentStatus:2})}))},setMultipleUtm:function(t){if(t){var e=z(j in O?G({},O[j]):{}),n=G(G({},O),{},B({},j,G(G({},e),{},{utm:G(G({},e.utm),t)})));r("data",n)}},setCurrentEmail:function(t){E.includes(t)&&r("currentEmail",t)},addEmail:function(){if(Array.isArray(E)&&E.length<3){var t=Math.max.apply(Math,$(E))+1;r("emails",[].concat($(E),[t])),r("currentEmail",t),r("showValidation",!1),r("data",G(G({},O),{},B({},t,E[0]in O?Object(m.cloneDeep)(O[E[0]]):{})))}},showValidation:function(t){return r("showValidation",t)},deleteEmail:function(t){if(E.length>1){var e=E.filter((function(e){return e!==t}));r("emails",e),r("currentEmail",e[e.length-1])}},initContent:function(t,e){if(!Array.isArray(t)||0===Object(m.size)(t))return r("data",{1:{}}),r("emails",[1]),void r("currentEmail",1);var n={};for(var a in t){var o=parseInt(a)+1;n[o]=O[o]?G(G({},z(O[o])),t[a]):t[a]}r("data",n),r("emails",Object.keys(n).map((function(t){return parseInt(t)}))),e&&0!==Object.keys(e).length&&r("smartSend",e)},fetchCurrentMailEditorContent:function(){e("GET",Object(d.A)("/broadcast/".concat(U,"/content/").concat(_)),{},{email:j})},sendTestEmail:(W=A().mark((function t(e,n){var a,o,i,c,u,l,f,p,b,h,y,g,v,w,O,j,_,E,S,k,L=arguments;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=L.length>2&&void 0!==L[2]?L[2]:"",o=L.length>3&&void 0!==L[3]?L[3]:"",i=L.length>4&&void 0!==L[4]?L[4]:"",c="",u="",l="block",f="",p={},b=!1,x&&(h=x.body?x.body:"",y=x.editor?x.editor:{},g=y.body?y.body:"",l=x.type?x.type:l,c="editor"===l?g:h,u=x.subject?x.subject:"FunnelKit Automations - Test email subject",f=x.preheader?x.preheader:"",p=x.utm?x.utm:{},b=!!x.utmEnabled&&x.utmEnabled),v=o||c,w=a||u,O=i||l,j="",_={},1==V?(j=Object(d.A)("/send-test-email"),_={email:e,content:{subject:w,body:v,type:O,preheader:f,mail_data:n,utmEnabled:b,utmDetails:p}}):2==V?(n.reply_to,n.senders_email,n.senders_name,E=D(n,P),j=Object(d.A)("/send-test-sms"),_={phone:e,sms_body:v,sms_data:E}):3==V&&(n.reply_to,n.senders_email,n.senders_name,S=D(n,T),j=Object(d.A)("/send-test-whatsapp-message"),_={phone:e,sms_body:x,sms_data:S}),Object(m.isEmpty)(_)||Object(m.isEmpty)(j)){t.next=21;break}return t.next=19,s()({method:"POST",path:j,data:_}).then((function(t){return 200===t.code&&t.message?(r("sendTestEmailStatus",2),2):(r("sendTestEmailStatus",3),3)}));case 19:return k=t.sent,t.abrupt("return",k);case 21:case"end":return t.stop()}}),t)})),Z=function(){var t=this,e=arguments;return new Promise((function(r,n){var a=W.apply(t,e);function o(t){I(a,r,n,o,i,"next",t)}function i(t){I(a,r,n,o,i,"throw",t)}o(void 0)}))},function(t,e){return Z.apply(this,arguments)}),setSmartSendByKey:function(t,e){return r("smartSend",G(G({},k),{},B({},t,e)))},saveBroadcastContent:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r("saveContentStatus",1);var n=Array.isArray(t)&&t.length>0?t.map((function(t){if("editor"===t.type&&t.hasOwnProperty("editor")&&t.editor.hasOwnProperty("body")&&(t.body=t.editor.body),"block"===t.type&&t.hasOwnProperty("block")){var e=t.block,r=e.template,n=void 0===r?"":r,a=D(e,N);""!==n&&(t.body=t.block.template),t.block=a}return t})):M,a={content:JSON.stringify(n),saveBroadcastContent:!0};Y.current?(e&&o("data",G(G({},R),{},{data:G(G({},R.data),{},{content:n})})),r("saveContentStatus",2),r("disableSave",0),Array.isArray(t)&&t.length>0&&r("lastUpdatedTime",L()().utc().format("YYYY-MM-DD HH:mm:ss"))):(s()({method:"POST",path:Object(d.A)("/broadcast/".concat(U,"/save-content")),data:a}).then((function(){e&&o("data",G(G({},R),{},{data:G(G({},R.data),{},{content:n})})),r("saveContentStatus",2),Array.isArray(t)&&t.length>0&&r("lastUpdatedTime",L()().utc().format("YYYY-MM-DD HH:mm:ss"))})),r("isMigrating",0))},uploadImage:function(t){if(t){r("uploadImageStatus",1);var n=new FormData;n.append("image",t),e("POST",Object(d.A)("/upload-image"),n,{uploadImage:!0,isFormData:!0})}},resetSaveContentStatus:function(){return r("saveContentStatus",null)},resetSendTestEmailStatus:function(){return r("sendTestEmailStatus",null)},resetUploadImageStatus:function(){r("uploadImageStatus",null),r("uploadImageStatusURL","")},overrideCurrentContent:function(t){var e=z(j in O?G({},O[j]):{}),n=e.preheader,a=void 0===n?"":n,o=e.subject,i=void 0===o?"":o,c=G(G({},e),t);""!==a&&(c.preheader=a),""!==i&&(c.subject=i);var u=G(G({},O),{},B({},j,G(G({},e),c)));r("data",u)}})},R=r(47);function V(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Y(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var W=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},Z=function(t){var e=U().sendTestEmail,r=(0,S().getSendTestEmailStatus)(),a=V(Object(n.useState)("http://app.getautonami.com"),2),o=a[0],c=a[1],u=Object(n.useRef)();Object(n.useEffect)((function(){u.current=t}),[t]);var l=function(t){if(-1!==t.origin.indexOf("app.getautonami.com")&&t.data&&t.data.action&&"send_test_email"===t.data.action&&t.data.token===W.editor_nonce&&t.data.data){var r=t.data.data,n=r.email,a=r.body,o=r.subject,l=void 0===o?"":o;n&&a&&(c(t.origin),e(n,u.current,l||Object(i.__)("FunnelKit Automations - Test email subject","wp-marketing-automations"),a))}};return Object(n.useEffect)((function(){return window.addEventListener("message",l),function(){return window.removeEventListener("message",l)}}),[]),Object(n.useEffect)((function(){if(r&&1!==r){var t=2===r,e=document.getElementById("bwf_email_editor_frame");e&&e.contentWindow.postMessage({token:W.editor_nonce,action:"send_test_email",data:{isSent:t}},o)}}),[r]),!0};function z(t){return function(t){if(Array.isArray(t))return q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||H(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||H(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){if(t){if("string"==typeof t)return q(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(t,e):void 0}}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var J=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},Q=function(t){var e=U().saveBroadcastContent,r=S(),a=r.getSaveContentStatus,o=r.getEmailsToSubmit,i=r.getCurrentEmailIndex,c=a(),u=o(),l=i(),s=Object(n.useRef)(u),f=Object(n.useRef)(l);Object(n.useEffect)((function(){s.current=u,f.current=l}),[u,l]);var d=K(Object(n.useState)("http://app.getautonami.com"),2),m=d[0],p=d[1],b=function(t){if(-1!==t.origin.indexOf("app.getautonami.com")&&t.data&&t.data.action&&"save_design"===t.data.action&&t.data.token===J.editor_nonce&&t.data.data){var r=t.data.data,n=r.body,a=r.design;if(n&&a){p(t.origin);var o=z(s.current);o[f.current].editor={body:n,design:a},e(o,!0)}}};return Object(n.useEffect)((function(){return window.addEventListener("message",b),function(){return window.removeEventListener("message",b)}}),[]),Object(n.useEffect)((function(){if(c&&1!==c&&t){var e=2===c,r=document.getElementById("bwf_email_editor_frame");r&&r.contentWindow.postMessage({token:J.editor_nonce,action:"save_design",data:{isSaved:e}},m)}}),[c]),!0};function X(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return tt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var et=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},rt=function(){var t=X(Object(n.useState)("http://app.getautonami.com"),2),e=t[0],r=t[1],a=function(t){-1!==t.origin.indexOf("app.getautonami.com")&&t.data&&t.data.action&&"wp_image_upload"===t.data.action&&t.data.token===et.editor_nonce&&t.data.data&&(r(t.origin),s())},o=Object(n.useRef)(),c=X(Object(n.useState)(""),2),u=c[0],l=c[1],s=function(){if(!wp||!wp.media)return"";o.current||(o.current=wp.media({title:Object(i.__)("Select or Upload Media","wp-marketing-automations"),button:{text:"Select Image"},multiple:!1}),o.current.on("select",(function(){var t=o.current.state().get("selection").first().toJSON();l(t.url)}))),o.current.open()};return Object(n.useEffect)((function(){return window.addEventListener("message",a),function(){return window.removeEventListener("message",a)}}),[]),Object(n.useEffect)((function(){if(u){var t=document.getElementById("bwf_email_editor_frame");t&&t.contentWindow.postMessage({token:et.editor_nonce,action:"wp_image_upload",data:{isUploaded:!0,imageURL:u}},e)}}),[u]),!0},nt=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},at=function(t){var e=(0,S().getEmailContent)(),r=Object(n.useRef)(),a=Object(n.useRef)();Object(n.useEffect)((function(){r.current=e,a.current=function(t){var e={};for(var r in t){var n=t[r];if(n){var a={};for(var o in n)n[o]&&n[o].hasOwnProperty("tag_description")&&n[o].hasOwnProperty("tag_name")&&(a[o]={name:n[o].tag_description,value:"{{".concat(n[o].tag_name,"}}")});e[r]={name:r,mergeTags:a}}}return e}(t)}),[e,t]);var o=function(t){if(-1!==t.origin.indexOf("app.getautonami.com")&&t.data&&t.data.action&&"get_design"===t.data.action&&t.data.token===nt.editor_nonce){var e=Object(d.Fb)(),n=r.current&&r.current.editor&&r.current.editor.design?r.current.editor.design:e,o=document.getElementById("bwf_email_editor_frame");o&&o.contentWindow.postMessage({token:nt.editor_nonce,action:"get_design",data:{gotDesign:!0,json:n,subject:r.current&&r.current.subject?r.current.subject:"",mergeTags:a.current,enableLinkTrigger:!0,textDirection:Object(d.bc)()?"rtl":""}},t.origin)}};return Object(n.useEffect)((function(){return window.addEventListener("message",o),function(){return window.removeEventListener("message",o)}}),[]),!0},ot=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},it=function(t){var e=function(e){-1!==e.origin.indexOf("app.getautonami.com")&&e.data&&e.data.action&&"open_merge_tags"===e.data.action&&e.data.token===ot.editor_nonce&&e.data.data&&t&&t()};return Object(n.useEffect)((function(){return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}),[]),!0},ct=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},ut=function(t){var e=function(e){-1!==e.origin.indexOf("app.getautonami.com")&&e.data&&e.data.action&&"close_editor"===e.data.action&&e.data.token===ct.editor_nonce&&e.data.data&&t&&t()};return Object(n.useEffect)((function(){return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}),[]),!0},lt=r(469),st=function(t){var e=function(){t&&t()};return Object(n.useEffect)((function(){return window.history.pushState(null,null,window.location.href),window.addEventListener("popstate",e),function(){return window.removeEventListener("popstate",e)}}),[]),!0},ft=r(8),dt=r(39),mt=r(28),pt=r(55);function bt(t){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ht(){ht=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),c=new C(n||[]);return a(i,"_invoke",{value:S(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",m="executing",p="completed",b={};function h(){}function y(){}function g(){}var v={};l(v,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,i)&&(v=O);var j=g.prototype=h.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(a,o,i,c){var u=f(t[a],t,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==bt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function S(e,r,n){var a=d;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=f(e,r,n);if("normal"===l.type){if(a=n.done?p:"suspendedYield",l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,b;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(bt(e)+" is not iterable")}return y.prototype=g,a(j,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:y,configurable:!0}),y.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},_(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new E(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function yt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function gt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(r),!0).forEach((function(e){vt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function vt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=bt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wt(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function Ot(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return jt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var _t=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},Et=function(){return Object(n.createElement)("div",{className:"bwf-c-save-content-loading"},Object(n.createElement)(R.a,null),Object(n.createElement)("h3",null,Object(i.__)("Loading Visual Builder","wp-marketing-automations")))},St=function(t){var e=t.iframeRef,r=t.editorSrc;return Object(n.createElement)("iframe",{ref:e,title:Object(i.__)("Email Editor","wp-marketing-automations"),src:r,id:"bwf_email_editor_frame",style:{width:"100%",height:"100%"}})},kt=function(t){var e=Object(f.i)(),r=Ot(Object(n.useState)(!1),2),c=r[0],u=r[1],l=Ot(Object(n.useState)(!1),2),p=l[0],b=l[1],h=Ot(Object(n.useState)(!1),2),y=h[0],g=h[1],v=Ot(Object(n.useState)(!1),2),w=v[0],O=v[1],j=Ot(Object(n.useState)({status:!1}),2),_=j[0],E=j[1],k=t.broadcastId,L=t.contentNumber,x=t.openMergeTags,C=t.mailData,P=t.mergeTags,T=t.openLinkTrigger,N=_t.license,A=_t.editor_nonce,I=_t.url,$=U(),M=$.fetchCurrentMailEditorContent,F=$.saveBroadcastContent,G=$.resetSaveContentStatus,B=$.setEmailContentForBlock,D=S(),R=D.getSaveContentStatus(),V=D.getEmailContent(),Y=Ot(Object(n.useState)(!1),2),W=Y[0],z=Y[1];Object(n.useEffect)((function(){W||2!==R&&3!==R||(z(!0),G())}),[R]);var K=Object(n.useCallback)((function(){u(!1),M()}));at(P||[]),Z(C),Q(W),rt(),it(x),ut(K),Object(lt.a)(T),st(K);var H="//app.getautonami.com/get/".concat(N,"/").concat(A,"/").concat(I,"/crm.broadcast.").concat(k,".content.").concat(L),q=Object(n.useRef)();Object(n.useEffect)((function(){c?(F(),document.body.classList.add("bwf-c-modal-open")):(z(!1),document.body.classList.remove("bwf-c-modal-open"))}),[c]);var J=function(){var t,r=(t=ht().mark((function t(){var r,n;return ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=V.editor,!(n=void 0===r?{}:r).hasOwnProperty("design")||Object(m.isEmpty)(n.design)){t.next=12;break}return t.prev=2,g(!0),t.next=6,s()({path:Object(d.A)("/block-migrator"),method:"POST",data:{unlayer_data:n.design,domain:I,key:N}}).then((function(t){if(t.hasOwnProperty("result")){var r=t.result,n=r.status,a=void 0!==n&&n,o=r.block_data,c=void 0===o?{}:o;if(a&&!Object(m.isEmpty)(c)&&c.hasOwnProperty("body")&&""!==c.body&&c.hasOwnProperty("settings")&&!Object(m.isEmpty)(c.settings))B(c),Object(f.k)(gt(gt({},e),{},{editor:"block"}),"/",{});else{if(t.result.hasOwnProperty("license_error"))return g(!1),void O(!0);E({status:!0,error:t.hasOwnProperty("message")&&""!==t.message?t.message:Object(i.__)("Failed to migrate the content. Please try again later.","wp-marketing-automations")})}}else E({status:!0,error:t.hasOwnProperty("message")&&""!==t.message?t.message:Object(i.__)("Failed to migrate the content. Please try again later.","wp-marketing-automations")});g(!1)}));case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),g(!1),E({status:!0,error:t.t0.hasOwnProperty("message")&&""!==t.t0.message?t.t0.message:Object(i.__)("Failed to migrate the content. Please try again later.","wp-marketing-automations")});case 12:case"end":return t.stop()}}),t,null,[[2,8]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){wt(o,n,a,i,c,"next",t)}function c(t){wt(o,n,a,i,c,"throw",t)}i(void 0)}))});return function(){return r.apply(this,arguments)}}(),X=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(n.createElement)(mt.a,{status:"error",className:t?"bwf-m-0 bwf-no-b-radius bwf-w-100p bwf-ptb-5 bwf-unlayer-notice-center":"bwf-mb-16 bwf-mt-0"},Object(n.createElement)("div",{className:"bwf-display-flex"},Object(n.createElement)("div",null,Object(n.createElement)("strong",null,Object(i.__)("Notice","wp-marketing-automations")),": "+Object(i.__)("The legacy visual builder will soon be deprecated. We recommend switching the content to the new email builder.","wp-marketing-automations")+" ",Object(n.createElement)("a",{href:Object(d.eb)("",{utm_campaign:"FKA+Pro+Plugin",utm_medium:"Migrate+Legacy+Email+Builder/"},"https://funnelkit.com/docs/autonami-2/email-builder/migration-from-legacy-email-builder/"),target:"__blank"},Object(n.createElement)("span",{className:"bwf_bold"},Object(i.__)("Learn More","wp-marketing-automations")))),Object(n.createElement)(o.a,{onClick:J,className:"bwf-btn-small is-black bwf-no-wrap",isBusy:y},Object(i.__)("Switch to New Builder","wp-marketing-automations"))))};return Object(n.createElement)(n.Fragment,null,c&&Object(n.createElement)("div",{className:"bwf-c-editor-modal-wrapper",style:{flexDirection:"column"}},X(!0),Object(n.createElement)("div",{className:"bwf-c-editor-modal bwf-c-editor-modal-full-width"},!W&&Object(n.createElement)(Et,null),!!W&&Object(n.createElement)(St,{iframeRef:q,editorSrc:H}))),Object(n.createElement)(n.Fragment,null,X(!1),Object(n.createElement)("div",{className:"bwf-c-editor-button-wrapper"},Object(n.createElement)(ft.a,{icon:"launch-editor",size:40}),Object(n.createElement)("div",{className:"bwf-heading5-new"},Object(i.__)("Visually get email with drop & drop builder.","wp-marketing-automations")),Object(n.createElement)(a.Button,{isTertiary:!0,onClick:function(){Object(d.Zb)()?u(!0):b(!0)}},!Object(d.Zb)()&&d.e,Object(i.__)("Edit","wp-marketing-automations")))),!Object(d.Zb)()&&Object(n.createElement)(dt.b,{isOpen:p,onRequestClose:function(){return b(!1)},modalContent:{isFeature:!0,featureTitle:Object(i.__)("Visual Builder","wp-marketing-automations"),proLink:Object(d.eb)("upgrade",{utm_medium:"Visual+Builder+Upgrade+Modal"})}}),w&&Object(n.createElement)(a.Modal,{title:Object(i.__)("License Invalid","wp-marketing-automations"),onRequestClose:function(){O(!1),u(!1)},className:"bwf-admin-modal bwf-admin-modal-squeezy"},Object(n.createElement)("div",{className:"bwf-p bwf-break-word"},Object(i.__)("Drag and Drop Email Editor requires an active license. Please go to ","wp-marketing-automations"),Object(n.createElement)("span",{className:"bwf_bold"},sprintf(Object(i.__)(" %s > %s ","wp-marketing-automations"),Object(i.__)("Settings","wp-marketing-automations"),Object(i.__)("General","wp-marketing-automations"))),Object(i.__)("and add valid license keys.","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-admin-modal-actions"},Object(n.createElement)(a.Button,{className:"bwf-modal-cancel-btn",onClick:function(){O(!1),u(!1)}},Object(i.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(a.Button,{className:"components-button is-primary",onClick:function(){Object(f.k)({page:"autonami",path:"/settings"},"/",{})}},Object(i.__)("Go To Settings","wp-marketing-automations")))),Object(n.createElement)(pt.a,{modalTitle:Object(i.__)("Migration","wp-marketing-automations"),errorMessage:_.error,onRequestClose:function(){return E({status:!1})},isOpen:_.status}))},Lt=r(202),xt=r(43),Ct=r(6),Pt=r.n(Ct),Tt=r(79),Nt=r(372);function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function It(){It=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),c=new C(n||[]);return a(i,"_invoke",{value:S(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",m="executing",p="completed",b={};function h(){}function y(){}function g(){}var v={};l(v,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,i)&&(v=O);var j=g.prototype=h.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(a,o,i,c){var u=f(t[a],t,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==At(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function S(e,r,n){var a=d;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=f(e,r,n);if("normal"===l.type){if(a=n.done?p:"suspendedYield",l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,b;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(At(e)+" is not iterable")}return y.prototype=g,a(j,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:y,configurable:!0}),y.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},_(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new E(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function $t(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function Mt(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){$t(o,n,a,i,c,"next",t)}function c(t){$t(o,n,a,i,c,"throw",t)}i(void 0)}))}}function Ft(t){return function(t){if(Array.isArray(t))return Dt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Bt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||Bt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(t,e){if(t){if("string"==typeof t)return Dt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dt(t,e):void 0}}function Dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Ut=function(t){var e=t.value,r=void 0===e?"":e,a=t.onUpdate,o=void 0===a?function(){}:a,i=t.label,c=void 0===i?"":i,u=t.placeholder,l=void 0===u?"":u,s=Gt(Object(n.useState)(""),2),f=s[0],p=s[1],b=Object(n.useRef)(null),h=""!==r?r.split(","):[];return Object(n.createElement)(n.Fragment,null,""!==c&&Object(n.createElement)("div",{className:"bwf-add-mail-input-label"},c),Object(n.createElement)("div",{className:"bwf-add-mail-input-wrap",onClick:function(){return b.current.focus()}},function(){if(""!==r)return Object(n.createElement)(n.Fragment,null,h.map((function(t,e){return""!==t.trim()&&Object(n.createElement)("span",{key:e,className:"bwf-search__selected-tag",onClick:function(t){return t.stopPropagation()}},t,Object(n.createElement)("span",{onClick:function(e){e.stopPropagation();var r=Ft(h).filter((function(e){return e!=t}));o(r.join(","))}},Object(n.createElement)(ft.a,{size:16,icon:"cross-circle"})))})))}(),h.length<10&&Object(n.createElement)("input",{type:"text",ref:b,value:f,onChange:function(t){return p(t.target.value)},onKeyDown:function(t){if(["Enter"," "].includes(t.key)&&(t.preventDefault(),Object(d.fc)(f))){var e=Object(m.cloneDeep)(h);e.push(f),o(e.join(",")),p("")}},onBlur:function(t){if(t.preventDefault(),Object(d.fc)(f)){var e=Object(m.cloneDeep)(h);e.push(f),o(e.join(",")),p("")}},autoComplete:"off",placeholder:l})))},Rt=function(t){var e=t.setPreview,r=t.content,c=t.type,u=t.maildata,l=Gt(Object(n.useState)(Object(d.Bb)()),2),f=l[0],p=l[1],b=Gt(Object(n.useState)(!0),2),h=b[0],y=b[1],g=Gt(Object(n.useState)(Object(d.Bb)()),2),v=g[0],w=g[1],O=Gt(Object(n.useState)(""),2),j=O[0],_=O[1],E=Gt(Object(n.useState)(!1),2),k=E[0],L=E[1],x=Gt(Object(n.useState)("desktop"),2),C=x[0],P=x[1],T=U(),N=S().validateCurrentEmail(),A=Object(n.useContext)(d.h),I=T.sendTestEmail;Object(n.useEffect)((function(){$()}),[]);var $=function(){var t=Mt(It().mark((function t(){var e;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=4;break}return p(""),y(!1),t.abrupt("return");case 4:return t.prev=4,e={content:r,type:c},t.next=8,s()({path:Object(d.A)("/broadcast/email-preview"),method:"POST",data:e}).then((function(t){p(t.result.body.replace(/\\/g,"")),y(!1)}));case 8:t.next=12;break;case 10:t.prev=10,t.t0=t.catch(4);case 12:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(){return t.apply(this,arguments)}}(),M=function(){var t=Mt(It().mark((function t(){var e;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(L(!0),r=void 0,r=!1,!Object(m.isEmpty)(v)&&N.content&&N.type&&N.utmMedium&&N.utmSource||(r=!0),r){t.next=7;break}return _(""),t.next=5,I(v,u,"","").then((function(t){setTimeout((function(){L(!1),Object(m.isInteger)(t)&&2===parseInt(t)?A(Object(i.__)("Test mail sent successfully.","wp-marketing-automations")):A(Object(i.__)("Test mail failed to send.","wp-marketing-automations")),Object(d.Kb)(A,3e3)}),1e3)}));case 5:t.next=12;break;case 7:e="",Object(m.isEmpty)(v)&&(e=Object(i.__)("Email is required field.","wp-marketing-automations")),Object(m.isEmpty)(e)&&!N.content&&(e=Object(i.__)("Mail content is required field.","wp-marketing-automations")),_(e),L(!1);case 12:case"end":return t.stop()}var r}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.createElement)(a.Modal,{className:"bwf-admin-modal bwf-admin-modal-no-header bwf-admin-modal-fullscreen bwf-fullsc-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-stretch-header-single"},Object(n.createElement)("div",{className:"bwf-left-section"},Object(n.createElement)("div",{className:"bwf-editable-title"},Object(i.__)("Preview & Test","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwfan-responsive-toggle"},["desktop","mobile"].map((function(t){return Object(n.createElement)(o.a,{key:t,className:Pt()("bwf-responsive-toggle-icon",{"active-screen":C===t}),onClick:function(){void 0!==P&&P(t)},showTooltip:!1,size:20,title:Object(m.capitalize)(t)},Object(n.createElement)(ft.a,{icon:t,size:20,color:C===t?"#353030":"#82838e"}))}))),Object(n.createElement)("div",{className:"bwf-right-section"},Object(n.createElement)("div",{className:"bwf-back-button bwf-display-flex bwf-cursor-pointer",onClick:function(){return e(!1)}},Object(n.createElement)(ft.a,{icon:"cross"})))),Object(n.createElement)("div",{className:"bwf-preview-model-content"},Object(n.createElement)("div",{className:"bwf-preview-model-c-sidebar"},Object(n.createElement)("div",{className:Pt()("bwf-send-test-email",{"bwf-has-error":!!j})},Object(n.createElement)("div",{className:"bwf-send-test-email-header"},Object(i.__)("Send to Test Email","wp-marketing-automations")),Object(n.createElement)(Ut,{value:v,onUpdate:function(t){Object(d.uc)(t),w(t)},label:Object(i.__)("Send email upto 10 email addresses","wp-marketing-automations"),placeholder:Object(i.__)("Type here","wp-marketing-automations")}),""!==j&&Object(n.createElement)("div",{className:"bwf-send-email-err"},j),Object(n.createElement)("div",{className:"bwf-send-test-email-hint"},Object(i.__)("You can add new email addresses by pressing enter or spacebar on your keyboard","wp-marketing-automations")),Object(n.createElement)(o.a,{variant:"primary",className:"bwf-test-email-btn bwf-no-ripple "+(k?"isloading":""),onClick:M},k?Object(n.createElement)(Tt.a,{color:"#ffffff"}):Object(i.__)("Send Email","wp-marketing-automations"))),!h&&Object(n.createElement)(Nt.a,{previewData:f,content:r})),Object(n.createElement)("div",{className:"bwf-preview-model-c-preview"},Object(n.createElement)("div",{className:"bwf-iframe bwf-preview-screen-"+C},h?Object(n.createElement)(R.a,null):Object(n.createElement)("iframe",{srcDoc:f})))))},Vt=r(1126),Yt=r(485),Wt=r(165),Zt=function(t){var e=t.enable,r=t.position,o=t.imageURL,c=t.setData;return Object(n.createElement)("div",{className:"bwf-c-campaign-email"},Object(n.createElement)("div",{className:"bwf_clear_16"}),Object(n.createElement)(a.ToggleControl,{label:Object(i.__)("Enable Image Sending","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:e,onChange:function(t){return c("enable",t)}}),e&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_16"}),Object(n.createElement)(a.RadioControl,{className:"bwfcrm-inline-option",selected:r,label:Object(i.__)("Select Image Position","wp-marketing-automations"),options:[{value:"after",label:Object(i.__)("After","wp-marketing-automations")},{value:"before",label:Object(i.__)("Before","wp-marketing-automations")}],onChange:function(t){return c("position",t)}}),Object(n.createElement)("div",{className:"bwf_clear_16"}),Object(n.createElement)(Wt.a,{image:o?{url:o}:"",onChange:function(t){!Object(m.isNull)(t)&&t.hasOwnProperty("url")?c("imageURL",t.url):c("imageURL","")}})))},zt=r(232),Kt=r(46);function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Jt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?qt(Object(r),!0).forEach((function(e){Qt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Qt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Ht(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ht(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return te(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var ee=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},re=function(){var t=Xt(Object(n.useState)(!1),2),e=t[0],r=t[1],a=Xt(Object(n.useState)(!1),2),o=a[0],i=a[1],c=Object(Kt.a)(Object(d.yb)()).formatAmount,u=Object(n.useCallback)((function(t){var e=document.getElementById("bwf_email_editor_frame");e&&e.contentWindow.postMessage({token:ee.editor_nonce,action:"select_product_for_tool",data:{product:Jt(Jt({},t),{},{formattedPrice:c(t.price)})}},o),r(!1)}),[o]),l=Object(n.useCallback)((function(t){-1!==t.origin.indexOf("app.getautonami.com")&&t.data&&t.data.action&&"select_product_for_tool"===t.data.action&&t.data.token===ee.editor_nonce&&(i(t.origin),r(!0))}),[r]);return Object(n.useEffect)((function(){return window.addEventListener("message",l),function(){return window.removeEventListener("message",l)}}),[]),e&&Object(n.createElement)(zt.a,{onRequestClose:function(){return r(!1)},onProductSelected:u})},ne=r(357),ae=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},oe=function(t,e,r){var a=t.mergeTags,o=(t.enableConditional,S()),u=o.getEmailContent,l=o.getCurrentEmailIndex,s=o.getLastUpdatedTime,f=o.getIsMigrating,p=u(),b=(l(),Object(n.useRef)()),h=Object(n.useRef)(),y=Object(n.useRef)(),g=c.a.getCampaignData(),v=f(),w=g.last_modified,O=void 0===w?"":w,j=s();Object(n.useEffect)((function(){b.current=p,h.current=function(t){var e={group:[],data:{}};for(var r in t){var n=t[r];if(n){var a="";switch(r){case"contact":a={label:Object(i.__)("Contact","wp-marketing-automations"),value:"contact"};break;case"contact_fields":a={label:Object(i.__)("Fields","wp-marketing-automations"),value:"contact_fields"};break;case"general":a={label:Object(i.__)("General","wp-marketing-automations"),value:"general"};break;case"affwp":a={label:Object(i.__)("Affiliate WP","wp-marketing-automations"),value:"affwp"}}e.group.push(a),e.data[r]=n}}return e}(a),y.current=v}),[p,a,v]);var _=ae.license,E=void 0===_?"":_,k=function(t){var r;if(-1!==t.origin.indexOf(e)&&t.data&&t.data.action&&"getEditorContent"===t.data.action){var n,a,o,c=b.current&&b.current.block&&b.current.block.body?b.current.block.body:"",u=b.current&&b.current.block&&b.current.block.settings&&!Object(m.isEmpty)(b.current.block.settings)?b.current.block.settings:{},l=document.getElementById("bwf_block_editor_frame");l&&l.contentWindow.postMessage({token:ae.editor_nonce,action:"editorContent",data:{title:b.current&&b.current.subject?b.current.subject:"",previewText:b.current&&b.current.preheader?b.current.preheader:"",content:c,siteSettings:Object(d.jb)(),last_updated:j||O,editorSettings:u,disableTitleHeader:!1,enableTemplate:!0,enableMergeTags:!Object(m.isEmpty)(h.current),mergeTagData:h.current,enableConditions:!1,enableMediaUpload:!0,blockSupported:[],isWCActive:Object(d.pc)(),isPro:Object(d.Zb)(),proModalData:{heading:Object(i.__)("This is a Pro Feature","wp-marketing-automations"),content:Object(i.__)("We're sorry, this feature is not available on your plan. Please upgrade to the PRO plan to unlock all these awesome features.","wp-marketing-automations"),cta_text:Object(i.__)("Go Pro","wp-marketing-automations"),link:"#"},client_id:"e682ca5385e5cbd92e285aae974f73cf",client_secret:"5ab88daa93c6279318ea6fbaae56ee69",license:(o=E,o?o.split("").filter((function(t,e){return e%2!=0})).reverse().join(""):o),support:(a={},Object(d.pc)()&&(a.wc=[]),a),integrations:{wc:{blocks:[],api:{get_products:Object(d.vb)()+"/wp-json/".concat(d.g,"/bwf-products"),get_product:Object(d.vb)()+"wp-json/".concat(d.g,"/bwf-product")},subscriptions:!!Object(m.get)(bwfcrm_contacts_data,"is_wcs_active",!1)}},apiEndpoints:(n={get_templates:Object(d.vb)()+"/wp-json/".concat(d.g,"/templates/?get_template=true&mode=5"),get_template:Object(d.vb)()+"/wp-json/".concat(d.g,"/template/"),get_layouts:Object(d.vb)()+"/wp-json/".concat(d.g,"/layouts/"),get_pages:Object(d.vb)()+"/wp-json/wp/v2/search"},Object(d.pc)()&&(n.get_wc_coupon=Object(d.vb)()+"/wp-json/".concat(d.g,"/wc-coupons/"),n.get_category=Object(d.vb)()+"/wp-json/".concat(d.g,"/wc-category/")),n),siteDomain:Object(d.vb)(),blockNavigationToolbar:[{name:"merge-tag",title:"Merge Tag",icon:'<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"> <g> <path d="M3.375 4.3125C3.375 3.17341 4.29841 2.25 5.4375 2.25C5.74816 2.25 6 2.50184 6 2.8125C6 3.12316 5.74816 3.375 5.4375 3.375C4.91973 3.375 4.5 3.79473 4.5 4.3125V7.54386C4.5 8.10258 4.27499 8.62185 3.89825 9C4.27499 9.37815 4.5 9.89742 4.5 10.4561V13.6875C4.5 14.2053 4.91973 14.625 5.4375 14.625C5.74816 14.625 6 14.8768 6 15.1875C6 15.4982 5.74816 15.75 5.4375 15.75C4.29841 15.75 3.375 14.8266 3.375 13.6875V10.4561C3.375 10.0526 3.11678 9.69436 2.73396 9.56675L2.63462 9.53363C2.40493 9.45707 2.25 9.24212 2.25 9C2.25 8.75788 2.40493 8.54293 2.63462 8.46637L2.73396 8.43325C3.11678 8.30564 3.375 7.94739 3.375 7.54386V4.3125ZM14.625 4.3125C14.625 3.17341 13.7016 2.25 12.5625 2.25C12.2518 2.25 12 2.50184 12 2.8125C12 3.12316 12.2518 3.375 12.5625 3.375C13.0803 3.375 13.5 3.79473 13.5 4.3125V7.54386C13.5 8.10258 13.725 8.62185 14.1017 9C13.725 9.37815 13.5 9.89742 13.5 10.4561V13.6875C13.5 14.2053 13.0803 14.625 12.5625 14.625C12.2518 14.625 12 14.8768 12 15.1875C12 15.4982 12.2518 15.75 12.5625 15.75C13.7016 15.75 14.625 14.8266 14.625 13.6875V10.4561C14.625 10.0526 14.8832 9.69436 15.266 9.56675L15.3654 9.53363C15.5951 9.45707 15.75 9.24212 15.75 9C15.75 8.75788 15.5951 8.54293 15.3654 8.46637L15.266 8.43325C14.8832 8.30564 14.625 7.94739 14.625 7.54386V4.3125Z" fill="#0073AA"/> </g> </svg>',clickAction:"openMergeTags",visibility:{show:["email-block/heading","email-block/button","email-block/text","email-block/list","email-block/menu"],hide:[]}},{name:"link-trigger",title:"Link Trigger",icon:'<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"> <g> <path d="M8.38495 4.85271C8.17288 5.0012 8.12134 5.29349 8.26983 5.50555C8.40182 5.69405 8.64743 5.75572 8.84932 5.66281L8.92267 5.62067L10.4586 4.54521C11.731 3.65427 13.4847 3.9635 14.3756 5.23589C15.2309 6.45738 14.9802 8.12248 13.833 9.04197L13.685 9.15294L12.149 10.2284C11.937 10.3769 11.8854 10.6692 12.0339 10.8812C12.1659 11.0697 12.4115 11.1314 12.6134 11.0385L12.6868 10.9964L14.2227 9.92089C15.9192 8.73298 16.3315 6.39468 15.1436 4.69816C13.9953 3.05819 11.772 2.61825 10.0926 3.66379L9.92086 3.77725L8.38495 4.85271ZM3.77722 8.07908C2.0807 9.26699 1.66839 11.6053 2.85631 13.3018C4.00463 14.9418 6.22791 15.3817 7.90731 14.3362L8.07904 14.2227L9.61495 13.1473C9.82701 12.9988 9.87855 12.7065 9.73006 12.4944C9.59807 12.3059 9.35246 12.2443 9.15057 12.3372L9.07722 12.3793L7.54131 13.4548C6.26892 14.3457 4.5152 14.0365 3.62426 12.7641C2.76896 11.5426 3.01974 9.8775 4.1669 8.958L4.31494 8.84703L5.85085 7.77158C6.06292 7.62309 6.11446 7.3308 5.96597 7.11874C5.83398 6.93023 5.58837 6.86857 5.38648 6.96148L5.31313 7.00362L3.77722 8.07908ZM11.8029 6.4651L5.65926 10.7669C5.4472 10.9154 5.39566 11.2077 5.54415 11.4198C5.67614 11.6083 5.92175 11.6699 6.12364 11.577L6.19699 11.5349L12.3406 7.23305C12.5527 7.08456 12.6042 6.79228 12.4557 6.58021C12.3238 6.39171 12.0781 6.33004 11.8763 6.42295L11.8029 6.4651L5.65926 10.7669L11.8029 6.4651Z" fill="#0073AA"/> </g> </svg>',clickAction:"openLinkTrigger",visibility:{show:["email-block/heading","email-block/button","email-block/text","email-block/list","email-block/menu"],hide:[]}}],isRTL:Object(d.bc)(),testEmails:Object(d.Bb)(),footer:bwfanParams.bwfan_global_settings.bwfan_email_footer_setting,webFonts:d.Ib,customFonts:d.q,version:d.l,imageSizes:d.Lb,isMigration:null!==(r=y.current)&&void 0!==r&&r}},t.origin)}};return Object(n.useEffect)((function(){return window.addEventListener("message",k),function(){return window.removeEventListener("message",k)}}),[]),!0},ie=function(t,e,r){var a=S().getIsMigrating,o=U().setEmailContentByKey,i=Object(n.useRef)(),c=a();Object(n.useEffect)((function(){i.current=c}),[c]);var u=function(r){-1!==r.origin.indexOf(e)&&r.data&&r.data.action&&"closeEditor"===r.data.action&&r.data.data&&(i.current&&o("type","editor"),t&&t())};return Object(n.useEffect)((function(){return window.addEventListener("message",u),function(){return window.removeEventListener("message",u)}}),[]),!0};function ce(t){return function(t){if(Array.isArray(t))return se(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||le(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||le(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(t,e){if(t){if("string"==typeof t)return se(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?se(t,e):void 0}}function se(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var fe=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},de=function(t,e,r,a){var o=U().saveBroadcastContent,i=S(),c=i.getSaveContentStatus,u=i.getEmailsToSubmit,l=i.getCurrentEmailIndex,s=c(),f=u(),d=l(),p=Object(n.useRef)(f),b=Object(n.useRef)(d);Object(n.useEffect)((function(){p.current=f,b.current=d}),[f,d]);var h=ue(Object(n.useState)(a),2),y=h[0],g=h[1],v=function(t){if(-1!==t.origin.indexOf(r)&&t.data&&t.data.action&&"saveEditorContent"===t.data.action&&t.data.data){var e=t.data.data,n=e.block,a=void 0===n?{}:n,i=e.subject,c=void 0===i?"":i,u=e.preheader,l=void 0===u?"":u;if(!Object(m.isEmpty)(a)||!Object(m.isEmpty)(c)){g(t.origin);var s=ce(p.current);Object(m.isEmpty)(a)||(s[d].block=a),a.hasOwnProperty("template")&&(s[d].body=a.template),""!==c&&(s[d].subject=c),""!==l&&(s[d].preheader=l),o(s,!0)}}};return Object(n.useEffect)((function(){return window.addEventListener("message",v),function(){return window.removeEventListener("message",v)}}),[]),Object(n.useEffect)((function(){if(s&&1!==s&&t&&!e){var r=2===s,n=document.getElementById("bwf_block_editor_frame");n&&n.contentWindow.postMessage({token:fe.editor_nonce,action:"contentSaved",isSaved:r},y)}}),[s]),!0};function me(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return pe(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pe(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var be=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},he=function(t,e,r){var a=U().sendTestEmail,o=(0,S().getSendTestEmailStatus)(),i=me(Object(n.useState)(r),2),c=i[0],u=i[1],l=Object(n.useRef)();Object(n.useEffect)((function(){l.current=t}),[t]);var s=function(t){if(-1!==t.origin.indexOf(e)&&t.data&&t.data.action&&"sendTestMail"===t.data.action&&t.data.data){var r=t.data.data,n=r.email,o=r.body;if(n&&o){var i=l.current&&l.current.subject?l.current.subject:"";u(t.origin),a(n,l.current,i,o)}}};return Object(n.useEffect)((function(){return window.addEventListener("message",s),function(){return window.removeEventListener("message",s)}}),[]),Object(n.useEffect)((function(){if(o&&1!==o){var t=2===o,e=document.getElementById("bwf_block_editor_frame");e&&e.contentWindow.postMessage({token:be.editor_nonce,action:"testMessageConfirmation",isSent:t},c)}}),[o]),!0};function ye(t){return function(t){if(Array.isArray(t))return we(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ve(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||ve(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(t,e){if(t){if("string"==typeof t)return we(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?we(t,e):void 0}}function we(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings&&bwfcrm_contacts_data.editor_settings;var Oe=function(t,e,r,a,o,i){var c=U().saveBroadcastContent,u=S(),l=u.getSaveContentStatus,s=u.getEmailsToSubmit,f=u.getCurrentEmailIndex,d=l(),p=s(),b=f(),h=Object(n.useRef)(p),y=Object(n.useRef)(b);Object(n.useEffect)((function(){h.current=p,y.current=b}),[p,b]);var g=ge(Object(n.useState)(o),2),v=(g[0],g[1]),w=function(t){if(-1!==t.origin.indexOf(a)&&t.data&&t.data.action&&"importTemplate"===t.data.action&&t.data.data){var e=t.data.data,n=e.block,o=void 0===n?{}:n,i=e.subject,u=void 0===i?"":i,l=e.preheader,s=void 0===l?"":l;e.utmEnable,e.utm;if(!Object(m.isEmpty)(o)||!Object(m.isEmpty)(u)){v(t.origin),v(t.origin);var f=ye(h.current);f[b].block=o,""!==u&&(f[b].subject=u,f[b].preheader=s),r(!0),c(f)}}};return Object(n.useEffect)((function(){return window.addEventListener("message",w),function(){return window.removeEventListener("message",w)}}),[]),Object(n.useEffect)((function(){d&&1!==d&&t&&e&&(r(!0),document.getElementById("bwf_block_editor_frame").src=i,setTimeout((function(){r(!1)}),2e3))}),[d]),!0};function je(t){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _e(){_e=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),c=new C(n||[]);return a(i,"_invoke",{value:S(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",m="executing",p="completed",b={};function h(){}function y(){}function g(){}var v={};l(v,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,i)&&(v=O);var j=g.prototype=h.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(a,o,i,c){var u=f(t[a],t,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==je(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function S(e,r,n){var a=d;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=f(e,r,n);if("normal"===l.type){if(a=n.done?p:"suspendedYield",l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,b;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(je(e)+" is not iterable")}return y.prototype=g,a(j,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:y,configurable:!0}),y.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},_(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new E(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function Ee(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}var Se=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},ke=function(t,e){var r=Object(n.useRef)(""),a=function(t,e){var n=document.getElementById("bwf_block_editor_frame");n&&n.contentWindow.postMessage({token:Se.editor_nonce,action:"layoutSaved",isSaved:t,id:e},r.current)},o=function(){var e,n=(e=_e().mark((function e(n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==n.origin.indexOf(t)&&n.data&&n.data.action&&"saveLayout"===n.data.action&&n.data.data){e.next=2;break}return e.abrupt("return");case 2:return r.current=n.origin,e.prev=3,e.next=6,s()({path:Object(d.A)("/layout"),method:"POST",data:n.data.data}).then((function(t){200===t.code&&t.result&&t.result.id?a(!0,t.result.id):a(!1)}));case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:case"end":return e.stop()}}),e,null,[[3,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(t){Ee(o,n,a,i,c,"next",t)}function c(t){Ee(o,n,a,i,c,"throw",t)}i(void 0)}))});return function(t){return n.apply(this,arguments)}}();return Object(n.useEffect)((function(){return window.addEventListener("message",o),r.current=e,function(){return window.removeEventListener("message",o)}}),[]),!0};function Le(t){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xe(){xe=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),c=new C(n||[]);return a(i,"_invoke",{value:S(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",m="executing",p="completed",b={};function h(){}function y(){}function g(){}var v={};l(v,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,i)&&(v=O);var j=g.prototype=h.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(a,o,i,c){var u=f(t[a],t,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Le(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function S(e,r,n){var a=d;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=f(e,r,n);if("normal"===l.type){if(a=n.done?p:"suspendedYield",l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,b;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Le(e)+" is not iterable")}return y.prototype=g,a(j,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:y,configurable:!0}),y.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},_(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new E(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function Ce(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}var Pe=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},Te=function(t,e){var r=Object(n.useRef)(""),a=function(t,e){var n=document.getElementById("bwf_block_editor_frame");n&&n.contentWindow.postMessage({token:Pe.editor_nonce,action:"layoutDeleted",isDeleted:t,id:e},r.current)},o=function(){var e,n=(e=xe().mark((function e(n){var o;return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==n.origin.indexOf(t)&&n.data&&n.data.action&&"deleteLayout"===n.data.action&&n.data.data){e.next=2;break}return e.abrupt("return");case 2:return o=n.data.data.id,r.current=n.origin,e.prev=4,e.next=7,s()({path:Object(d.A)("/layout/".concat(parseInt(o))),method:"POST"}).then((function(t){200===t.code?a(!0,o):a(!1,o)}));case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(4);case 11:case"end":return e.stop()}}),e,null,[[4,9]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(t){Ce(o,n,a,i,c,"next",t)}function c(t){Ce(o,n,a,i,c,"throw",t)}i(void 0)}))});return function(t){return n.apply(this,arguments)}}();return Object(n.useEffect)((function(){return window.addEventListener("message",o),r.current=e,function(){return window.removeEventListener("message",o)}}),[]),!0};function Ne(t){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ae(){Ae=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),c=new C(n||[]);return a(i,"_invoke",{value:S(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",m="executing",p="completed",b={};function h(){}function y(){}function g(){}var v={};l(v,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,i)&&(v=O);var j=g.prototype=h.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(a,o,i,c){var u=f(t[a],t,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Ne(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function S(e,r,n){var a=d;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=f(e,r,n);if("normal"===l.type){if(a=n.done?p:"suspendedYield",l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,b;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Ne(e)+" is not iterable")}return y.prototype=g,a(j,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:y,configurable:!0}),y.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},_(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new E(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function Ie(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function $e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Me(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Me(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Fe=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},Ge=function(t,e){var r=$e(Object(n.useState)(e),2),a=r[0],o=r[1],i=function(t){var e=document.getElementById("bwf_block_editor_frame");e&&e.contentWindow.postMessage({token:Fe.editor_nonce,action:"templateData",data:t},a)},c=function(){var e,r=(e=Ae().mark((function e(r){return Ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==r.origin.indexOf(t)&&r.data&&r.data.action&&"getTemplates"===r.data.action&&r.data.data){e.next=2;break}return e.abrupt("return");case 2:return o(r.origin),e.prev=3,e.next=6,fetch(Object(d.vb)()+"/wp-json/".concat(d.g,"/templates/?get_template=true")).then((function(t){i(t||[])}));case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:case"end":return e.stop()}}),e,null,[[3,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(t){Ie(o,n,a,i,c,"next",t)}function c(t){Ie(o,n,a,i,c,"throw",t)}i(void 0)}))});return function(t){return r.apply(this,arguments)}}();return Object(n.useEffect)((function(){return window.addEventListener("message",c),function(){return window.removeEventListener("message",c)}}),[]),!0};function Be(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return De(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?De(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Ue=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},Re=function(t,e){var r=Be(Object(n.useState)(e),2),a=r[0],o=r[1],c=function(e){-1!==e.origin.indexOf(t)&&e.data&&e.data.action&&"openMediaUpload"===e.data.action&&e.data.data&&(o(e.origin),b())},u=Object(n.useRef)(),l=Be(Object(n.useState)(""),2),s=l[0],f=l[1],d=Be(Object(n.useState)(!1),2),m=d[0],p=d[1],b=function(){return wp&&wp.media?u.current?(p(!1),void u.current.open()):(u.current=wp.media({title:Object(i.__)("Select or Upload Media","wp-marketing-automations"),button:{text:Object(i.__)("Select Image","wp-marketing-automations")},multiple:!1}),u.current.on("open",(function(){f("")})),u.current.on("select",(function(){var t=u.current.state().get("selection").first().toJSON();f(t.url)})),u.current.on("close",(function(){p(!0)})),void u.current.open()):""};return Object(n.useEffect)((function(){return window.addEventListener("message",c),function(){return window.removeEventListener("message",c)}}),[]),Object(n.useEffect)((function(){if(s){var t=document.getElementById("bwf_block_editor_frame");t&&t.contentWindow.postMessage({token:Ue.editor_nonce,action:"mediaUploadDone",data:{isUploaded:!0,imageURL:s}},a)}}),[s]),Object(n.useEffect)((function(){var t=document.getElementById("bwf_block_editor_frame");t&&t.contentWindow.postMessage({token:Ue.editor_nonce,action:"mediaUploadClose",data:{isUploaded:!1}},a)}),[m]),!0},Ve=(bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings&&bwfcrm_contacts_data.editor_settings,function(t,e,r){var a=function(r){-1!==r.origin.indexOf(e)&&r.data&&r.data.action&&"openMergeTags"===r.data.action&&r.data.data&&t&&t(!0)};return Object(n.useEffect)((function(){return window.addEventListener("message",a),function(){return window.removeEventListener("message",a)}}),[]),!0}),Ye=(bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings&&bwfcrm_contacts_data.editor_settings,function(t,e,r){var a=function(r){-1!==r.origin.indexOf(e)&&r.data&&r.data.action&&"openLinkTrigger"===r.data.action&&r.data.data&&t&&t(!0)};return Object(n.useEffect)((function(){return window.addEventListener("message",a),function(){return window.removeEventListener("message",a)}}),[]),!0});function We(t){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ze(){Ze=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),c=new C(n||[]);return a(i,"_invoke",{value:S(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",m="executing",p="completed",b={};function h(){}function y(){}function g(){}var v={};l(v,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,i)&&(v=O);var j=g.prototype=h.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(a,o,i,c){var u=f(t[a],t,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==We(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function S(e,r,n){var a=d;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=f(e,r,n);if("normal"===l.type){if(a=n.done?p:"suspendedYield",l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,b;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(We(e)+" is not iterable")}return y.prototype=g,a(j,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:y,configurable:!0}),y.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},_(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new E(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function ze(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function Ke(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return He(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?He(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var qe=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},Je=function(t,e){var r=Ke(Object(n.useState)(e),2),a=r[0],o=r[1],i=function(t){var e=document.getElementById("bwf_block_editor_frame");e&&e.contentWindow.postMessage({token:qe.editor_nonce,action:"layoutData",data:t},a)},c=function(){var e,r=(e=Ze().mark((function e(r){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==r.origin.indexOf(t)&&r.data&&r.data.action&&"getLayouts"===r.data.action&&r.data.data){e.next=2;break}return e.abrupt("return");case 2:return o(r.origin),e.prev=3,e.next=6,fetch(Object(d.vb)()+"/wp-json/autonami-app/layouts/").then((function(t){return t.json()})).then((function(t){t.hasOwnProperty("result")?i(t.result):i([])}));case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:case"end":return e.stop()}}),e,null,[[3,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(t){ze(o,n,a,i,c,"next",t)}function c(t){ze(o,n,a,i,c,"throw",t)}i(void 0)}))});return function(t){return r.apply(this,arguments)}}();return Object(n.useEffect)((function(){return window.addEventListener("message",c),function(){return window.removeEventListener("message",c)}}),[]),!0},Qe=(bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings&&bwfcrm_contacts_data.editor_settings,function(t,e,r,a,o){var i=function(n){-1!==n.origin.indexOf(a)&&n.data&&n.data.action&&"openConditionalModal"===n.data.action&&n.data.data&&(r&&r(n.data.data),e&&e(n.origin),t&&t(!0))};return Object(n.useEffect)((function(){return window.addEventListener("message",i),function(){return window.removeEventListener("message",i)}}),[]),!0}),Xe=function(t){var e=function(){t&&t()};return Object(n.useEffect)((function(){return window.history.pushState(null,null,window.location.href),window.addEventListener("popstate",e),function(){return window.removeEventListener("popstate",e)}}),[]),!0},tr=r(306),er=r.n(tr),rr=r(319),nr=r(482),ar=function(t,e,r,a){var o=function(n){-1!==n.origin.indexOf(r)&&n.data&&n.data.action&&"openSiteSettings"===n.data.action&&n.data.data&&(t&&t(!0),e&&e(n.origin))};return Object(n.useEffect)((function(){return window.addEventListener("message",o),function(){return window.removeEventListener("message",o)}}),[]),!0};function or(){return(or=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(null,arguments)}function ir(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return cr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cr(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var ur=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings?bwfcrm_contacts_data.editor_settings:{},lr=function(){return Object(n.createElement)("div",{className:"bwf-c-save-content-loading"},Object(n.createElement)(er.a,{options:{loop:!0,autoplay:!0,animationData:rr,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}},height:480,width:480}),Object(n.createElement)("div",{style:{marginTop:"-60px",fontSize:"21px",fontWeight:"400",paddingLeft:"40px"}},Object(i.__)("Launching Editor","wp-marketing-automations")))},sr=function(t){var e=t.iframeRef,r=t.editorSrc,a=t.isImport;return Object(n.createElement)("iframe",{ref:e,title:Object(i.__)("Block Editor","wp-marketing-automations"),src:r,id:"bwf_block_editor_frame",style:{width:"100%",height:"100%",display:a?"none":"block"}})},fr=function(){return Object(n.createElement)("div",{className:"bwf-c-save-content-loading"},Object(n.createElement)(er.a,{options:{loop:!0,autoplay:!0,animationData:rr,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}},height:480,width:480}),Object(n.createElement)("div",{style:{marginTop:"-60px",fontSize:"21px",fontWeight:"400",paddingLeft:"40px"}},Object(i.__)("Importing Template","wp-marketing-automations")))},dr=function(t){var e=Object(f.i)(),r=(t.broadcastId,t.contentNumber,t.openMergeTags),a=t.mailData,o=t.mergeTags,i=t.openLinkTrigger,c=t.setOpen,u=t.setConditionalModal,l=t.setConditionalEventOrigin,s=t.setConditionalData,p=t.enableConditional,b=t.openSiteSettings,h=t.setSiteSettingsEventOrigin,y=(ur.license,ur.editor_nonce,ur.url,U()),g=y.fetchCurrentMailEditorContent,v=y.saveBroadcastContent,w=y.resetSaveContentStatus,O=S(),j=O.getSaveContentStatus(),_=(O.getDisableSaveValue(),ir(Object(n.useState)(!1),2)),E=_[0],k=_[1],L=ir(Object(n.useState)(!1),2),x=L[0],C=L[1];Object(n.useEffect)((function(){E||2!==j&&3!==j||(k(!0),w())}),[j]);var P=Object(n.useCallback)((function(){if(e.hasOwnProperty("editor")){var t=Object(m.cloneDeep)(e);delete t.editor,Object(f.k)(t,"/",{})}c(!1),g()})),T=Object(d.R)(),N=T.iframeOrigin,A=T.iframeURL,I=T.editorSrc;oe({mergeTags:o||[],enableConditional:p},N,A),de(E,x,N,A),ie(P,N,A),he(a,N,A),Oe(E,x,C,N,A,I),ke(N,A),Te(N,A),Ge(N,A),Je(N,A),Ve(r,N,A),Ye(i,N,A),ar(b,h,N,A),Re(N,A),Qe(u,l,s,N,A),Xe(P),Object(nr.a)(N,A);var $=Object(n.useRef)();return Object(n.useEffect)((function(){return v(),document.body.classList.add("bwf-c-modal-open"),k(!1),function(){document.body.classList.remove("bwf-c-modal-open")}}),[]),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-editor-modal-wrapper"},Object(n.createElement)("div",{className:"bwf-c-editor-modal bwf-c-editor-modal-full-width"},!E&&Object(n.createElement)(lr,null),x&&Object(n.createElement)(fr,null),!!E&&Object(n.createElement)(sr,{iframeRef:$,editorSrc:I,isImport:x}))))},mr=function(t){var e=Object(f.i)().editor,r=void 0===e?"":e,o=ir(Object(n.useState)(!1),2),c=o[0],u=o[1],l=ir(Object(n.useState)(!1),2),s=l[0],m=l[1],p=(0,S().getDisableSaveValue)();return Object(n.useEffect)((function(){("block"===r||p)&&u(!0)}),[]),c?Object(n.createElement)(dr,or({},t,{setOpen:u})):Object(n.createElement)("div",{className:"bwf-c-editor-button-wrapper"},Object(n.createElement)(ft.a,{icon:"launch-editor",size:40}),Object(n.createElement)("div",{className:"bwf-heading5-new"},Object(i.__)("Utilize our drag & drop builder to craft elegant email templates including WooCommerce Blocks.","wp-marketing-automations")),Object(n.createElement)(a.Button,{isTertiary:!0,onClick:function(){Object(d.Zb)()?u(!0):m(!0)}},!Object(d.Zb)()&&d.e,Object(i.__)("Edit","wp-marketing-automations")),!Object(d.Zb)()&&Object(n.createElement)(dt.b,{isOpen:s,onRequestClose:function(){return m(!1)},modalContent:{isFeature:!0,featureTitle:Object(i.__)("New Visual Builder","wp-marketing-automations"),proLink:Object(d.eb)("upgrade",{utm_medium:"New+Visual+Builder+Upgrade+Modal"})}}))},pr=r(527),br=r(40),hr=r(503),yr=r(186);function gr(t){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vr(){vr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),c=new C(n||[]);return a(i,"_invoke",{value:S(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",m="executing",p="completed",b={};function h(){}function y(){}function g(){}var v={};l(v,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,i)&&(v=O);var j=g.prototype=h.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(a,o,i,c){var u=f(t[a],t,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==gr(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function S(e,r,n){var a=d;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=f(e,r,n);if("normal"===l.type){if(a=n.done?p:"suspendedYield",l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,b;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(gr(e)+" is not iterable")}return y.prototype=g,a(j,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:y,configurable:!0}),y.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},_(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new E(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function wr(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function Or(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function jr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Or(Object(r),!0).forEach((function(e){_r(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Or(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _r(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=gr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Er(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Sr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sr(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var kr=Object(d.zb)(),Lr=[{label:Object(i.__)("Visual Builder","wp-marketing-automations"),value:"block",className:"bwf-display-flex bwf-campaign-template-type"},{label:Object(i.__)("Rich Text","wp-marketing-automations"),value:"rich",className:"bwf-display-flex bwf-campaign-template-type "},kr.includes("wc")&&{label:Object(i.__)("WooCommerce","wp-marketing-automations"),value:"wc",className:"bwf-display-flex bwf-campaign-template-type "},{label:Object(i.__)("Raw HTML","wp-marketing-automations"),value:"html",className:"bwf-display-flex bwf-campaign-template-type"},Object(d.ec)()&&{label:Object(i.__)("Visual Builder (Legacy)","wp-marketing-automations"),value:"editor",className:"bwf-display-flex bwf-campaign-template-type"}].filter(Boolean),xr=function(t){var e=t.maildata,r=t.setTemplateModal,o=c.a.getCampaignData(),u=parseInt(o.type),l=Object(d.I)(),s=U(),f=s.setEmailContentByKey,h=s.setEmailUtmByKey,y=s.setMultipleUtm,g=s.resetSendTestEmailStatus,v=s.sendTestEmail,w=Er(Object(n.useState)(!1),2),O=w[0],j=w[1],_=Er(Object(n.useState)(""),2),E=_[0],k=_[1],L=Er(Object(n.useState)(!1),2),x=L[0],C=L[1],P=S(),T=P.getEmailContent()?P.getEmailContent():{},N=Object(n.useRef)(null);Object(n.useLayoutEffect)((function(){N.current=T}),[]);var A=Object(n.useMemo)((function(){return null===N.current||JSON.stringify(N.current)===JSON.stringify(T)}),[T]),I=P.getIsMigrating(),$=Er(Object(n.useState)(!1),2),M=$[0],F=$[1],G="utm"in T?T.utm:{},B=Er(Object(n.useState)(!1),2),D=B[0],R=B[1],V=Er(Object(n.useState)(""),2),Y=V[0],W=V[1],Z=Er(Object(n.useState)([]),2),z=Z[0],K=Z[1],H="subject"in T?T.subject:"",q="preheader"in T?T.preheader:"",J="type"in T?T.type:"block",Q="utmEnabled"in T&&T.utmEnabled,X=Er(Object(n.useState)({message:"",type:1}),2),tt=X[0],et=X[1],rt="whatsAppImage"in T&&T.whatsAppImage,nt="whatsAppImageSetting"in T?T.whatsAppImageSetting:{},at="position"in nt?nt.position:"after",ot="imageURL"in nt?nt.imageURL:"",it="source"in G?G.source:"",ct="medium"in G?G.medium:"",ut="name"in G?G.name:"",lt="content"in G?G.content:"",st="term"in G?G.term:"",mt=Er(Object(n.useState)(!1),2),pt=mt[0],bt=mt[1],ht=P.getShowValidationFlag(),yt=Er(Object(n.useState)(!1),2),gt=yt[0],vt=yt[1],wt=Er(Object(n.useState)("content"),2),Ot=wt[0],jt=wt[1],_t=Er(Object(n.useState)([]),2),Et=_t[0],St=_t[1],Ct=Er(Object(n.useState)(!1),2),Tt=Ct[0],Nt=Ct[1],At=Er(Object(n.useState)(!1),2),It=At[0],$t=At[1],Mt=Er(Object(n.useState)(""),2),Ft=Mt[0],Gt=Mt[1],Bt=P.getCurrentEmailIndex(),Dt=T&&T.body?T.body:"",Ut="editor"in T?T.editor:{},Wt=Ut&&Ut.body?Ut.body:"",zt="editor"===J?Wt:Dt,Kt="<p>Hi {{contact_first_name}},</p><p></p>"+bwfanParams.bwfan_global_settings.bwfan_email_footer_setting;Object(n.useEffect)((function(){Object(m.isEmpty)(Dt)&&f("body",1==u?Kt:"Hi {{contact_first_name}},")}),[Dt]);var Ht=Q?jr(jr({},e),{},{utmName:ut,utmMedium:ct,utmContent:lt,utmSource:it,utmTerm:st}):e;Object(n.useEffect)((function(){if(Q){var t={};!it&&(t.source=Object(d.r)("source")),!ct&&(t.medium=l[u].label),!ut&&(t.name=Object(m.trim)(o.title).replace(/\s/g,"+")),y(t)}}),[Q]);var qt=P.validateCurrentEmail(),Jt={1:Object(i.__)("Place your HTML here","wp-marketing-automations"),2:Object(i.__)("Enter the SMS Body","wp-marketing-automations"),3:Object(i.__)("Place your message here","wp-marketing-automations")},Qt=function(){return"editor"==T.type?T.hasOwnProperty("editor")&&T.editor.hasOwnProperty("body")?T.editor.body:"":T.body},Xt=P.getSendTestEmailStatus();Object(n.useEffect)((function(){null!==Xt&&setTimeout((function(){g(),et({message:"",type:1})}),2e3),2===Xt&&et({message:1==u?Object(i.__)("Test email sent","wp-marketing-automations"):Object(i.__)("Test message sent","wp-marketing-automations"),type:1}),3===Xt&&et({message:1==u?Object(i.__)("Unable to send mail","wp-marketing-automations"):Object(i.__)("Unable to send message","wp-marketing-automations"),type:1})}),[Xt]);var te=ht&&!qt.subject?" bwf-field-error":"",ee=ht&&!qt.content?" bwf-field-error-textarea":"",ae=ht&&!qt.utmSource?" bwf-field-error":"",oe=ht&&!qt.utmMedium?" bwf-field-error":"",ie=Object(n.useMemo)((function(){return Lr.map((function(t){return!("editor"!==J&&"editor"===t.value&&!I)&&t})).filter(Boolean)}),[I,A,Bt]);return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-campaign-body"},1===u&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(yr.a,{value:H,onChange:function(t){return f("subject",t)},onButtonClick:function(){vt(!0),jt("subject")},buttonText:Object(n.createElement)(ft.a,{size:28,icon:"merge-tag"}),label:Object(i.__)("Subject","wp-marketing-automations"),placeholder:Object(i.__)("Enter subject","wp-marketing-automations"),className:"bwf-field-m0"+te}),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",{className:"bwf-campaign-mail-headers-wrap"},Object(n.createElement)(yr.a,{value:q,placeholder:Object(i.__)("Enter preview text","wp-marketing-automations"),onButtonClick:function(){vt(!0),jt("preheader")},buttonText:Object(n.createElement)(ft.a,{size:28,icon:"merge-tag"}),label:Object(i.__)("Preview Text","wp-marketing-automations"),onChange:function(t){return f("preheader",t)}})),Object(n.createElement)("div",{className:"bwf_clear_16"}),Object(n.createElement)("div",{className:"bwf-heading7-new bwf-mb-8"},Object(i.__)("Template Type","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-select-template-type"},ie.map((function(t){return Object(n.createElement)("label",{key:t.value,className:Pt()("components-radio-control__option",{"is-selected":J===t.value})},Object(n.createElement)("input",{type:"radio",className:"components-radio-control__input",value:t.value,onChange:function(){s.showValidation(!1),f("type",t.value)},checked:J===t.value&&"checked"}),Object(n.createElement)("span",null,t.label),"block"===t.value&&Object(n.createElement)("span",{className:"bwf-tags bwf-tag-green"},Object(i.__)("New","wp-marketing-automations")))}))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(n.Fragment,null,Object(n.createElement)(a.Flex,null,Object(n.createElement)(a.FlexBlock,null,Object(n.createElement)(a.Flex,{gap:3,justify:"flex-start"},!["editor","block"].includes(J)&&Object(n.createElement)(a.FlexItem,null,Object(n.createElement)(a.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray btn-svg-none is-light",onClick:function(){if(Object(d.Zb)())return jt("content"),void vt(!0);F(!0)}},Object(n.createElement)(ft.a,{icon:Object(d.Zb)()?"merge-tag":"king",size:16}),Object(i.__)("Merge Tags","wp-marketing-automations"))),Object(n.createElement)(a.FlexItem,null,Object(n.createElement)("div",null,Object(n.createElement)(ne.a,{canCreate:!0,isLinkTriggerOpen:Tt,onClose:function(){return Nt(!1)},setLinkTriggerOpen:function(t){Object(d.Zb)()?Nt(t):F(!0)},modelOpenContent:Object(n.createElement)(a.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray btn-svg-none is-light"},Object(n.createElement)(ft.a,{icon:Object(d.Zb)()?"link-trigger":"king",size:16}),Object(i.__)("Link Triggers","wp-marketing-automations")),hideButton:["editor","block"].includes(J)}))))),Object(n.createElement)(a.FlexItem,null,Object(n.createElement)(a.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray is-light",onClick:function(){Object(d.Zb)()?r(!0):F(!0)}},Object(n.createElement)(ft.a,{icon:Object(d.Zb)()?"templates":"king",size:16}),Object(i.__)("Templates","wp-marketing-automations"))))),Object(n.createElement)("div",{className:"bwf_clear_24"})),Object(n.createElement)("div",{className:ee},1===u&&("rich"===J||"wc"===J)&&Object(n.createElement)(b.a,{content:zt,keyid:"bwf-campaign-email-editor",setContent:function(t){return f("body",t)}}),("html"===J||2===u||3===u)&&Object(n.createElement)(a.TextareaControl,{value:zt,onChange:function(t){return f("body",t)},label:2===u||3===u?Object(i.__)("Message","wp-marketing-automations"):"",placeholder:Jt[u],rows:[2,3].includes(u)?5:24,className:"bwf-email-raw-html"}),1===u&&"editor"===J&&Object(n.createElement)(kt,{broadcastId:o.id,contentNumber:parseInt(Bt),openMergeTags:function(){return vt(!0)},mailData:Ht,mergeTags:Et,openLinkTrigger:Nt}),1===u&&"block"===J&&Object(n.createElement)(mr,{objectId:"emialblock",contentNumber:parseInt(Bt),openMergeTags:function(){return vt(!0)},mailData:e,mergeTags:Et,openLinkTrigger:Nt,enableConditional:!!Object(d.Zb)(),setConditionalModal:R,setConditionalEventOrigin:W,setConditionalData:K,openSiteSettings:$t,setSiteSettingsEventOrigin:Gt})),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(a.Flex,null,Object(n.createElement)(a.FlexItem,null,Object(n.createElement)("div",{className:"bwf-display-flex gap-12"},1==u&&Object(n.createElement)(Yt.a,{templateData:T,type:1,checkIfValid:function(){return!!qt.subject||(s.showValidation(!0),!1)}}),1!=u&&Object(n.createElement)("div",null,Object(n.createElement)(a.Button,{isTertiary:!0,className:"bwf-btn-grey bwf-btn-small",onClick:function(){j(!0)}},Object(i.__)("Send Test Message","wp-marketing-automations")),O&&Object(n.createElement)(br.a,{className:"bwf-campaign-test-mail-popup",onFocusOutside:function(){j(!1)},onClick:function(t){return t.stopPropagation()},focusOnMount:"no-focus"},Object(n.createElement)("div",{className:"bwf-campaign-test-mail-wrap"},Object(n.createElement)("div",{className:"bwf-p",style:{marginBottom:"16px"}},Object(n.createElement)(a.TextControl,{value:E,onChange:function(t){return k(t)},placeholder:Object(i.__)("Enter phone no.","wp-marketing-automations")})),Object(n.createElement)(a.Button,{isPrimary:!0,isBusy:x,onClick:function(){var t,e=(t=vr().mark((function t(e){var r;return vr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),C(!0),n=void 0,n=!1,!(Object(m.isEmpty)(E)||![2,3].includes(u)&&!Object(d.fc)(E)||[2,3].includes(u)&&!Object(Vt.a)(E))&&qt.content&&qt.type&&qt.utmMedium&&qt.utmSource||(n=!0),n){t.next=7;break}return t.next=5,v(E,Ht,"","").then((function(){setTimeout((function(){C(!1),j(!1)}),1e3)}));case 5:t.next=13;break;case 7:r="",Object(m.isEmpty)(E)&&[2,3].includes(u)&&(r=Object(i.__)("Phone is required field.","wp-marketing-automations")),Object(m.isEmpty)(r)&&[2,3].includes(u)&&(Object(Vt.a)(E)||(r=Object(i.__)("Entered phone is not valid.","wp-marketing-automations"))),Object(m.isEmpty)(r)&&!qt.content&&(r=Object(i.__)("Content is required field.","wp-marketing-automations")),et({message:r,type:2}),C(!1);case 13:case"end":return t.stop()}var n}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){wr(o,n,a,i,c,"next",t)}function c(t){wr(o,n,a,i,c,"throw",t)}i(void 0)}))});return function(t){return e.apply(this,arguments)}}()},Object(i.__)("Send","wp-marketing-automations"))))),1==u&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(a.Button,{isTertiary:!0,className:"bwf-btn-grey bwf-btn-small",onClick:function(){Object(m.isEmpty)(Qt())?et({message:Object(i.__)("No content available for preview.","wp-marketing-automations"),status:2}):bt(!0)}},Object(i.__)("Preview and Test","wp-marketing-automations")),pt&&Object(n.createElement)(Rt,{setPreview:bt,content:Qt(),type:J,maildata:e})))),Object(n.createElement)(a.FlexItem,null,!(1===u&&["editor","block"].includes(J))&&3!==u&&Object(n.createElement)(a.Button,{isTertiary:!0,className:"bwf-btn-grey bwf-btn-small",onClick:function(t){t.preventDefault(),jt("content");var e=2===u?bwfanParams.bwfan_global_settings.bwfan_sms_unsubscribe_text:bwfanParams.bwfan_global_settings.bwfan_email_footer_setting;f("body","".concat(zt||""," \n").concat(e))}},Object(i.__)("Add Unsubscribe Text","wp-marketing-automations")))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(xt.a,{checked:Q,label:Object(i.__)("Automatically append UTM parameters to email links","wp-marketing-automations"),className:"bwf-crm-campaign-third-step-utm",onChange:function(t){return f("utmEnabled",t)}}),Q&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",{className:"bwf-campaign-utm-section"},Object(n.createElement)(a.TextControl,{value:it,onChange:function(t){return h("source",t.replace(/\s/g,"+"))},label:Object(i.__)("Campaign Source","wp-marketing-automations"),placeholder:Object(i.__)("Enter UTM source","wp-marketing-automations"),help:Object(i.__)("Referrer: (e.g., google, newsletter)","wp-marketing-automations"),className:"bwf-field-comp-label-content"+ae}),Object(n.createElement)(a.TextControl,{value:ct,onChange:function(t){return h("medium",t.replace(/\s/g,"+"))},label:Object(i.__)("Campaign Medium","wp-marketing-automations"),placeholder:Object(i.__)("Enter UTM medium","wp-marketing-automations"),help:Object(i.__)("Marketing medium: (e.g., CPC, banner, email)","wp-marketing-automations"),className:"bwf-field-comp-label-content"+oe}),Object(n.createElement)(a.TextControl,{value:ut,onChange:function(t){return h("name",t.replace(/\s/g,"+"))},label:Object(i.__)("Campaign Name","wp-marketing-automations"),placeholder:Object(i.__)("Enter UTM name","wp-marketing-automations"),help:Object(i.__)("Product, promo code, or slogan (e.g., spring_sale)","wp-marketing-automations"),className:"bwf-field-comp-label-content"}),Object(n.createElement)(a.TextControl,{value:st,onChange:function(t){return h("term",t.replace(/\s/g,"+"))},label:Object(i.__)("Campaign Term","wp-marketing-automations"),placeholder:Object(i.__)("Enter UTM term","wp-marketing-automations"),className:"bwf-field-comp-label-content"}),Object(n.createElement)(a.TextControl,{value:lt,onChange:function(t){return h("content",t.replace(/\s/g,"+"))},label:Object(i.__)("Campaign Content","wp-marketing-automations"),placeholder:Object(i.__)("Enter UTM content","wp-marketing-automations"),className:"bwf-field-comp-label-content bwf-mb-0"}))),3==u&&Object(n.createElement)(Zt,{enable:rt,position:at,imageURL:ot,setData:function(t,e){if("enable"==t)f("whatsAppImage",e);else if(["position","imageURL"].includes(t)){var r={position:at,imageURL:ot};r[t]=e,f("whatsAppImageSetting",r)}}}),Object(n.createElement)(p.a,{message:tt.message,type:tt.type,removeMessage:function(){return et({message:"",type:1})}})),Object(n.createElement)(Lt.a,{isOpen:gt,setOpenTags:vt,onMergeTagSelected:function(t){"subject"===Ot&&f("subject","".concat(H||""," ").concat(t)),"preheader"===Ot&&f("preheader","".concat(q||""," ").concat(t)),"content"===Ot&&f("body","".concat(zt||""," ").concat(t)),vt(!1)},onMergeTagsLoaded:function(t){return St(t)}}),It&&Object(n.createElement)(hr.a,{onClose:function(){return $t(!1)},siteSettingsEventOrigin:Ft}),Object(d.pc)()&&Object(n.createElement)(re,null),Object(d.Zb)()&&Object(n.createElement)(pr.a,{isConditionalModal:D,setConditionalModal:R,conditionalEventOrigin:Y,setConditionalData:K,conditionalData:z}),!Object(d.Zb)()&&Object(n.createElement)(dt.b,{isOpen:M,onRequestClose:function(){return F(!1)},modalContent:{isFeature:!0,featureTitle:Object(i.__)("Broadcast","wp-marketing-automations")}}))},Cr=r(504),Pr=(r(1422),r(69)),Tr=function(t){var e=U(),r=S(),o=r.getSmartSendSettings(),c=o.enable,u=o.percent,l=o.hours,s=e.setSmartSendByKey,f=r.getShowValidationFlag(),d=r.getEmails();return Array.isArray(d)&&d.length>1?Object(n.createElement)("div",{className:"bwf-c-campaign-email bwf-mt-24 bwf-campaign-smart-send-container"},Object(n.createElement)("div",{className:"bwf-heading3-new bwf-mb-16"},Object(i.__)("Smart Sending","wp-marketing-automations")),Object(n.createElement)(a.ToggleControl,{label:Object(i.__)("Enable Smart Sending","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:c,onChange:function(t){return s("enable",t)}}),c&&Object(n.createElement)("div",{className:"bwf-display-flex"},Object(n.createElement)("div",{className:"bwf-w-280"}),Object(n.createElement)("div",{className:"bwf-w-100p"},parseInt(u)>0&&parseInt(l)>0?Object(n.createElement)("div",{className:"bwf-campaign-smart-send-notice"},Object(n.createElement)("div",{className:"bwf-campaign-smart-s-svg"},Object(n.createElement)(ft.a,{icon:"icon-bulb",width:13,height:17})),Object(n.createElement)("div",{className:"bwf-campaign-smart-send-n-txt"},Object(n.createElement)("span",{className:"bwf-n-b"},Object(i.__)("How Smart Sending Works?","wp-marketing-automations")),Object(n.createElement)("span",null,Object(i.sprintf)(Object(i.__)("This broadcast will first go to %d percent of your contacts. After %d hours, the variant with the highest open rate will be sent to the rest.","wp-marketing-automations"),parseInt(u),parseInt(l))))):Object(n.createElement)("div",{className:"bwf_clear_16"}),Object(n.createElement)(a.TextControl,{type:"number",value:u,onChange:function(t){return s("percent",t)},label:Object(i.__)("Sample size (in percent)","wp-marketing-automations"),placeholder:Object(i.__)("Enter percent","wp-marketing-automations"),className:Pt()({"bwf-field-comp-label-content":!0,"bwf-field-error":f&&!parseInt(u)})}),Object(n.createElement)(a.TextControl,{type:"number",value:l,onChange:function(t){return s("hours",t)},label:Object(i.__)("Wait time (in hours)","wp-marketing-automations"),placeholder:Object(i.__)("Enter hour difference","wp-marketing-automations"),className:Pt()({"bwf-field-comp-label-content":!0,"bwf-mb-0":!0,"bwf-field-error":f&&!parseInt(l)})})))):null};function Nr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ar(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ar(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Ir="ABCDEFGHIJKLMNOPQRSTUVWXYZ",$r=function(t){var e=t.mailData,r=t.unsubscribeLink,a=t.errMsg,o=U(),u=S(),l=o.setCurrentEmail,s=o.addEmail,f=o.showValidation,p=o.deleteEmail,b=o.overrideCurrentContent,h=Nr(Object(n.useState)(!1),2),y=h[0],g=h[1],v=u.getEmails(),w=u.getCurrentEmail(),O=u.getSmartSendSettings(),j=u.emailsValidToSubmit(),_=u.getShowValidationFlag(),E=c.a.getCampaignData(),k=!(E&&E.data&&E.data.ab_type)||"ab"===E.data.ab_type,L=Object(n.useRef)(!1),x=Object(n.useCallback)((function(t){return Pt()({active:w===t})})),C=!![!O.enable||!!parseInt(O.hours)&&v.length>1,!O.enable||!!parseInt(O.percent)&&v.length>1].reduce((function(t,e){return t&&e}),!0),P=Object(n.useContext)(d.h);return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:""},(!j||!C||!r)&&_&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(Pr.a,null),Object(n.createElement)(mt.a,{className:"bwf-error-notice",status:"error",onRemove:function(){return f(!1)}},(!j||!C)&&Object(i.__)("Some required fields are not filled, check below","wp-marketing-automations"),!r&&Object(n.createElement)(n.Fragment,null,(!j||!C)&&Object(n.createElement)("br",null),Object(m.isEmpty)(a)?Object(i.__)("{{unsubscribe_link}} are required merge tags, they must be missing from the email body","wp-marketing-automations"):a))),k&&Object(n.createElement)("div",{className:"bwf-c-campaign-email-tabs bwf-mb-16"},Object(n.createElement)("ul",null,v.map((function(t,e){return Object(n.createElement)("li",{onClick:function(){return function(t){!L.current&&l(t),L.current=!1}(t)},className:x(t),key:"bwf-c-campaign-email-tabs-".concat(e)},0===e?Object(i.__)("Control","wp-marketing-automations"):Object(i.__)("Variant","wp-marketing-automations")," ",e>0&&Ir[parseInt(e)%Ir.length-1],e>0&&Object(n.createElement)("span",{className:"bwf-w-20 bwf-h-20 bwf-cursor-pointer bwf-ml-4 bwf-display-flex",onClick:function(){return function(t){L.current=!0,p(t)}(t)}},Object(n.createElement)(ft.a,{icon:"cross",size:16})))})),v.length<3&&Object(n.createElement)("li",{className:"bwf-c-campaign-email-variant"},Object(n.createElement)("div",{className:"bwf-display-flex bwf-h-20",onClick:function(){return s()}},Object(n.createElement)("span",{className:"bwf-rotate-45 bwf-p-0"},Object(n.createElement)(ft.a,{icon:"cross",size:16,color:"#353030"})),Object(n.createElement)("span",null,Object(i.__)("Add Variant","wp-marketing-automations")))))),1===parseInt(E.type)&&Object(n.createElement)("span",{className:"bwf-c-campaign-template-selector"},Object(n.createElement)(Cr.a,{showText:!1,openTemplate:y,setTemplateModal:g,applyTemplate:function(t){b(t),P(Object(i.__)("Template Applied Successfully.","wp-marketing-automations")),setTimeout((function(){P("")}),2e3)}})),Object(n.createElement)(xr,{maildata:e,setTemplateModal:g}),Object(n.createElement)(Tr,null)))},Mr=r(74);function Fr(t){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gr(){Gr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),c=new C(n||[]);return a(i,"_invoke",{value:S(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",m="executing",p="completed",b={};function h(){}function y(){}function g(){}var v={};l(v,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,i)&&(v=O);var j=g.prototype=h.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(a,o,i,c){var u=f(t[a],t,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Fr(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function S(e,r,n){var a=d;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=f(e,r,n);if("normal"===l.type){if(a=n.done?p:"suspendedYield",l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,b;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Fr(e)+" is not iterable")}return y.prototype=g,a(j,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:y,configurable:!0}),y.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},_(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new E(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function Br(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Dr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Br(Object(r),!0).forEach((function(e){Ur(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Br(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ur(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Fr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rr(t,e,r,n,a,o,i){try{var c=t[o](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function Vr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Yr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yr(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}e.default=function(t){var e=Object(f.i)(),r=Vr(Object(n.useState)({message:"",type:1}),2),l=r[0],b=r[1],h=Vr(Object(n.useState)([]),2),y=h[0],g=h[1],v=Vr(Object(n.useState)([]),2),w=v[0],O=v[1],j=Vr(Object(n.useState)(Object(d.P)("from_name")),2),_=j[0],E=j[1],k=Vr(Object(n.useState)(Object(d.P)("from_email")),2),L=k[0],x=k[1],C=Vr(Object(n.useState)(Object(d.P)("reply_to_email")),2),P=C[0],T=C[1],N=Vr(Object(n.useState)(""),2),A=N[0],I=N[1],$=Object(u.a)().setCampaignValues,M=c.a.getCampaignId(),F=c.a.getCampaignData(),G=parseInt(F.type);Object(n.useEffect)((function(){F&&!Object(m.isNull)(F.data)&&(F.data.hasOwnProperty("content")&&!Object(m.isEmpty)(F.data.content)?g(F.data.content):g(1==G?[{subject:"",preheader:"",type:"block",body:"",utm:{}}]:[{body:"",utm:{}}]),F.data.hasOwnProperty("senders_name")&&E(F.data.senders_name),F.data.hasOwnProperty("senders_email")&&x(F.data.senders_email),F.data.hasOwnProperty("replyto")&&!Object(m.isEmpty)(F.data.replyto)&&T(F.data.replyto))}),[]);var B=Object(Mr.a)().setL2Title;Object(n.useEffect)((function(){B("title"in F?Object(n.createElement)(n.Fragment,null,F.title):"")}),[F]);var D={name:1!==G||null===_||_.length>0,email:1!==G||null===L||Object(d.fc)(L),content:null===y||y.length>0},R=S(),V=R.emailsValidToSubmit(),Y=R.getEmails(),W=R.getAllEmailContent(),Z=R.getSmartSendSettings(),z=U();Object(n.useEffect)((function(){if(F&&F.data){var t=!F.data.ab_type||"ab"===F.data.ab_type,e=F.data.content?Array.isArray(F.data.content)&&!t?[F.data.content[0]]:F.data.content:[],r=F.data.smart_send&&t?F.data.smart_send:{};z.initContent(e,r)}}),[M]);var K=!![1!==G||_&&_.length>0,1!==G||L&&Object(d.fc)(L),1!==G||Object(m.isEmpty)(P)||P&&Object(d.fc)(P)].reduce((function(t,e){return t&&e}),!0),H=!![!Z.enable||!!parseInt(Z.hours)&&Y.length>1,!Z.enable||!!parseInt(Z.percent)&&Y.length>1].reduce((function(t,e){return t&&e}),!0),q=function(){if(1!==G)return!0;var t=Object(d.E)();I("");var e=!0,r=[];return Y.map((function(n){var a=W.hasOwnProperty(n)?W[n]:{},o="";a.hasOwnProperty("type")&&("editor"==a.type?a.hasOwnProperty("editor")&&a.editor.hasOwnProperty("body")&&(o=a.editor.body):a.hasOwnProperty("body")&&(o=a.body)),o.includes("{{mail_footer}}")||(e=(t.includes("unsubscribe_link")||o.includes("unsubscribe_link"))&&(t.includes("business_name")||o.includes("business_name"))&&(t.includes("business_address")||o.includes("business_address")))||(t.includes("unsubscribe_link")||o.includes("unsubscribe_link")||r.includes("{{unsubscribe_link}}")||r.push("{{unsubscribe_link}}"),t.includes("business_name")||o.includes("business_name")||r.includes("{{business_name}}")||r.push("{{business_name}}"),t.includes("business_address")||o.includes("business_address")||r.includes("{{business_address}}")||r.push("{{business_address}}"))})),Object(m.isEmpty)(r)||I(Object(i.__)("The required merge tags","wp-marketing-automations")+" "+r.join(", ")+(r.length>1?" are ":" is ")+" "+Object(i.__)("missing in the email body","wp-marketing-automations")),O(e),e},J=function(){var e,r=(e=Gr().mark((function e(){var r,n,a;return Gr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=q(),z.showValidation(!1),!(K&&V&&H&&r)){e.next=17;break}return t.setPending(!0),e.prev=4,n=Dr({content:Y.map((function(t){return V[t]})),senders_name:_,senders_email:L,replyto:P,modified_by:Object(d.N)()},Z.enable?{smart_send:{enable:Z.enable,percent:Z.percent,hours:Z.hours}}:{}),a={content:JSON.stringify(n),step:3},e.next=9,s()({path:Object(d.A)("/broadcast/".concat(M)),method:"POST",data:a}).then((function(t){200===t.code?($("data",t.result),$("step",4)):b({message:t.message,type:0})}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),b({message:e.t0.message,type:0});case 14:t.setPending(!1),e.next=18;break;case 17:z.showValidation(!0);case 18:case"end":return e.stop()}}),e,null,[[4,11]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(t){Rr(o,n,a,i,c,"next",t)}function c(t){Rr(o,n,a,i,c,"throw",t)}i(void 0)}))});return function(){return r.apply(this,arguments)}}(),Q=D&&!D.email?" bwf-field-error":"",X=D&&!D.name?" bwf-field-error":"";return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(Pr.a,null),Object(n.createElement)("div",{className:"bwf-campaign-step-div bwf-card-wrap bwf-campaign-step-3"},Object(n.createElement)("div",{className:"bwf-card-header"},Object(n.createElement)("span",{className:"bwf-form-title"},Object(i.__)("Content","wp-marketing-automations"))),1===G&&Object(n.createElement)("div",{className:"bwf-p-gap"},Object(n.createElement)("div",{className:"bwf-c-campaign-email"},Object(n.createElement)(a.TextControl,{value:_,onChange:E,label:Object(i.__)("From Name","wp-marketing-automations"),placeholder:Object(i.__)("Enter From Name","wp-marketing-automations"),className:X}),Object(n.createElement)("div",{className:"bwf_clear_16"}),Object(n.createElement)(a.Flex,null,Object(n.createElement)(a.FlexBlock,null,Object(n.createElement)(a.TextControl,{value:L,onChange:x,label:Object(i.__)("From Email","wp-marketing-automations"),placeholder:Object(i.__)("Enter From Email","wp-marketing-automations"),className:Q})),Object(n.createElement)(a.FlexBlock,null,Object(n.createElement)(a.TextControl,{value:P,placeholder:Object(i.__)("Enter Reply-To Email","wp-marketing-automations"),label:Object(i.__)("Reply-To Email","wp-marketing-automations"),onChange:T}))))),Object(n.createElement)("div",{className:"bwf-p-gap "+(1===parseInt(G)?"bwf-pt-0":"")},Object(n.createElement)($r,{mailData:{reply_to:P,senders_email:L,senders_name:_},unsubscribeLink:w,errMsg:A}),Object(n.createElement)(p.a,{message:l.message,type:l.type,removeMessage:function(){return b({message:"",type:1})}})),Object(n.createElement)("div",{className:"bwf-p-gap bwf-pt-0"},Object(n.createElement)("div",{className:"bwf-crm-campaign-navigation"},Object(n.createElement)(o.a,{className:"bwf-crm-navigation-previous",isSecondary:!0,onClick:function(){var t=F.data&&!Object(m.isNull)(F.data)&&F.data.hasOwnProperty("filters")?F.data.filters:{};Object(m.isEmpty)(t)||Object(f.k)(t,"/",e),$("step",2)}},Object(i.__)("Previous","wp-marketing-automations")),Object(n.createElement)(o.a,{isPrimary:!0,className:"bwf-crm-navigation-next",disabled:!K,onClick:J,isBusy:t.isPending},Object(i.__)("Next","wp-marketing-automations"))))))}}}]);