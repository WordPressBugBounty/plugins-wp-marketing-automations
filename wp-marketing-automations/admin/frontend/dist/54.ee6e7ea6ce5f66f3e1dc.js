(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{1164:function(e,t,n){},1226:function(e,t,n){},1303:function(e,t,n){"use strict";n.r(t),n.d(t,"previewProModalData",(function(){return Ne}));var r=n(0),a=n(2),c=n(6),o=n.n(c),i=n(1),l=n(5),s=n(11),u=n(7),m=n(3),b=n(1093),f=function(e){var t=e.data,n=void 0===t?{}:t,c=n.nice_name,o=void 0===c?"":c,i=n.source,l=void 0===i?"":i;return Object(r.createElement)("div",{className:"bwf-node-wrapper"},Object(r.createElement)("div",{className:"bwf-inner-wrapper "},Object(r.createElement)("div",{className:"bwf-node-brick is-start-node-selected"},Object(r.createElement)("div",{className:"bwf-node-icon icon-start"},Object(r.createElement)(u.a,{size:22,icon:"rocket"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(a.isEmpty)(l)?"":l),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(a.isEmpty)(o)?"":o)))),Object(r.createElement)(b.d,{type:"source",position:"bottom",isConnectable:!1}))},d=function(e){var t=e.data,n=void 0===t?{}:t,c=n.subject,o=void 0===c?"":c,l=n.nice_name,s=void 0===l?"":l,m=n.integration,f=void 0===m?"":m;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper"},Object(r.createElement)(b.d,{type:"target",position:"top",isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-inner-wrapper "},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon icon-action"},Object(r.createElement)(u.a,{size:22,icon:"charge"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(i.__)("Step","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(i.__)("Action","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"})),Object(r.createElement)("div",{className:"bwf-node-step-content"},Object(r.createElement)("div",{className:"bwf-step-content"},Object(r.createElement)("div",{className:"bwf-step-brick"},Object(r.createElement)("div",{className:"bwf-step-content-content"},Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(a.isEmpty)(f)?"":f),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(a.isEmpty)(s)?"":s),!Object(a.isEmpty)(o)&&Object(r.createElement)("div",{className:"bwf-node-inner-label bwf-two-line-ellipse-text"},o)))))))),Object(r.createElement)(b.d,{type:"source",isConnectable:!1,position:"bottom"}))},p=function(e){var t=e.data,n=(void 0===t?{}:t).values,c=void 0===n?[]:n;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper"},Object(r.createElement)(b.d,{type:"target",position:"top",isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-inner-wrapper "},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(u.a,{size:26,icon:"condition"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(i.__)("Step","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(i.__)("Conditional","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"})),Object(r.createElement)("div",{className:"bwf-node-step-content"},Object(r.createElement)("div",{className:"bwf-step-content"},Object(a.isEmpty)(c)?Object(i.__)("No Condition Found","wp-marketing-automations"):Object(r.createElement)(r.Fragment,null,c.map((function(e,t){return Object(r.createElement)(r.Fragment,null,0!==t&&Object(r.createElement)("div",{className:"bwf-step-divider divider-line bwf-or"},Object(r.createElement)("span",{className:"bwf-divider"},"OR")),e.map((function(e,t){return Object(r.createElement)(r.Fragment,null,0!==t&&Object(r.createElement)("div",{className:"bwf-step-divider"},Object(r.createElement)("span",{className:"bwf-divider"},"AND")),Object(r.createElement)("div",{className:"bwf-step-content-content"},e))})))}))))))),Object(r.createElement)(b.d,{type:"source",position:"bottom",isConnectable:!1}))},v=function(){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper"},Object(r.createElement)(b.d,{type:"source",position:"top",isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-node-content bwf-end"},Object(r.createElement)("div",{className:"bwf-node-content-item"},Object(i.__)("End Automation","wp-marketing-automations")))))},O=function(e){var t=e.data,n=void 0===t?{}:t,c=n.nice_name,o=void 0===c?"":c,l=n.source_name;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper"},Object(r.createElement)(b.d,{type:"target",position:"top",isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-inner-wrapper "},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon icon-goal"},Object(r.createElement)(u.a,{size:26,icon:"goal"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(i.__)("Step","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(i.__)("Goal","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"})),Object(r.createElement)("div",{className:"bwf-node-step-content"},Object(r.createElement)("div",{className:"bwf-step-content"},Object(r.createElement)("div",{className:"bwf-step-brick"},Object(r.createElement)("div",{className:"bwf-step-content-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(a.isEmpty)(l)?"":l),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(a.isEmpty)(o)?"":o))))))),Object(r.createElement)(b.d,{type:"source",position:"bottom",isConnectable:!1}))},j={1:Object(i.__)("Delay for a specific period","wp-marketing-automations"),2:Object(i.__)("Delay until a specific date and time","wp-marketing-automations"),3:Object(i.__)("Delay until a custom field date","wp-marketing-automations")},w=function(e){var t=e.data,n=e.id,a=t.type,c=void 0===a?1:a,o=t.value,l=void 0===o?"":o;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper","node-id":n},Object(r.createElement)(b.d,{type:"target",position:"top",isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-inner-wrapper "},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon icon-delay"},Object(r.createElement)(u.a,{size:28,icon:"time-left"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(i.__)("Step","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(i.__)("Delay","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"})),Object(r.createElement)("div",{className:"bwf-node-step-content"},Object(r.createElement)("div",{className:"bwf-step-content"},Object(r.createElement)("div",{className:"bwf-step-brick"},Object(r.createElement)("div",{className:"bwf-step-content-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},j.hasOwnProperty(parseInt(c))?j[parseInt(c)]:""),Object(r.createElement)("div",{className:"bwf-node-content-label"},l))))))),Object(r.createElement)(b.d,{type:"source",position:"bottom",isConnectable:!1}))},y=function(e){return Object(r.createElement)("div",{className:e&&e.data&&e.data.direction&&"no"===e.data.direction?"bwf-yes-no-node  bwf-no-node":"bwf-yes-no-node bwf-yes-node"},Object(r.createElement)(b.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("span",{className:"bwf-yes-no-wrap"},e&&e.data&&e.data.direction&&"no"===e.data.direction?Object(i.__)("No","wp-marketing-automations"):Object(i.__)("Yes","wp-marketing-automations")),Object(r.createElement)(b.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))},h=function(e){var t=e.data,n=void 0===t?{}:t;return Object(r.createElement)("div",{className:"bwf-node-wrapper"},Object(r.createElement)("div",{className:"bwf-inner-wrapper "},Object(r.createElement)("div",{className:"bwf-node-brick is-start-node-selected"},Object(r.createElement)("div",{className:"bwf-node-icon icon-exit"},Object(r.createElement)(u.a,{size:26,icon:"exit"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(i.__)("Step","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(i.__)("Exit Automation","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"},n.hasOwnProperty("step_status")&&3===parseInt(n.step_status)&&Object(r.createElement)("div",{className:"bwf-node-stat deleted"},Object(i.__)("Deleted","wp-marketing-automations"))))),Object(r.createElement)(b.d,{type:"source",position:"bottom",isConnectable:!1,style:{opacity:0}}))};n(1136),n(1164),n(1137);function g(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function N(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return _(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,d=c[2];n>3?(a=d===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<d&&(a=n<3||c[0]>r||r>d)&&(c[4]=n,c[5]=r,b.n=d,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,d){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,d),i=u,l=d;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(_(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,_(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,_(m,"constructor",s),_(s,"constructor",l),l.displayName="GeneratorFunction",_(s,a,"GeneratorFunction"),_(m),_(m,a,"Generator"),_(m,r,(function(){return this})),_(m,"toString",(function(){return"[object Generator]"})),(N=function(){return{w:c,m:b}})()}function _(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(_=function(e,t,n,r){function c(t,n){_(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function k(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){k(c,r,a,o,i,"next",e)}function i(e){k(c,r,a,o,i,"throw",e)}o(void 0)}))}}var P=null,C=null,x=function(){var e=S(N().m((function e(){return N().w((function(e){for(;;)switch(e.n){case 0:if(!P){e.n=1;break}return e.a(2,P);case 1:if(!C){e.n=2;break}return e.a(2,C);case 2:return C=n.e(34).then(n.t.bind(null,1221,7)).then((function(e){var t=e.default||e;return P=new t})),e.a(2,C)}}),e)})));return function(){return e.apply(this,arguments)}}(),A={"elk.algorithm":"layered","elk.direction":"DOWN","elk.spacing.nodeNode":"100","elk.layered.spacing.nodeNodeBetweenLayers":"90","elk.portConstraints":"FIXED_POS","elk.layered.crossingMinimization.forceNodeModelOrder":"true","elk.layered.nodePlacement.strategy":"BRANDES_KOEPF","elk.layered.nodePlacement.bk.fixedAlignment":"LEFT","elk.layered.considerModelOrder.strategy":"NODES_AND_EDGES","elk.layered.crossingMinimization.semiInteractive":"true"},T=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.type)return 200+n;var c=0;switch(e.type){case"start":c=r?90:60;break;case"end":c=30;break;case"exit":c=65;break;case"wait":c=r&&e.data&&e.data.sidebarValues?160:105;break;case"yesNoNode":c=r?50:20;break;case"benchmark":c=r&&e.data&&e.data.benchmark?165:120;break;case"action":var o=e.data&&e.data.selected?e.data.selected:"";c=""!==o?r?165:120:105;break;case"conditional":var i=Object(a.flatten)(e.data.values).length,l=i-1;c=i?32*i+29*l+75:150,r||(c-=30);break;case"split":c=null!==(t=e.data)&&void 0!==t&&t.sidebarValues&&Object.keys(e.data.sidebarValues).length>0?200:140,r||(c=100);break;case"splitpath":c=70;break;default:c=200}return c+n},I=function(e,t){if("conditional"===e.type){var n=T(e,3,!0);return[{id:"".concat(e.id,"-yes"),x:93,y:n,properties:{"port.side":"SOUTH","port.index":0}},{id:"".concat(e.id,"-no"),x:187,y:n,properties:{"port.side":"SOUTH","port.index":1}}]}return"split"===e.type?t.filter((function(t){return Object(b.j)(t)&&t.source===e.id&&"split-edge"===t.sourceHandle})).map((function(e){var t=e.target&&e.target.match(/-path-(\d+)/);return{edge:e,pathNum:t?parseInt(t[1]):0}})).sort((function(e,t){return e.pathNum-t.pathNum})).map((function(t,n){var r=t.pathNum;return{id:"".concat(e.id,"-split-").concat(r-1),properties:{"port.side":"SOUTH","port.index":String(n)}}})):[{id:"".concat(e.id,"-out"),properties:{"port.side":"SOUTH","port.index":1}}]},F=function(e,t){if(!t)return e.source;if("conditional"===t.type){if("yes"===e.sourceHandle)return"".concat(e.source,"-yes");if("no"===e.sourceHandle)return"".concat(e.source,"-no");if(e.target&&e.target.includes("yes"))return"".concat(e.source,"-yes");if(e.target&&e.target.includes("no"))return"".concat(e.source,"-no")}if("split"===t.type&&"split-edge"===e.sourceHandle){var n=e.target&&e.target.match(/-path-(\d+)/);if(n)return"".concat(e.source,"-split-").concat(parseInt(n[1])-1)}return"".concat(e.source,"-out")},D=function(e,t,n){var r=e.filter(b.k),a=e.filter(b.j),c=function(e){return g(e).sort((function(e,t){var n,r,a,c;if("yesNoNode"===e.type&&"yesNoNode"===t.type&&(null===(n=e.data)||void 0===n?void 0:n.parent)===(null===(r=t.data)||void 0===r?void 0:r.parent)){var o,i,l,s;if("no"===(null===(o=e.data)||void 0===o?void 0:o.direction)&&"yes"===(null===(i=t.data)||void 0===i?void 0:i.direction))return-1;if("yes"===(null===(l=e.data)||void 0===l?void 0:l.direction)&&"no"===(null===(s=t.data)||void 0===s?void 0:s.direction))return 1}return"splitpath"===e.type&&"splitpath"===t.type?((null===(a=e.data)||void 0===a?void 0:a.path)||0)-((null===(c=t.data)||void 0===c?void 0:c.path)||0):0}))}(r),o={};c.forEach((function(e){o[e.id]=e}));var i=function(e,t){return g(e).sort((function(e,n){var r=t[e.source],a=t[n.source];if("conditional"===(null==r?void 0:r.type)&&"conditional"===(null==a?void 0:a.type)&&e.source===n.source){if("no"===e.sourceHandle&&"yes"===n.sourceHandle)return-1;if("yes"===e.sourceHandle&&"no"===n.sourceHandle)return 1}return 0}))}(a,o);return{id:"root",layoutOptions:A,children:c.map((function(r){return{id:r.id,width:280,height:T(r,3,t)+n,ports:I(r,e)}})),edges:i.map((function(e){var t=o[e.source];return{id:e.id,sources:[F(e,t)],targets:[e.target]}}))}},R=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n||(n={},t.forEach((function(e){n[e.target]=(n[e.target]||0)+1})));var r=new Set,a=null,c=function(e){if(r.has(e))return[];r.add(e);var o=[e];return t.filter((function(t){return t.source===e})).forEach((function(e){if(n[e.target]>1)a||(a=e.target);else{var t=c(e.target);o.push.apply(o,g(t))}})),o},o=c(e);return{descendants:o,mergePoint:a,incomingEdgeCounts:n}},G=function(e,t,n){var r={};t.children&&t.children.forEach((function(e){r[e.id]={x:e.x,y:e.y}}));var a=e.filter(b.j),c={};a.forEach((function(e){c[e.target]=(c[e.target]||0)+1}));var o=e.filter((function(e){return Object(b.k)(e)&&"yesNoNode"===e.type})),i={};o.forEach((function(e){var t,n=null===(t=e.data)||void 0===t?void 0:t.parent;n&&(i[n]||(i[n]={conditionalId:n}),i[n][e.data.direction]=e.id)})),Object.values(i).forEach((function(e){var t,n=e.conditionalId,o=e.yes,i=e.no,l=null===(t=r[n])||void 0===t?void 0:t.x;if(l)if(o&&i&&r[o]&&r[i]){var s=R(o,a,c),u=R(i,a,c),m=l-200,b=l+200;s.descendants.forEach((function(e){r[e]&&(r[e].x=m)})),u.descendants.forEach((function(e){r[e]&&(r[e].x=b)}));var f=s.mergePoint||u.mergePoint;f&&r[f]&&(r[f].x=l)}else{var d=o||i;if(d&&r[d])R(d,a,c).descendants.forEach((function(e){r[e]&&(r[e].x=l)}))}}));var l=e.filter((function(e){return Object(b.k)(e)&&"splitpath"===e.type})),s={};return l.forEach((function(e){var t=e.id&&e.id.match(/^(.+)-path-(\d+)$/);if(t){var n,a=t[1],c=parseInt(t[2]);s[a]||(s[a]={splitId:a,paths:[]}),s[a].paths.push({nodeId:e.id,path:c,x:(null===(n=r[e.id])||void 0===n?void 0:n.x)||0})}})),Object.values(s).forEach((function(e){var t,n=e.splitId,o=e.paths;if(!(o.length<2)){var i=null===(t=r[n])||void 0===t?void 0:t.x;if(i){o.sort((function(e,t){return e.path-t.path}));var l=o.length,s=i-400*(l-1)/2,u=null;o.forEach((function(e,t){var n=s+400*t,o=R(e.nodeId,a,c);o.mergePoint&&!u&&(u=o.mergePoint),o.descendants.forEach((function(e){r[e]&&(r[e].x=n)}))})),u&&r[u]&&(r[u].x=i)}}})),e.map((function(e){if(Object(b.k)(e)){var t=r[e.id];if(t){e.targetPosition="top",e.sourcePosition="bottom";var a=T(e,"conditional"===e.type?70:50,n);e.position={x:t.x-140+Math.random()/1e3,y:t.y-a/2}}}return e}))},M=function(e){return e.map((function(e,t){return Object(b.k)(e)&&(e.targetPosition="top",e.sourcePosition="bottom",e.position=e.position||{x:0,y:100*t}),e}))},U={structureKey:null,positionMap:null},z=function(e){return e&&e.length?e.map((function(e){return Object(b.k)(e)?"n:".concat(e.id,":").concat(e.type):Object(b.j)(e)?"e:".concat(e.id,":").concat(e.source,":").concat(e.target,":").concat(e.sourceHandle||""):e.id})).join("|"):""},H=function(e,t){return e.map((function(e){if(Object(b.k)(e)&&t[e.id]){var n=t[e.id];e.targetPosition="top",e.sourcePosition="bottom",e.position={x:n.x+Math.random()/1e3,y:n.y}}return e}))},L=function(){var e=S(N().m((function e(t){var n,r,a,c,o,i,l,s,u=arguments;return N().w((function(e){for(;;)switch(e.p=e.n){case 0:if(n=!(u.length>1&&void 0!==u[1])||u[1],r=u.length>2&&void 0!==u[2]?u[2]:0,t&&!(t.length<=1)){e.n=1;break}return e.a(2,t);case 1:if((a=z(t))!==U.structureKey||!U.positionMap){e.n=2;break}return e.a(2,H(g(t),U.positionMap));case 2:return e.p=2,e.n=3,x();case 3:return c=e.v,o=D(t,n,r),e.n=4,c.layout(o);case 4:return i=e.v,l=G(g(t),i,n),s={},l.forEach((function(e){Object(b.k)(e)&&e.position&&(s[e.id]={x:e.position.x,y:e.position.y})})),U.structureKey=a,U.positionMap=s,e.a(2,l);case 5:return e.p=5,e.v,e.a(2,M(g(t)))}}),e,null,[[2,5]])})));return function(t){return e.apply(this,arguments)}}(),q=n(381);function B(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return $(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,d=c[2];n>3?(a=d===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<d&&(a=n<3||c[0]>r||r>d)&&(c[4]=n,c[5]=r,b.n=d,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,d){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,d),i=u,l=d;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):($(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,$(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,$(m,"constructor",s),$(s,"constructor",l),l.displayName="GeneratorFunction",$(s,a,"GeneratorFunction"),$(m),$(m,a,"Generator"),$(m,r,(function(){return this})),$(m,"toString",(function(){return"[object Generator]"})),(B=function(){return{w:c,m:b}})()}function $(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}($=function(e,t,n,r){function c(t,n){$(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function K(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var J=function(e){var t=e.recipeID,n=e.previewData,c=e.hasPRO,o={start:f,action:d,conditional:p,end:v,benchmark:O,wait:w,yesNoNode:y,exit:h},i=V(Object(r.useState)([]),2),l=i[0],s=i[1],u=Object(b.l)(),j=Object(b.n)().setCenter,g=Object(r.useRef)(),E=V(Object(r.useState)([]),2),N=E[0],_=E[1];return Object(r.useEffect)((function(){Object(a.isNull)(document.querySelector("#bwf-single-automation-wrap"))||(g.current=document.querySelector("#bwf-single-automation-wrap").getBoundingClientRect(),s(n))}),[]),Object(r.useEffect)((function(){l.length>0&&function(){var e,t=(e=B().m((function e(){var t;return B().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,L(l,!1);case 1:t=e.v,_(t);case 2:return e.a(2)}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){K(c,r,a,o,i,"next",e)}function i(e){K(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}()()}),[l]),Object(r.useEffect)((function(){var e=0,t=0,n=u.getState().nodes;if(n.length&&g.current){var r=n[0];r.hasOwnProperty("__rf")?(e=r.__rf.position.x+140,t=r.__rf.position.y):(e=r.position.x+140,t=r.position.y),t=parseFloat(t)+.45*parseFloat(g.current.height),j(e,t,1)}}),[N]),Object(r.createElement)("div",{id:"bwf-single-automation-wrap",className:"bwf-automation-wrap",key:t},!m.cc&&c&&Object(r.createElement)(q.a,{dismissable:!1,isRecipe:!0}),Object(r.createElement)(b.f,{defaultZoom:1,minZoom:.5,maxZoom:4,nodeTypes:o,nodesConnectable:!1,nodesDraggable:!1,zoomOnScroll:!1,zoomOnDoubleClick:!1,paneMoveable:!0,panOnScroll:!0,elements:N},Object(r.createElement)(b.c,{showInteractive:!1}),Object(r.createElement)(b.a,null)))},W=n(9),X=n.n(W),Y=n(49);function Q(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return ee(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,d=c[2];n>3?(a=d===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<d&&(a=n<3||c[0]>r||r>d)&&(c[4]=n,c[5]=r,b.n=d,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,d){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,d),i=u,l=d;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(ee(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,ee(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,ee(m,"constructor",s),ee(s,"constructor",l),l.displayName="GeneratorFunction",ee(s,a,"GeneratorFunction"),ee(m),ee(m,a,"Generator"),ee(m,r,(function(){return this})),ee(m,"toString",(function(){return"[object Generator]"})),(Q=function(){return{w:c,m:b}})()}function ee(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(ee=function(e,t,n,r){function c(t,n){ee(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function te(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ae=function(e){var t=e.recipeData,n=e.onRequestClose,c=e.isImporting,o=e.importRecipe,b=ne(Object(r.useState)(!0),2),f=b[0],d=b[1],p=ne(Object(r.useState)({}),2),v=p[0],O=p[1],j=function(){var e,n=(e=Q().m((function e(){var n;return Q().w((function(e){for(;;)switch(e.p=e.n){case 0:return d(!0),e.p=1,e.n=2,X()({path:Object(m.C)("/automation/recipe/?recipe_slug=".concat(t.slug)),method:"GET"}).then((function(e){d(!1),200===e.code&&(Object(a.isEmpty)(e.result)||O(e.result))}));case 2:e.n=4;break;case 3:e.p=3,n=e.v,d(!1),O(n),console.log(n);case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){te(c,r,a,o,i,"next",e)}function i(e){te(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){O({}),d(!0),Object(a.isEmpty)(t)||j()}),[t]),Object(r.createElement)(r.Fragment,null,!Object(a.isEmpty)(t)&&Object(r.createElement)(l.Modal,{title:"",className:"bwf-admin-modal bwf-admin-modal-no-header bwf-admin-modal-fullscreen bwf-recipe-preview-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-recipe-preview-content-wrap"},Object(r.createElement)("div",{className:"bwf-stretch-header-customer-journey"},Object(r.createElement)("div",{className:"bwf-wrapper"},Object(r.createElement)("div",{className:"bwf-left-section"},Object(r.createElement)("div",{className:"bwf-back-button bwf-display-flex bwf-cursor-pointer",onClick:n},Object(r.createElement)(u.a,{icon:"arrow-left",size:20})),Object(r.createElement)("div",{className:"bwf-title bwf-h3"},t.hasOwnProperty("name")?t.name:""),!m.cc&&t.hasPRO&&Object(r.createElement)("div",{className:"bwf-recipe-paid"},m.e)),Object(r.createElement)("div",{className:"bwf-right-section"},Object(r.createElement)(s.a,{isPrimary:!0,onClick:function(){return o(t.slug,t.name,!!t.hasOwnProperty("hasPRO")&&t.hasPRO)},isBusy:c&&c.loading,disabled:c&&c.loading||f||Object(a.isEmpty)(v)||v.hasOwnProperty("code")&&400===v.code},Object(i.__)("Import Recipe","wp-marketing-automations"))))),Object(r.createElement)("div",{className:"bwf-recipe-preview-sidebar"},Object(r.createElement)("div",{className:"bwf-about-recipe"},Object(r.createElement)("div",{className:"bwf-recipe-title"},Object(i.__)("Description","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-recipe-description"},t.description)),Object(r.createElement)("div",{className:"bwf-recipe-tags"},!Object(a.isEmpty)(t.tag)&&Object.values(t.tag).map((function(e,t){return Object(r.createElement)("span",{className:"bwf-recipe-tag",key:t},e)}))),v.hasOwnProperty("video")&&!Object(a.isEmpty)(v.video)&&Object(r.createElement)("div",{className:"bwf-recipe-video"},Object(r.createElement)("iframe",{src:v.video}))),f?Object(r.createElement)("div",{className:"bwf-preview-reactflow-loader"},Object(r.createElement)(Y.a,{size:"l"})):Object(r.createElement)(r.Fragment,null,v.hasOwnProperty("preview")&&!Object(a.isEmpty)(v.preview)?Object(r.createElement)(J,{recipeID:v.id,previewData:v.preview,hasPRO:t.hasPRO}):Object(r.createElement)("div",{className:"bwf-preview-reactflow-loader bwf-h2"},v.hasOwnProperty("message")?v.message:Object(i.__)("No Preview Data Found","wp-marketing-automations"))))))},ce=(n(1226),n(26));function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var le=function(e){var t=oe(Object(r.useState)(""),2),n=t[0],a=t[1],c=oe(Object(r.useState)(""),2),o=c[0],m=c[1],b=e.onCloseModal,f=e.isLoading,d=void 0!==f&&f,p=e.onTitleAdded,v=e.recipeSlug;Object(r.useEffect)((function(){m("")}),[]);var O=function(){o?(a(""),p(v,o)):a(Object(i.__)("Automation name is required field","wp-marketing-automations"))};return Object(r.createElement)(l.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-h--core-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(i.__)("Add Automation","wp-marketing-automations")),Object(r.createElement)("span",{onClick:b,className:"bwf-modal-close"},Object(r.createElement)(u.a,{icon:"close",color:"#353030"}))),n&&Object(r.createElement)(ce.a,{status:"error",onRemove:function(){return a("")}},n),Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&O()}},Object(r.createElement)(l.TextControl,{placeholder:Object(i.__)("Enter automation name","wp-marketing-automations"),autoFocus:!0,label:Object(i.__)("Name","wp-marketing-automations"),value:o,onChange:function(e){return m(e)},disabled:d}),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(r.createElement)(s.a,{onClick:function(){return b()},className:"bwf-cancel-btn"},Object(i.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(s.a,{isPrimary:!0,disabled:d,onClick:O,isBusy:d},Object(i.__)("Create","wp-marketing-automations")))))},se=n(12),ue=n(344),me=(n(40),n(368));function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e){return function(e){if(Array.isArray(e))return Ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return pe(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,d=c[2];n>3?(a=d===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<d&&(a=n<3||c[0]>r||r>d)&&(c[4]=n,c[5]=r,b.n=d,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,d){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,d),i=u,l=d;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(pe(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,pe(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,pe(m,"constructor",s),pe(s,"constructor",l),l.displayName="GeneratorFunction",pe(s,a,"GeneratorFunction"),pe(m),pe(m,a,"Generator"),pe(m,r,(function(){return this})),pe(m,"toString",(function(){return"[object Generator]"})),(de=function(){return{w:c,m:b}})()}function pe(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(pe=function(e,t,n,r){function c(t,n){pe(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function ve(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Oe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){ve(c,r,a,o,i,"next",e)}function i(e){ve(c,r,a,o,i,"throw",e)}o(void 0)}))}}function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=be(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==be(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||ge(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){if(e){if("string"==typeof e)return Ee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ee(e,t):void 0}}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ne=function(e){var t=e.templateName,n=e.proStatus;return we(we({title:Object(r.createElement)(r.Fragment,null,t,Object(i.__)(" is a PRO recipe","wp-marketing-automations")),content:Object(r.createElement)(r.Fragment,null,Object(i.__)("We're sorry, not all Recipe are available on your plan.","wp-marketing-automations"),m.dc?Object(i.__)(" Please upgrade to the PRO version to unlock all these awesome features.","wp-marketing-automations"):m.q<3?Object(i.__)(" Please activate your license to access premium recipe library","wp-marketing-automations"):Object(i.__)(" Please renew your license to access premium recipe library","wp-marketing-automations"))},!1!==n&&{action:function(){return Object(se.l)({},"/settings/")}}),{},{proLink:Object(m.ib)("upgrade",{utm_medium:"Create+Automation+".concat(t,"+Upgrade+Modal")}),isTemplate:!0})};t.default=function(){var e=Object(se.i)(),t=e.group,n=void 0===t?"All":t,c=e.subgroup,f=void 0===c?"":c,d=e.redirect,p=he(Object(r.useState)(!1),2),v=p[0],O=p[1],j=he(Object(r.useState)(!1),2),w=j[0],y=j[1],h=he(Object(r.useState)([]),2),g=h[0],E=h[1],N=he(Object(r.useState)([]),2),_=N[0],k=N[1],S=he(Object(r.useState)([]),2),P=S[0],C=S[1],x=he(Object(r.useState)({}),2),A=x[0],T=x[1],I=he(Object(r.useState)(!0),2),F=I[0],D=I[1],R=he(Object(r.useState)({}),2),G=R[0],M=R[1],U=he(Object(r.useState)({show:!1,recipeSlug:""}),2),z=U[0],H=U[1],L=he(Object(r.useState)(!1),2),q=L[0],B=L[1],$=Object(ue.a)().setAutomationData,K=P.groups,V=void 0===K?[]:K,Z=P.subGroups,J=void 0===Z?[]:Z,W=function(t){""===t&&delete e.subgroup,Object(se.l)(we({path:"/automations/create"},J.hasOwnProperty(n)&&J[n].includes(t)&&{subgroup:t}),"/",e)},Y=he(Object(r.useState)(""),2),Q=Y[0],ee=Y[1],te=Object(r.useContext)(m.h),ne=function(){var e=Oe(de().m((function e(t){var n;return de().w((function(e){for(;;)switch(e.p=e.n){case 0:return D(!0),e.p=1,e.n=2,X()({path:Object(m.C)("/recipes/?sync=".concat(q)),signal:t}).then((function(e){var t,n,r,a;200===e.code&&null!=e&&null!==(t=e.result)&&void 0!==t&&t.data&&(E(ce("",null==e||null===(n=e.result)||void 0===n?void 0:n.data)),k(null==e||null===(r=e.result)||void 0===r?void 0:r.data),C(null==e||null===(a=e.result)||void 0===a?void 0:a.filters));B(!1),D(!1)}));case 2:e.n=4;break;case 3:e.p=3,n=e.v,console.log(n),B(!1),D(!1);case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e=new AbortController;return ne(null==e?void 0:e.signal),function(){null==e||e.abort()}}),[q]);var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.includes(t)};function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=new RegExp(e.toLowerCase().trim(),"g"),c=t||_;return c.filter((function(e){return!(Object(a.isNull)(e.name.toLowerCase().match(r))||!(Object(a.isEmpty)(n)||"All"===n||e.hasOwnProperty("group")&&e.group.includes(n))||!(Object(a.isEmpty)(f)||e.hasOwnProperty("subgroup")&&re(e.subgroup,f)))}))}Object(r.useEffect)((function(){F||E(ce(Q))}),[Q,n,f]);var oe=function(){var e=Oe(de().m((function e(t,n){var r,a=arguments;return de().w((function(e){for(;;)switch(e.n){case 0:if(r=a.length>2&&void 0!==a[2]&&a[2],m.cc||!r){e.n=1;break}return O(!0),e.a(2);case 1:H({show:!0,slug:t});case 2:return e.a(2)}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ie=function(){var t=Oe(de().m((function t(n){var r,a;return de().w((function(t){for(;;)switch(t.p=t.n){case 0:return T({loading:!0,id:"",message:Object(i.__)("Creating…","wp-marketing-automations")}),te(Object(i.__)("Creating…","wp-marketing-automations")),H(we(we({},z),{},{loading:!0})),t.p=1,t.n=2,X()({path:Object(m.C)("/automations/create/"),method:"POST",data:{title:n,version:2}});case 2:(r=t.v)&&r.result&&r.result.automation_id&&(T({success:r.message,message:r.message}),bwfcrm_contacts_data.first_automation_id=r.result.automation_id,te(r.message),$("listData",n),H({}),setTimeout((function(){return Object(se.l)({path:"/automation/"+r.result.automation_id},"/",e)}),500)),t.n=4;break;case 3:t.p=3,a=t.v,T({error:a.message});case 4:Object(m.Pb)(te,3e3);case 5:return t.a(2)}}),t,null,[[1,3]])})));return function(e){return t.apply(this,arguments)}}(),be=function(){var t=Oe(de().m((function t(n,r){var a;return de().w((function(t){for(;;)switch(t.p=t.n){case 0:if(""!=n){t.n=1;break}return ie(r),t.a(2);case 1:return T({loading:!0,id:n,message:Object(i.__)("Importing…","wp-marketing-automations")}),te(Object(i.__)("Importing…","wp-marketing-automations")),H(we(we({},z),{},{loading:!0})),t.p=2,t.n=3,X()({path:Object(m.C)("/automation/recipe/import?recipe_slug=".concat(n,"&title=").concat(r))}).then((function(t){200===t.code&&t.result.hasOwnProperty("automation_id")?(T({success:t.message,message:t.message}),bwfcrm_contacts_data.first_automation_id=t.result.automation_id,te(t.message),setTimeout((function(){return Object(se.l)({path:"/automation/"+t.result.automation_id},"/",e)}),500),Object(m.Pb)(te,3e3)):(T({error:t.message}),te(t.hasOwnProperty("message")?Object(i.__)("Unable to import Recipe.","wp-marketing-automations")+" "+t.message:Object(i.__)("Unable to import Recipe","wp-marketing-automations")),Object(m.Pb)(te,3e3))})).catch((function(e){T({error:e.message}),te(e.hasOwnProperty("message")?Object(i.__)("Unable to import Recipe.","wp-marketing-automations")+" "+e.message:Object(i.__)("Unable to import Recipe","wp-marketing-automations")),Object(m.Pb)(te,3e3)})).finally((function(){H({})}));case 3:t.n=5;break;case 4:t.p=4,a=t.v,console.log(a),te(a.hasOwnProperty("message")?a.message:Object(i.__)("Unable to import Recipe","wp-marketing-automations")),Object(m.Pb)(te,3e3);case 5:return t.a(2)}}),t,null,[[2,4]])})));return function(e,n){return t.apply(this,arguments)}}();return Object(r.createElement)(b.e,null,Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>.components-modal__screen-overlay{ animation : none ! important }</style>"}}),Object(r.createElement)(l.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-recipe-wrapper-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-recipe-modal-header"},Object(r.createElement)("div",{className:"bwf-recipe-modal-title"},Object(i.__)("Add Automation","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-recipe-search-field "+(w?"is-focus":"")},Object(r.createElement)("span",{className:"bwf-search-bar-icon"},Object(r.createElement)(u.a,{icon:"search",size:15})),Object(r.createElement)(l.TextControl,{value:Q,type:"text",placeholder:Object(i.__)("Search Automation","wp-marketing-automations"),autoComplete:"off",onChange:ee,disabled:F,onFocus:function(){y(!0)},onBlur:function(){y(!1)}})),Object(r.createElement)("div",{className:"bwf-recipe-sync"},F?Object(r.createElement)("div",{className:" bwf-recipe-sync bwf-placeholder-temp bwf-h-36 bwf-w-90"}):Object(r.createElement)(s.a,{variant:"secondary",onClick:function(){B(!0)},isBusy:q,disabled:F},Object(i.__)("Sync Library","wp-marketing-automations")),Object(r.createElement)("div",{onClick:function(){d?window.location.href="admin.php?page=".concat(d,"&path=/automation&status=true"):(delete e.group,delete e.subgroup,Object(se.l)({path:"/automations"},"/",e))},className:"bwf-flex",style:{cursor:"pointer",marginRight:"-10px"}},Object(r.createElement)(u.a,{icon:"close"})))),Object(r.createElement)("div",{className:"bwf-recipe-wrapper"},F?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-recipe-sidebar"},Object(r.createElement)("ul",null,fe(Array(6)).map((function(e,t){return Object(r.createElement)("li",{className:"bwf-recipe-filter-item bwf-active-filter placeholder-temp",key:t})})))),Object(r.createElement)("div",{className:"bwf-recipe-item-wrapper"},Object(r.createElement)("div",{className:"bwf-recipe-items"},Object(r.createElement)("div",{className:"bwf-recipe-item scratch-recipe",style:{border:"2px dashed #DEDFEA"},key:"scratch"},Object(r.createElement)(u.a,{icon:"plus",width:"30",height:"30",color:"#DEDFEA"}),Object(r.createElement)("h2",null,Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"})),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-mt-5"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}),Object(r.createElement)("div",{className:"bwf_clear_5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-210"}))),fe(Array(19)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-recipe-item",key:t},Object(r.createElement)("div",{className:"bwf-recipe-title-wrap"},Object(r.createElement)("div",{className:"bwf-recipe-title"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}))),Object(r.createElement)("div",{className:"bwf-recipe-description bwfan_m0"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-120"})),Object(r.createElement)("div",{className:"bwf-recipe-tags"},Object(r.createElement)("span",{className:"bwf-recipe-tag placeholder-temp"},Object(r.createElement)("div",{className:"bwf-h-15 bwf-w-20"}))))}))))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-recipe-sidebar"},Object(r.createElement)("ul",null,V.map((function(t,a){return Object(r.createElement)("li",{className:o()("bwf-recipe-filter-item",{"bwf-active-filter":n===t}),onClick:function(){n!==t&&function(t){delete e.subgroup,Object(se.l)(we({path:"/automations/create"},V.includes(t)&&{group:t}),"/",e)}(t)},key:a},t)})))),Object(r.createElement)("div",{className:"bwf-recipe-item-wrapper"},J.hasOwnProperty(n)&&!Object(a.isEmpty)(J[n])&&Object(r.createElement)("div",{className:"bwf-recipe-group-wrap"},J[n].map((function(e,t){return Object(r.createElement)(s.a,{isSecondary:f===e,isTertiary:f!==e,onClick:function(){W(e===f?"":e)},className:"bwf-btn-small "+(f===e?"is-border is-blue-bg":""),key:t},e)}))),Object(r.createElement)("div",{className:o()("bwf-recipe-items")},Object(r.createElement)("div",{className:"bwf-recipe-item scratch-recipe",onClick:function(){oe("","",!1)},key:"scratch"},Object(r.createElement)(u.a,{icon:"plus",width:"30",height:"30",color:"#000"}),Object(r.createElement)("h2",null,Object(i.__)("Start from Scratch","wp-marketing-automations"))),g.map((function(e,t){return Object(r.createElement)("div",{className:"bwf-recipe-item",onClick:function(){return M(e)},key:t},Object(r.createElement)("div",{className:"bwf-recipe-title-wrap"},Object(r.createElement)("div",{className:"bwf-recipe-title"},e.name),!m.cc&&e.hasPRO&&Object(r.createElement)("div",{className:"bwf-recipe-paid"},m.e)),Object(r.createElement)("div",{className:"bwf-recipe-description bwfan_m0"},e.description),Object(r.createElement)("div",{className:"bwf-recipe-tags"},!Object(a.isEmpty)(e.tag)&&Object.values(e.tag).map((function(e,t){return Object(r.createElement)("span",{className:o()("bwf-recipe-tag"),key:t},e)}))))}))))),Object(r.createElement)(ae,{onRequestClose:function(){M({})},recipeData:G,isImporting:A,setIsImporting:T,importRecipe:oe}),!m.cc&&Object(r.createElement)(me.a,{isOpen:v,onRequestClose:function(){return O(!1)},modalContent:Ne({templateName:G.name,proStatus:!m.dc}),className:""}),(null==z?void 0:z.show)&&Object(r.createElement)(le,{onCloseModal:function(){return H()},recipeSlug:null==z?void 0:z.slug,onTitleAdded:be,isLoading:null==z?void 0:z.loading}))))}}}]);