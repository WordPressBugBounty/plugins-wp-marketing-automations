(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{1103:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0);var a=function(e,t){var r=Object(n.useRef)();Object(n.useEffect)((function(){r.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){r.current()}),t);return function(){return clearInterval(e)}}}),[t])}},1272:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(5),o=r(1),c=r(1094),i=r(1101),s=r(3),l=(r(1180),r(33)),u=r(61),m=r(19),b=r(60),f=r(54),p=r(354);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var s=n&&n.prototype instanceof i?n:i,l=Object.create(s.prototype);return w(l,"_invoke",function(r,n,a){var o,i,s,l=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return o=t,i=0,s=e,b.n=r,c}};function f(r,n){for(i=r,s=n,t=0;!m&&l&&!a&&t<u.length;t++){var a,o=u[t],f=b.p,p=o[2];r>3?(a=p===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=f&&((a=r<2&&f<o[1])?(i=0,b.v=n,b.n=o[1]):f<p&&(a=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,b.n=p,i=0))}if(a||r>1)return c;throw m=!0,n}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,s=p;(t=i<2?e:s)||!m;){o||(i?i<3?(i>1&&(b.n=-1),f(i,s)):b.n=s:b.v=s);try{if(l=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(m=b.n<0)?s:r.call(n,b))!==c)break}catch(t){o=e,i=1,s=t}finally{l=1}}return{value:t,done:m}}}(r,a,o),!0),l}var c={};function i(){}function s(){}function l(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(w(t={},n,(function(){return this})),t),m=l.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,w(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=l,w(m,"constructor",l),w(l,"constructor",s),s.displayName="GeneratorFunction",w(l,a,"GeneratorFunction"),w(m),w(m,a,"Generator"),w(m,n,(function(){return this})),w(m,"toString",(function(){return"[object Generator]"})),(O=function(){return{w:o,m:b}})()}function w(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(w=function(e,t,r,n){function o(t,r){w(e,t,(function(e){return this._invoke(t,r,e)}))}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))})(e,t,r,n)}function j(e,t,r,n,a,o,c){try{var i=e[o](c),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,a)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,c,i=[],s=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){l=!0,a=e}finally{try{if(!s&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw a}}return i}}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return k(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t=e.campaign,r=e.pauseUnpauseBroadcast,c=t&&t.type?parseInt(t.type):1,i=Object(s.I)(),d=E(Object(n.useState)({loading:!1,status:!1}),2),w=d[0],y=d[1],g=[{key:"contacts",title:Object(o.__)("Contacts","wp-marketing-automations"),value:Number.isInteger(parseInt(t.count))?parseInt(t.count):0},{key:"sent",title:Object(o.__)("Sent","wp-marketing-automations"),value:Number.isInteger(parseInt(t.sent))?parseInt(t.sent):0}].concat(h(1===c?[{key:"openRate",title:Object(o.__)("Open Rate","wp-marketing-automations"),value:(Number.isInteger(parseFloat(t.open_count))?parseFloat(t.open_rate):0)+" %"}]:[]),[{key:"clickRate",title:Object(o.__)("Click Rate","wp-marketing-automations"),value:(Number.isInteger(parseFloat(t.click_count))?parseFloat(t.click_rate):0)+" %"},{key:"unsubscribe",title:Object(o.__)("Unsubscribe","wp-marketing-automations"),value:Number.isInteger(parseInt(t.unsubs))?parseInt(t.unsubs):0}]);return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(a.Card,{className:"bwf-crm-campaign-stats-overview"},Object(n.createElement)(a.CardHeader,{className:"bwf-crm-overview-report-header"},Object(n.createElement)("span",{className:"bwf-form-title"},Object(o.__)("Stats","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex"},Object(n.createElement)("span",{className:"bwf-broadcast-status"},Object(n.createElement)("span",{className:s.J[t.status]},t.status&&i.hasOwnProperty(t.status)?i[t.status].label:t.status)),Object(s.fc)()&&[2,3,6].includes(parseInt(t.status))&&Object(n.createElement)(b.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var a=e.onToggle,c={3:Object(o.__)("Pause","wp-marketing-automations"),6:Object(o.__)("Resume","wp-marketing-automations"),2:Object(o.__)("Unschedule","wp-marketing-automations")},i={2:1,3:6,6:3};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(u.a,{isClickable:!0,onInvoke:function(){r(t.id,i[parseInt(t.status)]),a()}},Object(n.createElement)(m.a,{justify:"flex-start"},Object(n.createElement)(m.c,null,c[parseInt(t.status)]))),Object(n.createElement)(u.a,{isClickable:!0,onInvoke:function(){var e,c,i={title:Object(o.__)("Cancel Broadcast","wp-marketing-automations"),status:!0,content:Object(n.createElement)(n.Fragment,null,Object(o.__)("You are about to cancel broadcast ","wp-marketing-automations"),Object(n.createElement)("strong",null,t.title,"."),Object(o.__)(" Cancel to stop, Confirm to proceed.","wp-marketing-automations")),buttonConfirm:Object(o.__)("Confirm","wp-marketing-automations"),buttonCancel:Object(o.__)("Cancel","wp-marketing-automations"),isDelete:!0};y(v(v({},i),{},{onConfirm:(e=O().m((function e(){return O().w((function(e){for(;;)switch(e.n){case 0:return y(v(v({},i),{},{status:!0,id:t.id,loading:!0})),e.n=1,r(t.id,7).then((function(){y({status:!1})}));case 1:return e.a(2)}}),e)})),c=function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){j(o,n,a,c,i,"next",e)}function i(e){j(o,n,a,c,i,"throw",e)}c(void 0)}))},function(){return c.apply(this,arguments)})})),a()}},Object(n.createElement)(m.a,{justify:"flex-start"},Object(n.createElement)(m.c,null,Object(o.__)("Cancel","wp-marketing-automations")))))}}))),Object(n.createElement)(a.CardBody,{className:"bwf-crm-campaign-stats-overview-card bwf-crm-hide-delta"},Object(n.createElement)(p.a,{items:g,isLoading:!1})),Object(n.createElement)(a.CardFooter,null,Object(n.createElement)(l.a,{href:"admin.php?page=autonami&path=/broadcast/"+t.id+"/analytics",type:"bwf-crm",className:"bwf-a-no-underline"},Object(o.__)("View Details","wp-marketing-automations")))),Object(n.createElement)(f.a,{modalTitle:w.title,content:w.content,deleteEntityName:w.deleteEntityName,confirmText:w.confirmText,confirmButtonText:w.buttonConfirm,cancelButtonText:w.buttonCancel,onConfirm:w.onConfirm,isLoading:w.loading,successMessage:w.success,errorMessage:w.error,onRequestClose:function(){return y({status:!1})},isOpen:w.status,isDelete:!1}))},N=r(1117),C=r(68),P=r(348),I=r(9),T=r.n(I),A=r(2),F=r(1122),x=r(1103),G=r(97),B=r(12),D=r(7),U=r(40),R=r(11);function M(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var s=n&&n.prototype instanceof i?n:i,l=Object.create(s.prototype);return H(l,"_invoke",function(r,n,a){var o,i,s,l=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return o=t,i=0,s=e,b.n=r,c}};function f(r,n){for(i=r,s=n,t=0;!m&&l&&!a&&t<u.length;t++){var a,o=u[t],f=b.p,p=o[2];r>3?(a=p===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=f&&((a=r<2&&f<o[1])?(i=0,b.v=n,b.n=o[1]):f<p&&(a=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,b.n=p,i=0))}if(a||r>1)return c;throw m=!0,n}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,s=p;(t=i<2?e:s)||!m;){o||(i?i<3?(i>1&&(b.n=-1),f(i,s)):b.n=s:b.v=s);try{if(l=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(m=b.n<0)?s:r.call(n,b))!==c)break}catch(t){o=e,i=1,s=t}finally{l=1}}return{value:t,done:m}}}(r,a,o),!0),l}var c={};function i(){}function s(){}function l(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(H(t={},n,(function(){return this})),t),m=l.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,H(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=l,H(m,"constructor",l),H(l,"constructor",s),s.displayName="GeneratorFunction",H(l,a,"GeneratorFunction"),H(m),H(m,a,"Generator"),H(m,n,(function(){return this})),H(m,"toString",(function(){return"[object Generator]"})),(M=function(){return{w:o,m:b}})()}function H(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(H=function(e,t,r,n){function o(t,r){H(e,t,(function(e){return this._invoke(t,r,e)}))}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))})(e,t,r,n)}function L(e,t,r,n,a,o,c){try{var i=e[o](c),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,a)}function q(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){L(o,n,a,c,i,"next",e)}function i(e){L(o,n,a,c,i,"throw",e)}c(void 0)}))}}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,c,i=[],s=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){l=!0,a=e}finally{try{if(!s&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var $=function(){var e=J(Object(n.useState)(!1),2),t=e[0],r=e[1],a=J(Object(n.useState)(!1),2),l=a[0],u=a[1],m=J(Object(n.useState)(!1),2),b=m[0],p=m[1],d=c.a.getCampaignData(),O=Object(i.a)().resetCampaign,w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e&&(O(e),Object(B.l)({page:"autonami",path:"/broadcast/"+e.id},"/",{})),r(!1)},j=Object(G.useMutation)(function(){var e=q(M().m((function e(t){return M().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,T()({path:Object(s.C)("/broadcast/"),method:"POST",data:t});case 1:return e.a(2,e.v)}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(e){return w(e.result)},onError:function(){return w()}}),y=Object(n.useCallback)(q(M().m((function e(){var t;return M().w((function(e){for(;;)switch(e.n){case 0:r(!0),t={title:Object(o.__)("Send to Unopen","wp-marketing-automations"),description:"",type:d.type,created_by:Object(s.Q)(),createUnopen:d.id},j.mutate(t);case 1:return e.a(2)}}),e)}))),[d]);return Object(n.useEffect)((function(){j.isSuccess&&(r(!1),j.reset())}),[j.isSuccess]),Object(n.createElement)(n.Fragment,null,Object(n.createElement)(f.a,{modalTitle:Object(o.__)("Create Broadcast","wp-marketing-automations"),onRequestClose:function(){r(!1),p(!1),j.reset()},content:Object(o.__)("This will create a new broadcast for contacts who have not opened this broadcast. Are you sure you want to proceed?","wp-marketing-automations"),isLoading:t,errorMessage:j.isError&&(j.error&&j.error.message?j.error.message:Object(o.__)("Unable to create unopen broadcast","wp-marketing-automations")),onConfirm:y,isOpen:b}),Object(n.createElement)(R.a,{isSecondary:!0,className:"bwf-display-flex",onClick:function(){Object(s.fc)()?p(!0):u(!0)}},!Object(s.fc)()&&Object(n.createElement)(D.a,{icon:"king",size:16}),Object(o.__)("Send to Unopen","wp-marketing-automations")),!Object(s.fc)()&&Object(n.createElement)(U.b,{isOpen:l,onRequestClose:function(){return u(!1)},modalContent:{isFeature:!0,featureTitle:Object(o.__)("Create Unopen Broadcast","wp-marketing-automations")}}))},z=function(){var e=c.a.getCampaignData();return 4===parseInt(e.status)&&1===parseInt(e.type)&&!e.is_unopen_grandchild&&Object(n.createElement)(a.Card,{className:"bwf-crm-overview-detail-wrap bwf-card-display-block"},Object(n.createElement)(a.CardHeader,{className:"bwf-crm-overview-report-header"},Object(o.__)("Actions","wp-marketing-automations")),Object(n.createElement)(a.CardBody,null,Object(n.createElement)("div",{className:"bwf-report-row",key:1},Object(n.createElement)("div",{className:"bwf-report-row-label bwf-report-row-full"},Object(o.__)("Send to contacts who haven't opened the emails yet.","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",null,Object(n.createElement)($,null)))))},Q=r(26);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var s=n&&n.prototype instanceof i?n:i,l=Object.create(s.prototype);return Y(l,"_invoke",function(r,n,a){var o,i,s,l=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return o=t,i=0,s=e,b.n=r,c}};function f(r,n){for(i=r,s=n,t=0;!m&&l&&!a&&t<u.length;t++){var a,o=u[t],f=b.p,p=o[2];r>3?(a=p===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=f&&((a=r<2&&f<o[1])?(i=0,b.v=n,b.n=o[1]):f<p&&(a=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,b.n=p,i=0))}if(a||r>1)return c;throw m=!0,n}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,s=p;(t=i<2?e:s)||!m;){o||(i?i<3?(i>1&&(b.n=-1),f(i,s)):b.n=s:b.v=s);try{if(l=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(m=b.n<0)?s:r.call(n,b))!==c)break}catch(t){o=e,i=1,s=t}finally{l=1}}return{value:t,done:m}}}(r,a,o),!0),l}var c={};function i(){}function s(){}function l(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(Y(t={},n,(function(){return this})),t),m=l.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Y(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=l,Y(m,"constructor",l),Y(l,"constructor",s),s.displayName="GeneratorFunction",Y(l,a,"GeneratorFunction"),Y(m),Y(m,a,"Generator"),Y(m,n,(function(){return this})),Y(m,"toString",(function(){return"[object Generator]"})),(W=function(){return{w:o,m:b}})()}function Y(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Y=function(e,t,r,n){function o(t,r){Y(e,t,(function(e){return this._invoke(t,r,e)}))}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))})(e,t,r,n)}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==K(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e,t,r,n,a,o,c){try{var i=e[o](c),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,a)}function re(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){te(o,n,a,c,i,"next",e)}function i(e){te(o,n,a,c,i,"throw",e)}c(void 0)}))}}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,c,i=[],s=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){l=!0,a=e}finally{try{if(!s&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ae(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(e){var t=e.campaignType,r=Object(n.useContext)(s.h),l=c.a.getCampaignData(),u=Object(s.K)(),m=Object(i.a)(),b=m.setCampaignValues,p=m.setEditableMode,d=ne(Object(n.useState)(!1),2),O=d[0],w=d[1],j=ne(Object(n.useState)(!0),2),y=j[0],v=j[1],g=ne(Object(n.useState)(!1),2),h=g[0],E=g[1],_=ne(Object(n.useState)({}),2),k=_[0],I=_[1],G=ne(Object(n.useState)({loading:!1,status:!1}),2),B=G[0],U=G[1];Object(N.a)("overview","",!0,!0,!1,t);var R=ne(Object(n.useState)(!0),2),M=R[0],H=R[1],L=function(){var e=re(W().m((function e(){var t;return W().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,H(!1),e.n=1,T()({path:Object(s.C)("/broadcast/".concat(l.id,"/overview-stats")),method:"GET"}).then((function(e){if(200===e.code){if(e.hasOwnProperty("result"))b("data",Z(Z({},l),e.result));H(!0)}}));case 1:e.n=3;break;case 2:e.p=2,t=e.v,H(!0),console.log(t);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}();Object(x.a)((function(){3===parseInt(l.status)&&M&&Object(s.fc)()&&L()}),5e3);var q=function(){var e=re(W().m((function e(t){return W().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,v(!0),e.n=1,T()({path:Object(s.C)("/broadcast/email-preview"),method:"POST",data:t}).then((function(e){E(e.result.body.replace(/\\/g,"")),v(!1)}));case 1:e.n=3;break;case 2:return e.p=2,e.v,e.a(2,Object(n.createElement)(n.Fragment,null));case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=re(W().m((function e(r){var a,o;return W().w((function(e){for(;;)switch(e.n){case 0:return a="",o=!1,3===parseInt(t)?(r.hasOwnProperty("whatsAppImage")&&r.whatsAppImage&&r.hasOwnProperty("whatsAppImageSetting")&&r.whatsAppImageSetting.hasOwnProperty("position")&&!Object(A.isEmpty)(r.whatsAppImageSetting.position)&&r.whatsAppImageSetting.hasOwnProperty("imageURL")&&!Object(A.isEmpty)(r.whatsAppImageSetting.imageURL)&&(a="before"===r.whatsAppImageSetting.position?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("img",{src:r.whatsAppImageSetting.imageURL,width:50,height:50}),Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:r.body}})):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:r.body}}),Object(n.createElement)("img",{src:r.whatsAppImageSetting.imageURL,width:50,height:50}))),o=!0):2===parseInt(t)&&(o=!0),o?(a=Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:r.body}}),E(a),v(!1)):q({content:"editor"===r.type?r.editor.body:r.body,type:r.type}),r.mode=l.type,e.a(2,r)}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=l.hasOwnProperty("notice_data")&&!Object(A.isEmpty)(l.notice_data)&&Object(A.isArray)(l.notice_data)?l.notice_data:[],$=function(){var e=re(W().m((function e(t,n){var a;return W().w((function(e){for(;;)switch(e.p=e.n){case 0:return 7!==parseInt(n)&&r(Object(o.__)("Updating Status â€¦","wp-marketing-automations")),e.p=1,e.n=2,T()({path:Object(s.C)("/broadcast/".concat(t,"/pause-unpause")),method:"POST",data:{status:parseInt(n)}}).then((function(e){if(200!=e.code)throw Error(Object(s.w)(null==e?void 0:e.message));r(e.message);var t=l;return t.status=n,b("data",t),Object(s.Pb)(r,3e3),!0})).catch((function(e){throw Error(Object(s.w)(null==e?void 0:e.message))}));case 2:e.n=4;break;case 3:e.p=3,a=e.v,U({status:!0,error:a.message}),Object(s.Pb)(r,3e3);case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(C.a,null),Object(n.createElement)("div",{className:"bwf-content-header-new"},Object(n.createElement)("div",{className:"bwf-content-header-left"},Object(n.createElement)("div",{className:"bwf-content-header-title2"},Object(o.__)("Overview","wp-marketing-automations")))),l&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwfcrm-overview-wrap"},!Object(A.isEmpty)(V)&&V.map((function(e,t){var r=e.type,a=void 0===r?"error":r,o=e.msg,c=void 0===o?"":o,i=e.isHtml,s=void 0!==i&&i,l=e.icon,u=void 0===l?"info":l;return""===c?null:Object(n.createElement)(Q.a,{key:t,isHtml:s,status:a,isDismissible:!1,icon:u},c)})),Object(n.createElement)(S,{campaign:l,pauseUnpauseBroadcast:$}),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(a.Card,{className:"bwf-crm-overview-detail-wrap"},Object(n.createElement)(a.CardHeader,{className:"bwf-crm-overview-report-header"},Object(n.createElement)("span",{className:"bwf-form-title"},Object(o.__)("Details","wp-marketing-automations"))),Object(n.createElement)(a.CardBody,null,Object(n.createElement)("div",{className:"bwf-report-row"},Object(n.createElement)("div",{className:"bwf-report-row-label"},Object(o.__)("Title","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-report-row-value"},l.title)),Object(n.createElement)("div",{className:"bwf-report-row"},Object(n.createElement)("div",{className:"bwf-report-row-label"},Object(o.__)("Type","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-report-row-value"},u[l.type].label)),Object(n.createElement)("div",{className:"bwf-report-row"},Object(n.createElement)("div",{className:"bwf-report-row-label"},2===parseInt(l.status)?Object(o.__)("Scheduled On","wp-marketing-automations"):Object(o.__)("Sent On","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-report-row-value"},l.execution_time?Object(s.lb)(l.execution_time,!1,!0):" - ")),l.description&&Object(n.createElement)("div",{className:"bwf-report-row"},Object(n.createElement)("div",{className:"bwf-report-row-label"},Object(o.__)("Description","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-report-row-value"},l.description)),l.data.hasOwnProperty("filters")&&!Object(A.isEmpty)(l.data.filters)&&Object(n.createElement)("div",{className:"bwf-report-row"},Object(n.createElement)("div",{className:"bwf-report-row-label"},Object(o.__)("Segments","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-report-row-value"},Object(F.b)(l.data.filters))),Object(s.fc)()&&parseInt(l.status)<3&&!(l.hasOwnProperty("engagement_creating")&&l.engagement_creating)&&Object(n.createElement)("div",{className:"bwf-report-row"},Object(n.createElement)("div",{className:"bwf-report-row-label"}),Object(n.createElement)("div",{className:"bwf-report-row-value bwf-report-value-modal"},Object(n.createElement)(a.Button,{isSecondary:!0,className:"bwf-a-no-underline",onClick:function(){return p(!0)}},Object(o.__)("Edit Broadcast","wp-marketing-automations")))))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(a.Card,{className:"bwf-crm-overview-detail-wrap"},Object(n.createElement)(a.CardHeader,{className:"bwf-crm-overview-report-header"},Object(n.createElement)("span",{className:"bwf-form-title"},Object(o.__)("Content","wp-marketing-automations"))),Object(n.createElement)(a.CardBody,null,!!l.type&&1===parseInt(l.type)&&l.data.hasOwnProperty("senders_name")&&!Object(A.isEmpty)(l.data.senders_name)&&Object(n.createElement)("div",{className:"bwf-report-row",key:1},Object(n.createElement)("div",{className:"bwf-report-row-label"},Object(o.__)("From Name","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-report-row-value"},l.data.senders_name)),!!l.type&&1===parseInt(l.type)&&l.data.hasOwnProperty("senders_email")&&!Object(A.isEmpty)(l.data.senders_email)&&Object(n.createElement)("div",{className:"bwf-report-row",key:2},Object(n.createElement)("div",{className:"bwf-report-row-label"},Object(o.__)("From Email","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-report-row-value"},l.data.senders_email)),!!l.type&&1===parseInt(l.type)&&l.data.hasOwnProperty("replyto")&&!Object(A.isEmpty)(l.data.replyto)&&Object(n.createElement)("div",{className:"bwf-report-row",key:3},Object(n.createElement)("div",{className:"bwf-report-row-label"},Object(o.__)("Reply-To Email","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-report-row-value"},l.data.replyto)),l.data&&l.data.content&&l.data.content.map((function(e,t){return Object(n.createElement)("div",{className:"bwf-report-row",key:"bwf-report-row-".concat(t)},Object(n.createElement)("div",{className:"bwf-report-row-label"},l.data.content.length>1?Object(o.__)("Content #","wp-marketing-automations")+(parseInt(t)+1):Object(o.__)("Content","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-report-row-value bwf-report-value-modal"},1===parseInt(l.type)&&e.subject&&Object(n.createElement)("span",null,e.subject),Object(n.createElement)(a.Button,{isTertiary:!0,className:"bwf-btn-small is-light",onClick:re(W().m((function t(){var r;return W().w((function(t){for(;;)switch(t.n){case 0:return w(!0),t.n=1,J(e,1);case 1:r=t.v,I(r);case 2:return t.a(2)}}),t)})))},Object(o.__)("View details","wp-marketing-automations"))))})),!!l.data&&l.data.hasOwnProperty("smart_send")&&l.data.smart_send.hasOwnProperty("enable")&&l.data.smart_send.enable&&function(){var e=l.data,t=e.smart_send,r=void 0===t?{}:t,a=e.smart_send_stat,c=void 0===a?{}:a,i=e.content,s=void 0===i?[]:i,u=e.winner,m=void 0===u?"":u;if(Object(A.isEmpty)(r))return Object(n.createElement)(n.Fragment,null);var b=[];return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-report-row",key:11},Object(n.createElement)("div",{className:"bwf-report-row-label"},Object(o.__)("Smart sending","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-report-row-value"},Object(o.__)("Enabled","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-report-row",key:12},Object(n.createElement)("div",{className:"bwf-report-row-label"},Object(o.__)("Sample size","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-report-row-value"},r.percent+" %")),Object(n.createElement)("div",{className:"bwf-report-row",key:13},Object(n.createElement)("div",{className:"bwf-report-row-label"},Object(o.__)("Wait Time","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-report-row-value"},Object(o.sprintf)(Object(o._n)("%s Hour","%s Hours",parseInt(r.hours),"wp-marketing-automations"),parseInt(r.hours)))),s.length>0&&!Object(A.isEmpty)(c)&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-report-row",key:11},Object(n.createElement)("div",{className:"bwf-report-row-label"},Object(o.__)("Smart Sending Stats","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-report-row-value"},s.map((function(e,t){var r=e.template_id,a=void 0===r?"":r;return""===a||!c.hasOwnProperty(a)||b.includes(a)?Object(n.createElement)(n.Fragment,null):(b.push(a),Object(n.createElement)("div",{className:"bwf-smart-send-analytics-item",key:t},Object(n.createElement)("div",{className:"bwf-smart-send-analytics-header"},Object(n.createElement)("span",{className:"bwf-smart-send-title"},Object(o.__)("Content #","wp-marketing-automations")+(parseInt(t)+1)),a==m&&Object(n.createElement)(D.a,{icon:"winner"})),Object(n.createElement)("div",{className:"bwf-smart-send-analytics-content"},c[a].map((function(e,t){return Object(n.createElement)("div",{className:"bwf-smart-send-test-content-stat",key:t},Object(n.createElement)("span",{className:"bwf-smart-send-test-content-value"},e.v),Object(n.createElement)("span",{className:"bwf-smart-send-test-content-label"},e.l))})))))}))))))}(),Object(n.createElement)(P.a,{isOpen:O,isLoading:y,onRequestClose:function(){return w(!1)},subject:k.subject,preHeader:k.preheader,body:h,type:k.type,sourceType:2,mode:l.type,utm:k.utm}),Object(n.createElement)(f.a,{modalTitle:"Broadcast Action",confirmText:B.confirmText,confirmButtonText:B.buttonConfirm,cancelButtonText:B.buttonCancel,onConfirm:B.onConfirm,isLoading:B.loading,successMessage:B.success,errorMessage:B.error,onRequestClose:function(){return U({status:!1})},isOpen:B.status}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(z,null))))}}}]);