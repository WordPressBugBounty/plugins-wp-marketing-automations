(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1063:function(t,e,r){"use strict";var n=r(0),a=r(6),o=r.n(a),c=r(1),i=r(8),l=(r(1067),r(39)),u=r(3);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(t){var e=s(Object(n.useState)(!1),2),r=e[0],a=e[1],f=t.modalContent,m=void 0===f?{}:f,p=t.content,b=t.onPage,h=void 0!==b&&b;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:o()("bwf-upgrade-pro-overlay",{"is-on-page":h}),onClick:function(){h||a(!0)}},h?Object(n.createElement)(l.a,{showHeader:!1,modalContent:m}):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-king-tag-pro"},Object(n.createElement)(i.a,{icon:"king",size:38,color:"#fff"})),Object(n.createElement)("span",{className:"bwf-mt-8"},p||(Object(u.Ub)()?Object(c.__)("Activate your license to continue using premium features without interruption.","wp-marketing-automations"):Object(c.__)("This feature is locked. To get full access of FunnelKit Automation upgrade to PRO","wp-marketing-automations"))))),Object(n.createElement)(l.b,{isOpen:r,onRequestClose:function(){return a(!1)},modalContent:m}))}},1067:function(t,e,r){},1072:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r(0);var a=function(t,e){var r=Object(n.useRef)();Object(n.useEffect)((function(){r.current=t}),[t]),Object(n.useEffect)((function(){if(null!==e){var t=setInterval((function(){r.current()}),e);return function(){return clearInterval(t)}}}),[e])}},1075:function(t,e,r){"use strict";var n=r(49),a=r(3),o=r(2);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=["fetch","setStateProp"],l=["s","page","filter","path"],u=["s","page","filter","path"];function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}e.a=function(){var t=Object(n.a)("contacts"),e=t.fetch,r=t.setStateProp;return f(f({},p(t,i)),{},{setStateProp:r,fetch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,f=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7],b=arguments.length>8&&void 0!==arguments[8]&&arguments[8],h=arguments.length>9&&void 0!==arguments[9]&&arguments[9],d=arguments.length>10&&void 0!==arguments[10]&&arguments[10],y=arguments.length>11&&void 0!==arguments[11]?arguments[11]:[];r("isLoading",!0);var v=t.s,g=void 0===v?"":v,w=(t.page,t.filter,t.path,p(t,l)),O={offset:n,limit:c,search:g,filters:w,get_wc:Object(a.nc)(),grab_totals:i,only_count:u,fetch_base:s,grab_custom_fields:!1,include_unsubs:!f,exclude_unsubs_lists:m,includeUnverified:h,includeSoftBounce:d,include_ids:y},j=Object(a.zb)("table_sort_data"),E=j.hasOwnProperty("contact_sort_data")?j.contact_sort_data:{},_=Object(o.isObject)(E)&&!Object(o.isEmpty)(E)?E:{},k=_.orderby,x=void 0===k?"last_modified":k,S=_.order,N=void 0===S?"desc":S;N&&x&&(O.order=N,O.order_by=x),b&&(O.unopen_broadcast=parseInt(b)),e("GET",Object(a.z)("/contacts"),O)},fetchListing:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,f=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7],b=arguments.length>8&&void 0!==arguments[8]&&arguments[8];r("isLoading",!0);var h=t.s,d=void 0===h?"":h,y=(t.page,t.filter,t.path,p(t,u)),v={offset:n,limit:c,search:d,filters:y,get_wc:Object(a.nc)(),grab_totals:i,only_count:l,fetch_base:s,grab_custom_fields:!1,exclude_unsubs:f,exclude_unsubs_lists:m},g=Object(a.zb)("table_sort_data"),w=g.hasOwnProperty("contact_sort_data")?g.contact_sort_data:{},O=Object(o.isObject)(w)&&!Object(o.isEmpty)(w)?w:{},j=O.orderby,E=void 0===j?"last_modified":j,_=O.order,k=void 0===_?"desc":_;k&&E&&(v.order=k,v.order_by=E),b&&(v.unopen_broadcast=parseInt(b)),e("GET",Object(a.z)("/v3/contacts/listing"),v)},startIndexing:function(){return e("GET",Object(a.z)("/contacts"),{start_indexing:!0})}})}},1082:function(t,e,r){"use strict";var n=r(0),a=r(26),o=r(1),c=r(195);e.a=function(t){var e=t.selected,r=t.onTagsChange;return Object(n.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(n.createElement)("div",{className:"bwf-input-label"},Object(o.__)("Add Tags","wp-marketing-automations")),Object(n.createElement)(a.a,{autocompleter:c.b,multiple:!1,allowFreeTextSearch:!0,inlineTags:!1,selected:e,onChange:function(t){r(t)},onRemoveTag:function(t,n){var a=e.filter((function(e){return!(e.key==t&&e.label==n)}));r(a)},placeholder:Object(o.__)("Search by tag name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},1091:function(t,e,r){"use strict";var n=r(50);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=["getStateProp"];function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}e.a=function(){var t=Object(n.a)("contacts"),e=t.getStateProp;return i(i({},function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(t,o)),{},{getContacts:function(){return e("contacts_list")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getTotalCount:function(){return parseInt(e("total"))},getCountData:function(){return e("countData")}})}},1092:function(t,e,r){"use strict";var n=r(0),a=r(26),o=r(1),c=r(195);e.a=function(t){var e=t.selected,r=t.onListsChange;return Object(n.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(n.createElement)("div",{className:"bwf-input-label"},Object(o.__)("Add to Lists","wp-marketing-automations")),Object(n.createElement)(a.a,{autocompleter:c.a,multiple:!1,allowFreeTextSearch:!0,selected:e,onChange:function(t){r(t)},onRemoveTag:function(t){var n=e.filter((function(e){return e.key!=t}));r(n)},placeholder:Object(o.__)("Search by list name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},1127:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(90),a={"am-AM":/^(\+?374|0)(33|4[134]|55|77|88|9[13-689])\d{6}$/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)([569]\d{7}|41\d{6})$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?(9[1-9])\d{6}$/,"ar-PS":/^(\+?970|0)5[6|9](\d{7})$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SD":/^((\+?249)|0)?(9[012369]|1[012])\d{7}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(10|5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^((\+49|0)1)(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"dv-MV":/^(\+?960)?(7[2-9]|9[1-9])\d{5}$/,"el-GR":/^(\+?30|0)?6(8[5-9]|9(?![26])[0-9])\d{7}$/,"el-CY":/^(\+?357?)?(9(9|6)\d{6})$/,"en-AI":/^(\+?1|0)264(?:2(35|92)|4(?:6[1-2]|76|97)|5(?:3[6-9]|8[1-4])|7(?:2(4|9)|72))\d{4}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-AG":/^(?:\+1|1)268(?:464|7(?:1[3-9]|[28]\d|3[0246]|64|7[0-689]))\d{4}$/,"en-BM":/^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}$))/,"en-BS":/^(\+?1[-\s]?|0)?\(?242\)?[-\s]?\d{3}[-\s]?\d{4}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|28|55|59)\d{7}$/,"en-GY":/^(\+592|0)6\d{6}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-JM":/^(\+?876)?\d{7}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"fr-CF":/^(\+?236| ?)(70|75|77|72|21|22)\d{6}$/,"en-SS":/^(\+?211|0)(9[1257])\d{7}$/,"en-KI":/^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,"en-KN":/^(?:\+1|1)869(?:46\d|48[89]|55[6-8]|66\d|76[02-7])\d{4}$/,"en-LS":/^(\+?266)(22|28|57|58|59|27|52)\d{6}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-MW":/^(\+?265|0)(((77|88|31|99|98|21)\d{7})|(((111)|1)\d{6})|(32000\d{4}))$/,"en-NA":/^(\+?264|0)(6|8)\d{7}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PG":/^(\+?675|0)?(7\d|8[18])\d{6}$/,"en-PK":/^((00|\+)?92|0)3[0-6]\d{8}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"en-BW":/^(\+?267)?(7[1-8]{1})\d{6}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-CU":/^(\+53|0053)?5\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8|3|2]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-NI":/^(\+?505)\d{7,8}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-SV":/^(\+?503)?[67]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"es-VE":/^(\+?58)?(2|4)\d{9}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4[0-6]|50)\s?(\d\s?){4,8}$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-BF":/^(\+226|0)[67]\d{7}$/,"fr-BJ":/^(\+229)\d{8}$/,"fr-CD":/^(\+?243|0)?(8|9)\d{8}$/,"fr-CM":/^(\+?237)6[0-9]{8}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-PF":/^(\+?689)?8[789]\d{6}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"fr-WF":/^(\+681)?\d{6}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36|06)(20|30|31|50|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"ir-IR":/^(\+98|0)?9\d{9}$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(79\d{7}|5\d{8})$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"ky-KG":/^(\+?7\s?\+?7|0)\s?\d{2}\s?\d{3}\s?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"mg-MG":/^((\+?261|0)(2|3)\d)?\d{7}$/,"mn-MN":/^(\+|00|011)?976(77|81|88|91|94|95|96|99)\d{6}$/,"my-MM":/^(\+?959|09|9)(2[5-7]|3[1-2]|4[0-5]|6[6-9]|7[5-9]|9[6-9])[0-9]{7}$/,"ms-MY":/^(\+?60|0)1(([0145](-|\s)?\d{7,8})|([236-9](-|\s)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nl-AW":/^(\+)?297(56|59|64|73|74|99)\d{5}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?([5-8]\d|45) ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[1-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+244)\d{9}$/,"ro-MD":/^(\+?373|0)((6(0|1|2|6|7|8|9))|(7(6|7|8|9)))\d{6}$/,"ro-RO":/^(\+?40|0)\s?7\d{2}(\/|\s|\.|-)?\d{3}(\s|\.|-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"so-SO":/^(\+?252|0)((6[0-9])\d{7}|(7[1-9])\d{7})$/,"sq-AL":/^(\+355|0)6[789]\d{6}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"tg-TJ":/^(\+?992)?[5][5]\d{7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"tk-TM":/^(\+993|993|8)\d{8}$/,"uk-UA":/^(\+?38|8)?0\d{9}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"dz-BT":/^(\+?975|0)?(17|16|77|02)\d{6}$/,"ar-YE":/^(((\+|00)9677|0?7)[0137]\d{7}|((\+|00)967|0)[1-7]\d{6})$/,"ar-EH":/^(\+?212|0)[\s\-]?(5288|5289)[\s\-]?\d{5}$/,"fa-AF":/^(\+93|0)?(2{1}[0-8]{1}|[3-5]{1}[0-4]{1})(\d{7})$/};function o(t,e,r){if(Object(n.a)(t),r&&r.strictMode&&!t.startsWith("+"))return!1;if(Array.isArray(e))return e.some((function(e){if(a.hasOwnProperty(e)&&a[e].test(t))return!0;return!1}));if(e in a)return a[e].test(t);if(!e||"any"===e){for(var o in a){if(a.hasOwnProperty(o))if(a[o].test(t))return!0}return!1}throw new Error("Invalid locale '".concat(e,"'"))}a["en-CA"]=a["en-US"],a["fr-CA"]=a["en-CA"],a["fr-BE"]=a["nl-BE"],a["zh-HK"]=a["en-HK"],a["zh-MO"]=a["en-MO"],a["ga-IE"]=a["en-IE"],a["fr-CH"]=a["de-CH"],a["it-CH"]=a["fr-CH"];Object.keys(a)},1128:function(t,e,r){},1163:function(t,e,r){"use strict";r.d(e,"a",(function(){return w}));var n=r(0),a=r(5),o=r(1),c=r(2),i=r(1082),l=r(1092),u=r(18),s=r(69),f=r(8),m=r(28),p=r(3);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=b(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==b(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var w=function(t){var e=t.headersData,r=t.onRequestImport,b=t.submitButtonText,h=t.secondaryButtonText,g=t.onSecondaryButtonClick,w=t.savedData,O=t.buttonAlignClass,j=t.backButtonText,E=t.backButtonClick,_=t.extra,k=t.isSubmitButtonBusy,x=t.sourceHeaderText,S=void 0===x?Object(o.__)("Columns To Import","wp-marketing-automations"):x,N=t.contactHeaderText,L=void 0===N?Object(o.__)("Map Into Field","wp-marketing-automations"):N,P=t.updateExistingText,C=void 0===P?Object(o.__)("Update Existing Contacts","wp-marketing-automations"):P,I=t.secondaryClass,A=void 0===I?"":I,T=e.headers,F=e.fields,G=v(Object(n.useState)(w&&w.mapped_fields?function(t,e){if(!t)return{};var r={},n=function(n){e.find((function(t){return t.index.toString()===n}))&&(r[n]=t[n])};for(var a in t)n(a);return r}(w.mapped_fields,T):{}),2),$=G[0],D=G[1],M=v(Object(n.useState)(0),2),z=M[0],B=M[1],U=w&&w.tags?w.tags.map((function(t){return{key:t.id,label:t.value}})):[],R=w&&w.lists?w.lists.map((function(t){return{key:t.id,label:t.value}})):[],Y=v(Object(n.useState)(U),2),q=Y[0],V=Y[1],W=v(Object(n.useState)(R),2),H=W[0],K=W[1],J=v(Object(n.useState)(!(!w||!("update_existing"in w))&&w.update_existing),2),Z=J[0],Q=J[1],X=v(Object(n.useState)(!w||!("update_blank"in w)||w.update_blank),2),tt=X[0],et=X[1],rt=v(Object(n.useState)(!w||!("marketing_status"in w)||w.marketing_status),2),nt=rt[0],at=(rt[1],v(Object(n.useState)(!(!w||!("trigger_events"in w))&&w.trigger_events),2)),ot=at[0],ct=at[1],it=v(Object(n.useState)(null),2),lt=it[0],ut=it[1],st=(_||{}).disableMarketingStatusCheck,ft=void 0!==st&&st,mt=function(){return ut(null),0===Object(c.size)($)?(setTimeout((function(){return ut(Object(o.__)("Select the contact fields.","wp-marketing-automations"))}),500),!1):!!Object.values($).includes("email")||(setTimeout((function(){return ut(Object(o.__)("Map contact email with a form field.","wp-marketing-automations"))}),500),!1)},pt=function(){if(mt()){var t={};T.map((function(e){e.index in $&&(t[e.index]=$[e.index])}));var e={map:t,tags:q.map((function(t){return{id:t.key,value:t.label}})),lists:H.map((function(t){return{id:t.key,value:t.label}})),update_existing:Z,trigger_events:ot,imported_contact_status:z,dont_update_blank:tt};!ft&&(e.marketing_status=nt),r(e)}},bt=function(){if(mt()){var t={};T.map((function(e){e.index in $&&(t[e.index]=$[e.index])}));var e={map:t,tags:q.map((function(t){return{id:t.key,value:t.label}})),lists:H.map((function(t){return{id:t.key,value:t.label}})),update_existing:Z,trigger_events:ot};!ft&&(e.marketing_status=nt),g(e)}},ht=Object(p.L)();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-import-mapper-fields bwf-card-wrap bwf-form-fields bwf-crm-importer-csv-wrap"},Object(n.createElement)("div",{className:"bwf-card-header"},Object(n.createElement)("span",{className:"bwf-form-title"},Object(o.__)("Mapping","wp-marketing-automations"))),lt&&Object(n.createElement)("div",{className:"bwf-mr-16 bwf-ml-16"},Object(n.createElement)(s.a,null),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)(m.a,{status:"error",onRemove:function(){return ut(null)}},lt)),!Object(c.isArray)(F)||!F.length>0||!Object(c.isArray)(T)||!T.length>0?!Object(c.isArray)(F)||!F.length>0?Object(n.createElement)(m.a,{status:"error"},Object(o.__)("No contact fields found","wp-marketing-automations")):!Object(c.isArray)(T)||!T.length>0?Object(n.createElement)(m.a,{status:"error"},Object(o.__)("No mapping fields found")):void 0:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-c-import-field",key:"mapper-sel-wrap"},Object(n.createElement)("strong",null,S),Object(n.createElement)("span",null),Object(n.createElement)("strong",null,L)),T.map((function(t,e){return Object(n.createElement)("div",{key:e,className:"bwf-c-import-field"},Object(n.createElement)(a.TextControl,{disabled:!0,value:t.header}),Object(n.createElement)("span",{className:"bwf-display-flex"},Object(n.createElement)(f.a,{icon:"mapper"})),Object(n.createElement)("select",{value:t.index in $?$[t.index]:"",onChange:function(e){return function(t,e){var r=e.target.value,n="index"in t?t.index:"";""===r&&n in $?D(Object(c.omit)($,n)):""!==r&&""!==n&&D(d(d({},$),{},y({},n,r)))}(t,e)},key:"bwf-select-field"},Object(n.createElement)("option",{value:"",key:"default-key"+e},Object(o.__)("Do Not Import This Field","wp-marketing-automations")),F.map((function(t,r){return"fields"in t&&t.fields.length>0&&Object(n.createElement)("optgroup",{key:t.id+"-"+r+"-"+e,label:t.name},t.fields.map((function(t){return Object(n.createElement)("option",{key:t.id,value:t.id},t.name)})))}))))}))),Object(n.createElement)("div",{className:"bwf-crm-import-section",style:{border:0}},Object(n.createElement)("div",{className:"bwf-h4"},Object(o.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-import-field",key:"select-tag-list"},Object(n.createElement)(i.a,{onTagsChange:V,selected:q}),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(l.a,{onListsChange:K,selected:H})),!ft&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-heading7-new"},Object(o.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-csv-status-select",onChange:function(t){B(t.target.value)},key:"bwf-select-status",value:z},Object.keys(ht).map((function(t){return Object(n.createElement)("option",{key:t,value:t},ht[t])}))),Object(n.createElement)("div",{className:"bwf_clear_24"})),Object(n.createElement)("div",null,Object(n.createElement)(a.ToggleControl,{label:C,checked:Z,className:"bwf-tooglecontrol-advance",onChange:Q})),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",null,Object(n.createElement)(a.ToggleControl,{label:Object(o.__)("Don't Update Blank Values","wp-marketing-automations"),checked:tt,className:"bwf-tooglecontrol-advance",onChange:et})),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",null,Object(n.createElement)(a.ToggleControl,{label:Object(o.__)("Trigger Automations (For Tag & List Related Events)","wp-marketing-automations"),checked:ot,className:"bwf-tooglecontrol-advance",onChange:ct})))),Object(n.createElement)("div",{className:"bwf-pt-0"},O?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(u.a,null,!!j&&Object(n.createElement)(u.b,null,Object(n.createElement)(a.Button,{isSecondary:!0,onClick:E,className:A},j)),Object(n.createElement)(u.b,{className:O},Object(n.createElement)(a.Button,{onClick:pt,isBusy:!!k,disabled:!!k,isPrimary:!0},Object(n.createElement)("span",null,b||Object(o.__)("Import","wp-marketing-automations"))),h&&Object(n.createElement)(a.Button,{onClick:bt,className:"bwf-ml-10",isSecondary:!0},h)))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(a.Button,{onClick:pt,isPrimary:!0,isBusy:!!k,disabled:!!k,className:"bwf-display-flex"},Object(n.createElement)("span",null,b||Object(o.__)("Import","wp-marketing-automations"))),h&&Object(n.createElement)(a.Button,{onClick:bt,className:"bwf-ml-10",isSecondary:!0},h)))))}},1164:function(t,e,r){},1227:function(t,e,r){},1228:function(t,e,r){},1229:function(t,e,r){},1230:function(t,e,r){},1231:function(t,e,r){},1232:function(t,e,r){},1469:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r(1),o=r(19),c=r(6),i=r.n(c),l=r(3),u=r(144),s=r(2),f=r(194),m=r(62),p=r(63),b=r(5),h=r(18),d=r(1091),y=r(1075),v=r(10),g=r.n(v),w=r(355),O=r(8),j=r(156),E=r(28),_=r(13);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var x=["body"];function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){L(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function L(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=k(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==k(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P(){P=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new C(n||[]);return a(c,"_invoke",{value:x(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(I([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==k(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function x(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=S(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function S(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(k(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;L(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function C(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return A(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var T=function(t){var e=t.contact,r=Object(n.useContext)(l.h),o=I(Object(n.useState)(!1),2),c=o[0],i=o[1],u=I(Object(n.useState)({type:"email",title:"",body:"",id:0,send:!1}),2),f=u[0],m=u[1],p=I(Object(n.useState)({status:!1,message:""}),2),h=p[0],d=p[1],y=[{value:"",label:Object(a.__)("Select Type","wp-marketing-automations")}].concat(Object(l.K)()),v=function(){var n,a=(n=P().mark((function n(a){var o;return P().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(o={title:a.title,body:a.body,type:a.type,private:a.send,modified_by:Object(l.M)()}).created_by=Object(l.M)(),i(!0),n.prev=3,n.next=6,g()({path:Object(l.z)("/v3/contacts/".concat(e.id,"/notes/")),method:"POST",data:{notes:o},headers:{"Content-Type":"application/json"}}).then((function(e){if(200!=e.code)throw Error(Object(l.t)(null==e?void 0:e.message));r(e.message),t.setModelStatus({status:!1,contactInfo:{}})})).catch((function(t){throw Error(Object(l.t)(null==t?void 0:t.message))}));case 6:n.next=12;break;case 8:n.prev=8,n.t0=n.catch(3),d({status:!0,message:n.t0.message}),i(!1);case 12:Object(l.Jb)(r,3e3);case 13:case"end":return n.stop()}}),n,null,[[3,8]])})),function(){var t=this,e=arguments;return new Promise((function(r,a){var o=n.apply(t,e);function c(t){C(o,r,a,c,i,"next",t)}function i(t){C(o,r,a,c,i,"throw",t)}c(void 0)}))});return function(t){return a.apply(this,arguments)}}();return Object(n.createElement)(b.Modal,{className:"bwf-admin-modal bwf-admin-modal-large bwf-message-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Add Note","wp-marketing-automations")),Object(n.createElement)("span",{onClick:function(){return t.setModelStatus(!1)},className:"bwf-modal-close"},Object(n.createElement)(O.a,{icon:"close",color:"#353030"}))),Object(n.createElement)("div",{className:"bwf-form-fields"},h.status&&Object(n.createElement)(E.a,{status:"error",onRemove:function(){return d(!1)},className:"bwf-send-note-notice"},h.message?h.message:Object(a.__)("Title, type and body are mandatory field. Kindly fill them","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-message-wrap"},Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-mb-24"},Object(n.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Contact","wp-marketing-automations")),Object(n.createElement)("div",null,Object(n.createElement)("span",{className:"bwf-highlight-content"},Object(n.createElement)("b",null,e.f_name+" "+e.l_name)," ( "+e.email+" ) "))),Object(n.createElement)("div",{className:"bwf-mb-24"},Object(n.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Type","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-select-full-wrap"},Object(n.createElement)(b.SelectControl,{value:f.type,className:"bwf-w-100p",options:y,onChange:function(t){return m(N(N({},f),{},{type:t}))},disabled:c}))),Object(n.createElement)("div",{className:"bwf-mb-24"},Object(n.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Title","wp-marketing-automations")),Object(n.createElement)(b.TextControl,{type:"text",value:f.title,placeholder:Object(a.__)("Type here …","wp-marketing-automations"),disabled:c,onChange:function(t){return m(N(N({},f),{},{title:t}))}})),Object(n.createElement)("div",{className:"bwf-message-textarea"},Object(n.createElement)(j.a,{keyid:"bwf-note-editor",content:f.body,setContent:function(t){m((function(e){e.body;return N(N({},function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(e,x)),{},{body:t})}))},height:200})),Object(n.createElement)("div",{className:"bwf-message-footer"},0==parseInt(f.id)&&Object(n.createElement)("div",{className:"bwf-note-send"},Object(n.createElement)(b.ToggleControl,{label:Object(a.__)("Send Note to Contact","wp-marketing-automations"),checked:Boolean(parseInt(f.send)),onChange:function(t){return m(N(N({},f),{},{send:t?"1":"0"}))},className:"bwf-tooglecontrol-advance"})),Object(n.createElement)("div",{className:"bwf-button-col"},Object(n.createElement)(_.a,{className:"bwf-cancel-btn",onClick:function(){return t.setModelStatus(!1)},disabled:c},Object(a.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(_.a,{isPrimary:!0,isBusy:c,disabled:c,onClick:function(){Object(s.isEmpty)(f.title)||Object(s.isEmpty)(f.body)||Object(s.isEmpty)(f.type)?d({status:!0,message:""}):(d({status:!1,message:""}),m(N(N({},f),{},{loading:!0})),v(f))}},Object(a.__)("Add Note","wp-marketing-automations")))))))},F=r(47),G=r(147),$=r(14),D=r(341),M=r(146),z=(r(1164),r(1081)),B=r(1103),U=r(199),R=r(1063),Y=function(t){var e=t.isOpen,r=void 0!==e&&e,o=t.query,c=Object(z.a)(!0,!0),i=c.loading,u=c.filters;return r&&!Object(l.Yb)()?Object(n.createElement)("div",{className:"bwf-filter-placeholder bwf-w-100p "+(Object(l.Yb)()?"":"bwf-position-relative bwf-h-200")},!!u&&Object(n.createElement)(U.a,{siteLocale:"en-US",currency:{},config:{title:Object(a.__)("Select Rules","wp-marketing-automations"),filters:u,footerComponent:function(t){return Object(n.createElement)(B.a,{filter:t.data,config:t.config})},enableGrouping:!0},path:"/contacts",query:{}}),Object(n.createElement)(R.a,{modalContent:{isFeature:!0,featureTitle:Object(a.__)("Contact Filters","wp-marketing-automations"),proLink:Object(l.db)("upgrade",{utm_medium:"Contacts+Filters"})},content:Object(a.__)("We're sorry, this feature is not available on your plan. Learn more about Contact Filters.","wp-marketing-automations")})):r&&i?Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-filter-placeholder"},Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start gap-12"},Object(n.createElement)("div",{className:"bwf-w-60"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-60"})),Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-210"}),Object(n.createElement)("br",null),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-30 bwf-w-90"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-30 bwf-w-90"}))),Object(n.createElement)("div",{className:"bwf_clear_20"})):r&&!!u&&Object(n.createElement)(U.a,{siteLocale:"en-US",currency:Object(l.nc)()?bwfcrm_contacts_data.currency:{},config:{title:Object(a.__)("Select Rules","wp-marketing-automations"),filters:u,footerComponent:function(t){return Object(n.createElement)(B.a,{filter:t.data,config:t.config})},enableGrouping:!0},path:"/contacts",query:o})},q=r(43),V=r(85);function W(t){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(){H=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==W(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(W(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function K(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function J(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?K(Object(r),!0).forEach((function(e){Z(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Z(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=W(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==W(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function X(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return tt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var et=function(t){var e=t.refreshTable,r=X(Object(n.useState)(!1),2),o=r[0],c=r[1],i=Object(l.zb)("table_sort_data"),u=i.hasOwnProperty("contact_sort_data")?i.contact_sort_data:{},f=Object(s.isObject)(u)&&!Object(s.isEmpty)(u)?u:{},p=f.orderby,b=void 0===p?"last_modified":p,h=f.order,d=void 0===h?"desc":h,y=Object(n.useContext)(l.h),v=[{value:"f_name",label:Object(a.__)("Contact Name","wp-marketing-automations")},{value:"creation_date",label:Object(a.__)("Creation Date","wp-marketing-automations")},{value:"last_modified",label:Object(a.__)("Last Updated","wp-marketing-automations")},{value:"country",label:Object(a.__)("Country","wp-marketing-automations")},{value:"state",label:Object(a.__)("State","wp-marketing-automations")}];Object(l.nc)()&&v.push({value:"total_order_count",label:Object(a.__)("Orders","wp-marketing-automations")},{value:"total_order_value",label:Object(a.__)("Total Spend","wp-marketing-automations")},{value:"l_order_date",label:Object(a.__)("Last Order Date","wp-marketing-automations")});var w=X(Object(n.useState)(b),2),j=w[0],E=w[1],k=X(Object(n.useState)(d),2),x=k[0],S=k[1],N=function(){var t,r=(t=H().mark((function t(r){var n,o;return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.prev=1,n={orderby:j,order:x},(o=J({},i)).contact_sort_data=n,t.next=7,g()({path:Object(l.z)("/user-preference/".concat(Object(l.M)(),"/")),method:"POST",data:{data:{table_sort_data:o}}}).then((function(t){if(200!==t.code)throw Error(Object(l.t)(null==t?void 0:t.message));bwfcrm_contacts_data.table_column_data.table_sort_data.contact_sort_data=n,y(t.message),e(),r(),c(!1)})).catch((function(t){throw Error(Object(l.t)(null==t?void 0:t.message))}));case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),c(!1),y(t.t0.message?t.t0.message:Object(a.__)("Error in saving sort data","wp-marketing-automations"));case 13:Object(l.Jb)(y,2e3);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){Q(o,n,a,c,i,"next",t)}function i(t){Q(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(t){return r.apply(this,arguments)}}();return Object(n.createElement)("div",{className:"bwf-custom-ellipsis bwf-sort-ellipsis-contact-list",style:{width:"30px"}},Object(n.createElement)(m.a,{label:"",buttonIcon:Object(n.createElement)("div",{className:"bwf-sort-button components-button is-light bwf-btn-small",key:"import",style:{width:"30px",padding:"7px"},title:Object(a.__)("Sort Order","wp-marketing-automations")},Object(n.createElement)(O.a,{icon:"sort",size:14})),renderContent:function(t){var e=t.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-heading-1"},Object(a.__)("Sorting","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-heading-2 bwf-mt-16"},Object(a.__)("Sort Order","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-contact-sort-popover"},Object(n.createElement)("div",{className:"bwf-display-flex gap-8 bwf-flex-start bwf-sort-order-buttons"},Object(n.createElement)(_.a,{isSecondary:!x||"desc"===x,isTertiary:x&&"desc"!==x,onClick:function(){return S("desc")}},Object(a.__)("Descending","wp-marketing-automations")),Object(n.createElement)(_.a,{isSecondary:x&&"asc"===x,isTertiary:x&&"asc"!==x,onClick:function(){return S("asc")}},Object(a.__)("Ascending","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-sort-column-list bwf-mt-16"},Object(n.createElement)(V.a,{className:"bwfcrm-inline-option",selected:j,label:"",options:v,onChange:function(t){return E(t)}})),Object(n.createElement)("div",{className:"bwf-contact-sort-action bwf-mt-16"},Object(n.createElement)(_.a,{isPrimary:!0,className:"bwf-update-button",onClick:function(){return N(e)},isBusy:o},Object(a.__)("Update","wp-marketing-automations")))))}}))},rt=r(272),nt=r(124);function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t){return function(t){if(Array.isArray(t))return bt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||pt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function it(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(r),!0).forEach((function(e){lt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function lt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=at(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=at(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==at(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ut(){ut=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==at(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(at(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function st(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function ft(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){st(o,n,a,c,i,"next",t)}function i(t){st(o,n,a,c,i,"throw",t)}c(void 0)}))}}function mt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||pt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(t,e){if(t){if("string"==typeof t)return bt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bt(t,e):void 0}}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var ht=Object(nt.c)((function(){return Object(n.createElement)(O.a,{icon:"menu-2",size:20})})),dt=Object(nt.b)((function(t){var e=t.item,r=t.onRemove;return Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-contact-preferences__item"},Object(n.createElement)("div",{className:"bwf-contact-preferences__item-title"},Object(n.createElement)(ht,null),e.label),Object(n.createElement)("div",{className:"bwf-contact-preferences__item-type"},Object(n.createElement)("span",{className:"bwf-tags bwf-tag-gray bwf-w-fit-content"},e.groupLabel)),Object(n.createElement)("div",{className:"bwf-display-flex bwf-cursor-pointer",onClick:function(){r(Object.keys(e)[0],e.groupKey)}},Object(n.createElement)(O.a,{icon:"delete",size:20}))))})),yt=Object(nt.a)((function(t){var e=t.items,r=t.onRemove;return Object(n.createElement)("div",{className:"bwf-contact-preferences__items-wrap"},Object(s.isEmpty)(e)?Object(n.createElement)("div",{className:"bwf-h4 bwf_text_center bwf-m-20"},Object(a.__)("No Additional Columns Selected. Click the Add New Columns button.","wp-marketing-automations")):e.map((function(t,e){return Object(n.createElement)(dt,{item:t,key:"bwf-contact-preferences__item-".concat(e),index:e,onRemove:r})})))})),vt=["contact_details","geography","contact_custom_fields","woocommerce","segments","engagement"],gt=function(t){var e=t.onRequestClose,r=t.refreshTable,o=t.setModelData,c=Object(n.useContext)(l.h),i=mt(Object(n.useState)(!1),2),u=i[0],f=i[1],m=mt(Object(n.useState)(!1),2),p=m[0],h=m[1],d=mt(Object(n.useState)(!1),2),y=d[0],v=d[1],w=mt(Object(n.useState)(0),2),j=w[0],E=w[1],k=Object(n.useRef)(null),x=mt(Object(n.useState)([]),2),S=x[0],N=x[1],L=mt(Object(n.useState)([]),2),P=L[0],C=L[1],I=mt(Object(n.useState)({}),2),A=I[0],T=I[1],F=mt(Object(n.useState)(!1),2),G=F[0],$=F[1],D=Object(n.useRef)(new AbortController),M=Object(z.a)(!0,!1),B=M.loading,U=void 0===B||B,R=M.filters,Y=void 0===R?{}:R,V=function(){var t=ft(ut().mark((function t(){return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.z)("/contact/export/custom-selections"),signal:D.current.signal}).then((function(t){if(200===t.code){var e=Object.create({});Object.keys(t.result).forEach((function(r){"wishlist-member"!==r&&(e[r]={label:t.result[r].name},e[r].fields=Object.keys(t.result[r].selections).map((function(e){return{key:t.result[r].selections[e].slug,label:t.result[r].selections[e].name}})))})),T(e),h(!0)}})).catch((function(t){console.log(t)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),W=Object(n.useMemo)((function(){var t=[],e=["engaged","unengaged","broadcast_sent","broadcast_open","broadcast_click"];return Object.entries(Y).forEach((function(r){var n=mt(r,2),a=n[0],o=n[1];if(e.includes(a)||["email","creation_date"].includes(a))return!1;var c;c={key:a,label:o.labels.add},t.hasOwnProperty(o.group)?t[o.group].fields.push(c):t[o.group]={label:o.groupLabel,fields:[c]}})),it(it({},t),A)}),[Y,A]);Object(n.useEffect)((function(){return Object(l.Yb)()?V():h(!0),function(){D.current.abort()}}),[]),Object(n.useEffect)((function(){if(Object(s.isEmpty)(S)&&p&&!G){if(W.hasOwnProperty("contact_details")){var t=[],e=[];if(!Object(s.isEmpty)(bwfcrm_contacts_data.table_column_data.contactv2))bwfcrm_contacts_data.table_column_data.contactv2.map((function(e){Object(s.isObject)(e)&&t.push(e)})),Object.keys(W).forEach((function(r){W[r].fields.map((function(t){return t.key})).every((function(e){return t.some((function(t){return t.hasOwnProperty(e)}))}))&&e.push(lt({},r,W[r].label))}));N(t),C(e)}$(!0)}}),[W]);var H=function(t,e){var r=W[t].fields.map((function(t){return t.key}));if(P.some((function(e){return e.hasOwnProperty(t)})))N((function(t){return t.filter((function(t){return!r.some((function(e){return t.hasOwnProperty(e)}))}))})),C((function(e){return e.filter((function(e){return!e.hasOwnProperty(t)}))}));else{var n=W[t].fields.map((function(r){return lt(lt(lt(lt({},r.key,r.label),"label",r.label),"groupKey",t),"groupLabel",e)}));N((function(t){return Object(s.uniqBy)([].concat(ot(t),ot(n)),(function(t){return Object.keys(t)[0]}))})),C((function(r){return[].concat(ot(r),[lt({},t,e)])}))}},K=function(){var t=ft(ut().mark((function t(){return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!0),t.prev=1,t.next=4,g()({path:Object(l.z)("/user-preference/".concat(Object(l.M)(),"/")),method:"POST",data:{data:{contact_columnv2:S}}}).then((function(t){if(200!==t.code)throw Error(Object(l.t)(null==t?void 0:t.message));bwfcrm_contacts_data.table_column_data.contactv2=S,c(t.message),Object(l.Jb)(c,2e3),r(),e(),f(!1)})).catch((function(t){throw Error(Object(l.t)(null==t?void 0:t.message))}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),f(!1),o({status:!0,modalTitle:Object(a.__)("Save Columns","wp-marketing-automations"),error:t.t0.message?t.t0.message:Object(a.__)("Error in saving preferences","wp-marketing-automations")});case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}();return Object(n.createElement)(b.Modal,{title:Object(n.createElement)(n.Fragment,null,Object(a.__)("Table Columns","wp-marketing-automations"),Object(n.createElement)("span",null,Object(a.__)("Add new columns or arrange existing columns in contact table","wp-marketing-automations"))),ref:k,onRequestClose:function(){return e()},className:"bwf-admin-modal bwf-contact-preferences-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-contact-preferences-modal__content"},y?Object(n.createElement)("div",{className:"bwf-contact-preferences"},Object(n.createElement)("div",{className:"bwf-contact-preferences__header"},Object(n.createElement)("div",{className:"bwf-contact-preferences__back-btn",onClick:function(){return v(!1)}},Object(n.createElement)(O.a,{icon:"arrow-left-long",width:20,height:14}),Object(n.createElement)("span",null,Object(a.__)("Back","wp-marketing-automations")))),Object(n.createElement)("div",{className:"bwf-contact-preferences__items-wrap"},Object(s.isEmpty)(Object.keys(W))||U?Object(n.createElement)(wt,null):[].concat(vt,ot(Object.keys(A))).map((function(t,e){return W.hasOwnProperty(t)&&Object(n.createElement)("div",{className:"bwf-contact-preferences__add-col-group",key:"bwf-contact-preferences__add-col-group-".concat(e)},Object(n.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){return E((function(t){return t!==e&&e}))}},Object(n.createElement)("label",{className:"bwf-contact-preferences__add-col-group-header"},Object(n.createElement)(q.a,{checked:P.some((function(e){return e.hasOwnProperty(t)})),onChange:function(){return H(t,W[t].label)},onClick:function(e){e.stopPropagation(),H(t,W[t].label)}}),Object(n.createElement)("div",{className:"bwf-contact-preferences__add-col-group-title"},W[t].label,function(t){var e=W[t].fields.map((function(t){return t.key})),r=0;return e.forEach((function(t){S.forEach((function(e){e.hasOwnProperty(t)&&r++}))})),r>0?Object(n.createElement)("span",null," (",r," Selected )"):""}(t))),Object(n.createElement)(_.a,{className:"bwf-contact-preferences__accordian-icon",onClick:function(t){t.stopPropagation(),E((function(t){return t!==e&&e}))}},Object(n.createElement)(O.a,{icon:j===e?"angle-up":"angle-down",width:"16",height:"18"}))),j===e&&Object(n.createElement)("div",{className:"bwf-contact-preferences__add-col-group-content"},W[t].fields.map((function(e,r){return Object(n.createElement)("label",{className:"bwf-contact-preferences__add-col-group-item",key:"bwf-contact-preferences__add-col-group-item-".concat(r)},Object(n.createElement)(q.a,{checked:S.some((function(t){return t.hasOwnProperty(e.key)})),onChange:function(){return function(t,e,r,n){var a=W[r].fields.map((function(t){return t.key}));S.some((function(e){return e.hasOwnProperty(t)}))?N((function(e){var n=e.filter((function(e){return!e.hasOwnProperty(t)}));return a.every((function(t){return n.hasOwnProperty(t)}))||C((function(t){return t.filter((function(t){return!t.hasOwnProperty(r)}))})),n})):N((function(o){var c=[].concat(ot(o),[lt(lt(lt(lt({},t,e),"label",e),"groupKey",r),"groupLabel",n)]);return a.every((function(t){return c.some((function(e){return e.hasOwnProperty(t)}))}))&&C((function(t){return[].concat(ot(t),[lt({},r,n)])})),c}))}(e.key,e.label,t,W[t].label)}}),Object(n.createElement)("div",null,e.label))}))))})))):Object(n.createElement)("div",{className:"bwf-contact-preferences"},Object(n.createElement)("div",{className:"bwf-contact-preferences__header"},Object(n.createElement)("div",{className:"bwf-contact-preferences__header-heading"},Object(a.__)("Columns","wp-marketing-automations")),Object(n.createElement)(_.a,{isSecondary:!0,className:"bwf-btn-small is-border",onClick:function(){return v(!0)}},Object(a.__)("Add New Columns","wp-marketing-automations"))),p&&G?Object(n.createElement)(yt,{helperContainer:k.current,helperClass:"bwf-contacts-preferences-item__helper",useDragHandle:!0,axis:"y",items:S,onRemove:function(t,e){var r=W[e].fields.map((function(t){return t.key}));N((function(n){var a=n.filter((function(e){return!e.hasOwnProperty(t)}));return r.every((function(t){return a.hasOwnProperty(t)}))||C((function(t){return t.filter((function(t){return!t.hasOwnProperty(e)}))})),a}))},onSortEnd:function(t){var e=t.oldIndex,r=t.newIndex;e!==r&&N((function(t){return Object(nt.d)(t,e,r)}))}}):Object(n.createElement)(wt,{type:"fields"}))),Object(n.createElement)("div",{className:"bwf-contact-preferences__actions"},Object(n.createElement)(_.a,{onClick:function(){return e()},disabled:u},Object(a.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(_.a,{isPrimary:!0,onClick:K,disabled:u,isBusy:u},Object(a.__)("Save","wp-marketing-automations"))))},wt=function(t){var e=t.type,r=void 0===e?"add-col":e;return ot(Array(5)).map((function(t,e){return Object(n.createElement)("div",{key:"bwf-preferences-placeholder-".concat(e),className:"bwf-contact-preferences__add-col-group"},Object(n.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(n.createElement)("div",{className:"bwf-flex"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-20 bwf-ml-16"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-ml-10 ".concat("fields"===r?"bwf-w-90":"bwf-w-120")})),"fields"===r&&Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-20 bwf-mr-15"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-mr-15 ".concat("fields"===r?"bwf-w-80 bwf-h-30 bwf-rounded-4":"bwf-w-20 bwf-h-20")})))}))},Ot=function(t){var e=t.refreshTable,r=t.setModelData,o=mt(Object(n.useState)(!1),2),c=o[0],i=o[1];return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-sort-button components-button is-light bwf-btn-small "+(c?"is-active":""),onClick:function(){return i(!0)},style:{width:"30px",padding:"7px"},title:Object(a.__)("Column Preference","wp-marketing-automations")},Object(n.createElement)(O.a,{icon:"filters",size:16})),c&&Object(n.createElement)(gt,{onRequestClose:function(){return i(!1)},refreshTable:e,setModelData:r}))},jt=r(55),Et=r(349),_t=r(96),kt=r(52),xt=r(193),St=r(39),Nt=r(334),Lt=r(333),Pt=r(353);function Ct(t){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function It(){It=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Ct(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Ct(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function At(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function Tt(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){At(o,n,a,c,i,"next",t)}function i(t){At(o,n,a,c,i,"throw",t)}c(void 0)}))}}function Ft(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Gt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var $t=function(t){var e=t.onClose,r=void 0===e?function(){}:e,o=t.selectedContacts,c=void 0===o?[]:o,i=t.refreshContactData,u=void 0===i?function(){}:i,f=Ft(Object(n.useState)({}),2),m=f[0],p=f[1],h=Ft(Object(n.useState)([]),2),d=h[0],y=h[1],v=Ft(Object(n.useState)(!0),2),w=v[0],j=v[1],k=Ft(Object(n.useState)(!1),2),x=k[0],S=k[1],N=Ft(Object(n.useState)([]),2),L=N[0],P=N[1],C=Ft(Object(n.useState)([]),2),I=C[0],A=C[1],T=Ft(Object(n.useState)(0),2),F=T[0],G=T[1],D=Ft(Object(n.useState)(!1),2),M=D[0],z=D[1],B=function(){var t=Tt(It().mark((function t(){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.z)("/link-triggers/actions"),method:"GET"}).then((function(t){200===t.code&&(t.result.hasOwnProperty("actions")&&P(t.result.actions),t.result.hasOwnProperty("actions_schema")&&A(t.result.actions_schema)),j(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useLayoutEffect)((function(){B(),y([]),p({}),z(!1)}),[]);var U,R=function(t){var e={};return Object.keys(t).map((function(r){if("new"!==r)if(Object(s.isEmpty)(t[r]))Object(s.isEmpty)(I[r])&&(e[r]=t[r]);else if(Object(s.isObject)(t[r])&&!Object(s.isArray)(t[r])){var n={};Object.keys(t[r]).map((function(e){Object(s.isEmpty)(t[r][e])||(n[e]=t[r][e])})),e[r]=n}else Object(s.isArray)(t[r])&&(e[r]=t[r])})),e},Y=function(){var t=Tt(It().mark((function t(){var e;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=R(m),!Object(s.isEmpty)(e)||!(Object(s.isEmpty)(m)||1===Object.keys(m).length&&m.hasOwnProperty("new"))){t.next=6;break}return y([Object(a.__)("No actions selected","wp-marketing-automations")]),t.abrupt("return");case 6:if(Object.entries(m).length===Object.entries(e).length){t.next=9;break}return y([Object(a.__)("Please fill all the required fields","wp-marketing-automations")]),t.abrupt("return");case 9:return y([]),t.prev=10,S(!0),t.next=14,g()({path:Object(l.z)("/bulk-action/"),method:"POST",data:{include_ids:c.map((function(t){return t.id})),actions:e,only_action:!0,enable_automation:M}}).then((function(t){200==t.code&&t.hasOwnProperty("result")&&t.result.hasOwnProperty("id")&&(Object(l.X)()||(bwfcrm_contacts_data.first_bulk_action_id=1),G(t.result.id))})).catch((function(t){throw Error(Object(l.t)(null==t?void 0:t.message))}));case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(10),y(t.t0.message),S(!1);case 20:case"end":return t.stop()}}),t,null,[[10,16]])})));return function(){return t.apply(this,arguments)}}();return x&&parseInt(F)>0?Object(n.createElement)(b.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,onRequestClose:r,className:"bwf-admin-modal bwf-admin-modal-640 bwf-admin-modal-no-header bwf-show-close no-btn-css"},Object(n.createElement)("div",{className:"bwf-perform-bulk-action-modal-body bwf-mtb-12"},Object(n.createElement)("div",{className:"bwf-heading4-new bwf-display-flex"},Object(a.__)("Bulk Action has started","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-heading5-new bwf-display-flex bwf-mt-8 is-black"},Object(a.__)("The actions are being processing in the background.","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex gap-16 bwf-mt-24"},Object(n.createElement)(_.a,{onClick:function(){u(),r()},isPrimary:!0},Object(a.__)("View Contacts","wp-marketing-automations")),Object(n.createElement)(_.a,{onClick:function(){return Object($.k)({page:"autonami",path:"/bulk-action/"+F},"/",{})},isSecondary:!0},Object(a.__)("Take to Bulk Action Screen","wp-marketing-automations"))))):Object(n.createElement)(b.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-large bwf-admin-modal-no-header"},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Create Bulk Action","wp-marketing-automations")),Object(n.createElement)("span",{onClick:r,className:"bwf-modal-close"},Object(n.createElement)(O.a,{icon:"close",color:"#353030"}))),d.length>0&&(U=Object(s.isArray)(d)?Object(n.createElement)("ul",null,d.map((function(t){return Object(n.createElement)("li",{key:Math.random()},t)}))):d,Object(n.createElement)(E.a,{status:"error"},U)),Object(n.createElement)("div",{className:"bwf-perform-bulk-action-modal-body "+(x?"is-creating-baction":"")},w?Object(n.createElement)("div",null,[1,2,3].map((function(t){return Object(n.createElement)("div",{key:t},Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between gap-24"},Object(n.createElement)("div",{className:"bwf-display-flex gap-20"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-20"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-400 bwf-h-20"})),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-20 bwf-w-150"})))}))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(Pt.b,{actions:L,actionSchema:I,value:Object(s.isEmpty)(m)?{new:{}}:m,setActionValue:function(t){p(t)},onEmptyError:function(t){y(t?Object(a.__)("Please fill the empty actions to add new one.","wp-marketing-automations"):"")}}),1===Object(l.m)(bwfcrm_contacts_data.bwf_pro_version,"3.2.1")&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_16"}),Object(n.createElement)(b.ToggleControl,{label:Object(a.__)("Trigger automations (for tag, list and status change related events)","wp-marketing-automations"),checked:M,className:"bwf-tooglecontrol-advance",onChange:function(t){z(t)}})))),Object(n.createElement)("div",{className:"bwf_text_right bwf-form-buttons bwf-mt-24"},w?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-30 bwf-mr-16"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-30"})):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(_.a,{className:"bwf-cancel-btn",onClick:r},Object(a.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(_.a,{onClick:Y,className:Object(s.size)(d)||function(){if(Object(s.isEmpty)(m)||1===Object.keys(m).length&&m.hasOwnProperty("new"))return!1;var t=[];return Object.keys(m).map((function(e){(""===e||Object(s.isEmpty)(m[e])&&!Object(s.isEmpty)(I[e]))&&t.push(e)})),!!Object(s.isEmpty)(t)}()?"bwf-no-ripple":"",isPrimary:!0,isBusy:x},Object(a.__)("Apply","wp-marketing-automations")))))};function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Mt=["path","page","filter"];function zt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Bt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(r),!0).forEach((function(e){Ut(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ut(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Dt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rt(){return(Rt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(null,arguments)}function Yt(){Yt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Dt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Dt(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function qt(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function Vt(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){qt(o,n,a,c,i,"next",t)}function i(t){qt(o,n,a,c,i,"throw",t)}c(void 0)}))}}function Wt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||Ht(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(t,e){if(t){if("string"==typeof t)return Kt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kt(t,e):void 0}}function Kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Jt=function(t){var e=Object(n.useContext)(l.h),r=Wt(Object(n.useState)(!1),2),o=r[0],c=r[1],v=Wt(Object(n.useState)(!1),2),j=v[0],E=v[1],k=Wt(Object(n.useState)(!1),2),x=k[0],S=k[1],N=Wt(Object(n.useState)({}),2),L=N[0],P=N[1],C=Wt(Object(n.useState)(!1),2),I=C[0],A=C[1],z=Wt(Object(n.useState)(!1),2),U=z[0],R=z[1],V=Wt(Object(n.useState)(!0),2),W=V[0],H=V[1],K=Object(d.a)(),J=Object(y.a)(),Z=t.query,Q=t.isExport,X=t.setExport,tt=t.isImport,nt=t.setImport,at=t.menuButtons,ot=t.pitchData,ct=Z.path,it=Z.page,lt=Z.filter,ut=function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(Z,Mt),st=Object(n.useRef)(ut),ft=Wt(Object(n.useState)({status:!1}),2),mt=ft[0],pt=ft[1],bt=Wt(Object(n.useState)({status:!1,contactInfo:{}}),2),ht=bt[0],dt=bt[1],yt=Wt(Object(n.useState)({loading:!1,status:!1}),2),vt=yt[0],gt=yt[1],wt=Wt(Object(n.useState)({status:!1,contactInfo:{}}),2),Pt=wt[0],Ct=wt[1],It=J.fetchListing,At=Object(rt.a)().setSingleContactListData,Tt=Wt(Object(n.useState)([]),2),Ft=Tt[0],Gt=Tt[1],Dt=Wt(Object(n.useState)(!1),2),zt=Dt[0],Ut=Dt[1],qt=function(){Oe&&Oe(),Gt([]),setTimeout((function(){Kt.reset()}),2500)},Kt=Object(_t.useMutation)(function(){var t=Vt(Yt().mark((function t(e){return Yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.z)("/v3/contacts/"),method:"DELETE",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){qt(),It(Z,0,ce,!0)},onError:function(){}}),Jt=Object(n.useCallback)((function(t,e){switch(t){case"delete":Gt(e),Ut(!0);break;case"perform-bulk-action":Gt(e),E(!0)}}),[]),Zt=K.getPageNumber,Qt=K.getPerPageCount,Xt=K.getTotalCount,te=K.getLoading,ee=K.getContacts,re=K.getError,ne=K.getCountData,ae=ee(),oe=Zt(),ce=Qt(),ie=Xt(),le=te(),ue=re(),se=ne();Object(n.useEffect)((function(){It(Z,0,25,!0),A(!0)}),[]),Object(n.useEffect)((function(){Object(l.tc)(ut,st.current)||Q||It(Z,0,25,!0),st.current=ut}),[Z]),Object(n.useEffect)((function(){le||R(!1)}),[le]),Object(n.useEffect)((function(){!Q&&I&&It(Z,0,25,!0)}),[Q]),Object(n.useEffect)((function(){!tt&&I&&It(Z,0,25,!0)}),[tt]);var fe,me,pe=function(t){var e=t.f_name,r=void 0===e?"":e,a=t.l_name,o=void 0===a?"":a,c=t.id,i=void 0===c?"":c;return Object(n.createElement)(f.a,{to:"wp-admin/admin.php?page=autonami&path=/contact/"+i,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(t){t.preventDefault(),At(Object(l.oc)([r,o]," ")),Object($.k)({page:"autonami",path:"/contact/"+parseInt(i)},"/",{})}},Object(n.createElement)(Nt.a,{contact:t,hideJoiningDate:!0}))},be=function(t){return Object(n.createElement)("div",{className:"bwf-c-contact-details-cell"},t.email?Object(n.createElement)(h.a,{justify:"justify",align:"top"},Object(n.createElement)(h.c,null,t.email)):"-")},he=function(t){return Object(n.createElement)(m.a,{label:Object(a.__)("Quick Actions","wp-marketing-automations"),renderContent:function(e){var r=e.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){}},Object(n.createElement)(f.a,{to:"admin.php?page=autonami&path=/contact/"+t.id,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(e){e.preventDefault(),At(Object(l.oc)([t.f_name,t.l_name]," ")),Object($.k)({path:"/contact/"+parseInt(t.id)},"/",{})}},Object(n.createElement)(h.a,{justify:"flex-start"},Object(n.createElement)(h.c,null,Object(a.__)("View","wp-marketing-automations"))))),Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){dt({status:!0,contactInfo:t}),r()}},Object(n.createElement)(h.a,{justify:"space-between"},Object(n.createElement)(h.c,null,Object(a.__)("Send Message","wp-marketing-automations")))),Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){Ct({status:!0,contactInfo:t}),r()}},Object(n.createElement)(h.a,{justify:"flex-start"},Object(n.createElement)(h.c,null,Object(a.__)("Add Note","wp-marketing-automations")))),Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){pt({status:!0,contactID:t.id,data:t}),r()}},Object(n.createElement)(h.a,{justify:"flex-start"},Object(n.createElement)(h.c,null,Object(a.__)("Delete","wp-marketing-automations")))))}})},de=Object(n.useMemo)((function(){var t={};if(Array.isArray(ae)){var e,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Ht(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){i=!0,o=t},f:function(){try{c||null==r.return||r.return()}finally{if(i)throw o}}}}(ae);try{for(r.s();!(e=r.n()).done;){var n=e.value;t[n.id]=n}}catch(t){r.e(t)}finally{r.f()}}return t}),[ae]),ye=Object(M.b)(de),ve=ye.singleSelectProps,ge=ye.selectAllProps,we=ye.floatingBarProps,Oe=ye.resetSelection,je=ye.selected,Ee=void 0===je?[]:je,_e=Object.keys(Ee).filter((function(t){return Ee[t]})).length,ke=bwfcrm_contacts_data.table_column_data.contactv2,xe=function(t){t!==ce&&It(Z,0,t)},Se=function(){It(Z,0,ce,!0)},Ne=i()("bwfcrm-contacts-list",{"has-search":!0}),Le=function(){var t=Vt(Yt().mark((function t(r){return Yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.prev=1,t.next=4,g()({path:Object(l.z)("/v3/contacts/".concat(r,"/")),method:"DELETE"}).then((function(t){if(200!==t.code)throw Error(Object(l.t)(null==t?void 0:t.message));e(t.message),c(!1),pt({}),It(Z,0,ce,!0)})).catch((function(t){throw Error(Object(l.t)(null==t?void 0:t.message))}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),pt(Bt(Bt({},mt),{},{content:t.t0.message})),c(!1);case 10:Object(l.Jb)(e,3e3);case 11:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),Pe=Object(l.L)("withtag"),Ce=function(t,e){if(""===e||Object(s.isUndefined)(e)||Object(s.isNull)(e)||!t.hasOwnProperty(e)||Object(s.isNull)(t[e])||Object(s.isUndefined)(t[e])||""===t[e])return"-";if("status"===e){var r=Pe.hasOwnProperty(parseInt(t[e]))?Pe[parseInt(t[e])]:Pe[0];return Object(n.createElement)("span",{className:r.statusclass},r.label)}if("country"===e){var o=t.country?D[t.country]:"";return Object(n.createElement)(h.a,{justify:"start"},Object(n.createElement)(Et.a,{code:t[e],size:15}),o&&Object(n.createElement)("span",{style:{textAlign:"left"}},o))}return"total_order_value"===e?Object(n.createElement)("span",{className:"bwf-tags bwf-tag-revenue",dangerouslySetInnerHTML:{__html:t[e]}}):Object(s.isArray)(t[e])?(c=t[e],i=[],l=[],Object(s.isEmpty)(c)?"-":(c.map((function(t){Object(s.isEmpty)(t)||(i.length<5&&(t.hasOwnProperty("link")&&""!==t.link?i.push(Object(n.createElement)("a",{className:"bwf-a-no-underline",href:Object(s.unescape)(t.link),target:"_blank",key:t.id,rel:"noreferrer"},t.name)):i.push(t.name)),t.hasOwnProperty("link")&&""!==t.link?l.push(Object(n.createElement)("a",{className:"bwf-a-no-underline",href:Object(s.unescape)(t.link),target:"_blank ",key:t.id},t.name)):l.push(Object(n.createElement)("span",{key:t.id},t.name)))})),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-table-v-center"},!Object(s.isEmpty)(i)&&i.map((function(t,e){return Object(n.createElement)("span",{key:e},t,e!==i.length-1&&", ")})),!Object(s.isEmpty)(l)&&l.length>5&&Object(n.createElement)(G.a,{items:l,count:5}))))):Object(s.isBoolean)(t[e])?t[e]?Object(a.__)("Yes","wp-marketing-automations"):Object(a.__)("No","wp-marketing-automations"):Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:t[e]}});var c,i,l},Ie=0===parseInt(_e)?Object(n.createElement)("div",{className:"bwf-display-flex gap-8"},Object(n.createElement)(_.a,{className:"bwf-btn-small is-light",key:"export",onClick:function(){Object(l.Yb)()?X(!0):(P({isFeature:!0,featureTitle:Object(a.__)("Contacts Export","wp-marketing-automations"),proLink:Object(l.db)("upgrade",{utm_medium:"Contacts+Export+Upgrade+Modal"})}),S(!0))}},Object(n.createElement)("span",{className:"bwf-display-flex gap-4"},Object(l.Yb)()?Object(n.createElement)(O.a,{icon:"export",size:14}):Object(n.createElement)(O.a,{icon:"king",size:16}),Object(a.__)("Export","wp-marketing-automations"))),Object(n.createElement)(_.a,{className:"bwf-btn-small is-light",key:"import",onClick:function(){Object(l.Yb)()?nt(!0):(P({isFeature:!0,featureTitle:Object(a.__)("Contacts Import","wp-marketing-automations"),proLink:Object(l.db)("upgrade",{utm_medium:"Contacts+Import+Upgrade+Modal"})}),S(!0))}},Object(n.createElement)("span",{className:"bwf-display-flex gap-4"},Object(l.Yb)()?Object(n.createElement)(O.a,{icon:"import",size:14}):Object(n.createElement)(O.a,{icon:"king",size:16}),Object(a.__)("Import","wp-marketing-automations"))),Object(n.createElement)(et,{refreshTable:Se}),Object(n.createElement)(Ot,{refreshTable:Se,setModelData:gt})):Object(n.createElement)(n.Fragment,null),Ae=le||ue||ie>0||"advanced"===lt||!Object(s.isEmpty)(ut)&&ut.hasOwnProperty("s")&&""!==ut.s||U;return Object(n.createElement)(n.Fragment,null,mt&&mt.status&&Object(n.createElement)(b.Modal,{onRequestClose:function(){return pt({})},className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},mt.confirm?Object(n.createElement)(F.a,null):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Delete Contact?","wp-marketing-automations")),Object(n.createElement)("span",{onClick:function(){return pt({})},className:"bwf-modal-close"},Object(n.createElement)(O.a,{icon:"close",color:"#353030"}))),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-modal-content"},Object(n.createElement)("div",{style:{wordBreak:"break-word"}},mt.content?mt.content:Object(n.createElement)(n.Fragment,null,Object(a.__)("You are about to delete this contact ","wp-marketing-automations"),Object(n.createElement)("strong",null,"".concat(mt.data&&mt.data.f_name," ").concat(mt.data&&mt.data.l_name,". ")),Object(a.__)("This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")))),Object(n.createElement)("div",{className:"bwf_text_right bwf-mt-20"},mt.content?Object(n.createElement)(_.a,{isPrimary:!0,onClick:function(){pt({status:!1})}},Object(a.__)("OK","wp-marketing-automations")):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(_.a,{className:"bwf-cancel-btn",onClick:function(){pt({status:!1})},disabled:o},Object(a.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(_.a,{className:"bwf-delete-btn",isBusy:o,onClick:function(){Le(mt.contactID)}},Object(a.__)("Delete","wp-marketing-automations"))))))),Object(n.createElement)("div",{className:"bwf-content-header-new bwf-pb-0"},Object(n.createElement)("div",{className:"bwf-content-header-left"},Object(n.createElement)("div",{className:"bwf-content-header-title"},Object(a.__)("All Contacts","wp-marketing-automations")),parseInt(ie)>0&&Object(n.createElement)("div",{className:"bwf-content-header-count"},Object(a.sprintf)(Object(a._n)("(%s Result)","(%s Results)",ie,"wp-marketing-automations"),ie))),Object(n.createElement)("div",{className:"bwf-content-header-right"},Ae&&!le&&at)),!le&&!Object(s.isEmpty)(se)&&se.hasOwnProperty("contacts_active_bulk_actions")&&parseInt(se.contacts_active_bulk_actions)>0&&W&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-single-automation-notice no-icon bwf-m-0 bwf-san-no-border bwf-mt-8"},Object(n.createElement)("div",{className:"bwf-display-flex gap-24 bwf-flex-start bwf-align-center"},Object(n.createElement)("div",{className:"bwf-display-flex gap-8 bwf-flex-start bwf-w-100p"},Object(n.createElement)(O.a,{icon:"info",color:"#353030",size:20}),Object(n.createElement)("div",{className:"bwf-display-flex gap-8 bwf-space-between bwf-w-100p"},Object(n.createElement)("span",{className:"bwf-normal-text bwf-l-h-16"},Object(n.createElement)("span",{className:"bwf-normal-text bwf-n-b bwf-l-h-16"},Object(a.__)("Information","wp-marketing-automations"),": "),Object(a.__)("Bulk action on contacts is in progress.","wp-marketing-automations")),Object(n.createElement)(_.a,{onClick:function(){return Object($.k)({page:"autonami",path:"/bulk-actions/ongoing"},"/",{})},className:"bwf-btn-small is-black"},Object(a.__)("Go to Bulk Actions","wp-marketing-automations")))),Object(n.createElement)("span",{className:"bwf-cursor-pointer bwf-w-16 bwf-h-16",onClick:function(){return H(!1)}},Object(n.createElement)(O.a,{icon:"cross",color:"#353030",size:16}))))),Ae?Object(n.createElement)(u.a,{className:Ne,rows:Object(s.isEmpty)(ae)?[]:ae.map((function(t){var e=[{display:ve[t.id]&&Object(n.createElement)(q.a,Rt({type:"checkbox",checked:!1,onChange:function(){}},ve[t.id])),value:null},{display:he(t),value:null},{display:pe(t),value:Object(l.oc)([t.f_name,t.l_name]," ")},{display:be(t),value:""},{display:Object(s.isEmpty)(Object(s.trim)(t.creation_date))?"-":t.creation_date,value:t.creation_date}];return ke.map((function(r){var n=Bt({},r);delete n.label,delete n.groupKey,delete n.groupLabel;var a=Object.keys(n)[0];e.push({display:Ce(t,a),value:"-"})})),e})),headers:(me=[{key:"select_contact",label:Object(n.createElement)(q.a,Rt({type:"checkbox",checked:!1,onChange:function(){}},ge)),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"actions",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"f_name",label:Object(a.__)("Name","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-210 bwf-table-col-sticky bwf-sticky-left"},{key:"contact_details",label:Object(a.__)("Email","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210 bwf-word-break"},{key:"created_on",label:Object(a.__)("Created On","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"}],ke.map((function(t){Object(s.isObject)(t)&&me.push({key:Object.keys(t).find((function(e){return t[e]==(null==t?void 0:t.label)})),label:null==t?void 0:t.label,isLeftAligned:!0,cellClassName:t.hasOwnProperty("label")&&(t.label.toLocaleLowerCase().includes("tag")||t.label.toLocaleLowerCase().includes("list")||t.label.toLocaleLowerCase().includes("product")||t.label.toLocaleLowerCase().includes("category")||t.label.toLocaleLowerCase().includes("trigger"))?"bwf-max-w-360":"bwf-w-150"})})),me),query:{paged:oe,order:Z.order,orderby:Z.orderby},rowsPerPage:ce,totalRows:ie,isLoading:le,onPageChange:function(t,e){It(Z,(t-1)*ce,ce)},onQueryChange:function(t){return"per_page"!==t?function(){}:xe},actions:_e>0?[Object(n.createElement)(M.a,Rt({key:"contact-bulk-action",actions:(fe=[],1===Object(l.m)(bwfcrm_contacts_data.bwf_pro_version,"3.0.3")&&fe.push({id:"perform-bulk-action",icon:"bulk-action",hint:Object(a.__)("Bulk Action","wp-marketing-automations"),isPro:!0,proLink:Object(l.db)("upgrade",{utm_medium:"Contact+List+Bulk+Action+Upgrade+Modal"}),featureTitle:Object(a.__)("Perform Bulk Action","wp-marketing-automations")}),fe.push({id:"delete",icon:"trash",hint:Object(a.__)("Delete","wp-marketing-automations")}),fe),onAction:Jt,inLine:!0,reset:qt},we))]:[Object(n.createElement)(xt.a,{key:"search",isLoading:le,searchTerm:null==ut?void 0:ut.s,showResultCount:!1,setSearchData:function(t){if(Object(s.size)(t))Object($.k)({s:t},"/",Z);else{var e=Object(s.cloneDeep)(Z);e.hasOwnProperty("s")&&(null==e||delete e.s),R(!0),Object($.k)(e,"/",{})}}}),Object(n.createElement)(kt.b,{onChange:function(t){R(!0),"all"===t&&Object($.k)({page:it},ct,{}),"filters"===t&&Object($.k)({filter:"advanced"},ct,Z)},options:[{key:"all",label:Object(a.__)("All Contacts","wp-marketing-automations")},{key:"filters",label:Object(a.__)("Advanced Filters","wp-marketing-automations")}],selected:Z.hasOwnProperty("filter")&&"advanced"===Z.filter?"filters":"all",key:"select-contact",className:"bwf-w-150"}),Object(n.createElement)(B.c,{key:"list-audience"})],rowHeader:!0,emptyMessage:Object(a.__)("No contacts found","wp-marketing-automations"),extraSectionBeforefilterCol:Ie,showMenu:!1,beforeTable:Object(n.createElement)(Y,{query:Z,isOpen:Z.hasOwnProperty("filter")&&"advanced"===Z.filter})}):Object(n.createElement)(Lt.a,{data:ot}),ht.status&&Object(n.createElement)(w.a,{contact:ht.contactInfo,setSendMessageModel:dt}),Pt.status&&Object(n.createElement)(T,{contact:Pt.contactInfo,setModelStatus:Ct}),Object(n.createElement)(jt.a,{modalTitle:Object(a._n)("Delete Contact","Delete Contacts",Ft.length,"wp-marketing-automations"),deleteEntityName:1===Ft.length?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",{style:{fontWeight:"normal"}},Object(a.__)("contact","wp-marketing-automations")," "),Ft[0].f_name," ",Ft[0].l_name):Object(n.createElement)(n.Fragment,null,Ft.length," ",Object(n.createElement)("span",{style:{fontWeight:"normal"}},Object(a.__)("contact","wp-marketing-automations"))),confirmButtonText:Object(a.__)("Delete","wp-marketing-automations"),cancelButtonText:Object(a.__)("Cancel","wp-marketing-automations"),onConfirm:function(){var t={contacts:Ft.map((function(t){return t.id}))};Kt.mutate(t)},isLoading:Kt.isLoading,successMessage:Kt.isSuccess&&Object(a.__)("Contacts Deleted!","wp-marketing-automations"),errorMessage:Kt.isError&&(Kt.error&&Kt.error.message?Kt.error.message:Object(a.__)("Unable to delete contacts","wp-marketing-automations")),onRequestClose:function(){qt(),Ut(!1)},isOpen:zt,confirmDescription:Object(a.__)("This action is irreversible","wp-marketing-automations"),isDelete:!0}),Object(n.createElement)(jt.a,{modalTitle:vt.modalTitle,deleteEntityName:vt.deleteEntityName,confirmText:vt.confirmText,confirmButtonText:vt.buttonConfirm,cancelButtonText:vt.buttonCancel,onConfirm:vt.onConfirm,isLoading:vt.loading,successMessage:vt.success,errorMessage:vt.error,content:vt.content,onRequestClose:function(){return gt({status:!1})},isOpen:vt.status,isDelete:!vt.hasOwnProperty("isDelete")||vt.isDelete}),!Object(l.Yb)()&&Object(n.createElement)(St.b,{isOpen:x,onRequestClose:function(){return S(!1)},modalContent:L}),j&&Object(n.createElement)($t,{onClose:function(){qt(),E(!1)},selectedContacts:Ft,refreshContactData:Se}))},Zt=r(87),Qt=r(91),Xt=r(1127),te=r(344),ee=r(346),re=r(1082),ne=r(1092);function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oe(){return(oe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(null,arguments)}function ce(){ce=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==ae(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(ae(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function ie(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function le(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){ie(o,n,a,c,i,"next",t)}function i(t){ie(o,n,a,c,i,"throw",t)}c(void 0)}))}}function ue(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return se(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?se(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var fe={email:"",f_name:"",l_name:"",marketing_status:!0,contact_no:""},me=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onCloseModal:function(){}},e=Object(n.useContext)(l.h),r=Object(n.useState)([]),o=ue(r,2),c=o[0],i=o[1],u=Object(n.useState)([]),f=ue(u,2),m=f[0],p=f[1],h=Object(n.useState)(null),d=ue(h,2),v=d[0],w=d[1],j=Object(n.useState)(null),k=ue(j,2),x=k[0],S=k[1],N=Object(n.useState)(fe),L=ue(N,2),P=L[0],C=L[1],I=Object(n.useState)(!1),A=ue(I,2),T=A[0],G=A[1],D=Object(n.useState)({}),M=ue(D,2),z=M[0],B=M[1],U=Object(rt.a)(),R=U.setSingleContactListData,Y=function(){var r=le(ce().mark((function r(n){return ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return G(!0),r.prev=1,r.next=4,g()({path:Object(l.z)("/v3/contacts"),method:"POST",data:n}).then((function(r){if(200!=r.code)throw Error(Object(l.t)(null==r?void 0:r.message));e(r.message),B({}),G(!1),Object(l.Y)()||(bwfcrm_contacts_data.first_contact_id=1),R(Object(l.oc)([n.f_name,n.l_name]," ")),Object($.k)({page:"autonami",path:"/contact/"+parseInt(r.result.id)},"/",{}),t.onCloseModal()})).catch((function(t){throw Error(Object(l.t)(null==t?void 0:t.message))}));case 4:r.next=10;break;case 6:r.prev=6,r.t0=r.catch(1),G(!1),w(r.t0);case 10:Object(l.Jb)(e,3e3);case 11:case"end":return r.stop()}}),r,null,[[1,6]])})));return function(t){return r.apply(this,arguments)}}(),V=function(t){var e={};return!Object(s.isEmpty)(t.email)&&Object(Qt.a)(t.email?t.email:"")||(e.email=Object(s.isEmpty)(t.email)?Object(a.__)("Email is required","wp-marketing-automations"):Object(a.__)("Email is not valid","wp-marketing-automations")),Object(s.isEmpty)(t.phone)||Object(Xt.a)(t.phone?t.phone:"")||(e.phone=Object(a.__)("Phone is not valid","wp-marketing-automations")),e},W=function(t){var e=t.email,r=t.f_name,n=t.l_name,a=t.marketing_status,o=t.phone,i=[];Object(s.isEmpty)(c)||c.map((function(t){i.push({id:t.key,value:t.label})}));var l=[];Object(s.isEmpty)(m)||m.map((function(t){l.push({id:t.key,value:t.label})})),C({email:e,f_name:r,l_name:n,contact_no:o,status:a,tags:i,lists:l}),Y({email:e,f_name:r,l_name:n,contact_no:o,status:a,tags:i,lists:l})},H=Object(y.a)(),K=H.fetch,J=t.query,Z=function(){x&&(S(null),K(J,0,25)),t.onCloseModal()},Q=function(){return z&&z.success&&z.message?Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(te.a,null),Object(n.createElement)("div",{className:"bwf-h1"},z.message)):z&&z.error&&z.message?Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(ee.a,null),Object(n.createElement)("div",{className:"bwf-h1"},z.message)):Object(n.createElement)(F.a,null)};return Object(n.createElement)(b.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-medium bwf-add-new-contact-modal "},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Create Contact","wp-marketing-automations")),Object(n.createElement)("span",{onClick:Z,className:"bwf-modal-close"},Object(n.createElement)(O.a,{icon:"close",color:"#353030"}))),v&&Object(n.createElement)(E.a,{status:"error",onRemove:function(){return w(null)}},v.hasOwnProperty("message")?v.message:Object(a.__)("Unknown Error while creating contact","wp-marketing-automations")),z.error||z.success?Q():Object(n.createElement)(Zt.a,{validate:V,onSubmitCallback:W,initialValues:P},(function(t){var e=t.getInputProps,r=t.values,o=t.errors,l=t.handleSubmit,u=t.touched;return Object(n.createElement)("div",{className:"bwf-form-fields"},Object(n.createElement)("div",null,Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-input-label",id:"required"},Object(a.__)("Email","wp-marketing-automations")),Object(n.createElement)(b.TextControl,oe({disabled:T,type:"email",help:Object(a.__)("Required","wp-marketing-automations")},e("email"))),(null==u?void 0:u.email)&&(null==o?void 0:o.email)&&Object(n.createElement)("div",{className:"bwf-error-text"},null==o?void 0:o.email)),Object(n.createElement)(b.TextControl,oe({disabled:T,label:Object(a.__)("Phone","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},e("phone"))),(null==u?void 0:u.phone)&&o.hasOwnProperty("phone")&&Object(n.createElement)("div",{className:"bwf-error-text"},null==o?void 0:o.phone),Object(n.createElement)(b.TextControl,oe({disabled:T,label:Object(a.__)("First Name","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},e("f_name"))),Object(n.createElement)(b.TextControl,oe({disabled:T,label:Object(a.__)("Last Name","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},e("l_name"))),Object(n.createElement)(re.a,{onTagsChange:i,selected:c}),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(ne.a,{onListsChange:p,selected:m}),Object(n.createElement)("div",{className:"bwf_clear_24"})),Object(n.createElement)("div",null,Object(n.createElement)(q.a,oe({type:"checkbox",disabled:T,label:Object(a.__)("Mark Contact as Subscribed","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},e("marketing_status")))),Object(n.createElement)("div",{className:"bwf_text_right bwf-form-buttons bwf-mt-24"},Object(n.createElement)(_.a,{className:"bwf-cancel-btn",onClick:Z},Object(a.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(_.a,{onClick:function(){V(r)&&l()},className:Object(s.size)(o)||V(r)?"bwf-no-ripple":"",isPrimary:!0,isBusy:T},Object(a.__)("Add","wp-marketing-automations"))))})))},pe=r(370),be=r(345),he=r(69),de=r(74),ye=r(107),ve=(r(1227),r(50));function ge(t){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var we=["getStateProp"];function Oe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function je(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Oe(Object(r),!0).forEach((function(e){Ee(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ee(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=ge(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ge(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _e=function(){var t=Object(ve.a)("exporter"),e=t.getStateProp;return je(je({},function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(t,we)),{},{getExporter:function(){return e("export")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getLoadingStatus:function(){return e("isLoading")},getExistingExport:function(){return e("existingExport")}})},ke=r(49);function xe(t){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Se=["fetch","setStateProp"];function Ne(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Le(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ne(Object(r),!0).forEach((function(e){Pe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Pe(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=xe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xe(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ce=function(){var t=Object(ke.a)("exporter"),e=t.fetch,r=t.setStateProp;return Le(Le({},function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(t,Se)),{},{fetch:function(t,r,n){e("GET",Object(l.z)("/contact/export?limit=".concat(t,"&offset=").concat(r,"&search=").concat(n)))},setStateExportValues:function(t,e){r(t,e)}})},Ie=r(1100),Ae=r(340),Te=r(338),Fe=r(1072);function Ge(t){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $e(){$e=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Ge(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Ge(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function De(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function Me(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ze(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ze(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Be=function(t){var e=t.exportId,r=void 0===e?"":e,o=t.setLoading,c=t.setComplete,i=t.preExportData,u=void 0===i?{}:i,f=Me(Object(n.useState)(!1),2),m=f[0],p=f[1],b=Me(Object(n.useState)(u),2),h=b[0],d=b[1],y=Me(Object(n.useState)(0),2),v=y[0],w=y[1],O=Me(Object(n.useState)(!1),2),j=O[0],E=O[1],_=Me(Object(n.useState)(!1),2),k=_[0],x=_[1];Object(n.useEffect)((function(){100===parseInt(v)&&setTimeout((function(){E(!0)}),2e3)}),[v]);var S=function(){var t,e=(t=$e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(!0),t.prev=1,t.next=4,g()({method:"GET",path:Object(l.z)("/contact/export/".concat(r))}).then((function(t){200==t.code&&d(t.result),x(!1)}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),x(!1);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){De(o,n,a,c,i,"next",t)}function i(t){De(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(!Object(s.isEmpty)(h))if(3==h.status)o(!1),p(!0),w(100),c(!0);else{var t=parseInt(h.offset)/parseInt(h.count)*100;w(t<100?parseInt(t):100)}}),[h]),Object(Fe.a)((function(){m||k||S()}),5e3),Object(n.createElement)("div",{className:"bwf-display-flex-column",style:{alignItems:"center"}},r&&m&&j?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("h2",null,Object(a.__)("Export Completed","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Your file is ready for download. Now you can download the exported contact list.","wp-marketing-automations"))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Export Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("The file is being created in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:parseInt(v),text:"".concat(parseInt(v),"% ").concat(Object(a.__)("Completed","wp-marketing-automations"))})))};function Ue(t){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Re(){Re=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Ue(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Ue(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Ye(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function qe(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){Ye(o,n,a,c,i,"next",t)}function i(t){Ye(o,n,a,c,i,"throw",t)}c(void 0)}))}}function Ve(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return We(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?We(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var He=function(t){var e=t.title,r=t.fields,o=t.expfilter,c=t.setPending,i=t.setAdd,u=t.contactCount,s=t.exportID,f=void 0===s?0:s,m=t.preExportData,p=void 0===m?{}:m,h=Ve(Object(n.useState)(!1),2),d=h[0],y=h[1],v=Ve(Object(n.useState)(""),2),w=v[0],O=v[1],j=Ve(Object(n.useState)(!1),2),k=j[0],x=j[1],S=Ve(Object(n.useState)(!1),2),N=S[0],L=S[1],P=Ve(Object(n.useState)(!1),2),C=P[0],I=P[1],A=Ve(Object(n.useState)(Object(a.__)("Unable to create export.","wp-marketing-automations")),2),T=A[0],F=A[1];Object(n.useEffect)((function(){c(!0),0===parseInt(f)?G():(y(!0),O(f))}),[]);var G=function(){var t=qe(Re().mark((function t(){var n;return Re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={title:e,fields:r,filters:o,count:u},t.next=4,g()({method:"POST",data:n,path:Object(l.z)("/contact/export/add")}).then((function(t){200==t.code&&(Object(l.Z)()||(bwfcrm_contacts_data.first_export_id=2),y(!0),t.result.hasOwnProperty("id")&&O(t.result.id))}));case 4:t.next=11;break;case 6:t.prev=6,t.t0=t.catch(0),y(!0),x(!0),t.t0.hasOwnProperty("message")&&F(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}();C&&setTimeout((function(){document.querySelectorAll(".bwf-export-add-modal .bwf-crm-export-init .bwf-stepper .bwf-stepper__steps")[0].remove()}),2e3);var $=function(){var t=qe(Re().mark((function t(){return Re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return L(!0),t.prev=1,t.next=4,g()({path:Object(l.z)("/contact/export/cancel/".concat(w)),method:"DELETE"}).then((function(t){if(200!==t.code)throw Error(Object(l.t)(null==t?void 0:t.message));i(!1)})).catch((function(t){throw Error(Object(l.t)(null==t?void 0:t.message))}));case 4:t.next=11;break;case 6:t.prev=6,t.t0=t.catch(1),L(!1),x(!0),F(t.t0.message?t.t0.message:Object(a.__)("Error in canceling export","wp-marketing-automations"));case 11:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(b.Card,{className:"bwfcrm-overview-wrap bwf-contact-export-step-three"},Object(n.createElement)("div",{style:{alignItems:"center"}},d?Object(n.createElement)(n.Fragment,null,w?Object(n.createElement)(Be,{exportId:w,setLoading:c,setComplete:I,preExportData:p}):Object(n.createElement)("div",{className:"bwf-h4"},k&&Object(n.createElement)(E.a,{status:"error",isDismissible:!1},T))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-display-flex-column",style:{alignItems:"center"}},Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-30 bwf-w-90"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-270"}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-100p"}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-150"}),Object(n.createElement)("div",{className:"bwf_clear_20"}))),Object(n.createElement)("div",{className:"bwf_clear_20"}))),Object(n.createElement)("div",{className:"bwf-display-flex"},d?Object(n.createElement)(n.Fragment,null,C?Object(n.createElement)(_.a,{isPrimary:!0,className:"bwf-mt-24",onClick:function(){window.open(Object(l.ub)()+"/wp-json"+Object(l.z)("/contact/export/download/".concat(w,"?bwf-nonce=").concat(Object(l.E)())),"_blank")}},Object(a.__)("Download File","wp-marketing-automations")):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(_.a,{isPrimary:!0,className:"bwf-mt-24",onClick:function(){i(!1)}},Object(n.createElement)("span",{className:"bwf-p-5"},Object(a.__)("Go to Export List","wp-marketing-automations"))),-1!==Object(l.m)(bwfcrm_contacts_data.bwf_pro_version,"3.2.2")&&Object(n.createElement)(_.a,{isSecondary:!0,className:"bwf-mt-24",onClick:$,isBusy:N},Object(n.createElement)("span",{className:"bwf-p-5"},Object(a.__)("Cancel Export","wp-marketing-automations"))))):Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-90"}))),Object(n.createElement)("div",{className:"bwf_clear_30"}))};function Ke(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Je(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Je(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Ze=function(t){var e=t.exportData,r=void 0===e?{}:e,o=t.onClose,c=void 0===o?function(){}:o,i=Ke(Object(n.useState)(!0),2),l=i[0],u=i[1],s=[{key:1,label:Object(a.__)("Fields","wp-marketing-automations"),content:Object(n.createElement)(n.Fragment,null)},{key:2,label:Object(a.__)("Contacts","wp-marketing-automations"),content:Object(n.createElement)(n.Fragment,null)},{key:3,label:Object(a.__)("Confirmation","wp-marketing-automations"),content:function(t){switch(t){case 3:return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(He,{setPending:u,exportID:r.id,preExportData:r,setAdd:function(){return c(!0)}}));default:return Object(n.createElement)(n.Fragment,null)}}(3)}];return Object(n.createElement)(b.Modal,{onRequestClose:function(){return c(!0)},className:"bwf-admin-modal bwf-admin-modal-xxl bwf-export-add-modal",title:Object(a.__)("Export Inprogress","wp-marketing-automations"),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-crm-export-init"},Object(n.createElement)(Ae.a,{steps:s,currentStep:3,isPending:l})))};function Qe(t){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xe(){Xe=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Qe(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Qe(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function tr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function er(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0).forEach((function(e){rr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Qe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qe(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nr(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function ar(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return or(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?or(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function or(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var cr=function(t){var e=t.isAdd,r=Object($.i)(),o=Object(z.a)(),c=ar(Object(n.useState)({loading:!1,status:!1}),2),i=c[0],f=c[1],d=ar(Object(n.useState)(!1),2),y=d[0],v=d[1],w=ar(Object(n.useState)(!1),2),j=w[0],E=w[1],_=ar(Object(n.useState)({}),2),k=_[0],x=_[1],S=r.s,N=void 0===S?"":S,L=Ce(),P=L.fetch,C=L.setStateExportValues,I=_e(),A=I.getExporter,T=I.getOffset,F=I.getLoading,G=I.getTotalCount,D=I.getPageNumber,M=I.getPerPageCount,B=[{key:"actions",label:"",isLeftAligned:!1,cellClassName:"bwf-col-action bwf-w-30 "},{key:"name",label:Object(a.__)("Name","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-300"},{key:"createdon",label:Object(a.__)("Created On","wp-marketing-automations"),isLeftAligned:!0},{key:"contactcount",label:Object(a.__)("Contacts","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-120"},{key:"status",label:Object(a.__)("Status","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-150"},{key:"file",label:"",isLeftAligned:!1,cellClassName:"bwf-w-150"}],U=A(),R=D(),Y=M(),q=G(),V=T(),W=F(),H=Object(de.a)().setPageCountData;Object(n.useEffect)((function(){H({contacts_export:q})}),[q]),Object(n.useEffect)((function(){e||P(Y,V,N)}),[Y,V,N,e]);var K,J=function(t){t!==Y&&C("limit",t)},Z=function(){var t,e=(t=Xe().mark((function t(e){var r,n=arguments;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},f(er(er({},r),{},{status:!0})),t.prev=2,t.next=5,g()({path:Object(l.z)("/contact/export/delete/".concat(e)),method:"DELETE"}).then((function(t){if(200!==t.code)throw Error(Object(l.t)(null==t?void 0:t.message));f({}),P(Y,V,N)})).catch((function(t){throw Error(Object(l.t)(null==t?void 0:t.message))}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),f({status:!0,error:t.t0.message?t.t0.message:Object(a.__)("Error in deleting export","wp-marketing-automations")});case 10:case"end":return t.stop()}}),t,null,[[2,7]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){nr(o,n,a,c,i,"next",t)}function i(t){nr(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(t){return e.apply(this,arguments)}}(),Q=function(t){return Object(n.createElement)(m.a,{label:Object(a.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var r=e.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){t.hasOwnProperty("status")&&1===parseInt(t.status)?(x(t),E(!0)):(x(t),v(!0)),r()}},Object(n.createElement)(h.a,{justify:"flex-start"},Object(n.createElement)(h.c,null,Object(a.__)("View","wp-marketing-automations")))),Object(n.createElement)(p.a,{isClickable:!0,onInvoke:function(){var e={status:!0,deleteEntityName:Object(n.createElement)(n.Fragment,null,Object(a.__)("item ")," ",t.title),buttonConfirm:Object(a.__)("Delete","wp-marketing-automations"),buttonCancel:Object(a.__)("Cancel","wp-marketing-automations")};f(er(er({},e),{},{onConfirm:function(){return Z(t.id,e)}})),r()}},Object(n.createElement)(h.a,{justify:"flex-start"},Object(n.createElement)(h.c,null,Object(a.__)("Delete","wp-marketing-automations")))))}})},X={1:Object(a.__)("In Progress","wp-marketing-automations"),2:Object(a.__)("Failed","wp-marketing-automations"),3:Object(a.__)("Completed","wp-marketing-automations"),4:Object(a.__)("Cancelled","wp-marketing-automations")},tt=function(t){switch(parseInt(t.status)){case 3:if(t.file)return Object(n.createElement)("a",{target:"_blank",href:Object(l.ub)()+"/wp-json"+Object(l.z)("/contact/export/download/".concat(t.id,"?bwf-nonce=").concat(Object(l.E)())),title:Object(a.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline",rel:"noreferrer"},Object(n.createElement)("div",{className:"bwf-download-btn"},Object(n.createElement)("span",null,Object(n.createElement)(O.a,{icon:"download"})),Object(n.createElement)("span",null,Object(a.__)("Download","wp-marketing-automations"))));default:return"-"}},et=function(t){return 1===parseInt(t.status)?Object(n.createElement)(n.Fragment,null,Object(a.sprintf)(Object(a.__)("%d of %d Completed","wp-marketing-automations"),parseInt(t.offset),parseInt(t.count))):t.count},rt=Object(s.isEmpty)(U)?[]:U.map((function(t){return[{display:Q(t),value:"action"},{display:t.title?t.title:"-",value:t.title},{display:(r=t.created_date,Object(n.createElement)("div",{className:"bwf-display-flex-column"},Object(n.createElement)("span",null,Object(l.gb)(r)))),value:""},{display:et(t),value:t.count},{display:(e=t,Object(n.createElement)("span",{className:"bwf-export-status-tag bwf-status-"+parseInt(e.status)},X[parseInt(e.status)])),value:t.status},{display:tt(t),value:""}];var e,r}));return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)(u.a,{title:"",className:"bwf-export-contact-table",rows:rt,headers:B,query:{paged:R},rowsPerPage:Y,totalRows:q,isLoading:W,onPageChange:function(t,e){C("offset",(t-1)*Y)},onQueryChange:function(t){return"per_page"!==t?function(){}:J},showMenu:!1,rowHeader:!0,actions:[],emptyMessage:Object(a.__)("No export available","wp-marketing-automations"),minHeight:!0}),Object(n.createElement)(jt.a,{modalTitle:Object(a.__)("Delete"),confirmText:i.confirmText,deleteEntityName:i.deleteEntityName,confirmButtonText:i.buttonConfirm,cancelButtonText:i.buttonCancel,onConfirm:i.onConfirm,isLoading:i.loading,successMessage:i.success,errorMessage:i.error,onRequestClose:function(){return f({status:!1})},isOpen:i.status,isDelete:!0}),y&&!Object(s.isEmpty)(k)&&Object(n.createElement)(b.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-large bwf-export-list-modal bwf-show-close"},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Export Details","wp-marketing-automations")),Object(n.createElement)("span",{onClick:function(){return v(!1)},className:"bwf-modal-close"},Object(n.createElement)(O.a,{icon:"close",color:"#353030"}))),(K=[],Object(s.isEmpty)(k.fields)||k.fields.map((function(t){var e=ar(Object.entries(t)[0],2),r=e[0];e[1],o.hasOwnProperty(r)&&K.push(o[r].labels.add)})),Object(n.createElement)(n.Fragment,null,k.hasOwnProperty("filters")&&Object(n.createElement)("div",{className:"bwf-export-modal-row"},Object(n.createElement)("div",{className:"bwf-export-modal-row-label"},Object(a.__)("Filters","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-export-modal-row-value"},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(s.isEmpty)(t)?"-":Object(n.createElement)(n.Fragment,null,Object(Ie.b)(t))}(k.filters))),!Object(s.isEmpty)(K)&&Object(n.createElement)("div",{className:"bwf-export-modal-row"},Object(n.createElement)("div",{className:"bwf-export-modal-row-label"},Object(a.__)("Fields","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-export-modal-row-value"},K.join(" | ")))))),j&&!Object(s.isEmpty)(k)&&Object(n.createElement)(Ze,{exportData:k,onClose:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&P(Y,V,N),E(!1)}}))},ir=function(t){var e=t.setAdd,r=t.isAdd;return Object(n.useEffect)((function(){Object(l.l)(Object(a.__)("Export List","wp-marketing-automations"))}),[]),Object(n.createElement)(n.Fragment,null,Object(n.createElement)(cr,{setAdd:e,isAdd:r}))};r(188);function lr(t){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ur(){ur=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==lr(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(lr(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function sr(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}var fr=function(){var t,e=(t=ur().mark((function t(){var e;return ur().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.z)("/contact/export/custom-selections")});case 2:if((e=t.sent)&&e.result){t.next=5;break}throw new Error(Object(a.__)("Unable to get Custom Export Selections","wp-marketing-automations"));case 5:return t.abrupt("return",e.result);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){sr(o,n,a,c,i,"next",t)}function i(t){sr(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}(),mr=function(){return Object(_t.useQuery)(["bwfcrm-get-export-selections"],fr)};function pr(t){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function br(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=pr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hr(t){return function(t){if(Array.isArray(t))return dr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return dr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dr(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var yr=function(t){var e=t.checked,r=void 0!==e&&e,a=t.onChange,o=void 0===a?function(){}:a,c=t.title,i=void 0===c?"":c,l=t.count,u=void 0===l?0:l,s=t.groupKey,f=void 0===s?"":s,m=t.selectedGroup,p=void 0===m?"":m,b=t.setSelectedGroup,h=void 0===b?function(){}:b;return Object(n.createElement)("div",{className:"bwf-export-field-header-wrap",onClick:function(t){t.target.classList.contains("components-checkbox-control__label")||t.target.classList.contains("components-checkbox-control__input")||h(p==f?"":f)}},Object(n.createElement)("div",null,Object(n.createElement)(q.a,{className:"bwf-export-toggler",checked:r,onChange:o,label:Object(n.createElement)(n.Fragment,null,i,u>0&&Object(n.createElement)("span",{className:"bwf-light"}," ","( ",u," selected )"))})),Object(n.createElement)("span",null,Object(n.createElement)(O.a,{icon:"tailless-arrow-down-new",size:15})))},vr=function(t){var e=t.selected,r=t.onChange,a=t.selectedGroup,o=t.setSelectedGroup,c=mr(),i=c.isLoading,l=c.data,u=Array.isArray(e)?e.map((function(t){return Object.keys(t)[0]})):[],s=function(t,n){if(t)r([].concat(hr(e),[n]));else{var a=e.filter((function(t){return Object.keys(t)[0]!==Object.keys(n)[0]}));r(a)}},f=function(t,n){var a=l[n].selections,o=Object.keys(a);if(t){var c=o.map((function(t){return!u.includes(t)&&br({},t,a[t].name)})).filter(Boolean);r([].concat(hr(e),hr(c)))}else{var i=e.filter((function(t){return!o.includes(Object.keys(t)[0])}));r(i)}};return i?Object(n.createElement)(n.Fragment,null):Object.keys(l).map((function(t,r){var c,i=l[t],m=i.name,p=i.selections,b=Object.keys(l[t].selections).filter((function(t){return u.includes(t)}));return Object(n.createElement)("div",{className:"bwf-export-field-section",key:r},Object(n.createElement)(yr,{title:m,checked:(c=t,Object.keys(l[c].selections).filter((function(t){return u.includes(t)})).length===Object.keys(l[c].selections).length),groupKey:t,onChange:function(e){return f(e,t)},count:Array.isArray(b)?b.length:0,selectedGroup:a,setSelectedGroup:o}),a==t&&Object(n.createElement)("div",{className:"bwf-p-20 bwf-export-field-list"},Object.keys(p).map((function(t,r){var a=Array.isArray(e)&&e.find((function(e){return!!e[t]}));return Object(n.createElement)("div",{key:r},Object(n.createElement)(q.a,{label:p[t].name,className:"bwf-export-field",checked:a,onChange:function(e){return s(e,br({},t,p[t].name))}}))}))))}))};function gr(t){return function(t){if(Array.isArray(t))return jr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Or(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||Or(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Or(t,e){if(t){if("string"==typeof t)return jr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jr(t,e):void 0}}function jr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Er=function(t){var e=t.title,r=t.setTitle,o=t.selected,c=t.setSelected,i=t.setStep,l=t.expfilter,u=wr(Object(n.useState)("contact_details"),2),f=u[0],m=u[1],p=wr(Object(n.useState)(""),2),h=p[0],d=p[1],y=Object($.i)(),v=Object(z.a)(),g=Object(n.useMemo)((function(){var t=[],e=["engaged","unengaged","broadcast_sent","broadcast_open","broadcast_click"];return Object.entries(v).map((function(r){var n=wr(r,2),a=n[0],o=n[1];if(e.includes(a))return!1;var c;c={key:a,label:o.labels.add},t.hasOwnProperty(o.group)?t[o.group].fields.push(c):t[o.group]={label:o.groupLabel,fields:[c]}})),t}),[v]);Object(n.useEffect)((function(){if(Object(s.isEmpty)(o)&&g.hasOwnProperty("contact_details")){var t=[];g.contact_details.fields.map((function(e){var r={};r[e.key]=e.label,t.push(r)})),c(t)}}),[]);var w=function(t){var e=!1;return o.find((function(r){var n=wr(Object.entries(r)[0],2),a=n[0];n[1];t==a&&(e=!0)})),e},j=function(t,e){var r=0,a=!1;return g[t].fields.map((function(t){w(t.key)&&r++})),parseInt(g[t].fields.length)===parseInt(r)&&(a=!0),Object(n.createElement)("div",{className:"bwf-export-field-header-wrap",onClick:function(e){e.target.classList.contains("components-checkbox-control__label")||e.target.classList.contains("components-checkbox-control__input")||m(f==t?"":t)}},Object(n.createElement)("div",null,Object(n.createElement)(q.a,{checked:a,className:"bwf-export-toggler",onChange:function(e){!function(t,e){var r=gr(o);t?g[e].fields.map((function(t){if(!w(t.key)){var e={};e[t.key]=t.label,r.push(e)}})):g[e].fields.map((function(t){w(t.key)&&(r=r.filter((function(e){var r=wr(Object.entries(e)[0],2),n=r[0];r[1];return n!==t.key})))})),c(r)}(e,t)},label:Object(n.createElement)(n.Fragment,null,e,r>0&&Object(n.createElement)("span",{className:"bwf-light"}," ","( ",r," selected )"))})),Object(n.createElement)("span",null,Object(n.createElement)(O.a,{icon:"tailless-arrow-down-new",size:15})))},_=Object(n.createElement)(n.Fragment,null,["contact_details","geography","contact_custom_fields","woocommerce","segments","engagement"].map((function(t,e){return g.hasOwnProperty(t)?Object(n.createElement)("div",{className:"bwf-export-field-section",key:"bwf-export-field-section-".concat(e)},j(t,g[t].label),f==t&&function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(n.createElement)("div",{className:"bwf-export-field-list"},t.map((function(t,e){return Object(n.createElement)(q.a,{label:t.label,checked:w(t.key),onChange:function(e){if(e){var r=gr(o),n={};n[t.key]=t.label,r.push(n),c(r)}else c(o.filter((function(e){var r=wr(Object.entries(e)[0],2),n=r[0];r[1];return n!==t.key})))},key:"bwf-export-field-".concat(e)})})))}(g[t].fields)):["woocommerce","contact_custom_fields"].includes(t)?"":function(t){return Object(n.createElement)("div",{className:"bwf-export-field-section",key:"'bwf-export-field-section'-".concat(t)},Object(n.createElement)("div",{className:"bwf-export-field-header-wrap"},Object(n.createElement)("div",{className:"bwf-w-120 bwf-placeholder-temp"}),Object(n.createElement)("div",{className:"bwf-w-30 bwf-placeholder-temp"})),0===parseInt(t)&&Object(n.createElement)("div",{className:"bwf-export-field-list"},Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:1}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:2}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:3}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:4}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:5}),Object(n.createElement)("div",{className:"bwf-placeholder-temp",key:6})))}(e)})),Object(n.createElement)(vr,{selected:o,onChange:function(t){c(t)},selectedGroup:f,setSelectedGroup:m}));return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwfcrm-overview-wrap bwf-contact-export-step-one"},h&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)(E.a,{status:"error",onRemove:function(){return d("")}},h),Object(n.createElement)("div",{className:"bwf_clear_20"})),Object(n.createElement)(b.TextControl,{type:"text",value:e,placeholder:Object(a.__)("Enter Name","wp-marketing-automations"),label:Object(n.createElement)("span",{className:"bwf-h4"},Object(a.__)("Name","wp-marketing-automations")),onChange:function(t){r(t)}}),Object(n.createElement)("div",{className:"bwf-field-wrapper"},_)),Object(n.createElement)("div",{className:"bwfcrm-export-buttons bwf-display-flex"},Object(n.createElement)("div",null),Object(n.createElement)(b.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,onClick:function(){Object(s.isEmpty)(e)?d(Object(a.__)("Name is required.","wp-marketing-automations")):Object(s.isEmpty)(o)?d(Object(a.__)("Please select field to export.","wp-marketing-automations")):(Object(s.isEmpty)(l)||Object($.k)(l,"/",y),i(2))}},Object(n.createElement)("span",null,Object(a.__)("Next","wp-marketing-automations")))))},_r=r(46),kr=r(32);function xr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Sr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sr(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Nr=Object(_r.a)(Object(l.xb)()).formatAmount,Lr=function(t){var e=t.setContactCount,r=t.queryFilters,o=void 0===r?{}:r,c=function(t){var e=Object(s.isEmpty)(t.country)?"":D[t.country],r=Object(l.oc)([t.city,t.state,e],", ");return Object(s.isEmpty)(Object(s.trim)(r))?"":r},f=function(t){var e=c(t);return t.country||e?Object(n.createElement)(h.a,{justify:"start"},!Object(s.isEmpty)(t.country)&&Object(n.createElement)(h.c,null,Object(n.createElement)(Et.a,{code:t.country,size:18})),Object(n.createElement)(h.c,null,e&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",null,c(t)),Object(n.createElement)("br",null)))):"-"},m=function(t){return Object(n.createElement)(kr.a,{href:"admin.php?page=autonami&path=/contact/"+t.id,className:"bwf-a-no-underline"},Object(n.createElement)(Nt.a,{contact:t,hideJoiningDate:!0}))},p=function(t){return Object(n.createElement)("div",{className:"bwf-c-contact-details-cell"},t.email&&Object(n.createElement)(h.a,{justify:"start",align:"top"},Object(n.createElement)(h.c,null,Object(n.createElement)(O.a,{icon:"mail"})),Object(n.createElement)(h.c,null,Object(n.createElement)(kr.a,{href:"mailto:"+t.email,className:"bwf-a-no-underline",type:"external"},t.email))),t.phone&&Object(n.createElement)(h.a,{justify:"start",align:"top"},Object(n.createElement)(h.c,null,Object(n.createElement)(O.a,{icon:"phone"})),Object(n.createElement)(h.c,null,Object(n.createElement)(kr.a,{href:"tel:"+t.phone,className:"bwf-a-no-underline",type:"external"},t.phone))))},b=Object(d.a)(),v=b.getPageNumber,g=b.getPerPageCount,w=b.getTotalCount,j=b.getLoading,E=b.getContacts,_=Object(y.a)(),k=_.fetch,x=_.setStateProp;t.query;Object(n.useEffect)((function(){return x("limit",10),function(){return x("limit",25)}}),[]);var S=E(),N=v(),L=g(),P=w(),C=j(),I=xr(Object(n.useState)(!0),2),A=I[0],T=I[1];Object(n.useEffect)((function(){A&&P>0&&T(!1),e(P)}),[P]);var F=[{key:"contact",label:Object(a.__)("Contact","wp-marketing-automations"),isLeftAligned:!0,required:!0},{key:"contact_details",label:Object(a.__)("Details","wp-marketing-automations"),isLeftAligned:!0}];Object(l.nc)()?(F.push({key:"total_spent",label:Object(a.__)("Total Spent","wp-marketing-automations"),isLeftAligned:!0}),F.push({key:"last_order",label:Object(a.__)("Last Order","wp-marketing-automations"),isLeftAligned:!0})):F.push({key:"column_location",label:Object(a.__)("Location","wp-marketing-automations"),isLeftAligned:!0});var G=function(t){var e=t.wc,r=e.total_order_count,o=e.total_order_value;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-listing-total-spent"},o&&r?Object(n.createElement)("div",{className:"bwf-c-total-spent-amount"},Nr(o)," |"," ",r," ",parseInt(r)>1?Object(a.__)("orders","wp-marketing-automations"):Object(a.__)("order","wp-marketing-automations")):"-"))},$=function(t){var e=t.wc.l_order_date;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",null,e&&"0000-00-00"!=e?Object(n.createElement)("div",{className:"bwf-c-total-spent-amount"},Object(l.fb)(e)):"-"))},M=S.map((function(t){var e=function(t){return Object(s.merge)({id:0,email:"-",first_name:"",last_name:"",creation_date:"",fields:{marketing_status:"0",first_order_date:"",country:"",city:"",state:"",phone:""},wc:{id:1,l_order_date:"",total_order_count:0,total_order_value:0,total_purchased_items:0}},t)}(t),r=[{display:m(e),value:Object(l.oc)([e.first_name,e.last_name]," ")},{display:p(e),value:"'".concat(Object(a.__)("Email","wp-marketing-automations"),": ").concat(e.email,", ").concat(Object(a.__)("Phone","wp-marketing-automations"),": ").concat(e.phone)}];return Object(l.nc)()?(r.push({display:G(e),value:""}),r.push({display:$(e),value:""})):r.push({display:f(e),value:c(e)}),r})),z=function(t){t!==L&&k(o,0,t,!0,!1,"",!1)},B=i()("bwfcrm-contacts-list",{"has-search":!0}),U=parseInt(P)>0?" ("+parseInt(P)+")":"";return Object(n.createElement)(u.a,{className:B,title:Object(a.__)("Contacts ","wp-marketing-automations")+U,rows:M,headers:F,query:{paged:N},rowsPerPage:L,totalRows:P,isLoading:C,onPageChange:function(t,e){k(o,(t-1)*L,L,!0,!1,"",!1)},onQueryChange:function(t){return"per_page"!==t?function(){}:z},showMenu:!1,emptyMessage:Object(a.__)("No contacts found","wp-marketing-automations")})},Pr=r(201),Cr=["page","path","s","filter"];var Ir=function(t){var e=t.setStep,r=t.setExportFilter,o=t.contactCount,c=t.setContactCount,i=Object(z.a)(!0,!0),u=i.loading,f=void 0===u||u,m=i.filters,p=void 0===m?{}:m,h=Object($.i)(),d=h.page,v=h.path,g=(h.s,h.filter,function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(h,Cr)),w=Object(y.a)(),O=Object(n.useRef)(g),j=w.fetch;Object(n.useEffect)((function(){j(g,0,10,!0,!1,"",!1)}),[]),Object(n.useEffect)((function(){Object(l.tc)(g,O.current)||j(g,0,10,!0,!1,"",!1),O.current=g}),[g]);var E=Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-contact-export-step-two"},Object(n.createElement)("div",{className:"bwf-bulk-action-step-loading bwf-p-20"},Object(n.createElement)("div",{className:"bwf-bulk-action-step-loading"},Object(n.createElement)("div",{className:"bwf-filter-placeholder"},Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(n.createElement)("div",{className:"bwf-w-150"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-150"})),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-36"})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}),Object(n.createElement)("br",null),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-400"})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(n.createElement)("div",null),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-36 bwf-w-90"}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-w-150"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-15"})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(Pr.a,{numberOfRows:5,headers:[{key:"2",label:Object(n.createElement)("div",{className:"bwf-w-210"},Object(n.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))},{key:"3",label:Object(n.createElement)("div",{className:"bwf-w-210"},Object(n.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))},{key:"4",label:Object(n.createElement)("div",{className:"bwf-w-210"},Object(n.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))}]})))),Object(n.createElement)("div",{className:"bwf-display-flex bwfcrm-export-buttons"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-36"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-36"})));return f?Object(n.createElement)(n.Fragment,null,E):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-contact-export-step-two"},Object(n.createElement)("div",{className:"bwf-export-filter-wrapper"},Object(n.createElement)("div",{className:"bwf-display-flex bwf-mb-16",style:{justifyContent:"space-between"}},Object(n.createElement)("div",{className:"bwf-h3 bwf-w-300"},Object(a.__)("Segment Contacts","wp-marketing-automations")),Object(n.createElement)(B.c,{addAdvance:!1})),Object(n.createElement)("div",{className:"bwf-p-0"},Object(n.createElement)(U.a,{siteLocale:"en-US",currency:Object(l.nc)()?bwfcrm_contacts_data.currency:{},config:{title:Object(a.__)("Select Rules","wp-marketing-automations"),filters:p,footerComponent:function(t){return Object(n.createElement)(B.a,{filter:t.data,config:t.config})},enableGrouping:!0},path:"/contacts",query:h}))),Object(n.createElement)("div",{className:"bwf-export-table-wrapper"},Object(n.createElement)(Lr,{setContactCount:c,queryFilters:g}))),Object(n.createElement)("div",{className:"bwf-display-flex bwfcrm-export-buttons"},Object(n.createElement)(b.Button,{className:"bwfcrm-export-prev bwf-display-flex",isSecondary:!0,onClick:function(){Object(s.isEmpty)(g)||Object($.k)({page:d,path:v},"/",{}),r(g),e(1)}},Object(n.createElement)("span",null,Object(a.__)("Previous","wp-marketing-automations"))),Object(n.createElement)(b.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,disabled:!(o>0),onClick:function(){Object(s.isEmpty)(g)||Object($.k)({page:d,path:v},"/",{}),r(g),o>0&&e(3)}},Object(n.createElement)("span",null,Object(a.__)("Next","wp-marketing-automations")))))};function Ar(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Tr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tr(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Fr=function(t){var e=t.setAdd,r=Ar(Object(n.useState)(!1),2),o=r[0],c=(r[1],Ar(Object(n.useState)(1),2)),i=c[0],l=c[1],u=Ar(Object(n.useState)(!1),2),s=u[0],f=u[1],m=Ar(Object(n.useState)(""),2),p=m[0],h=m[1],d=Ar(Object(n.useState)([]),2),y=d[0],v=d[1],g=Ar(Object(n.useState)([]),2),w=g[0],O=g[1],j=Ar(Object(n.useState)(0),2),E=j[0],_=j[1],k=function(t){switch(t){case 1:return Object(n.createElement)(Er,{title:p,setTitle:h,selected:y,expfilter:w,setSelected:v,setStep:l});case 2:return Object(n.createElement)(Ir,{setStep:l,setExportFilter:O,contactCount:E,setContactCount:_});case 3:return Object(n.createElement)(He,{title:p,fields:y,expfilter:w,contactCount:E,setPending:f,setAdd:e})}},x=[{key:1,label:Object(a.__)("Fields","wp-marketing-automations"),content:k(1)},{key:2,label:Object(a.__)("Contacts","wp-marketing-automations"),content:k(2)},{key:3,label:Object(a.__)("Confirmation","wp-marketing-automations"),content:k(3)}];return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(b.Modal,{onRequestClose:function(){return e(!1)},className:"bwf-admin-modal bwf-admin-modal-xxl bwf-export-add-modal",title:Object(a.__)("Create Export","wp-marketing-automations"),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(n.createElement)("div",{className:"bwf-crm-export-init"},o?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(F.a,null)):Object(n.createElement)(Ae.a,{steps:x,currentStep:i,isPending:s}))))};function Gr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return $r(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Dr=function(t){var e=t.setExport,r=Gr(Object(n.useState)(!1),2),o=r[0],c=r[1];Object(n.useEffect)((function(){Object(l.l)(Object(a.__)("Export Contacts","wp-marketing-automations"))}),[]);var i=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(n.createElement)(O.a,{icon:"export",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(a.__)("Export your contacts to CSV file.","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(a.__)("Start Exporting","wp-marketing-automations"),proCheck:!0,onClick:function(){Object(l.Yb)()&&c(!0)}}]}}];return Object(n.createElement)(b.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-admin-modal-no-header bwf-export-contact-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(n.createElement)("div",{className:"bwf-export-modal-header"},Object(n.createElement)("div",{className:"bwf-export-modal-title"},Object(a.__)("Export Contacts","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex gap-24"},!o&&Object(l.Z)()&&Object(n.createElement)(b.Button,{variant:"primary",className:"bwf-add-contact-export-btn",onClick:function(){return c(!0)},isBusy:!1,disabled:!1},Object(a.__)("Create Export","wp-marketing-automations")),Object(n.createElement)("div",{onClick:function(){Object(l.l)(Object(a.__)("Contacts","wp-marketing-automations")),Object($.k)({page:"autonami",path:"/contacts/"},"/",{}),e(!1)},className:"bwf-flex",style:{cursor:"pointer",marginRight:"-10px"}},Object(n.createElement)(O.a,{icon:"close"})))),o&&Object(n.createElement)(Fr,{setAdd:c}),Object(l.Z)()?Object(n.createElement)(ir,{setAdd:c,isAdd:o}):Object(n.createElement)(Lt.a,{data:i}))};r(1128);function Mr(t){return(Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var zr=["getStateProp"];function Br(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ur(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Br(Object(r),!0).forEach((function(e){Rr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Br(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Rr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Mr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Yr=function(){var t=Object(ve.a)("importerReducer"),e=t.getStateProp;return Ur(Ur({},function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(t,zr)),{},{showBackButton:function(){return e("showBackButton")},getExistingImports:function(){return e("existingImports")}})};function qr(t){return(qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Vr=["fetch","setStateProp"];function Wr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Hr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Wr(Object(r),!0).forEach((function(e){Kr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Kr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=qr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Jr,Zr,Qr,Xr,tn=function(){var t=Object(ke.a)("importerReducer"),e=t.fetch,r=t.setStateProp;return Hr(Hr({},function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(t,Vr)),{},{showBackButton:function(t){return r("showBackButton",t)},fetch:function(){return e("GET",Object(l.z)("/import/processes"))}})},en=r(7);function rn(){return(rn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(null,arguments)}var nn,an,on=function(t){return en.createElement("svg",rn({id:"wlm_svg__WishList_Member","data-name":"WishList Member",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 532.46 217.17"},t),Jr||(Jr=en.createElement("defs",null,en.createElement("style",null,".wlm_svg__cls-1{fill:#1e7fc0}.wlm_svg__cls-2{fill:#333}"))),Zr||(Zr=en.createElement("g",{id:"wlm_svg__member"},en.createElement("path",{className:"wlm_svg__cls-1",d:"M238.05 219.81c-.11-3-.22-6.52-.21-10.12h-.1c-.78 3.15-1.82 6.64-2.74 9.53l-3 9.58h-4.31l-2.69-9.49c-.79-2.89-1.6-6.38-2.21-9.62h-.08c-.12 3.34-.26 7.14-.4 10.19l-.46 9.32h-5.14l1.57-24.55h7.4l2.4 8.2c.78 2.82 1.53 5.9 2.08 8.78h.12c.67-2.84 1.5-6.08 2.34-8.82l2.6-8.16h7.27l1.31 24.55h-5.39zM270.09 218.81h-9v5.84h10.1v4.55H255.5v-24.55h15.13v4.55h-9.57v5.11h9zM303.08 219.81c-.11-3-.22-6.52-.21-10.12h-.1c-.78 3.15-1.82 6.64-2.74 9.53l-3 9.58h-4.31l-2.65-9.49c-.79-2.89-1.6-6.38-2.21-9.62h-.08c-.12 3.34-.26 7.14-.41 10.19l-.45 9.32h-5.14l1.57-24.55h7.4l2.4 8.2c.77 2.82 1.53 5.9 2.08 8.78h.12c.67-2.84 1.5-6.08 2.33-8.82l2.61-8.16h7.26l1.32 24.55h-5.39zM320.53 205a45.06 45.06 0 017.16-.52c3.39 0 5.47.33 7.27 1.37a5.35 5.35 0 012.92 4.84c0 2.16-1.26 4.2-4 5.23v.08a6.11 6.11 0 014.89 6 6.5 6.5 0 01-2.56 5.21c-1.8 1.45-4.76 2.24-9.65 2.24a41.31 41.31 0 01-6-.37zm5.5 9.4h1.8c2.94 0 4.48-1.22 4.48-3s-1.42-2.85-3.93-2.85a12.1 12.1 0 00-2.35.17zm0 10.87a13.63 13.63 0 002.13.1c2.52 0 4.74-1 4.74-3.56s-2.2-3.44-5-3.44H326zM364.49 218.81h-9v5.84h10.1v4.55h-15.68v-24.55H365v4.55h-9.57v5.11h9zM376.73 205a47.35 47.35 0 017.38-.52c3.65 0 6.2.55 7.95 1.94a6.22 6.22 0 012.27 5.15 6.5 6.5 0 01-4.33 6v.12c1.7.69 2.66 2.31 3.28 4.57a71.49 71.49 0 002 6.93h-5.68a30.77 30.77 0 01-1.69-5.72c-.69-3.07-1.72-3.89-4-3.92h-1.65v9.64h-5.51zm5.51 10.56h2.17c2.76 0 4.4-1.4 4.4-3.54s-1.54-3.39-4.07-3.41a11.35 11.35 0 00-2.5.19z",transform:"translate(-39.77 -12.28)"}))),Qr||(Qr=en.createElement("g",{id:"wlm_svg__WishList"},en.createElement("path",{className:"wlm_svg__cls-2",d:"M64.62 180L39.77 75h25.41l8 43.21c2.24 12.5 4.42 26.12 6.1 36.71h.32c1.69-11.4 4.2-24 6.85-37L95.4 75h25.21l8.39 44.3c2.24 12.24 4 23.45 5.54 35.07h.32c1.64-11.7 3.85-23.87 6.17-36.46L149.51 75h24.12l-27.06 105h-25.63L112 134.77c-2.1-10.5-3.74-20.4-5.06-32.29h-.31c-1.78 11.81-3.47 21.77-6 32.36l-10 45.16zM180.94 180v-76.26h23.73V180zM218.57 159.31a46.05 46.05 0 0020.31 5.69c7.15 0 10.21-2.4 10.21-6.29s-2.43-5.86-11.18-8.81c-15.85-5.21-21.81-13.83-21.72-22.78 0-14.31 12.07-25.06 31-25.06 8.92 0 16.8 2.1 21.46 4.44l-4.12 16.32a38.83 38.83 0 00-16.51-4.3c-5.78 0-9.09 2.3-9.09 6.14 0 3.65 3 5.57 12.36 8.8 14.46 4.91 20.51 12.34 20.61 23.45 0 14.22-11.1 24.71-32.93 24.71-9.93 0-18.86-2.25-24.67-5.37zM279.32 69.41h23.73v43.51h.31a26.93 26.93 0 019.28-7.87A26.39 26.39 0 01325 102c15.12 0 26.7 10.48 26.7 33.46V180h-23.76v-41.91c0-10-3.45-16.89-12.24-16.89a12.46 12.46 0 00-11.88 8.37 14.45 14.45 0 00-.77 5.18V180h-23.73zM359.57 75h23.72v85.05H425V180h-65.43zM432.35 180v-76.26h23.72V180zM468 159.31c4.31 2.65 13.42 5.66 20.31 5.66 7.15 0 10.21-2.4 10.21-6.29s-2.43-5.86-11.18-8.81c-15.85-5.21-21.81-13.83-21.72-22.78 0-14.31 12.08-25.06 31-25.06 8.92 0 16.81 2.1 21.47 4.44l-4.13 16.32a38.79 38.79 0 00-16.51-4.3c-5.78 0-9.09 2.3-9.09 6.14 0 3.65 3 5.57 12.36 8.8 14.46 4.91 20.52 12.34 20.61 23.45 0 14.22-11.09 24.71-32.93 24.71-9.93 0-18.86-2.25-24.67-5.37zM555.18 82v21.73h17.05v17.48h-17.05v27.61c0 9.19 2.28 13.43 9.35 13.43a30.89 30.89 0 007-.71l.19 18c-3.06 1.1-8.72 2-15.35 2-7.66 0-14-2.67-17.86-6.62-4.4-4.51-6.55-11.76-6.55-22.58v-31.12h-10.08v-17.48H532V87.37z",transform:"translate(-39.77 -12.28)"}))),Xr||(Xr=en.createElement("path",{id:"wlm_svg__bounce",className:"wlm_svg__cls-1",d:"M456.86 82a13.41 13.41 0 01-13.4 13.5c-7.93 0-13.59-7-13.53-13.13.08-8 6.8-14.15 13.72-13.64 6.8-.56 13.24 5.85 13.21 13.27zm-33.32-7S302.47-38.88 195.48 88.11c0 0-36.78-75.63-119.47-74.84 0 0 71.11-13.4 120.07 58.58 0 0 106.11-125.65 242.11-10.49 0 0-13.52-.85-14.65 13.64z",transform:"translate(-39.77 -12.28)"})))};function cn(){return(cn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(null,arguments)}var ln=function(t){return en.createElement("svg",cn({xmlns:"http://www.w3.org/2000/svg",width:400,height:90,viewBox:"20 20 700 155",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.414},t),nn||(nn=en.createElement("path",{d:"M135.1 105.3c-1 0-2 .1-3 .2l-14.4-25.9c3.2-3.8 5.1-8.7 5.1-14 0-12.1-9.8-21.9-21.9-21.9-12.1 0-21.9 9.9-21.9 21.9 0 5.2 1.8 10 4.9 13.8l-15 26.2c-1.1-.2-2.2-.3-3.3-.3-12.1 0-21.9 9.8-21.9 21.9 0 12.1 9.8 21.9 21.9 21.9 12.1 0 21.9-9.8 21.9-21.9 0-5.2-1.8-10-4.9-13.8l15-26.2c1.1.2 2.2.3 3.3.3 1 0 2-.1 3-.2l14.4 25.9c-3.2 3.8-5.1 8.7-5.1 14 0 12.1 9.8 21.9 21.9 21.9 12.1 0 21.9-9.8 21.9-21.9 0-12.1-9.8-21.9-21.9-21.9zm-34.2-47.2c4.1 0 7.5 3.4 7.5 7.5s-3.4 7.5-7.5 7.5-7.5-3.4-7.5-7.5 3.4-7.5 7.5-7.5zm-35.3 76.6c-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5 7.5 3.4 7.5 7.5-3.4 7.5-7.5 7.5zm69.5 0c-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5 7.5 3.4 7.5 7.5-3.3 7.5-7.5 7.5z",fill:"#e34f43",fillRule:"nonzero"})),an||(an=en.createElement("g",{fill:"#2d2d2d",fillRule:"nonzero"},en.createElement("path",{d:"M205.5 64h25.2l21.6 68h-20.6l-3.6-12.7h-22.5L202 132h-18.2l21.7-68zm3.8 42h14.9l-7.4-26.2-7.5 26.2zM258.1 93.9h-6.3V82.3h6.3v-3.8c0-12.4 7.6-18.2 19.4-18.2 3.1 0 5.4.4 7.6 1v12.5c-1.2-.4-2.7-.7-4.6-.7-3.8 0-5.5 2.3-5.5 5.4v3.8h14.5v-4.4c0-12.4 7.7-18.3 19.5-18.3 3.1 0 5.3.4 7.5 1v12.5c-1.2-.4-2.5-.6-4.5-.6-3.9 0-5.5 2.2-5.5 5.4v4.4h10v11.6h-10V132h-17V93.9H275V132h-16.9V93.9zM320.5 68.8c0-5 4-8.8 9.3-8.8 5.3 0 9.4 3.8 9.4 8.8 0 5-4.1 8.8-9.4 8.8-5.3-.1-9.3-3.8-9.3-8.8zm.9 13.5h17V132h-17V82.3zM347.5 60.4h16.9V132h-16.9zM372.7 68.8c0-5 4-8.8 9.3-8.8 5.3 0 9.4 3.8 9.4 8.8 0 5-4.1 8.8-9.4 8.8-5.3-.1-9.3-3.8-9.3-8.8zm.9 13.5h17V132h-17V82.3zM396.7 118.2c0-11.7 9.9-16.3 26.4-16.3h4.8v-1.1c0-4.8-1.1-7.9-6.6-7.9-4.7 0-6.4 2.8-6.8 5.9h-16c.8-12 10.2-17.9 23.8-17.9 13.7 0 22.4 5.6 22.4 18.8V132h-16.6v-5.8c-2.4 3.6-6.8 6.9-14.7 6.9-8.8.1-16.7-4.3-16.7-14.9zm31.2-3.6v-3h-4.5c-6.8 0-9.9 1.3-9.9 5.4 0 2.9 1.9 4.7 5.9 4.7 4.9 0 8.5-2.8 8.5-7.1zM455 116.1V93.9h-6V82.3h6V71.9h17v10.4h9.8v11.6H472v20.5c0 3.6 1.8 5.2 5 5.2 1.9 0 3.3-.3 4.9-.9v12.9c-2.2.6-5.4 1.4-9.4 1.4-11.3.2-17.5-5.2-17.5-16.9zM484.8 107.8v-.8c0-16 11.9-26.1 26.9-26.1 13.6 0 25.3 7.8 25.3 25.7v4.5h-35c.5 6.6 4.3 10.4 10.4 10.4 5.6 0 8-2.6 8.7-5.9h16c-1.5 11.2-10.2 17.6-25.2 17.6-15.7 0-27.1-9.2-27.1-25.4zm35.6-6.3c-.3-6-3.2-9.3-8.8-9.3-5.1 0-8.7 3.3-9.5 9.3h18.3zM536.8 64h19.7l8.8 42.4 9.1-42.4h17.3l9.9 42.8 9.2-42.8h18.1L613 132h-20.4l-10.5-43.2-10.4 43.2h-19l-15.9-68zM634.6 64h25.9c18.6 0 27.3 8.3 27.3 22.7v.4c0 14.3-9.6 22-26.4 22H654V132h-19.4V64zm25 31.8c6.3 0 9.6-2.9 9.6-8.6v-.4c0-5.8-3.4-8.2-9.5-8.2H654v17.1h5.6v.1z"}))))},un=r(81),sn=r(1163),fn=r(372);r(1228);function mn(t){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pn(){pn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==mn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(mn(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function bn(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function hn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return dn(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var yn=function(t){var e=t.requestData,r=t.headersData,c=t.setImport,i=r.import_id,u=hn(Object(n.useState)(null),2),s=u[0],f=u[1],m=hn(Object(n.useState)(!0),2),p=m[0],h=m[1],d=s&&"log"in s?s.log:{},y=d.skipped,v=void 0===y?[]:y,w=d.failed,O=void 0===w?[]:w,j=d.succeed,_=void 0===j?[]:j,k=hn(Object(n.useState)(null),2),x=k[0],S=k[1],N=tn().showBackButton,L=hn(Object(n.useState)(!1),2),P=L[0],C=L[1],I=Object(n.useRef)(null),A=(location&&location.search&&Object(o.parse)(location.search.substring(1)),function(){var t,r=(t=pn().mark((function t(){var r,n,a,o=arguments;return pn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]&&o[0],t.prev=1,n=e&&"useExisting"in e&&e.useExisting?{}:e,!e.useExisting&&(n.start_import=r),t.next=6,g()({method:"POST",data:n,path:Object(l.z)("/import/csv/status/".concat(i))});case 6:a=t.sent,f(a.result),a.result&&"status"in a.result&&"success"===a.result.status&&(clearInterval(I.current),N(!0),C(!0)),h(!1),t.next=18;break;case 12:t.prev=12,t.t0=t.catch(1),clearInterval(I.current),N(!0),S(t.t0),h(!1);case 18:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){bn(o,n,a,c,i,"next",t)}function i(t){bn(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return r.apply(this,arguments)}}());return Object(n.useEffect)((function(){return N(!1),window.scrollTo(0,0),A(!0),I.current=setInterval((function(){return A()}),5e3),function(){clearInterval(I.current),N(!0),h(!1)}}),[]),p?Object(n.createElement)(F.a,null):x||s&&!1 in s?Object(n.createElement)(E.a,{status:"error"},x&&"message"in x?x.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):s&&"percent"in s?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:parseInt(s.percent),text:"".concat(s.percent,"% ").concat(Object(a.__)("Completed","wp-marketing-automations"))}),Object(n.createElement)("p",null,"Skipped: ",parseInt(v)>0?v:0,", Failed:"," ",parseInt(O)>0?O:0,", Success:"," ",parseInt(_)>0?_:0)),P&&Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){c(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations")),!!s&&!!s.has_log_file&&Object(n.createElement)("a",{target:"_blank",href:Object(l.ub)()+"/wp-json"+Object(l.z)("/importer-log/download/".concat(i,"?bwf-nonce=").concat(Object(l.E)())),title:Object(a.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(n.createElement)(b.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations"))))):null};function vn(t){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gn(){gn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==vn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(vn(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function wn(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function On(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return jn(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var En=function(t){Object(l.l)(Object(a.__)("CSV Importer","wp-marketing-automations"));var e=On(Object(n.useState)(null),2),r=e[0],o=e[1],c=On(Object(n.useState)(null),2),i=c[0],u=c[1],s=On(Object(n.useState)(null),2),f=s[0],m=s[1],p=On(Object(n.useState)(!1),2),h=p[0],d=p[1],y=Object(n.useContext)(l.h),v=(0,Yr().getExistingImports)().csv,w=t.step,O=t.setImport,j=function(){var t,e=(t=gn().mark((function t(){var e,n,c;return gn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.prev=1,(e=new FormData).append("csv",r),n=1===Object(l.m)(bwfcrm_contacts_data.bwf_pro_version,"3.4.0")?"/import/csv-upload":"/import/csv/upload",t.next=7,g()({method:"POST",body:e,path:Object(l.z)(n)});case 7:c=t.sent,u(c.result),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),o(null),y(t.t0&&"message"in t.t0?t.t0.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 15:Object(l.Jb)(y,3e3),d(!1);case 17:case"end":return t.stop()}}),t,null,[[1,11]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){wn(o,n,a,c,i,"next",t)}function i(t){wn(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){r&&j()}),[r]),Object(n.useEffect)((function(){v&&(u({import_id:v}),m({useExisting:!0}))}),[]),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},2==w&&!v&&!r&&!h&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)(fn.a,{onFileSelected:function(t){return o(t)},filetypeArray:["text/csv","text/plain","application/csv","text/comma-separated-values","application/excel","application/vnd.ms-excel","application/vnd.msexcel","text/anytext","application/octet-stream","application/txt"],btnLabel:Object(a.__)("Drop your CSV file here OR","wp-marketing-automations")})),h&&Object(n.createElement)(F.a,null),2==w&&i&&"import_id"in i&&!f&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)(sn.a,{buttonAlignClass:"bwf-crm-btn-right-alignment",headersData:i,onRequestImport:function(e){m(e),t.setStep(3)},contactHeaderText:Object(a.__)("Contact Fields","wp-marketing-automations"),updateExistingText:Object(a.__)("Update existing contact status","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf_clear_24"})),2==w&&!h&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){t.setStep(1),t.setImporter(null)}},Object(a.__)("Back","wp-marketing-automations")))),3==w&&f&&i&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(yn,{requestData:f,setStep:t.setStep,setImporter:t.setImporter,headersData:i,setImport:O}))))};r(1229);function _n(t){return function(t){if(Array.isArray(t))return Sn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||xn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||xn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xn(t,e){if(t){if("string"==typeof t)return Sn(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sn(t,e):void 0}}function Sn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Nn=function(t){var e=t.roles,r=void 0===e?{}:e,o=t.onRolesSelected,c=kn(Object(n.useState)(Object.keys(r)),2),i=c[0],u=c[1],f=kn(Object(n.useState)(!0),2),m=f[0],p=(f[1],kn(Object(n.useState)(!1),2)),h=p[0],d=p[1],y=kn(Object(n.useState)(!1),2),v=y[0],g=y[1],w=kn(Object(n.useState)([]),2),O=w[0],j=w[1],E=kn(Object(n.useState)([]),2),_=E[0],k=E[1],x=kn(Object(n.useState)(1),2),S=x[0],N=x[1],L=Object(l.L)();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(b.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("User Roles","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-crm-import-checkbox-3col"},r&&Object.keys(r).map((function(t){return Object(n.createElement)(q.a,{checked:i.includes(t),key:t,label:r[t],onChange:function(e){return function(t,e){u(t?[].concat(_n(i),[e]):i.filter((function(t){return t!==e})))}(e,t)}})})))),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-c-import-field"},Object(n.createElement)(re.a,{onTagsChange:j,selected:O}),Object(n.createElement)(ne.a,{onListsChange:k,selected:_})),Object(n.createElement)("div",{className:"bwf-heading7-new"},Object(a.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(t){N(t.target.value)},value:Object(s.isEmpty)(S)?"":S},Object.keys(L).map((function(t){return Object(n.createElement)("option",{key:t,value:t},L[t])}))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(b.ToggleControl,{checked:h,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(t){return d(t)}}),Object(n.createElement)(b.ToggleControl,{label:Object(a.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:v,onChange:g})),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-crm-btn-right-alignment",style:{bottom:"-60px"}},Object(n.createElement)(b.Button,{disabled:0===i.length,isPrimary:!0,onClick:function(){return o({roles:i,tags:O.map((function(t){return{id:t.key,value:t.label}})),lists:_.map((function(t){return{id:t.key,value:t.label}})),marketing_status:m,update_existing:h,disable_events:v,imported_contact_status:S})}},Object(a.__)("Import","wp-marketing-automations"))))),Object(n.createElement)("div",{className:"bwf-crm-importer-navigation",style:{marginTop:"15px"}},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){t.setStep(1),t.setImporter(null)}},Object(a.__)("Back","wp-marketing-automations"))))};function Ln(t){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pn(){Pn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Ln(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Ln(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Cn(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function In(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return An(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?An(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function An(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Tn=function(t){var e=t.requestData,r=t.setImport,c=In(Object(n.useState)(!1),2),i=c[0],u=c[1],f=In(Object(n.useState)(null),2),m=f[0],p=f[1],h=In(Object(n.useState)(e&&"importId"in e?parseInt(e.importId):0),2),d=h[0],y=h[1],v=m&&"log"in m?m.log:{},w=v.skipped,O=void 0===w?0:w,j=v.failed,_=void 0===j?0:j,k=v.succeed,x=void 0===k?0:k,S=In(Object(n.useState)(null),2),N=S[0],L=S[1],P=tn().showBackButton,C=(location&&location.search&&Object(o.parse)(location.search.substring(1)),0),I=In(Object(n.useState)(5e3),2),A=I[0],T=I[1],F=function(){var t,r=(t=Pn().mark((function t(){var r,n;return Pn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C++,t.prev=1,r=parseInt(d)>0?{import_id:d}:e,parseInt(d)>0?r.start_import=!1:r.start_import=!0,t.next=6,g()({method:"POST",data:r,path:Object(l.z)("/import/wp/status")});case 6:n=t.sent,p(n.result),y(parseInt(n.result.import_id)),n.result&&"status"in n.result&&"success"===n.result.status&&(T(null),P(!1),u(!0)),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),T(null),P(!1),L(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){Cn(o,n,a,c,i,"next",t)}function i(t){Cn(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(Fe.a)((function(){Object(s.isEmpty)(d)&&0!=C||F()}),A),Object(n.useEffect)((function(){return P(!0),window.scrollTo(0,0),function(){P(!1)}}),[]),N||m&&!1 in m?Object(n.createElement)(E.a,{status:"error"},N&&"message"in N?N.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):m?m&&"percent"in m?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(Te.a,{progress:parseInt(m.percent),noStriped:!0,size:"sm",text:"".concat(m.percent,"% Completed")}),Object(n.createElement)("p",{className:"bwf-p"},"Skipped: ",parseInt(O)>0?O:0,", Failed:"," ",parseInt(_)>0?_:0,", Success:"," ",parseInt(x)>0?x:0)),i&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){r(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations")),!!m&&!!m.has_log_file&&Object(n.createElement)("a",{target:"_blank",href:Object(l.ub)()+"/wp-json"+Object(l.z)("/importer-log/download/".concat(d,"?bwf-nonce=").concat(Object(l.E)())),title:Object(a.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(n.createElement)(b.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations")))))):null:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(n.createElement)("p",{className:"bwf-p"},"Skipped: ",parseInt(O)>0?O:0,", Failed: ",parseInt(_)>0?_:0,", Success: ",parseInt(x)>0?x:0)))};function Fn(t){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gn(){Gn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Fn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Fn(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function $n(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function Dn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Mn(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var zn=function(t){Object(l.l)("WP Importer");var e=t.step,r=t.setImport,o=Dn(Object(n.useState)({}),2),c=o[0],i=o[1],u=Dn(Object(n.useState)(null),2),f=u[0],m=u[1],p=Dn(Object(n.useState)(!1),2),b=p[0],h=p[1],d=(0,Yr().getExistingImports)().wp,y=Object(n.useContext)(l.h),v=function(){var t,e=(t=Gn().mark((function t(){var e;return Gn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),t.prev=1,t.next=4,g()({method:"GET",path:Object(l.z)("/import/wp/roles")});case 4:e=t.sent,i(e.result),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),i(null),y(t.t0&&"message"in t.t0?t.t0.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 12:Object(l.Jb)(y,3e3),h(!1);case 14:case"end":return t.stop()}}),t,null,[[1,8]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){$n(o,n,a,c,i,"next",t)}function i(t){$n(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){d?m({importId:d}):v()}),[]),Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},b&&Object(n.createElement)(F.a,null),2==e&&!f&&c&&Object(s.size)(c)>0&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)(Nn,{roles:c,setStep:t.setStep,setImporter:t.setImporter,onRolesSelected:function(e){m(e),t.setStep(3)}})),3==e&&f&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(Tn,{setStep:t.setStep,requestData:f,setImporter:t.setImporter,setImport:r})))};r(1230);function Bn(t){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Un(){Un=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Bn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Bn(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Rn(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function Yn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return qn(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Vn=function(t){var e=t.importData,r=t.setImport,c=e.importId,i=Yn(Object(n.useState)(null),2),u=i[0],s=i[1],f=u&&"log"in u?u.log:{},m=f.skipped,p=void 0===m?0:m,h=f.failed,d=void 0===h?0:h,y=f.succeed,v=void 0===y?0:y,w=(location&&location.search&&Object(o.parse)(location.search.substring(1)),Yn(Object(n.useState)(!1),2)),O=w[0],j=w[1],E=Yn(Object(n.useState)(!1),2),_=E[0],k=E[1],x=function(){var t,e=(t=Un().mark((function t(){var e,r;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={start_import:!1,import_id:c},t.next=4,g()({method:"GET",path:Object(l.z)("/import/wc/status?"+Object(o.stringify)(e))});case 4:r=t.sent,s(r.result),r.result&&"status"in r.result&&"success"===r.result.status&&r.result.percent>=100&&(j(!0),k(!0)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),setError(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){Rn(o,n,a,c,i,"next",t)}function i(t){Rn(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(Fe.a)((function(){_||x()}),5e3),u?u&&"percent"in u?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:parseInt(u.percent),text:"".concat(u.percent,"% Completed")}),Object(n.createElement)("p",null,"Skipped: ",parseInt(p)>0?p:0,", Failed:"," ",parseInt(d)>0?d:0,", Success:"," ",parseInt(v)>0?v:0)),O&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){r(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations")),!!u&&!!u.has_log_file&&Object(n.createElement)("a",{target:"_blank",href:Object(l.ub)()+"/wp-json"+Object(l.z)("/importer-log/download/".concat(c,"?bwf-nonce=").concat(Object(l.E)())),title:Object(a.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(n.createElement)(b.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations")))))):null:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf-p"},"Skipped: ",parseInt(p)>0?p:0,", Failed: ",parseInt(d)>0?d:0,", Success: ",parseInt(v)>0?v:0)),Object(n.createElement)("div",{className:"bwf_clear_20"}))};function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hn(){Hn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Wn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Wn(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Kn(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function Jn(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){Kn(o,n,a,c,i,"next",t)}function i(t){Kn(o,n,a,c,i,"throw",t)}c(void 0)}))}}function Zn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Qn(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Xn=function(t){Object(l.l)("WC Importer");var e=t.step,r=t.setImport,c=Zn(Object(n.useState)({}),2),i=c[0],u=c[1],f=Zn(Object(n.useState)(!0),2),m=f[0],p=f[1],h=Zn(Object(n.useState)(null),2),d=h[0],y=h[1],v=Zn(Object(n.useState)(!1),2),w=v[0],O=v[1],j=Zn(Object(n.useState)(!0),2),E=j[0],_=(j[1],Zn(Object(n.useState)(!1),2)),k=_[0],x=_[1],S=Zn(Object(n.useState)([]),2),N=S[0],L=S[1],P=Zn(Object(n.useState)([]),2),C=P[0],I=P[1],A=Object(n.useContext)(l.h),T=Zn(Object(n.useState)(1),2),G=T[0],$=T[1],D=(0,Yr().getExistingImports)().wc,M=Object(l.L)(),z=function(){var e=Jn(Hn().mark((function e(){var r,n,c,i=arguments;return Hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]&&i[0],e.prev=1,n={start_import:r,tags:N.map((function(t){return{id:t.key,value:t.label}})),lists:C.map((function(t){return{id:t.key,value:t.label}})),marketing_status:E,update_existing:k,disable_events:w,imported_contact_status:G},e.next=5,g()({method:"GET",path:Object(l.z)("/import/wc/status?"+Object(o.stringify)(n))});case 5:c=e.sent,u({importId:c.result.import_id}),t.setStep(3),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),u(null),A(e.t0&&"message"in e.t0?e.t0.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 14:Object(l.Jb)(A,3e3),p(!1);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var t=Jn(Hn().mark((function t(){return Hn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({method:"GET",path:Object(l.z)("/import/wc/get-orders")}).then((function(t){y(parseInt(t.result)),p(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){parseInt(D)>0?(u({importId:D}),p(!1)):B()}),[]);return Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},2==e&&m&&(Object(s.isEmpty)(i)||1===i.status)&&Object(n.createElement)(F.a,null),2==e&&!m&&!Object(s.isNull)(d)&&(d>0?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-importer-wc-wrap"},Object(n.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("WooCommerce Customers","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},d+" "+Object(a.__)("paid orders are available for import.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_16"}),Object(n.createElement)("div",{className:"bwf-c-import-field"},Object(n.createElement)(re.a,{onTagsChange:L,selected:N}),Object(n.createElement)(ne.a,{onListsChange:I,selected:C})),Object(n.createElement)("div",{className:"bwf-heading7-new"},Object(a.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-wc-status-select",onChange:function(t){$(t.target.value)},value:Object(s.isEmpty)(G)?"":G},Object.keys(M).map((function(t){return Object(n.createElement)("option",{key:t,value:t},M[t])}))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(b.ToggleControl,{checked:k,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(t){return x(t)}}),Object(n.createElement)(b.ToggleControl,{label:Object(a.__)("Trigger Automations (for Tag & List related Events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:w,onChange:O})),Object(n.createElement)("div",{className:"bwf-crm-btn-right-alignment"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){t.setStep(3),p(!0),z(!0)}},Object(a.__)("Import","wp-marketing-automations"))))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-crm-importer-wc-wrap"},Object(n.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("WooCommerce Customers","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("No Orders are available for import.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_20"})))),2==e&&!m&&Object(n.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){t.setStep(1),t.setImporter(null)}},Object(a.__)("Back","wp-marketing-automations"))),3==e&&m&&Object(n.createElement)(F.a,null),3==e&&!m&&i&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)(Vn,{importData:i,setStep:t.setStep,setImporter:t.setImporter,setImport:r})))};r(1231);function ta(t){return(ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ea(){ea=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==ta(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(ta(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function ra(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function na(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){ra(o,n,a,c,i,"next",t)}function i(t){ra(o,n,a,c,i,"throw",t)}c(void 0)}))}}var aa=function(){return Object(_t.useQuery)(["get-wlm-members-count"],na(ea().mark((function t(){var e;return ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.z)("/import/wlm/get-members-count")});case 2:if((e=t.sent).code&&200===e.code){t.next=5;break}throw new Error(Object(a.__)("Unable to load members count","wp-marketing-automations"));case 5:return t.abrupt("return",parseInt(e.result));case 6:case"end":return t.stop()}}),t)}))))};function oa(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ca(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ca(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ca(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var ia=Object(l.L)(),la=function(t){var e=t.onStartImport,r=t.setStep,o=t.setImporter,c=aa(),i=c.isLoading,u=c.data,f=void 0===u?0:u,m=c.isError,p=c.error,h=oa(Object(n.useState)(!1),2),d=h[0],y=h[1],v=oa(Object(n.useState)(!1),2),g=v[0],w=v[1],O=oa(Object(n.useState)([]),2),j=O[0],E=O[1],_=oa(Object(n.useState)([]),2),k=_[0],x=_[1],S=oa(Object(n.useState)(1),2),N=S[0],L=S[1],P=Object(n.useContext)(l.h),C=Object(n.useCallback)((function(){return e({tags:j.map((function(t){return{id:t.key,value:t.label}})),lists:k.map((function(t){return{id:t.key,value:t.label}})),update_existing:d,disable_events:g,imported_contact_status:N})}),[j,k,d,g,N,e]);return Object(n.useEffect)((function(){m&&(P("string"==typeof p?p:p&&p.message?p.message:Object(a.__)("Unknown API Error","wp-marketing-automations")),Object(l.Jb)(P,3e3))}),[m,p]),i?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)(F.a,null)):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(b.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("WishList Members","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},f+" "+Object(a.__)("members are available for import.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-c-import-field"},Object(n.createElement)(re.a,{onTagsChange:E,selected:j}),Object(n.createElement)(ne.a,{onListsChange:x,selected:k})),Object(n.createElement)("div",{className:"bwf-heading7-new"},Object(a.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(t){L(t.target.value)},value:Object(s.isEmpty)(N)?"":N},Object.keys(ia).map((function(t){return Object(n.createElement)("option",{key:t,value:t},ia[t])}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(b.ToggleControl,{checked:d,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(t){return y(t)}}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)(b.ToggleControl,{label:Object(a.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:g,onChange:w})),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-crm-btn-right-alignment"},Object(n.createElement)(b.Button,{disabled:0===parseInt(f),isPrimary:!0,onClick:C},Object(a.__)("Import","wp-marketing-automations"))))),Object(n.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){r(1),o(null)}},Object(a.__)("Back","wp-marketing-automations"))))};function ua(t){return(ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sa(){sa=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==ua(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(ua(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function fa(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function ma(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return pa(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pa(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pa(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var ba=function(t){var e=t.requestData,r=t.existingImport,c=(t.setStep,t.setImport),i=ma(Object(n.useState)(!1),2),u=i[0],f=i[1],m=ma(Object(n.useState)(null),2),p=m[0],h=m[1],d=ma(Object(n.useState)(e&&"importId"in e?parseInt(e.importId):0),2),y=d[0],v=d[1],w=p&&"log"in p?p.log:{},O=w.skipped,j=void 0===O?0:O,_=w.failed,k=void 0===_?0:_,x=w.succeed,S=void 0===x?0:x,N=ma(Object(n.useState)(null),2),L=N[0],P=N[1],C=tn().showBackButton,I=(location&&location.search&&Object(o.parse)(location.search.substring(1)),0),A=ma(Object(n.useState)(5e3),2),T=A[0],F=A[1],G=ma(Object(n.useState)(!0),2),$=G[0],D=G[1],M=function(){var t,n=(t=sa().mark((function t(){var n,a;return sa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I++,t.prev=1,n=parseInt(y)>0?{import_id:y}:e,$&&!r?(D(!1),n.start_import=!0):n.start_import=!1,t.next=6,g()({method:"POST",data:n,path:Object(l.z)("/import/wlm/status")});case 6:a=t.sent,h(a.result),v(parseInt(a.result.import_id)),a.result&&"status"in a.result&&"success"===a.result.status&&(bwfcrm_contacts_data.is_wlm_active="1",F(null),C(!1),f(!0)),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),F(null),C(!1),P(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){fa(o,n,a,c,i,"next",t)}function i(t){fa(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(Fe.a)((function(){Object(s.isEmpty)(y)&&0!=I||M()}),T),Object(n.useEffect)((function(){return C(!0),window.scrollTo(0,0),function(){C(!1)}}),[]),L||p&&!1 in p?Object(n.createElement)(E.a,{status:"error"},L&&"message"in L?L.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):p?p&&"percent"in p?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:parseInt(p.percent),text:"".concat(p.percent,"% Completed")}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("p",{className:"bwf-t-center"},"Skipped: ",parseInt(j)>0?j:0,", Failed:"," ",parseInt(k)>0?k:0,", Success:"," ",parseInt(S)>0?S:0)),u&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){c(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations"))))):null:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-p bwf-t-center"},Object(a.__)("Skipped","wp-marketing-automations"),": ",parseInt(j)>0?j:0,",",Object(a.__)("Failed","wp-marketing-automations"),": ",parseInt(k)>0?k:0,",",Object(a.__)("Success","wp-marketing-automations"),": ",parseInt(S)>0?S:0)),Object(n.createElement)("div",{className:"bwf_clear_20"}))};function ha(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return da(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?da(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var ya=function(t){var e=t.step,r=t.setStep,o=t.setImporter,c=t.setImport;Object(l.l)("WLM Importer");var i=ha(Object(n.useState)(null),2),u=i[0],s=i[1],f=(0,Yr().getExistingImports)().wlm;return Object(n.useEffect)((function(){parseInt(f)>0&&(s({importId:f}),r(3))}),[]),Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},2==e&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(la,{setStep:r,setImporter:o,onStartImport:function(t){s(t),r(3)}})),3==e&&u&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(ba,{setStep:r,requestData:u,setImporter:o,existingImport:parseInt(f)>0,setImport:c})))};r(1232);function va(t){return(va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ga(){ga=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==va(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(va(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function wa(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function Oa(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){wa(o,n,a,c,i,"next",t)}function i(t){wa(o,n,a,c,i,"throw",t)}c(void 0)}))}}var ja=function(){return Object(_t.useQuery)(["get-affwp-affiliate-count"],Oa(ga().mark((function t(){var e;return ga().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({path:Object(l.z)("/import/affwp/get-affiliate-count")});case 2:if((e=t.sent).code&&200===e.code){t.next=5;break}throw new Error(Object(a.__)("Unable to load affiliate count","wp-marketing-automations"));case 5:return t.abrupt("return",parseInt(e.result));case 6:case"end":return t.stop()}}),t)}))))};function Ea(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return _a(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_a(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var ka=Object(l.L)(),xa=function(t){var e=t.onStartImport,r=t.setStep,o=t.setImporter,c=ja(),i=c.isLoading,u=c.data,s=void 0===u?0:u,f=c.isError,m=c.error,p=Ea(Object(n.useState)(!1),2),h=p[0],d=p[1],y=Ea(Object(n.useState)(!1),2),v=y[0],g=y[1],w=Ea(Object(n.useState)([]),2),O=w[0],j=w[1],E=Ea(Object(n.useState)([]),2),_=E[0],k=E[1],x=Ea(Object(n.useState)(1),2),S=x[0],N=x[1],L=Object(n.useContext)(l.h),P=Object(n.useCallback)((function(){return e({tags:O.map((function(t){return{id:t.key,value:t.label}})),lists:_.map((function(t){return{id:t.key,value:t.label}})),update_existing:h,disable_events:v,imported_contact_status:S})}),[O,_,h,v,S,e]);return Object(n.useEffect)((function(){f&&(L("string"==typeof m?m:m&&m.message?m.message:Object(a.__)("Unknown API Error","wp-marketing-automations")),Object(l.Jb)(L,3e3))}),[f,m]),i?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)(F.a,null)):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(b.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("AffiliateWP Affiliates","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},s+" "+Object(a.__)("affiliates are available for import.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-c-import-field"},Object(n.createElement)(re.a,{onTagsChange:j,selected:O}),Object(n.createElement)(ne.a,{onListsChange:k,selected:_})),Object(n.createElement)("div",{className:"bwf-heading7-new"},Object(a.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(t){N(t.target.value)}},Object.keys(ka).map((function(t){return Object(n.createElement)("option",{key:t,value:t,selected:S==t},ka[t])}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(b.ToggleControl,{checked:h,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(t){return d(t)}}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)(b.ToggleControl,{label:Object(a.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:v,onChange:g})),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-crm-btn-right-alignment",style:{bottom:"-60px"}},Object(n.createElement)(b.Button,{disabled:0===parseInt(s),isPrimary:!0,onClick:P},Object(a.__)("Import","wp-marketing-automations"))))),Object(n.createElement)("div",{className:"bwf-crm-importer-navigation",style:{marginTop:"15px"}},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){r(1),o(null)}},Object(a.__)("Back","wp-marketing-automations"))))};function Sa(t){return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Na(){Na=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,c=Object.create(o.prototype),i=new L(n||[]);return a(c,"_invoke",{value:k(t,r,i)}),c}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var m="suspendedStart",p="executing",b="completed",h={};function d(){}function y(){}function v(){}var g={};u(g,c,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(P([])));O&&O!==r&&n.call(O,c)&&(g=O);var j=v.prototype=d.prototype=Object.create(g);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,c,i){var l=f(t[a],t,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Sa(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,c,i)}),(function(t){r("throw",t,c,i)})):e.resolve(s).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,r,n){var a=m;return function(o,c){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw c;return{value:t,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?b:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=b,n.method="throw",n.arg=u.arg)}}}function x(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var c=o.arg;return c?c.done?(r[e.resultName]=c.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Sa(e)+" is not iterable")}return y.prototype=v,a(j,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new _(s(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},E(j),u(j,l,"Generator"),u(j,c,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(l&&u){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function La(t,e,r,n,a,o,c){try{var i=t[o](c),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function Pa(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ca(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ca(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ca(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Ia=function(t){var e=t.requestData,r=t.existingImport,c=(t.setStep,t.setImport),i=Pa(Object(n.useState)(!1),2),u=i[0],f=i[1],m=Pa(Object(n.useState)(null),2),p=m[0],h=m[1],d=Pa(Object(n.useState)(e&&"importId"in e?parseInt(e.importId):0),2),y=d[0],v=d[1],w=p&&"log"in p?p.log:{},O=w.skipped,j=void 0===O?0:O,_=w.failed,k=void 0===_?0:_,x=w.succeed,S=void 0===x?0:x,N=Pa(Object(n.useState)(null),2),L=N[0],P=N[1],C=tn().showBackButton,I=(location&&location.search&&Object(o.parse)(location.search.substring(1)),0),A=Pa(Object(n.useState)(5e3),2),T=A[0],F=A[1],G=Pa(Object(n.useState)(!0),2),$=G[0],D=G[1],M=function(){var t,n=(t=Na().mark((function t(){var n,a;return Na().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I++,t.prev=1,n=parseInt(y)>0?{import_id:y}:e,$&&!r?(D(!1),n.start_import=!0):n.start_import=!1,t.next=6,g()({method:"POST",data:n,path:Object(l.z)("/import/affwp/status")});case 6:a=t.sent,h(a.result),v(parseInt(a.result.import_id)),a.result&&"status"in a.result&&"success"===a.result.status&&(F(null),C(!1),f(!0)),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),F(null),C(!1),P(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function c(t){La(o,n,a,c,i,"next",t)}function i(t){La(o,n,a,c,i,"throw",t)}c(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(Fe.a)((function(){Object(s.isEmpty)(y)&&0!=I||M()}),T),Object(n.useEffect)((function(){return C(!0),window.scrollTo(0,0),function(){C(!1)}}),[]),L||p&&!1 in p?Object(n.createElement)(E.a,{status:"error"},L&&"message"in L?L.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):p?p&&"percent"in p?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:parseInt(p.percent),text:"".concat(p.percent,"% ").concat(Object(a.__)("Completed","wp-marketing-automations"))}),Object(n.createElement)("p",null,"Skipped: ",parseInt(j)>0?j:0,", Failed:"," ",parseInt(k)>0?k:0,", Success:"," ",parseInt(S)>0?S:0)),u&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(b.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){c(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations"))))):null:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(Te.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf-p"},"Skipped: ",parseInt(j)>0?j:0,", Failed: ",parseInt(k)>0?k:0,", Success: ",parseInt(S)>0?S:0)),Object(n.createElement)("div",{className:"bwf_clear_20"}))};function Aa(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ta(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ta(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ta(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Fa=function(t){var e=t.step,r=t.setStep,o=t.setImporter,c=t.setImport;Object(l.l)(Object(a.__)("AFFWP Importer","wp-marketing-automations"));var i=Aa(Object(n.useState)(null),2),u=i[0],s=i[1],f=(0,Yr().getExistingImports)().affwp;return Object(n.useEffect)((function(){parseInt(f)>0&&(s({importId:f}),r(3))}),[]),Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},2==e&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(xa,{setStep:r,setImporter:o,onStartImport:function(t){s(t),r(3)}})),3==e&&u&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(Ia,{setStep:r,requestData:u,setImporter:o,existingImport:parseInt(f)>0,setImport:c})))};function Ga(){return(Ga=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(null,arguments)}function $a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Da(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Da(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Da(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Ma=function(t){var e=t.setImport,r=Object(n.useContext)(l.h),o=$a(Object(n.useState)(null),2),c=o[0],i=o[1],u=$a(Object(n.useState)(!0),2),f=(u[0],u[1]),m=Yr(),p=(m.showBackButton,m.getLoading),h=m.getExistingImports,d=tn().fetch,y=p(),v=h(),g=$a(Object(n.useState)(1),2),w=g[0],j=g[1],E=$a(Object(n.useState)(!1),2),_=E[0];E[1];Object(n.useEffect)((function(){d(),f(!1),Object(l.l)(Object(a.__)("Import Contacts","wp-marketing-automations"))}),[]),Object(n.useEffect)((function(){v&&Object(s.size)(v)>0&&(i(Object.keys(v)[0]),j(3))}),[v]);var k=function(){var t=[{key:"csv",label:Object(a.__)("CSV","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-csv"}];return Object(l.hc)()||t.push({key:"wp",label:Object(a.__)("WordPress","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-wp"}),Object(l.nc)()&&t.push({key:"wc",label:Object(a.__)("WooCommerce","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-wc"}),Object(l.gc)()&&t.push({key:"wlm",label:Object(n.createElement)(n.Fragment,null,on()," ",Object(a.__)("WishList Member","wp-marketing-automations")),className:"bwf-crm-importer-button bwf-crm-importer-button-wlm"}),Object(l.Lb)()&&t.push({key:"affwp",label:Object(n.createElement)(n.Fragment,null,ln()," ",Object(a.__)("AffiliateWP","wp-marketing-automations")),className:"bwf-crm-importer-button bwf-crm-importer-button-affwp"}),Object(un.applyFilters)("bwfAddContactImporter",t)}(),x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object($.g)(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(s.isEmpty)(t)||Object($.k)(t,e,r)},S=function(t){return Object(n.createElement)(n.Fragment,null,function(t,a){switch(a){case"csv":return Object(n.createElement)(En,{step:t,setStep:j,setImporter:i,setImport:e});case"wp":return Object(n.createElement)(zn,{step:t,setStep:j,setImporter:i,setImport:e});case"wc":return Object(n.createElement)(Xn,{step:t,setStep:j,setImporter:i,setImport:e});case"wlm":return Object(n.createElement)(ya,{step:t,setStep:j,setImporter:i,setImport:e});case"affwp":return Object(n.createElement)(Fa,{step:t,setStep:j,setImporter:i,setImport:e});default:return Object(un.applyFilters)("bwfImporterSelectedContent",Object(n.createElement)(n.Fragment,null),a,t,j,i,v,r,l.Jb,x,e)}}(t,c))},N=[{key:1,label:Object(a.__)("Source","wp-marketing-automations"),content:y?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(n.createElement)("div",{className:"bwf-placeholder-temp dark bwf-h-15 bwf-w-150"}))),Object(n.createElement)(b.Card,{className:"bwf-crm-importer-wrapper"},Object(n.createElement)("div",{className:"bwf-crm-importer"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-150"}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-270"}),Object(n.createElement)("div",{className:"bwf_clear_10"}),[1,2,3].map((function(t){return Object(n.createElement)(b.Button,{key:t,isTertiary:!0,className:"bwf-crm-importer-button"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-60 bwf-w-60"}))})),Object(n.createElement)("div",{className:"bwf_clear_20"})))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Source","wp-marketing-automations"))),Object(n.createElement)(b.Card,{className:"bwf-crm-importer-wrapper"},Object(n.createElement)("div",{className:"bwf-crm-importer"},Object(n.createElement)("div",{className:"bwf-h2"},Object(a.__)("Import Contacts","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-p"},Object(a.__)("Choose the source for importing contacts","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_10"}),k.map((function(t,e){var r=t.key===c?{isPrimary:!0}:{};return Object(n.createElement)(b.Button,Ga({key:e,onClick:function(){i(t.key),j(2)}},r,{className:t.className}),t.label)})),Object(n.createElement)("div",{className:"bwf_clear_20"}))))},{key:2,label:Object(a.__)("Configuration","wp-marketing-automations"),content:S(2)},{key:3,label:Object(a.__)("Confirmation","wp-marketing-automations"),content:S(3)}];return Object(n.createElement)(b.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-admin-modal-no-header bwf-import-contact-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(n.createElement)("div",{className:"bwf-import-modal-header"},Object(n.createElement)("div",{className:"bwf-import-modal-title"},Object(a.__)("Import Contacts","wp-marketing-automations")),Object(n.createElement)("div",{onClick:function(){Object(l.l)(Object(a.__)("Contacts","wp-marketing-automations")),Object($.k)({page:"autonami",path:"/contacts/"},"/",{}),e(!1)},className:"bwf-flex",style:{cursor:"pointer"}},Object(n.createElement)(O.a,{icon:"close"}))),Object(n.createElement)("div",{className:"bwf-crm-main-import-wrapper bwf-crm-import-init"},Object(n.createElement)(Ae.a,{steps:N,currentStep:w,isPending:_})),Object(n.createElement)("div",{className:"bwf_clear_24"}))};function za(t){return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ba(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ua(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ba(Object(r),!0).forEach((function(e){Ra(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ba(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ra(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=za(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=za(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==za(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ya(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,c,i=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return qa(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qa(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qa(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}e.default=function(){var t=Object(d.a)(),e=Object(y.a)(),r=t.getError,c=t.getContacts,i=t.getCountData,u=e.clearError,s=e.startIndexing,f=e.setStateProp,m=Ya(Object(n.useState)(!1),2),p=m[0],b=m[1],h=Ya(Object(n.useState)(!1),2),v=h[0],g=h[1],w=Ya(Object(n.useState)(!1),2),O=w[0],j=w[1],k=Ya(Object(n.useState)({}),2),x=k[0],S=k[1],N=Ya(Object(n.useState)(!1),2),L=N[0],P=N[1],C=location&&location.search?Object(o.parse)(location.search.substring(1)):{},I=r(),A=Object(n.useRef)();Object(n.useEffect)((function(){A.current?u():A.current=I})),Object(n.useEffect)((function(){return Object(l.l)("Contacts"),function(){f("countData",{})}}),[]);var T=Object(n.createElement)(n.Fragment,null,Object(n.createElement)(_.a,{isPrimary:!0,className:"bwf-display-flex bwf-no-ripple",label:Object(a.__)("Create Contact","wp-marketing-automations"),onClick:function(){return b(!0)}},Object(a.__)("Create Contact","wp-marketing-automations"))),F=i(),G=Object(ye.a)().getPageCountData,$=Object(de.a)().setPageCountData,D=G();Object(n.useEffect)((function(){$(Ua(Ua({},D),F))}),[F]),Object(be.a)("contacts","",Object(a.__)("ALL CONTACTS","wp-marketing-automations"),T);var M=c();if("indexing_status"in M){var z="indexing_status"in M&&2===parseInt(M.indexing_status)?Object(a.__)("Contacts indexing is in progress. Kindly, check back after some time.","wp-marketing-automations"):Object(a.__)("Contacts Indexing required, before you can view the contacts.","wp-marketing-automations"),B="indexing_status"in M&&2===parseInt(M.indexing_status)?null:Object(a.__)("Start Indexing","wp-marketing-automations");return Object(n.createElement)(pe.a,{text:z,buttonText:B,onButtonClick:function(){return s()}})}var U=[{type:"heading",data:{title:Object(a.__)("Create contact for smarter engagement","wp-marketing-automations"),desc:Object(a.__)("Increase engagement strategies by creating contacts, apply tags, lists, and personal details.","wp-marketing-automations")}},{type:"image-desc",data:[{img:Object(l.s)()+"contact/contact1.png",title:Object(a.__)("Seamlessly Import Contacts","wp-marketing-automations"),desc:Object(a.__)("Import contacts from WordPress, WooCommerce, CSV files, or other supported sources","wp-marketing-automations")},{img:Object(l.s)()+"contact/contact2.png",title:Object(a.__)("Get 360° Contact view","wp-marketing-automations"),desc:Object(a.__)("View Complete profile with purchase history, tags, lists, open, clicks and more","wp-marketing-automations")}]},{type:"buttons",data:{buttons:[{text:Object(a.__)("Create Contact","wp-marketing-automations"),onClick:function(){S({}),b(!0)}},{text:Object(a.__)("Import Contact","wp-marketing-automations"),isSecondary:!0,proCheck:!0,onClick:function(){Object(l.Yb)()?j(!0):(P(!0),S({isFeature:!0,featureTitle:Object(a.__)("Contacts Import","wp-marketing-automations")}))}}]}},{type:"link-wth-text",data:{text:Object(a.__)("Curious about contact?","wp-marketing-automations"),link:"https://funnelkit.com/docs/autonami-2/contacts/",linkText:Object(a.__)("Learn More","wp-marketing-automations")}}];return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(he.a,null),Object(n.createElement)("div",{className:"bwfcrm-contacts-list__scroll-point"}),I&&!p&&Object(n.createElement)(E.a,{status:"error"},I.message),Object(n.createElement)(Jt,{query:C,isExport:v,setExport:g,isImport:O,setImport:j,menuButtons:T,pitchData:U}),p&&Object(n.createElement)(me,{query:C,onCloseModal:function(){b(!1)}}),v&&Object(n.createElement)(Dr,{setExport:g}),O&&Object(n.createElement)(Ma,{setImport:j}),!Object(l.Yb)()&&Object(n.createElement)(St.b,{isOpen:L,onRequestClose:function(){return P(!1)},modalContent:x}))}}}]);